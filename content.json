{"meta":{"title":"æ²å…‰","subtitle":"è®°å½•åœ¨å‰ç«¯ä¹‹è·¯çš„ç‚¹ç‚¹æ»´æ»´","description":"Just do IT!","author":"è”¡èƒ¤","url":"https://monocy.gitee.io","root":"/"},"pages":[{"title":"å…³äºæˆ‘","date":"2019-03-30T08:45:38.000Z","updated":"2022-07-26T12:47:35.556Z","comments":true,"path":"about/index.html","permalink":"https://monocy.gitee.io/about/index.html","excerpt":"","text":"å­¦å† æœ¬ç§‘ï¼šåä¸­ç§‘æŠ€å¤§å­¦ åŒå­¦ä½ï¼šæ—¥è¯­ å·¥ä½œ ä½œä¸šå¸® é¥¿äº†ä¹ˆï¼ˆnowï¼‰ å…´è¶£çˆ±å¥½ åŠ¨æ¼« æ¸¸æˆ æŠ€æœ¯ä¹¦ åç»­æ­¤éƒ¨åˆ†åç»­è€ƒè™‘ä¼˜åŒ–"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-03-30T08:56:17.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"tags/index.html","permalink":"https://monocy.gitee.io/tags/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-03-30T08:46:29.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"categories/index.html","permalink":"https://monocy.gitee.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"æ·±å…¥ AntD Form","slug":"æ·±å…¥-AntD-Form","date":"2022-07-26T12:04:18.000Z","updated":"2022-07-26T13:14:08.423Z","comments":true,"path":"2022/07/26/æ·±å…¥-AntD-Form/","link":"","permalink":"https://monocy.gitee.io/2022/07/26/æ·±å…¥-AntD-Form/","excerpt":"å‰è¨€Form æ˜¯é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨çš„ç»„ä»¶ï¼Œä¸ºäº†èƒ½ç†Ÿç»ƒé©¾é©­å®ƒï¼Œæ·±å…¥ Form æºç è¿˜æ˜¯æœ‰æ‰€å¿…è¦çš„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Ant Design 4 ä¹‹åï¼ŒForm çš„åº•å±‚ä½¿ç”¨çš„æ˜¯ rc-field-formï¼Œå› æ­¤åœ¨äº†è§£æºç æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¾—å¯¹å…¶åº•å±‚çš„ä¾èµ–æ·±æŒ–ä¸€ç•ªï¼Œè¿™æ ·æ‰èƒ½äº†è§£çš„æ›´é€å½»ã€‚","text":"å‰è¨€Form æ˜¯é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨çš„ç»„ä»¶ï¼Œä¸ºäº†èƒ½ç†Ÿç»ƒé©¾é©­å®ƒï¼Œæ·±å…¥ Form æºç è¿˜æ˜¯æœ‰æ‰€å¿…è¦çš„ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Ant Design 4 ä¹‹åï¼ŒForm çš„åº•å±‚ä½¿ç”¨çš„æ˜¯ rc-field-formï¼Œå› æ­¤åœ¨äº†è§£æºç æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¾—å¯¹å…¶åº•å±‚çš„ä¾èµ–æ·±æŒ–ä¸€ç•ªï¼Œè¿™æ ·æ‰èƒ½äº†è§£çš„æ›´é€å½»ã€‚ rc-field-form ğŸ’» ä»“åº“åœ°å€ï¼šã€ä¼ é€é—¨ã€‘ï¼ˆå»ºè®®åŠ¨æ‰‹è¿è¡Œä¸€ä¸‹ï¼Œä¼šäº†è§£çš„æ›´å¿«ï¼‰ âš ï¸ æ³¨ï¼šè¡¨å•çš„æ‰€æœ‰æ“ä½œéƒ½ç¦»ä¸å¼€é¡¶å±‚çš„ FormStoreï¼Œæ‰€æœ‰çš„å˜åŠ¨ä¿¡æ¯æœ€ç»ˆéƒ½ä¼šæ±‡èšåœ¨ FormStore å†…ã€‚ æ•´ä½“ç»“æ„åœ¨äº†è§£æºç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤§è‡´äº†è§£ä¸€ä¸‹ rc-field-form çš„ç»“æ„ï¼Œå› ä¸º Ant Design Form æ˜¯åŸºäºæ­¤å°è£…çš„ï¼Œå› æ­¤ç†Ÿæ‚‰ rc-field-form å¯¹æˆ‘ä»¬è§£è¯»æºç æ¥è¯´å¾ˆé‡è¦ã€‚ é¡µé¢æ¸²æŸ“çš„ç»“æ„æ ‘å¦‚ä¸‹ï¼š åŸºäºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ ReactDom çš„æ–¹å¼ç”¨ä»£ç æè¿°å¤§è‡´ä¸ºï¼š 12345678910111213141516171819/** * é¡¶å±‚ Form çš„å¤§è‡´æ ·å¼ */// æ‰‹åŠ¨æ·»åŠ  Provider å¹¶åˆå§‹åŒ–éƒ¨åˆ†èƒ½åŠ›&lt;Form.Provider &#123;...props&#125;&gt; // é‡å†™åŸç”Ÿ form çš„éƒ¨åˆ†äº‹ä»¶èƒ½åŠ› &lt;form &#123;...props&#125; onSubmit=&#123;xxx&#125; onReset=&#123;xxx&#125;&gt; // FieldContext ä¼ é€’é¡¶å±‚çš„ FormContext å†…å®¹ï¼Œæ–¹ä¾¿ä¾¿æ·è·å–(åŒ…æ‹¬ formInstance å¯¹è±¡å’Œ validator æ–¹æ³•) // childNode å¯¹ function å’Œ JSX.Element åšäº†å…¼å®¹å¤„ç† &lt;FieldContext.Provider value=&#123;formContextValue&#125;&gt; // WrapperField ç”¨äºè·å– FieldContextã€æ‹¼æ¥ nameã€ç±»å‹ç­‰åŸºç¡€æ“ä½œ &lt;WrapperField&gt; // Field å±‚åš Dom å…ƒç´ é‡å†™ï¼ˆelementClone æ–¹æ³•ï¼‰ã€æ ¡éªŒæ–¹æ³•å°è£…ã€props å±æ€§æ‰©å±•ç­‰èƒ½åŠ› // å€¼çš„å˜åŠ¨ã€è·å–ç­‰èƒ½åŠ›éƒ½æ˜¯ä»é¡¶å±‚ Store ä¼ ä¸‹æ¥çš„ &lt;Field&gt;&#123;element&#125;&lt;/Field&gt; &lt;/WrapperField&gt; &lt;/FieldContext.Provider&gt; &lt;/form&gt;&lt;/Form.Provider&gt; ç»“æ„è§£ææ ¹æ® rc-field-form æºç çš„æ¸²æŸ“é€»è¾‘ï¼Œè¿™é‡Œæˆ‘èŠ±äº†ä¸€å¼ ç»“æ„å›¾ï¼š å…¶æ¸²æŸ“çš„æ­¥éª¤å¤§è‡´å°±æ˜¯ï¼š é€šè¿‡ useForm åˆ›å»ºé¡¶å±‚çš„ FormStore å­˜å‚¨åº“ï¼Œç„¶åé€šè¿‡ FieldContext å‘ä¸‹ä¼ é€’ï¼› Field è·å–åˆ°ç”± FieldContext ä¼ ä¸‹çš„é¡¶å±‚ FormStore ï¼Œè·å–éœ€è¦çš„ name å’Œä¸€äº›æ“ä½œæ–¹æ³•ï¼Œå¯¹ DomeElement åšå…‹éš†å’Œå±æ€§å°è£…ï¼› æ ¹æ®æœ€ç»ˆä¼ å…¥çš„ Dom ç±»å‹ï¼Œåšç›¸åº”çš„æ ¼å¼åŒ–å¤„ç†å’Œå‘ˆç°ï¼›ï¼ˆæœ‰å¯èƒ½ä¼ å…¥çš„ä¸ºå‡½æ•°ï¼‰ èƒ½åŠ›æ‹†è§£æ•´ä¸ª rc-field-form çš„èƒ½åŠ›å¯ç®€å•æ‹†è§£ä¸ºï¼š æ•°æ®å­˜å‚¨ï¼šåœ¨ Form é¡¶å±‚ç»´æŠ¤äº†ä¸€ä¸ª Context å­˜å‚¨åº“ï¼Œå¯¹ Form å†…æ³¨å†Œçš„ä»»ä½•å­è¡¨å•é¡¹çš„å˜åŠ¨ï¼Œéƒ½é€šè¿‡æ³¨å†Œå¥½çš„ getã€set æ–¹æ³•æ¥å­˜å…¥ store å†…ï¼› è¡¨å•å¯¹è±¡ï¼šé¡¶å±‚é€šè¿‡ useRef ç”Ÿæˆä¸€ä¸ªä¸éšç»„ä»¶æ›´æ–°çš„ formInstance å¯¹è±¡ï¼Œç„¶åé€šè¿‡ useForm ç”Ÿæˆï¼Œå½“åˆæ¬¡æ¸²æŸ“æ—¶åˆ›å»ºå‡º FormStore ç»‘å®šå³å¯ï¼Œåç»­å¦‚æœéœ€è¦åˆ·æ–°åˆ™è§¦å‘åˆå§‹åŒ–ç»‘å®šçš„ forceUpdate æ–¹æ³•å³å¯åˆ·æ–°ï¼ˆæˆ‘ä»¬é€šè¿‡ form æ‹¿åˆ°çš„è¡¨å•å¯¹è±¡å°±æ˜¯è¿™ä¸ª formInstanceï¼‰ï¼› è¡¨å•æ ¡éªŒï¼šä½¿ç”¨ async-validate æ’ä»¶åº“æ ¡éªŒï¼Œæ‹¼æ¥æ ¼å¼åˆ™æ˜¯é€šè¿‡ name + rules å­—æ®µæ¥ç”Ÿæˆï¼ˆç»„ä»¶æ³¨å†Œé˜¶æ®µæ—¶ç”Ÿæˆç»„ä»¶æè¿°æ•°ç»„å³èƒ½æ–¹ä¾¿çš„è·å–ç»“æ„ï¼‰ï¼› å˜æ›´äº‹ä»¶ï¼šè¡¨å•é¡¹çš„å˜æ›´äº‹ä»¶æ˜¯åœ¨æ³¨å†Œ Field æ—¶ç»‘å®šçš„ï¼Œå°†ä¼ å…¥çš„ children è¿›è¡Œ cloneElement æ“ä½œï¼Œç”Ÿæˆç›®æ ‡å­å…ƒç´ å¹¶æ”¹å†™ propsï¼ˆé€šè¿‡ getControlled æ–¹æ³•å»æ”¹å†™ props ä»¥åŠå¢åŠ æ ¡éªŒç­‰æ“ä½œï¼‰ã€‚ å‘½åè·å–ï¼šè¡¨å•é¡¹æœ‰ä¸ª name å­—æ®µæ˜¯ç”¨äºå®šä¹‰è¡¨å•åçš„ï¼Œå±‚çº§è¶Šæ·±çš„è¡¨å•è¦è®¾ç½®å…¶ name æ—¶ï¼Œéœ€è¦é€šè¿‡ getNamePath æ–¹æ³•æ¥æ‹¼æ¥æˆæœ€ç»ˆçš„ nameï¼Œæœ€ç»ˆ join ç”Ÿæˆçš„ namePath å¤§è‡´ä¸º prefixPath_currentName å…¶ä¸­ï¼ŒformInstance æš´éœ²å‡ºæ¥çš„èƒ½åŠ›ä¸ºï¼ˆé¡¶å±‚ FormStore æš´éœ²çš„èƒ½åŠ›ï¼‰ï¼š è€Œè¿™ä¹Ÿå¯ä»¥ç®—æ˜¯ rc-field-form å¯¹å¤–æš´éœ²çš„æ‰€æœ‰èƒ½åŠ›äº†ï¼ˆå†…éƒ¨æ‹¼æ¥ name çš„æ–¹æ³•æ˜¯ getNamePathï¼Œå»ºè®®ç•™å¿ƒä¸€ä¸‹ï¼‰ã€‚ æ·±å…¥ AntD FormAntD Form ç»„ä»¶åŠèƒ½åŠ› å›¾ä¸­æœ‰ AntD åœ¨ 4.20 æ”¯æŒçš„æ–°ç‰¹æ€§ï¼šuseWatchã€useFormInstanceï¼š useFormInstanceï¼šè¿”å› useForm è·å–çš„ form å¯¹è±¡ï¼Œè¿™å¯¹äºå­ç»„ä»¶æ‹¿é¡¶å±‚ form å¯¹è±¡æ¥è¯´å¾ˆæ–¹ä¾¿ï¼› useWatchï¼šç›‘å¬å­—æ®µå˜åŒ–è¿”å›æ›´æ–°åçš„å€¼ï¼Œä»…å½“æ”¹å­—æ®µå˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ï¼ˆå†…éƒ¨ç”¨ useEffect åšåˆå§‹åŒ–èµ‹å€¼ï¼‰ã€‚ â° æš´éœ²çš„ Form.Provider ä¸€èˆ¬è‡ªå·±å°è£…ï¼Œç›¸å½“äºå°±æ˜¯ä½¿ç”¨ rc-field-form è‡ªå·±æ‰‹å†™ Provider å±‚ä¸€æ ·ï¼Œä¸€èˆ¬ç”¨ä¸ç€ã€‚ Form ç»“æ„AntD Form æ•´ä½“åŸºäº rc-field-form å°è£…äº†ä¸€å±‚ï¼Œå…¶æ‹“å±•äº†å¯¹äº AntD å…¶ä½™ç»„ä»¶ä½¿ç”¨çš„èƒ½åŠ›å’Œæ ·å¼çš„å¡«è£…ã€‚æˆ‘ä»¬çœ‹ä¸ªç®€å•ä¾‹å­ï¼š è¿™é‡Œå¤§è‡´å¯åˆ†ä¸ºå››å±‚ï¼š Form Providerï¼šæ­¤éƒ¨åˆ†å®ç°äº† rc-field-form éœ€è¦æ‰‹å†™çš„éƒ¨åˆ†ï¼› Custom Providerï¼šæ­¤éƒ¨åˆ†ä¸»è¦ä¸º AntD éœ€è¦çš„æ ·å¼æ§åˆ¶çš„ Contextï¼› Field Providerï¼šæ²¿ç”¨ rc-field-form çš„ FieldContextï¼Œæ·»åŠ äº†ä¸€äº›â€œé”™è¯¯å‘ˆç°â€ã€â€œdependencies ä¾èµ–â€ç­‰å†…å®¹ï¼› Contentï¼šä¸»è¦åšå€¼ç»‘å®šå’Œä¸€äº›æ ¡éªŒç»“æœã€æ ·å¼ç­‰çš„å‘ˆç°ï¼Œå†…éƒ¨æœ‰è‡ªå®šä¹‰çš„å…³è” Contextï¼› InternalForm ç›¸å…³å†…å®¹A. å†…éƒ¨è°ƒç”¨çš„ useForm å°è£…äº†ä»€ä¹ˆï¼Ÿ useForm é¢å¤–å¢æ·»çš„å†…å®¹ä¸å¤šï¼Œä¸€ä¸ªæ˜¯ __INTERNAL__ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¸º React.forwardRef æš´éœ²é€šè¿‡ useForm ç”Ÿæˆçš„å¯¹è±¡ï¼ˆå¯ä»¥äº†è§£ä¸€ä¸‹ useImperativeHandleï¼‰ã€‚ B. å®ƒåœ¨ Form çš„åŸºç¡€ä¸Šåˆåšäº†ä»€ä¹ˆï¼Ÿ åˆå§‹åŒ–äº†å¾ˆå¤šå…³äºæ ·å¼æ§åˆ¶ç›¸å…³çš„å†…å®¹ï¼ˆè¿™é‡Œå°† disableã€layoutã€size ç­‰é…ç½®å‡å½’å±äºæ ·å¼é…ç½®ï¼‰ï¼› å‘å¤–æš´éœ² ref å¯¹è±¡ï¼› æ·»åŠ  scroll é”™è¯¯å®šä½ï¼› è‡ªåŠ¨ç»‘å®š rc-field-form éœ€è¦ç”¨æˆ·å†™çš„ Providerï¼› FormItem ç›¸å…³å†…å®¹A. FormItem ä¸»è¦ä½œç”¨ å†³å®šè¡¨å•çš„å‘ˆç°æ–¹å¼ï¼šå‡½æ•°å¼ã€ç»„ä»¶å¼ã€æ•°ç»„ï¼› ç»„ä»¶æ›´æ–°åˆ¤æ–­ï¼Œå±€éƒ¨æ›´æ–°å¤„ç†ï¼› æ ¡éªŒç›¸å…³çš„ç»‘å®šï¼› æ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å°† Field ç»„ä»¶åš AntD çš„æœ¬åœ°åŒ–å¤„ç†ï¼ˆé€šè¿‡å‡½æ•°å­ç»„ä»¶è·å– Field è§£æå¥½çš„æ‰€æœ‰é…ç½®ï¼‰ã€‚ B. FormList çš„å¯¹ FormItem çš„å°è£…æœ‰ä»€ä¹ˆï¼Ÿ FormList å…¶å®å°±æ˜¯è°ƒç”¨ rc-field-form çš„åˆ—è¡¨æ“ä½œï¼Œç„¶åè®©å‰ç«¯è‡ªå·±å»å¯¹åº”å°è£… FormItemã€‚ rc-field-form çš„ List ç»„ä»¶åˆ™æ˜¯å¯¹å¤–æš´éœ²äº†ä¸€ä¸ªå‡½æ•°ï¼ˆæˆ‘ä»¬ç”¨å®˜ç½‘ List ç»„ä»¶å¸¸ç”¨çš„é‚£ä¸ªå‡½æ•°ï¼‰ï¼Œå®ƒæœ€ç»ˆæ“ä½œçš„å°±æ˜¯ Field ç»„ä»¶æš´éœ²å‡ºæ¥çš„èƒ½åŠ›ã€‚ å¯åŠ¨æ‰‹çš„ç‚¹ä» AntD å¯¹å¤–æš´éœ²çš„èƒ½åŠ›æ¥çœ‹ï¼Œæˆ‘ä»¬åŸºæœ¬æ²¡æ³•åŸºäºå®ƒåŒ…è£…å†…å®¹ï¼Œå› ä¸ºå®ƒåŸºæœ¬ä¸Šå°±æ˜¯åŒ…è£… rc-field-formï¼Œå´åˆæ²¡æœ‰å¯¹å¤–é¢æš´éœ² rc-field-form æ”¯æŒçš„èƒ½åŠ›ã€‚å› æ­¤é€šè¿‡é”å®šç‰ˆæœ¬ï¼Œæ ¹æ®å…¶ä¾èµ–çš„ rc-field-form ç‰ˆæœ¬æ¥æ‰©å……ä¸€äº›èƒ½åŠ›ï¼Œè€Œè¿™å°±æ˜¯ @alife/form-tools å°è£…å‡ºçš„åŸå› ã€‚ç›®å‰ä¸šåŠ¡ä¸Šä½¿ç”¨è¡¨å•æ¯”è¾ƒéš¾å—çš„ç‚¹æœ‰ï¼š form å¯¹è±¡çš„æ·±å±‚ä¼ å…¥ï¼Œæ·±å±‚æ¬¡ç»„ä»¶çš„ namePath ä¸å¥½ç›‘å¬ï¼ˆ4.20.0 ç‰ˆæœ¬å·²æ”¯æŒï¼‰ã€‚ å¯¹äºå…„å¼Ÿç»„ä»¶é—´çš„äº‹ä»¶æ¶ˆæ¯å¤„ç†çš„å¾ˆéš¾å—ï¼Œç‰¹åˆ«æ˜¯å€¼å˜æ›´äº‹ä»¶ï¼ˆ4.20.0 ç‰ˆæœ¬å·²æ”¯æŒï¼‰ï¼› å¯¹è±¡ç±»è¡¨å•æ•°æ®çš„æ•°ç»„å‘½åæ³•å¾ˆéš¾å—ï¼Œæ— æ³•å¤ç”¨è¡¨å•ç»„ä»¶ï¼› å¤æ‚è¡¨å•çš„åˆå§‹åŒ–é€»è¾‘å‡æ”¶æ•›åœ¨ä¸Šå±‚ï¼Œä¸€äº›éœ€è¦æ ¹æ®å€¼åšæ¥å£æŸ¥è¯¢å‘ˆç°çš„ç»„ä»¶å¼€å‘èµ·æ¥å¾ˆå›°éš¾ï¼› é‚£ä¹ˆåŸºäºè¿™äº›éš¾ç‚¹ï¼Œæˆ‘ä»¬æ ¹æ® rc-field-form å†…éƒ¨æš´éœ²çš„ä¸€äº›èƒ½åŠ›å¯åšä¸€äº›å°è£…ã€‚ form å¯¹è±¡è·¨å±‚çº§ä¼ é€’4.20 ç‰ˆæœ¬è§£å†³äº†è·¨å±‚çº§ä¼ é€’ form å¯¹è±¡çš„é—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨ Form.useFormInstance è·å–åˆ° form å¯¹è±¡ï¼Œä¸ç”¨ä¸ºä¹‹å‰éœ€è¦é€šè¿‡ props ä¼ å€¼è€Œçƒ¦æ¼äº†ã€‚ ğŸŒ° ä½¿ç”¨ç¤ºä¾‹ï¼šç¤ºä¾‹ä¼ é€é—¨ ä½†æ˜¯å®ƒä¹Ÿæœ‰ç¼ºé™·ï¼š è·å– form å¯¹è±¡å°±å¾—ç”¨åˆ°å…¨é‡çš„ NamePathï¼Œéš¾åšåˆ°è¡¨å•ç»„ä»¶å¤ç”¨ã€‚ â˜•ï¸ å¦‚æœéœ€è¦å°†è¡¨å•ç»„ä»¶æŠ½ç¦»å‡ºæ¥åšå…¬å…±ç»„ä»¶ï¼ˆå®ƒä»¬ä»…åŒ…è£¹å±‚çš„ name ä¸åŒï¼‰ï¼Œé‚£ä¹ˆå†…éƒ¨ä½¿ç”¨ form çš„ä¸€äº›æ–¹æ³•å°±ä¼šå¾ˆéš¾å—ï¼ˆå› ä¸ºæ²¡æ³•çŸ¥é“å®ƒçš„ prefixName åˆ°åº•æ˜¯ä»€ä¹ˆï¼‰ã€‚ å› æ­¤å¯åŸºäº rc-field-form åšä¸€å±‚ä¼˜åŒ–ï¼šç›´æ¥è·å–å½“å‰è·¯å¾„ä¸‹çš„ form å¯¹è±¡ï¼Œå³â€œè‡ªåŠ¨å‰ç¼€è¡¥å…¨â€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import &#123; useCallback, useContext, useMemo &#125; from &apos;react&apos;;import &#123; InternalFormInstance, InternalNamePath, NamePath &#125; from &apos;rc-field-form/es/interface&apos;;import FieldContext from &apos;rc-field-form/es/FieldContext&apos;;import &#123; FormInstance &#125; from &apos;antd/es/form&apos;;function getLocalForm(form: InternalFormInstance, prefixPath: InternalNamePath = []) &#123; // è·å–æ‰€æœ‰å€¼ function getLocalFieldValue(name: NamePath) &#123; return originForm.getFieldValue([...prefixPath, ...getNamePath(name)]); &#125; // è·å–å•ä¸€å€¼ function getLocalFieldsValue( nameList?: NamePath[] | true, filterFunc?: (meta: Meta) =&gt; boolean, ) &#123; if (!nameList || nameList === true) &#123; const value = originForm.getFieldsValue([prefixPath], filterFunc); return getValue(value, fullPrefix); &#125; // ä¸ºæ¯ä¸ªå­—æ®µè¡¥å…¨å‰ç¼€ const formatNameList = nameList.map(nameItem =&gt; [...prefixPath, nameItem]); const value = originForm.getFieldsValue(formatNameList, filterFunc); return getValue(value, fullPrefix); &#125; // è®¾ç½®æ‰€æœ‰å€¼ // ... // è®¾ç½®å•ä¸€å€¼ // ... // é‡ç½®å½“å‰è¡¨å• // ... // å…¶å®ƒ...ï¼ˆåŸºæœ¬ç…§ç€ FormStore åŸºæœ¬é‡å†™ä¸€éå³å¯ï¼‰ return &#123; getLocalFieldValue, getLocalFieldsValue, // ... &#125;&#125;function useLocalForm() &#123; const context = useContext(FieldContext); const prefixPath = context.prefixName || []; const localForm = useMemo(() =&gt; getLocalForm(context, prefixPath), [context, prefixPath]) return useMemo(() =&gt; &#123; return [localForm] as const; &#125;, [localForm]);&#125;export default useLocalForm; è¿™æ ·å³ä½¿ç»„ä»¶æ‹†åˆ†å‡ºæ¥ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å…³æ³¨ Form å‘½åå‰ç¼€çš„é—®é¢˜ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼ˆæ•°ç»„åœ¨å¥—ç”¨äº† FormAccess ä¹‹åä¹Ÿé€‚ç”¨æ­¤æ–¹æ³•ï¼‰ã€‚ å…„å¼Ÿç»„ä»¶äº‹ä»¶å¤„ç†æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœè¦è·å–åˆ°å…„å¼Ÿç»„ä»¶é—´å€¼çš„å˜æ›´ï¼Œè®¾ç½®æ­¤ç±»äº‹ä»¶ç›‘å¬æ–¹æ³•å¾ˆæ˜¯å¤´ç–¼ï¼Œä¸è¿‡åœ¨ 4.20 ç‰ˆæœ¬æä¾›çš„ useWatch æ–¹æ³•èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŒæ—¶å…¶è·å–å€¼çš„èƒ½åŠ›æ˜¯é€šè¿‡ useEffect è·å–çš„ï¼Œåˆå§‹åŒ–æ—¶ä¹Ÿèƒ½ç›‘å¬åˆ°å˜æ›´ã€‚ ğŸŒ° ä½¿ç”¨ç¤ºä¾‹ï¼šç¤ºä¾‹ä¼ é€é—¨ useWatch çš„ç¼ºé™·ï¼ˆåŒ 4.1 æ‰€è¿°é—®é¢˜ï¼‰ ä¸€æ—¦éœ€è¦å¤ç”¨ç»„ä»¶ï¼Œé™å®šæ­»çš„ NamePath ä¼šå¯¼è‡´ç»„ä»¶æœ€ç»ˆè€¦åˆå¤ªå¤§ï¼Œæ— æ³•æ‹†åˆ†ã€‚ å› æ­¤åŒæ ·å¯æŒ‰ç…§ 4.1 ä¸­çš„å¤„ç†æ–¹å¼ï¼Œæ³¨å†Œä¸ªè™šæ‹Ÿçš„ Field ï¼Œç„¶åé€šè¿‡å®ƒæ¥åšäº‹ä»¶ç›‘å¬ï¼Œä»è€Œæ¨¡æ‹Ÿ dependencies çš„èƒ½åŠ›ï¼š 1234567891011121314useEffect(() =&gt; &#123; const &#123; registerField &#125; = getInternalHooks(HOOK_MARK) as InternalHooks; // æ¨¡æ‹Ÿ Field çš„åŠŸèƒ½ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„ Field å¹¶ç»‘å®šç›‘å¬äº‹ä»¶ const unregister = registerField(new FakeField(handleChange, &#123; names: dependenciesCache.current.map((dep) =&gt; getNamePath(dep)), trigger, requirePathExist, &#125;)); return () =&gt; &#123; unregister(); &#125;;&#125;, [requirePathExist, handleChange, getInternalHooks, dynamic &amp;&amp; dependencies]); æ›´ä¸ºèˆ’é€‚çš„å‘½åæ–¹å¼å…ˆå‰æåˆ°è¿‡ï¼ŒFormItem å†…çš„è¡¨å• name å€¼çš„è·å–å…¶å®æ˜¯ç”¨ Field çš„å‡½æ•°æ–¹å¼æ¥è·å–åˆ° prefixNameï¼Œæœ€ç»ˆæ‹¼æ¥å¥½ props ä¸Šä¼ å…¥çš„ name æ¥è®¾ç½®å…¨åçš„ï¼Œæ•´ä½“çš„ä½¿ç”¨å¾ˆè¢«åŠ¨ï¼Œè¿™å°±å¯¼è‡´ï¼š è·å–å€¼ã€ç›‘å¬äº‹ä»¶ç­‰éƒ½éœ€è¦æ‹¼æ¥å…¨åï¼Œå¯¹äºå¤æ‚è¡¨å•æ¥è¯´å¾ˆéº»çƒ¦ï¼› æ•°ç»„å½¢å¼çš„å‘½åï¼Œä¼šä½¿å¾—è¡¨å•éš¾ä»¥è§£è€¦ï¼Œéš¾ä»¥åšåˆ°è¡¨å•æ¨¡å—çš„å¤ç”¨ï¼› rc-field-form æ‹¼æ¥åç§°çš„æ–¹å¼ï¼š WrapperField è·å–åˆ°å½“å‰ fieldContext çš„ prefixName å€¼ï¼Œå†ä¼ å…¥ Field ç»„ä»¶æ ¹æ®ä¼ å…¥çš„ name æ¥æ‹¼æ¥ï¼› æ—¢ç„¶å®ƒçš„ prefixName æ˜¯æ¥è‡ª fieldContext çš„ï¼Œè€Œ fieldContext çš„ value åˆæ¥è‡ª formContextValueï¼Œä¸” fieldContext å†…éƒ¨å¹¶æ²¡åŒ…è£¹é¢å¤–é€»è¾‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä½•åœ¨åŒ…è£¹è¡¨å•å¯¹è±¡çš„æ—¶å€™å†åŒ…ä¸€å±‚ FieldContextï¼Œç›´æ¥æ•²å®šå®ƒçš„ prefixNameï¼Œè¿™æ ·ä¸å°±èƒ½ä¼˜åŒ–æ‰ Form.Item çš„æ•°ç»„å‘½åæ–¹å¼å—ï¼Ÿ @alife/form-tools çš„åŠŸèƒ½æ‹“å±•å‚è€ƒ 12345678910111213141516171819202122232425262728293031323334353637/** * å¯å‚è€ƒ Field çš„ WrapperField çš„å†™æ³•æ¥å†™ **/import React, &#123; PropsWithChildren, useContext, useMemo &#125; from &apos;react&apos;;import FieldContext, &#123; HOOK_MARK &#125; from &apos;rc-field-form/es/FieldContext&apos;;import &#123; getNamePath &#125; from &apos;rc-field-form/es/utils/valueUtil&apos;;import &#123; NamePath &#125; from &apos;rc-field-form/es/interface&apos;;interface FormAccessProps &#123; /* æ‹¼æ¥çš„ name å‰ç¼€ï¼Œå°† [objName, keyName] çš„ objName å•ç‹¬æ‹†å‡ºæ¥ */ name: NamePath;&#125;const FormAccess = (props: PropsWithChildren&lt;FormAccessProps&gt;) =&gt; &#123; const &#123; name, children &#125; = props; const context = useContext(FieldContext); const value = useMemo(() =&gt; &#123; return &#123; ...context, // ä¸»è¦ç›®çš„å°±æ˜¯å°† prefixName å°¾éƒ¨æ·»åŠ å½“å‰çš„ name å­—æ®µ prefixName: [ ...(context.prefixName || []), ...getNamePath(name), ], &#125;; &#125;, [context, name]); // é‡æ–°åŒ…ä¸€ä¸ªæ–°çš„ Provider return ( &lt;FieldContext.Provider value=&#123;value&#125;&gt; &#123;children&#125; &lt;/FieldContext.Provider&gt; );&#125;;export default FormAccess; ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ 12345678910111213141516171819202122232425262728// å€¼ä¸ºï¼š &#123; obj: &#123; test: xxx &#125; &#125;&lt;FormAccess name=&quot;obj&quot;&gt; &lt;Form.Item name=&quot;test&quot;&gt; // ... &lt;/Form.Item&gt;&lt;/FormAccess&gt;// å€¼ä¸º &#123; arr: [] &#125;;&lt;Form.List name=&quot;test&quot;&gt; &#123;(fields, operations) =&gt; &#123; // åšä¸€äº›é€»è¾‘å°è£… const &#123; add, remove, move &#125; = operations; return fields.map((field) =&gt; &#123; // fieldKey === key const &#123; name, fieldKey, key &#125; = field; // ç®€åŒ– name çš„èµ‹å€¼ï¼Œchildren éƒ¨åˆ†å¯ä»¥æŠ½ç¦»æˆå…¬ç”¨æ¨¡å— return ( &lt;FormAccess key=&#123;key&#125; name=&#123;name&#125;&gt; &lt;Form.Item name=&quot;name&quot;&gt; &lt;Input /&gt; &lt;/Form.Item&gt; &lt;/FormAccess&gt; ); &#125;); &#125;&#125;&lt;/Form.List&gt; å‚è€ƒæ–‡ç«  ç®€å•å®ç° rc-field-form","categories":[{"name":"æºç å‰–æ","slug":"æºç å‰–æ","permalink":"https://monocy.gitee.io/categories/æºç å‰–æ/"}],"tags":[{"name":"Form","slug":"Form","permalink":"https://monocy.gitee.io/tags/Form/"},{"name":"AntD","slug":"AntD","permalink":"https://monocy.gitee.io/tags/AntD/"}]},{"title":"typeorm æ“ä½œ mongo çš„æ–¹æ³•å°è®°","slug":"typeorm-æ“ä½œ-mongo-çš„æ–¹æ³•å°è®°","date":"2022-06-26T10:04:03.000Z","updated":"2022-07-26T13:06:50.730Z","comments":true,"path":"2022/06/26/typeorm-æ“ä½œ-mongo-çš„æ–¹æ³•å°è®°/","link":"","permalink":"https://monocy.gitee.io/2022/06/26/typeorm-æ“ä½œ-mongo-çš„æ–¹æ³•å°è®°/","excerpt":"1. å‰è¨€æ­¤ç¯‡æ–‡ç« ç”¨äºè®°å½•ä½¿ç”¨ Typeorm æ“ä½œ MongoDB çš„æ–¹æ³•ï¼Œæ–¹ä¾¿åç»­å†æ¬¡ä½¿ç”¨æ—¶æœ‰è®°å½•æ€»ç»“ï¼Œé˜²æ­¢ä¸‹æ¬¡ç¢°åˆ°ç±»ä¼¼é—®é¢˜æ—¶æœ‰å¾—è´¹å¿ƒæ€æŸ¥è¯¢æ€è·¯ã€‚ mongodb ç‰ˆæœ¬ï¼š3.7.3 typeorm ç‰ˆæœ¬ï¼š0.2.45 @types/mongodbï¼š3.6","text":"1. å‰è¨€æ­¤ç¯‡æ–‡ç« ç”¨äºè®°å½•ä½¿ç”¨ Typeorm æ“ä½œ MongoDB çš„æ–¹æ³•ï¼Œæ–¹ä¾¿åç»­å†æ¬¡ä½¿ç”¨æ—¶æœ‰è®°å½•æ€»ç»“ï¼Œé˜²æ­¢ä¸‹æ¬¡ç¢°åˆ°ç±»ä¼¼é—®é¢˜æ—¶æœ‰å¾—è´¹å¿ƒæ€æŸ¥è¯¢æ€è·¯ã€‚ mongodb ç‰ˆæœ¬ï¼š3.7.3 typeorm ç‰ˆæœ¬ï¼š0.2.45 @types/mongodbï¼š3.6 2. äº†è§£ ObjectIDç‰¹æ€§ï¼š æ€»ä½“ä¸Šä¸ºé€’å¢çš„é¡ºåºï¼› å¯ä»¥é€šè¿‡ ObjectID è·å–æ—¶é—´ä¿¡æ¯ï¼› JS æ¯”å¯¹ ObjectID æ—¶éœ€è¦è°ƒç”¨å®ƒçš„ toString æ–¹æ³•ï¼› å…³äº ObjectId çš„é—®é¢˜æ€»ç»“ 3. æ“ä½œæ–¹æ³•3.1 åŸºç¡€æŸ¥è¯¢ å¸¸ç”¨çš„ mongo çš„æ“ä½œç¬¦ å«ä¹‰ $in &amp; $nin æ•°ç»„åŒ¹é…ï¼ˆ$inï¼šåŒ¹é…åœ¨æ•°ç»„å†…çš„ï¼› $ninï¼šåŒ¹é…ä¸åœ¨æ•°ç»„å†…çš„ï¼‰ $or &amp; $nor æˆ–æ“ä½œç¬¦ï¼ˆ$orï¼šåŒ¹é…æ»¡è¶³ä»»ä¸€æ¡ä»¶çš„ï¼› $norï¼šåŒ¹é…ä»»ä¸€æ¡ä»¶å‡ä¸æ»¡è¶³çš„ï¼‰ $eq &amp; $ne ç›¸ç­‰åŒ¹é…ï¼ˆ$eqï¼šç­‰äºï¼› $neï¼šä¸ç­‰äºï¼‰ $gt &amp; $lt å¤§å°åŒ¹é…ï¼ˆ$gtï¼šå¤§äºï¼› $ltï¼šå°äºï¼‰ $not éæ“ä½œç¬¦ï¼ˆéœ€è¦é…åˆåˆ«çš„æ“ä½œç¬¦ä½¿ç”¨ï¼‰ $and ä¸æ“ä½œç¬¦ï¼ˆ$andï¼šåŒ¹é…æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142// $in ç¤ºä¾‹const demoArr = ['aaa', 'bbb'];repo.find(&#123; where: &#123; name: &#123; $in: demoArr &#125;, &#125;,&#125;);// $or ç¤ºä¾‹ï¼ˆ$norã€$andã€$nin åŒç†ï¼‰const demoReg = new RegExp('some fuzzy str');repo.find(&#123; where: &#123; $or: [&#123; name: demoReg &#125;, &#123; address: demoReg &#125;], &#125;,&#125;);// $eq ç¤ºä¾‹ï¼ˆ$ne åŒç†ï¼‰repo.find(&#123; where: &#123; name: &#123; $eq: 'æµ‹è¯•', &#125;, &#125;,&#125;);// $gt ç¤ºä¾‹ï¼ˆ$lt åŒç†ï¼‰repo.find(&#123; where: &#123; age: &#123; $gt: 12, &#125;, &#125;,&#125;);// $not ç¤ºä¾‹repo.find(&#123; where: &#123; age: &#123; $not: &#123; $gt: 12 &#125;, &#125;, &#125;,&#125;); å½“ç„¶ï¼Œtypeorm ä¹Ÿä¸ºæˆ‘ä»¬ç®€åŒ–äº†ä¸€éƒ¨åˆ†çš„æ“ä½œå†™æ³•ï¼Œç‰¹åˆ«æ˜¯ç®€å•çš„åŒ¹é…æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿™ä¹ˆå†™ï¼š 12345678// æŸ¥è¯¢å¤šæ¡æ•°æ®ï¼ˆè¿”å›æ•°ç»„ï¼‰repo.find(&#123; id: new ObjectID('tar hex str'), name: '123',&#125;);// æŸ¥è¯¢å•æ¡æ•°æ®repo.findOne(&#123; id: new ObjectID('tar hex str') &#125;); âš ï¸ æ³¨ï¼šæ‰¹é‡æŸ¥è¯¢æ•°æ®ï¼Œéœ€è¦æ ¹æ® ObjectID æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦ new ObjectID(str) æ¥ç”Ÿæˆå¯¹åº”çš„ç±»å‹æ‰å¯æŸ¥è¯¢ï¼Œå¯èƒ½å’Œç‰ˆæœ¬é—®é¢˜æœ‰å…³ã€‚ 3.2 çº§è”æŸ¥è¯¢è¿™é‡Œçš„â€œçº§è”æŸ¥è¯¢â€åŒ…æ‹¬ä¸¤éƒ¨åˆ†çš„æ“ä½œï¼šâ€œå•è¡¨èšåˆâ€ã€â€œå¤šè¡¨è”æŸ¥â€ã€‚ 3.2.1 å•è¡¨èšåˆ âš ï¸ æ³¨ï¼šè¡¨æ ¼å†…å®¹å¼•è‡ªåé¢ â€œå‚è€ƒæ–‡ç«  - 6â€ å¸¸ç”¨ç®¡é“ å«ä¹‰ $group å°† collection ä¸­çš„ document åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœ $match è¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆç»“æœçš„æ–‡æ¡£ $project ä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ï¼ˆä¾‹å¦‚é‡å‘½åï¼Œå¢åŠ ã€åˆ é™¤å­—æ®µï¼Œåˆ›å»ºç»“ç®—ç»“æœç­‰ï¼‰ $sort å°†ç»“æœè¿›è¡Œæ’åºåè¾“å‡º $limit é™åˆ¶ç®¡é“è¾“å‡ºçš„ç»“æœä¸ªæ•° $skip è·³è¿‡åˆ¶å®šæ•°é‡çš„ç»“æœï¼Œå¹¶ä¸”è¿”å›å‰©ä¸‹çš„ç»“æœ $unwind å°†æ•°ç»„ç±»å‹çš„å­—æ®µè¿›è¡Œæ‹†åˆ† 1234567891011121314151617181920212223// ä¸€èˆ¬æ“ä½œæ–¹æ³•const result = await repo .aggregate([ // å…ˆåŒ¹é…éœ€è¦çš„å†…å®¹ &#123; $match: &#123; id: new ObjectID(xxx) &#125; &#125;, // ç„¶åèšåˆ &#123; $group: &#123; // é€šè¿‡ id èšåˆ id: '$id', // è‡ªå®šä¹‰ content å†…å®¹ content: &#123; // æ‰¹é‡å–å€¼å¹¶é‡å‘½å $push: &#123; name: '$name', new_age: '$age', &#125;, &#125;, &#125;, &#125;, // å…¶å®ƒæ§åˆ¶â€¦â€¦ ]) .next(); 3.2.2 å¤šè¡¨è”æŸ¥å¤šè¡¨è”æŸ¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ˜¯ $lookup æ“ä½œç¬¦ï¼Œæ­¤æ“ä½œç¬¦å†…å®¹å¦‚ä¸‹ï¼š fromï¼šç›®æ ‡è¡¨ localFieldï¼šå½“å‰è¡¨çš„åŒ¹é…å­—æ®µ foreignFieldï¼šç›®æ ‡è¡¨çš„åŒ¹é…å­—æ®µ asï¼šè¾“å‡ºçš„é›†åˆåç§° âš ï¸ æ³¨ï¼šè¿™é‡Œçš„ localField ä¸ foreignField å°±æ˜¯ä¸¤è¡¨å…³è”çš„å¤–é”®ï¼Œæ³¨æ„åˆ«å¡«åäº†ã€‚ 12345678910111213141516171819202122// ç¤ºä¾‹const data = await this.user .aggregate([ &#123; $match: &#123; name: 'wahaha' &#125; &#125;, &#123; $lookup: &#123; from: 'photo', localField: 'id', foreignField: 'user_id', as: 'photo_list', &#125;, &#125;, &#123; $lookup: &#123; from: 'family', localField: 'id', foreignField: 'user_id', as: 'families', &#125;, &#125;, ]) .next(); 3.3 æ–°å¢æ“ä½œä½¿ç”¨ Typeorm æ“ä½œ mongodb çš„æ–°å¢èƒ½åŠ›æœ‰ä¸‰ç§æ–¹æ³•ï¼šsaveã€insertOneã€insertManyï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ save æ–¹æ³•ã€‚å®ƒä»¬ä¹‹é—´ç¨å¾®æœ‰ä¸€äº›åŒºåˆ«ï¼š 3.3.1 save æ–¹æ³•save æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œç›´æ¥å°†æ–°å¢å‚æ•°æ”¾å…¥å³å¯ï¼Œæ”¯æŒè‡ªåŠ¨ç”Ÿæˆ ä¸»é”®ã€æ–°å¢æ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼Œå®ƒåŒæ—¶æ”¯æŒæ’å…¥å•æ¡æ•°æ® &amp; å¤šæ¡æ•°æ®ã€‚ 1234567891011// æ’å…¥å•æ¡æ•°æ®this.repo.save(&#123; // æ–°å¢çš„å‚æ•°&#125;);// æ‰¹é‡æ’å…¥æ•°æ®this.repo.save([ &#123; // æ–°å¢çš„å‚æ•° &#125;,]); 3.3.2 insertOne æ–¹æ³•insertOne æ–¹æ³•ä¸º save çš„å•æ¡æ•°æ®æ“ä½œç‰ˆï¼Œä½†å®ƒåªæ”¯æŒè‡ªåŠ¨ç”Ÿæˆ ä¸»é”®ï¼Œåœ¨é¡¹ç›®ä½¿ç”¨ä¸Šå¯ä¼˜å…ˆä½¿ç”¨ save æ–¹æ³•ã€‚ 123this.repo.insertOne(&#123; // æ–°å¢çš„å‚æ•°&#125;); 3.3.3 insertMany æ–¹æ³•insertMany æ–¹æ³•ä¸º save çš„å¤šæ¡æ•°æ®æ“ä½œç‰ˆï¼Œä½†å®ƒåªæ”¯æŒè‡ªåŠ¨ç”Ÿæˆ ä¸»é”®ï¼Œåœ¨é¡¹ç›®ä½¿ç”¨ä¸Šå¯ä¼˜å…ˆä½¿ç”¨ save æ–¹æ³•ã€‚ 12345this.repo.insertMany([ &#123; // æ–°å¢çš„å‚æ•° &#125;,]); 3.4 åˆ é™¤æ“ä½œåˆ é™¤æ–¹æ³•åŸºæœ¬éƒ½ä½¿ç”¨ delete æ–¹æ³•ï¼Œä½¿ç”¨æ–¹æ³•åŸºæœ¬æŒ‰ç…§ TS å®šä¹‰å»æ“ä½œå³å¯ï¼š 12// å¯å•ã€æ‰¹é‡åˆ é™¤repo.delete(xxx); 3.5 æ›´æ–°æ“ä½œæ›´æ–°æ“ä½œä¹Ÿæœ‰å¤šç§ï¼šupdateã€updateOneã€updateManyï¼ŒåŸºæœ¬å’Œ find å·®ä¸å¤šï¼Œç”¨çš„è¾ƒå¤šçš„åŸºæœ¬æ˜¯ update æ–¹æ³•ï¼Œå±äºç»¼åˆæ€§æ›´æ–°ã€‚ 1234repo.update(tarId, &#123; modify_time: new Date(), // å¾…æ›´æ–°çš„å†…å®¹&#125;); âš ï¸ æ³¨ï¼štypeorm æ›´æ–° mongodb æ—¶ä¸ä¼šè‡ªåŠ¨æ›´æ–°æ—¶é—´ï¼Œéœ€è¦æ‰‹åŠ¨è¡¥å……æ—¶é—´çš„æ›´æ–°å†…å®¹ã€‚ 4. å‚è€ƒæ–‡æ¡£ MongoDB $not å®ä¾‹è®²è§£ å¯¹å¤šä¸ªå­—æ®µåŒæ—¶æŸ¥è¯¢ typeorm mongodb TypeORM FindById doesnâ€™t work with MongoDB MongoDB ä¸­çš„ aggregate() æ–¹æ³• mongoDB ä¸­èšåˆ(aggregate)çš„å…·ä½“ä½¿ç”¨ è¯¦è§£ MongoDB ä¸­çš„å¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆ$lookupï¼‰","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/categories/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/tags/æ•°æ®åº“/"},{"name":"Mongo","slug":"Mongo","permalink":"https://monocy.gitee.io/tags/Mongo/"},{"name":"Typeorm","slug":"Typeorm","permalink":"https://monocy.gitee.io/tags/Typeorm/"}]},{"title":"React 18 ç®€ä»‹","slug":"React-18-ç®€ä»‹","date":"2022-06-26T08:54:47.000Z","updated":"2022-07-26T13:09:03.985Z","comments":true,"path":"2022/06/26/React-18-ç®€ä»‹/","link":"","permalink":"https://monocy.gitee.io/2022/06/26/React-18-ç®€ä»‹/","excerpt":"å‰è¨€2022 å¹´ 3 æœˆ 29 å·ï¼ŒReact 18 æ­£å¼å‘å¸ƒäº†ï¼Œå…¶å®ä» React 16 ç‰ˆæœ¬å¼€å§‹ï¼ŒReact å›¢é˜Ÿå·²ç»å¼€å§‹æ™®åŠâ€œå¹¶å‘â€çš„æ¦‚å¿µï¼Œåœ¨ v18 ç‰ˆæœ¬è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæœ‰ä¸å°‘ç›¸å…³çš„å¹¶å‘ç‰¹æ€§çŸ¥è¯†åœ¨ç§‘æ™®ï¼Œé‚£ä¹ˆv18 ç‰ˆæœ¬åˆ°åº•æœ‰å“ªäº›çŸ¥è¯†ï¼Œè¿™é‡Œå°±ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ã€‚","text":"å‰è¨€2022 å¹´ 3 æœˆ 29 å·ï¼ŒReact 18 æ­£å¼å‘å¸ƒäº†ï¼Œå…¶å®ä» React 16 ç‰ˆæœ¬å¼€å§‹ï¼ŒReact å›¢é˜Ÿå·²ç»å¼€å§‹æ™®åŠâ€œå¹¶å‘â€çš„æ¦‚å¿µï¼Œåœ¨ v18 ç‰ˆæœ¬è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæœ‰ä¸å°‘ç›¸å…³çš„å¹¶å‘ç‰¹æ€§çŸ¥è¯†åœ¨ç§‘æ™®ï¼Œé‚£ä¹ˆv18 ç‰ˆæœ¬åˆ°åº•æœ‰å“ªäº›çŸ¥è¯†ï¼Œè¿™é‡Œå°±ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ã€‚ å¹¶å‘ç‰¹æ€§ï¼ˆConcurrent Featuresï¼‰æœ€æ—©æ­¤æ¦‚å¿µå—å¯å‘äº React Nativeï¼Œå› ä¸º JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œæœ¬åœ°å¹³å°åˆ™æ˜¯è¿è¡Œåœ¨å¤šä¸ªçº¿ç¨‹ä¸Šçš„ï¼Œç”±äºä¸ºäº†è‰¯å¥½çš„ç§»åŠ¨ç«¯çš„ç”¨æˆ·ä½“éªŒï¼ŒReact Native å°±ä¸å¾—ä¸è€ƒè™‘å¦‚ä½•å®ç°â€œå¹¶å‘è°ƒåº¦â€ç‰¹æ€§ï¼Œè¿™ä¹ˆå¥½çš„ç‰¹æ€§å¦‚æœè¿ç”¨åœ¨ Web ä¸Šï¼Œé‚£ä¹ˆæ€§èƒ½å²‚ä¸ä¼šå¤§å¤§æå‡å—ï¼Œäºæ˜¯ React å›¢é˜Ÿä¾¿å¼€å§‹ç»“åˆæ­¤å¼€å§‹æ·±å…¥ç ”ç©¶ç½‘ç»œåŠŸèƒ½ï¼Œæ¯”å¦‚â€œä»£ç æ‹†åˆ†â€ã€â€œæ•°æ®è·å–â€ã€â€œæµæœåŠ¡å™¨æ¸²æŸ“â€ã€â€œæœåŠ¡å™¨ç»„ä»¶â€ ç­‰ï¼Œæœ€ç»ˆå‘ç°è¿™äº›èƒ½åŠ›éƒ½æ˜¯å¯æ„å»ºçš„ï¼Œå› æ­¤å°±è®¾è®¡å‡ºäº†æœ€åˆç‰ˆçš„ Suspense API ï¼Œå¦‚æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ React.lazy + Suspense å®ç°ç»„ä»¶æ‡’åŠ è½½ã€‚ âš ï¸ æ³¨ï¼šç›®å‰ React 18 çš„æ–°æš‚æ—¶æœªåœ¨ React Native å†…å®ç°ï¼ˆæŠ€æœ¯ä¸Šçš„é™åˆ¶ï¼‰ã€‚ React 18 æ–°åŠŸèƒ½ React 18 ä¸­çš„è®¸å¤šåŠŸèƒ½éƒ½å»ºç«‹åœ¨æ–°çš„å¹¶å‘æ¸²æŸ“å™¨ï¼ˆConcurrent æ¨¡å¼ï¼‰ä¹‹ä¸Šï¼ŒReact åœ¨å†…éƒ¨ä»¥ä¼˜å…ˆé˜Ÿåˆ—å’Œå¤šé‡ç¼“å†²ç­‰å¤æ‚æŠ€æœ¯ï¼Œæ¥åˆ›å»ºå¹¶è¡Œæœºåˆ¶ï¼Œè®© React å¾—ä»¥å®ç°æ–°åŠŸèƒ½æå‡ç”¨æˆ·ä½“éªŒã€‚ è‡ªåŠ¨æ‰¹å¤„ç†èƒ½åŠ›ï¼› æ”¯æŒ Suspense çš„æµå¼æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼› æ–°çš„ä¸¥æ ¼æ¨¡å¼ï¼ˆStrictModeï¼‰ï¼› æ–°çš„ React Hook APIï¼ˆuseIdã€useTransitionã€useDeferredValueï¼‰ï¼› æœåŠ¡å™¨ç»„ä»¶ï¼ˆServer Componentsï¼Œå¼€å‘ä¸­ï¼Œä¸ä¼šåŒ…å«åœ¨ React 18 ç¨³å®šç‰ˆä¸­ =&gt; Next.jsã€Hydrogen å·²æ”¯æŒï¼‰ å¯ç”¨ Concurrent æ¨¡å¼å¯ç”¨ Concurrent æ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦æ”¹é€ ä¸€ä¸‹ index.tsx ä»£ç ï¼Œæ”¹é€ ç»“æœå¦‚ä¸‹ï¼š 12345678910import React from 'react';// Step1: æ›´æ”¹ ReactDom å¼•ç”¨ä½ç½®import ReactDOM from 'react-dom/client';import App from './App';import 'antd/dist/antd.css';import './assets/style/index.css';// Step2: æ›´æ”¹ dom èŠ‚ç‚¹çš„ç»‘å®šå§¿åŠ¿const root = ReactDOM.createRoot(document.getElementById('root'));root.render(&lt;App /&gt;); èƒ½åŠ›ä»‹ç»è‡ªåŠ¨æ‰¹å¤„ç† æ‰¹å¤„ç†æ˜¯ React å°†å¤šä¸ªçŠ¶æ€æ›´æ–°åˆ†ç»„åˆ°ä¸€ä¸ªé‡æ–°æ¸²æŸ“ä¸­ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚å¦‚æœæ²¡æœ‰è‡ªåŠ¨æ‰¹å¤„ç†ï¼Œæˆ‘ä»¬åªèƒ½åœ¨ React äº‹ä»¶å¤„ç†ç¨‹åºä¸­æ‰¹å¤„ç†æ›´æ–°ã€‚ React 18 ç‰ˆæœ¬ä¹‹å‰ï¼Œåœ¨åˆæˆäº‹ä»¶ä¹‹å¤–çš„åŸç”Ÿäº‹ä»¶ä¸­ï¼ˆä¾‹å¦‚ setTimeoutã€onclickã€Promiseï¼‰ ï¼Œæ›´æ–°çŠ¶æ€å¹¶ä¸ä¼šè¿›è¡Œæ‰¹é‡å¤„ç†ï¼ˆåˆå¹¶å¤„ç†ï¼‰ï¼Œè¿™æ„å‘³ç€åœ¨åŸç”Ÿäº‹ä»¶ä¸­å¤šæ¬¡è°ƒç”¨çŠ¶æ€æ›´æ–°ä¼šé€ æˆå¤šæ¬¡åº”ç”¨çš„é‡æ–°æ¸²æŸ“ï¼Œå¾€å¾€æˆ‘ä»¬åªéœ€è¦æœ€åä¸€æ¬¡å³å¯ï¼Œåœ¨ React 18 ç‰ˆæœ¬åä¼˜åŒ–äº†è¿™ä¸ªé—®é¢˜ã€‚ 1234567891011121314151617181920212223242526import React, &#123; useState &#125; from 'react';const App = () =&gt; &#123; const [num1, setNum1] = useState(1); const [num2, setNum2] = useState(1); const add = () =&gt; &#123; setTimeout(() =&gt; &#123; setNum1(pre =&gt; pre + 1); setNum2(pre =&gt; pre + 1); &#125;); &#125;; console.log('æ¸²æŸ“äº†'); return ( &lt;section className='App'&gt; &lt;header className='App-header'&gt;react 18&lt;/header&gt; &lt;p&gt;num1 : &#123;num1&#125;&lt;/p&gt; &lt;p&gt;num2 : &#123;num2&#125;&lt;/p&gt; &lt;button onClick=&#123;add&#125;&gt;+1&lt;/button&gt; &lt;/section&gt; );&#125;;export default App; 17 ç‰ˆæœ¬ï¼ˆç‚¹å‡» 4 æ¬¡æ¸²æŸ“äº† 8 æ¬¡ï¼‰ 18 ç‰ˆæœ¬ï¼ˆç‚¹å‡» 4 æ¬¡æ¸²æŸ“ 4 æ¬¡ï¼‰ å†…å®¹æºè‡ªâ€œReact 18 ä¹‹çŠ¶æ€æ‰¹å¤„ç†â€ï¼ˆè§åº•éƒ¨â€œå‚è€ƒæ–‡ç« â€ï¼‰ æ–°çš„ä¸¥æ ¼æ¨¡å¼ StrictMode æ˜¯ä¸€ä¸ªç”¨æ¥çªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ½œåœ¨é—®é¢˜çš„å·¥å…·ã€‚ä¸ Fragment ä¸€æ ·ï¼ŒStrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚ å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¦‚ï¼š 12345678910111213141516import React from 'react';function ExampleApplication() &#123; return ( &lt;div&gt; &lt;Header /&gt; &lt;React.StrictMode&gt; &lt;div&gt; &lt;ComponentOne /&gt; &lt;ComponentTwo /&gt; &lt;/div&gt; &lt;/React.StrictMode&gt; &lt;Footer /&gt; &lt;/div&gt; );&#125; StrictMode ç›®å‰æœ‰åŠ©äºï¼š è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ å…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š å…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨ æ£€æµ‹è¿‡æ—¶çš„ context API æ£€æµ‹ä¸å®‰å…¨çš„å‰¯ä½œç”¨ æœªæ¥çš„ React ç‰ˆæœ¬å°†æ·»åŠ æ›´å¤šé¢å¤–åŠŸèƒ½ Suspense æ–°åŠŸèƒ½åœ¨ React 18 ä¸­ï¼ŒæœåŠ¡å™¨æ·»åŠ äº†å¯¹ Suspense çš„æ”¯æŒï¼Œå¹¶ä½¿ç”¨å¹¶å‘æ¸²æŸ“ç‰¹æ€§æ‰©å±•äº†å®ƒçš„åŠŸèƒ½ã€‚å¦‚æœç»„ä»¶æ ‘çš„ä¸€éƒ¨åˆ†å°šæœªå‡†å¤‡å¥½æ˜¾ç¤ºï¼ŒSuspense å…è®¸æ‚¨ä»¥å£°æ˜æ–¹å¼æŒ‡å®šå…¶åŠ è½½çŠ¶æ€ï¼Œæµç¨‹å¯å¦‚ä¸‹æ‰€ç¤ºï¼š æ–°çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¸²æŸ“ APIåœ¨ä¸Šè¿° å¯ç”¨ Concurrent èƒ½åŠ› ä¸­å·²ç»ä»‹ç»äº†å®¢æˆ·ç«¯æ¸²æŸ“å†™æ³•ï¼Œéœ€è¦å…³æ³¨çš„æ˜¯æ–° API çš„åˆ°å¤„åœ°å€å‡ä¸º react-dom/clientã€‚ ç”±äºæš‚æœªå°è¯•æœåŠ¡ç«¯èƒ½åŠ›ï¼Œè¯¦æƒ…å¯å‚è€ƒ React Dom æœåŠ¡å™¨æ–‡æ¡£ã€‚ æ–° HookuseIdå…¶ä½œç”¨å°±æ˜¯ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šç”Ÿæˆå”¯ä¸€ IDã€‚ åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ React è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚åœ¨å¼€å‘æ¨¡å¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å…±äº«åŒä¸€ä¸ª React ç»„ä»¶ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œå°±ä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šå¦‚æœå½“å‰ç»„ä»¶å·²ç»åœ¨æœåŠ¡ç«¯æ¸²æŸ“è¿‡äº†ï¼Œä½†æ˜¯åœ¨å®¢æˆ·ç«¯æˆ‘ä»¬å¹¶æ²¡æœ‰ä»€ä¹ˆæ‰‹æ®µçŸ¥é“è¿™ä¸ªäº‹æƒ…ï¼Œäºæ˜¯å®¢æˆ·ç«¯è¿˜ä¼šé‡æ–°å†æ¸²æŸ“ä¸€æ¬¡ï¼Œè¿™æ ·å°±é€ æˆäº†å†—ä½™çš„æ¸²æŸ“ã€‚ è¦ç†è§£è¿™ä¸ªèƒŒæ™¯ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ SSR çš„æµç¨‹æœ‰ä¸€ä¸ªç®€å•çš„æ¦‚å¿µã€‚ åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ä¼šå°† React ç»„ä»¶æ¸²æŸ“æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè„±æ°´ã€Œdehydrateã€ã€‚å­—ç¬¦ä¸²ä»¥ html çš„å½¢å¼ä¼ é€ç»™å®¢æˆ·ç«¯ï¼Œä½œä¸ºé¦–å±ç›´å‡ºçš„å†…å®¹ã€‚åˆ°äº†å®¢æˆ·ç«¯ä¹‹åï¼ŒReact è¿˜éœ€è¦å¯¹è¯¥ç»„ä»¶é‡æ–°æ¿€æ´»ï¼Œç”¨äºå‚ä¸æ–°çš„æ¸²æŸ“æ›´æ–°ç­‰è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ³¨æ°´ã€Œhydrateã€ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŒä¸€ä¸ªç»„ä»¶åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´å°±éœ€è¦æœ‰ä¸€ä¸ªç›¸å¯¹ç¨³å®šçš„ id æ¥ç¡®å®šå¯¹åº”çš„åŒ¹é…å…³ç³»ã€‚ ä½†æ˜¯ï¼ŒReact åœ¨åç»­çš„æ›´æ–°ä¸­ï¼Œå°±å¼€å§‹æäº‹æƒ…ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“æœ‰ reconciler ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æœ‰ fizzï¼Œä»–ä»¬çš„ä½œç”¨å¤§æ¦‚ç›¸åŒï¼Œé‚£å°±æ˜¯æ ¹æ®æŸç§ä¼˜å…ˆçº§è¿›è¡Œä»»åŠ¡è°ƒåº¦ã€‚äºæ˜¯ï¼Œæ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼Œéƒ½å¯èƒ½ä¸ä¼šæŒ‰ç…§ç¨³å®šçš„é¡ºåºæ¸²æŸ“ç»„ä»¶äº†ï¼Œé€’å¢çš„è®¡æ•°å™¨æ–¹æ¡ˆå°±æ— æ³•è§£å†³é—®é¢˜ï¼Œè€Œç»„ä»¶çš„æ ‘çŠ¶ç»“æ„å³ä½¿æ¸²æŸ“é¡ºåºä¸åŒï¼Œä½†æ•´ä½“çš„ä¼˜å…ˆçº§é¡ºåºç»“æ„èƒ½ä¿æŒç¨³å®šï¼Œå¯ä»¥ç”¨è¿™ç§æ€è·¯æ¥è§£å†³é‡å¤æ¸²æŸ“é—®é¢˜ã€‚ åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤šä¸ª idï¼Œé‚£ä¹ˆä¸€å®šä¸è¦é‡å¤çš„ä½¿ç”¨ useIdï¼Œè€Œæ˜¯åŸºäºä¸€ä¸ª id æ¥åˆ›å»ºä¸åŒçš„èº«ä»½æ ‡è¯† 1234567891011121314151617// ä½¿ç”¨å§¿åŠ¿function NameFields() &#123; const id = useId(); return ( &lt;div&gt; &lt;label htmlFor=&#123;id + '-firstName'&#125;&gt;First Name&lt;/label&gt; &lt;div&gt; &lt;input id=&#123;id + '-firstName'&#125; type='text' /&gt; &lt;/div&gt; &lt;label htmlFor=&#123;id + '-lastName'&#125;&gt;Last Name&lt;/label&gt; &lt;div&gt; &lt;input id=&#123;id + '-lastName'&#125; type='text' /&gt; &lt;/div&gt; &lt;/div&gt; );&#125; å†…å®¹æºè‡ª â€œReact 18 æ–°ç‰¹æ€§ä¹‹ useId è¯¦ç»†è§£è¯»â€ï¼ˆè§åº•éƒ¨å‚è€ƒæ–‡ç« ï¼‰ useTransitionã€ä½¿ç”¨åœºæ™¯ã€‘ å¼‚æ­¥åŠ è½½æ•°æ®çš„è¿‡æ¸¡çŠ¶æ€ç®¡æ§ï¼ˆå¯ä»¥é€æ­¥æ·˜æ±° const [loading, setLoading] = useState(false)ï¼Œè½¬è€Œç”¨ useTransition æ¥ç®¡æ§åŠ è½½çŠ¶æ€ï¼‰ ã€ä½¿ç”¨æ–¹æ³•ã€‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445import React, &#123; useState, useTransition, useCallback &#125; from 'react';import &#123; Card, Input, Spin &#125; from 'antd';const UseTransitionDemo = () =&gt; &#123; const [value, setValue] = useState(''); const [searchQuery, setSearchQuery] = useState([]); // æœ€è¿Ÿ 3s ä¼šå“åº”ä¸€æ¬¡ const [loading, startTransition] = useTransition(&#123; timeoutMs: 3000, &#125;); const handleChange = useCallback( e =&gt; &#123; setValue(e.target.value); startTransition(() =&gt; &#123; // ç”¨å¤§é‡æ•°æ®æ¥æ¢å–è¿‡æ¸¡è€—æ—¶ï¼ˆæ¸²æŸ“è€—æ—¶ï¼‰ setSearchQuery(Array(20000).fill(e.target.value)); &#125;); &#125;, [startTransition], ); return ( &lt;Card title='useTransition Demo'&gt; &lt;Input value=&#123;value&#125; placeholder='è¯·è¾“å…¥å†…å®¹æŸ¥çœ‹å˜åŒ–' onChange=&#123;handleChange&#125; style=&#123;&#123; marginBottom: '12px' &#125;&#125; /&gt; &lt;br /&gt; &lt;Spin spinning=&#123;loading&#125;&gt; &#123;searchQuery.map((item, index) =&gt; ( &lt;p key=&#123;index&#125;&gt;&#123;item&#125;&lt;/p&gt; ))&#125; &lt;/Spin&gt; &lt;/Card&gt; );&#125;;export default UseTransitionDemo; ã€å®é™…æ¼”ç»ƒã€‘ useDeferredValueã€ä½¿ç”¨åœºæ™¯ã€‘ å¤§é‡æ•°æ®åœ¨é¡µé¢é¢‘ç¹é‡ç»˜çš„æƒ…å†µï¼Œå½“ç„¶ä½¿ç”¨ lodash çš„ debounce ä¹Ÿèƒ½å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œåªä¸è¿‡æ­¤ API ä¸ç”¨é™åˆ¶æ­»æ—¶é—´ï¼Œä¸€æ—¦å½“å‰çš„ç»˜åˆ¶å®Œæ¯•ä¼šè‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ¬¡å¤„ç†ã€‚ ã€ä½¿ç”¨æ–¹æ³•ã€‘ âš ï¸ æ³¨ï¼šä½¿ç”¨æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œéœ€è¦é…åˆ Suspense å’Œ useMemo ç¼“å­˜ï¼ˆæˆ–æ‰‹åŠ¨å¯¹æ¯”åˆ¤æ–­ï¼‰æ¥å¾—åˆ°ä¸­é—´åŠ è½½çŠ¶æ€ï¼Œå…¶ä¸­ Suspense ä¸»è¦ç”¨äºåˆå§‹åŒ–éƒ¨åˆ†ã€‚ 123456789101112131415161718192021import React, &#123; useDeferredValue, useState, Suspense &#125; from 'react';const UseDeferredValueDemo = () =&gt; &#123; const [value, setValue] = useState(); // ç›‘å¬å€¼çš„å˜åŒ– (timeoutMs: æœ€å¤šå¯å»¶è¿Ÿçš„æ—¶é•¿ï¼Œå½“ç½‘ç»œå’Œè®¾å¤‡å…è®¸æ—¶ï¼ŒReact å§‹ç»ˆä¼šå°è¯•ä½¿ç”¨è¾ƒçŸ­çš„å»¶è¿Ÿï¼Œæ­¤é…ç½®è²Œä¼¼æœ€æ–°ç‰ˆæœ¬çš„ React å°†å…¶å»æ‰äº†) const defferedValue = useDeferredValue(value, &#123; timeoutMs: 1000 &#125;); // å¼‚æ­¥å†…å®¹å‘ˆç° const defferedContent = useMemo(() =&gt; &#123; // ... &#125;, [defferedValue]); return ( &lt;&gt; &lt;Suspense fallback='Loading...'&gt;&#123;defferedContent&#125;&lt;/Suspense&gt; &lt;/&gt; );&#125;;export default UseDeferredValueDemo; ã€ä¸ debounce çš„åŒºåˆ«ã€‘ debounce æœ‰ä¸€ä¸ªå›ºå®šçš„äººä¸ºå»¶è¿Ÿï¼ˆå¦‚ 80 ä¸ªé¡¹ï¼Œæ¯é¡¹å»¶è¿Ÿ 3msï¼‰ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯ä¼šå»¶è¿Ÿï¼Œä¸è®ºæˆ‘ä»¬çš„ç”µè„‘æœ‰å¤šå¿«ã€‚ç„¶è€Œï¼ŒuseDeferredValue çš„å€¼åªä¼šåœ¨æ¸²æŸ“è€—è´¹æ—¶é—´çš„æƒ…å†µä¸‹ â€œæ»åâ€ï¼ŒReact å¹¶ä¸ä¼šåŠ å…¥ä¸€ç‚¹å¤šä½™çš„å»¶è¿Ÿã€‚åœ¨ä¸€ä¸ªæ›´å®é™…çš„å·¥ä½œè´Ÿè·ï¼Œä½ å¯ä»¥é¢„æœŸè¿™ä¸ªæ»åä¼šæ ¹æ®ç”¨æˆ·çš„è®¾å¤‡è€Œä¸åŒã€‚åœ¨è¾ƒå¿«çš„æœºå™¨ä¸Šï¼Œæ»åä¼šæ›´å°‘æˆ–è€…æ ¹æœ¬ä¸å­˜åœ¨ï¼Œåœ¨è¾ƒæ…¢çš„æœºå™¨ä¸Šï¼Œå®ƒä¼šå˜å¾—æ›´æ˜æ˜¾ã€‚ä½†ä¸è®ºå“ªç§æƒ…å†µï¼Œåº”ç”¨éƒ½ä¼šä¿æŒå¯å“åº”ã€‚è¿™å°±æ˜¯æ­¤æœºåˆ¶ä¼˜äº debouncing æˆ– throttling çš„åœ°æ–¹ï¼Œå®ƒä»¬æ€»æ˜¯ä¼šå¼•å…¥æœ€å°å»¶è¿Ÿè€Œä¸”ä¸å¯é¿å…çš„ä¼šåœ¨æ¸²æŸ“çš„æ—¶å€™é˜»å¡è¿›ç¨‹ã€‚ ã€å®é™…æ¼”ç»ƒã€‘ æœªæ¥å¯¹æœåŠ¡å™¨ç«¯çš„æ”¯æŒ åŸæœ‰èƒ½åŠ› Suspense + React.lazy å®ç°ä»£ç åˆ†å‰²ï¼Œæ–¹ä¾¿æ‰“åŒ…å·¥å…·æ‰“åŒ…ï¼› ç°æœ‰èƒ½åŠ› ã€æœåŠ¡ç«¯ã€‘æµå¼æ¸²æŸ“ã€å”¯ä¸€ IDï¼ˆuseIdï¼‰ã€æœåŠ¡å™¨ç»„ä»¶ï¼ˆæš‚æœªæ¨å‡ºï¼Œä½† next.js ç­‰éƒ¨åˆ†åç«¯æ¡†æ¶å·²å®ç°ï¼‰ï¼› ã€å®¢æˆ·ç«¯ã€‘å¼‚æ­¥åŠ è½½ï¼ˆuseTransitionã€useDeferredValueï¼‰ï¼› æœªæ¥èƒ½åŠ› å¼‚æ­¥æ•°æ®è·å–èƒ½åŠ›ï¼ˆä¸ç”¨æ‰‹åŠ¨å¤„ç† Loadingï¼Œå…¨äº¤ç»™ Suspenseï¼‰ï¼› 123456789101112131415161718192021222324252627282930313233343536// ç°æœ‰ç±»ä¼¼ ahook çš„å†™æ³•ï¼ˆè‡ªå·±å¤„ç†çŠ¶æ€ï¼‰export const Child = (id: number) =&gt; &#123; const [isLoading, data] = useFetchDate(id); if (isLoading) &#123; return &lt;Spinner /&gt; &#125; return &lt;&gt;The title is: &#123;data?.title || '-'&#125;&lt;/&gt;&#125;export Parent = () =&gt; &#123; const [id, setId] = useState(0); return &lt;&gt; &lt;Search onSearch=&#123;setId&#125; /&gt; &lt;Child id=&#123;id&#125; /&gt; &lt;/&gt;&#125;// æœªæ¥å†™æ³•ï¼ˆç”± Suspense ç»Ÿä¸€æ¥ç®¡çŠ¶æ€ï¼‰export const Child = (id: number) =&gt; &#123; const [data] = useFetchDate(id); return &lt;&gt;The title is: &#123;data?.title || '-'&#125;&lt;/&gt;&#125;export Parent = () =&gt; &#123; const [id, setId] = useState(0); return &lt;&gt; &lt;Search onSearch=&#123;setId&#125; /&gt; &lt;Suspense fallback=&#123;&lt;Spinner /&gt;&#125;&gt; &lt;Child id=&#123;id&#125; /&gt; &lt;/Suspense&gt; &lt;/&gt;&#125; æœåŠ¡å™¨ç»„ä»¶æ¨å¹¿ï¼Œå‡å°‘å‰ç«¯é‡å¤æ€§ç»„ä»¶æˆæœ¬ï¼› å‚è€ƒæ–‡ç«  concurrent æ¨¡å¼ API å‚è€ƒï¼ˆå®éªŒç‰ˆï¼‰ React 18 Noteï¼ˆè§†é¢‘å¯ä» 5:10 å¼€å§‹çœ‹ï¼‰ Streaming Server Rendering with Suspenseï¼ˆè§†é¢‘ï¼‰ Server-Componentsï¼ˆreact å›¢é˜Ÿ github ä»“åº“ï¼‰ React 18 ä¹‹çŠ¶æ€æ‰¹å¤„ç† React 18 çš„æ–°æ”¹è¿›åŠŸèƒ½ React 18 æ–°ç‰¹æ€§ä¹‹ useId è¯¦ç»†è§£è¯» ç»™å¥³æœ‹å‹è®² React18 æ–°ç‰¹æ€§ï¼šAutomatic batching useTranstion å’Œ useDeferredValue åŸç† React 18 Concurrent ä¹‹ useDeferredValue&lt;è¯‘&gt; çœŸå®ä¸–ç•Œç¤ºä¾‹ï¼šä¸ºæ…¢é€Ÿæ¸²æŸ“æ·»åŠ  startTransition React 18 æ–°ç‰¹æ€§ useTransition React 18 Concurrent ä¹‹ startTransition&lt;è¯‘&gt; React 18 New Feature: startTransition React18 å¼•å…¥äº†æ–° Hook: useId ï¼Œç”¨äºç”Ÿæˆå”¯ä¸€ id","categories":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/categories/React/"}],"tags":[{"name":"ç‰¹æ€§ä»‹ç»","slug":"ç‰¹æ€§ä»‹ç»","permalink":"https://monocy.gitee.io/tags/ç‰¹æ€§ä»‹ç»/"},{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/tags/React/"}]},{"title":"æ·±å…¥ç†è§£ Promise","slug":"æ·±å…¥ç†è§£-Promise","date":"2021-09-09T14:23:50.000Z","updated":"2022-07-26T13:13:53.386Z","comments":true,"path":"2021/09/09/æ·±å…¥ç†è§£-Promise/","link":"","permalink":"https://monocy.gitee.io/2021/09/09/æ·±å…¥ç†è§£-Promise/","excerpt":"å‰è¨€å¯¹äºå‰ç«¯å¼€å‘è€…ä»¬æ¥è¯´ï¼ŒES6 çš„å­¦ä¹ å·²ç»æˆä¸ºå¿…ç„¶ï¼Œå…¶ä¸­çš„ Promise æ›´æ˜¯é¢‘ç¹å‡ºæ²¡äºå„å¤§é¢è¯•é¢˜ï¼Œå› æ­¤äº†è§£ Promise å·²ç»ä¸èƒ½ç®€ç®€å•å•çš„ä¼šç”¨ï¼Œæ›´éœ€è¦æ·±å…¥åŸç†ã€‚ã€ŠES6 å…¥é—¨æ•™ç¨‹ã€‹å…¶ä¸­å¯¹ Promise çš„è®²è§£å·²ç»èƒ½æ»¡è¶³ä¸šåŠ¡åœºæ™¯çš„éœ€è¦ï¼Œæ¥æºå’ŒåŸºç¡€ä½¿ç”¨æ­¤ç¯‡å°±ä¸åšèµ˜è¿°ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹ Promise çš„ä¸€äº›è¾¹è§’çŸ¥è¯†å’Œæˆ‘çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šã€‚","text":"å‰è¨€å¯¹äºå‰ç«¯å¼€å‘è€…ä»¬æ¥è¯´ï¼ŒES6 çš„å­¦ä¹ å·²ç»æˆä¸ºå¿…ç„¶ï¼Œå…¶ä¸­çš„ Promise æ›´æ˜¯é¢‘ç¹å‡ºæ²¡äºå„å¤§é¢è¯•é¢˜ï¼Œå› æ­¤äº†è§£ Promise å·²ç»ä¸èƒ½ç®€ç®€å•å•çš„ä¼šç”¨ï¼Œæ›´éœ€è¦æ·±å…¥åŸç†ã€‚ã€ŠES6 å…¥é—¨æ•™ç¨‹ã€‹å…¶ä¸­å¯¹ Promise çš„è®²è§£å·²ç»èƒ½æ»¡è¶³ä¸šåŠ¡åœºæ™¯çš„éœ€è¦ï¼Œæ¥æºå’ŒåŸºç¡€ä½¿ç”¨æ­¤ç¯‡å°±ä¸åšèµ˜è¿°ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹ Promise çš„ä¸€äº›è¾¹è§’çŸ¥è¯†å’Œæˆ‘çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šã€‚ äº‹ä»¶å¾ªç¯æ·±å…¥äº†è§£ Promise ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ JavaScript çš„â€œäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰â€æœºåˆ¶æœ‰ä¸€å®šçš„äº†è§£ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯â€œäº‹ä»¶å¾ªç¯â€å‘¢ï¼Ÿè¿™ä¸ªå¦‚æœç»†è¯´çš„è¯åˆèƒ½å¼€ä¸€ä¸ªç³»åˆ—ï¼Œè¿™é‡Œåªç®€å•çš„æè¿°ä¸€ä¸‹ã€‚ åœ¨ JavaScript ä¸­ä»»åŠ¡åˆ†ä¸ºä¸¤ç§ï¼šå®ä»»åŠ¡ï¼ˆTaskï¼‰ã€å¾®ä»»åŠ¡ï¼ˆMicroTaskï¼‰ã€‚åœ¨ä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼ŒåŒæ­¥ä»»åŠ¡ä¼šç›´æ¥è¿è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡åˆ™ä¼šæ ¹æ®å…¶ç±»å‹åˆ†åˆ«è¿›å…¥â€œå®ä»»åŠ¡é˜Ÿåˆ—â€å’Œâ€œå¾®ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œåœ¨åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå…ˆæ¸…ç©ºâ€œå¾®ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œç„¶åå†æ¸…ç©ºâ€œå®ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œå…¶å¤§è‡´çš„è¿è¡Œå›¾å¦‚ä¸‹ï¼š âš ï¸ æ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯æŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œä½†åŒæ ·ä¹Ÿå­˜åœ¨ä¸€äº›â€œæ’é˜Ÿâ€æ‰§è¡Œçš„ç°è±¡ï¼Œç‰¹åˆ«æ˜¯ä¸¤å¼‚æ­¥ä»»åŠ¡åŒæ—¶æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œå› å¤„ç†æ—¶é—´çš„ä¸åŒå¯èƒ½ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚ ã€å›¾ç‰‡å¼•ç”¨è‡ªåšå®¢ï¼šhttps://www.cnblogs.com/weiyongchao/p/13766429.htmlã€ æ¡ˆä¾‹ç®€æäº†è§£äº†â€œäº‹ä»¶å¾ªç¯â€åï¼Œæˆ‘ä»¬åŸºæœ¬æ˜ç™½äº† JavaScript ä»£ç çš„æ‰§è¡Œæœºåˆ¶ï¼ŒPromise åœ¨å…¶ä¸­æ‰®æ¼”çš„æ˜¯ä¸€ä¸ªâ€œå¾®ä»»åŠ¡â€ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬åˆ†æå‡ ä¸ªæ¡ˆä¾‹æ¥ä¸€æ­¥æ­¥äº†è§£ Promiseã€‚ Promise çŠ¶æ€ä¼—æ‰€å‘¨çŸ¥ï¼ŒPromise æœ‰ä¸‰ç§çŠ¶æ€ï¼špendingã€fulfilled å’Œ rejectedï¼Œä»£ç å°è¯•å¦‚ä¸‹ï¼š 123456789101112131415const p = new Promise((res, rej) =&gt; &#123; setTimeout(() =&gt; &#123; res(); &#125;, 3000);&#125;);console.log(p);console.log(Promise.resolve());console.log(Promise.reject());// æµè§ˆå™¨ä¸­è¿è¡Œç»“æœï¼š// Promise &#123; &lt;pending&gt; &#125;// Promise &#123;&lt;fulfilled&gt;: undefined&#125;// Promise &#123;&#123;&lt;rejected&gt;: undefined&#125;&#125; Promise å†…çš„æ‰§è¡Œå‡½æ•°æ˜¯åŒæ­¥ä»»åŠ¡å¾ˆå¤šæ–°æ‰‹å®¹æ˜“å¼„æ··çš„éƒ¨åˆ†æ˜¯â€œPromise æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œå› æ­¤å®ƒåˆå§‹åŒ–ä¼ å…¥çš„æ‰§è¡Œå‡½æ•°å±äºå¼‚æ­¥ä»»åŠ¡â€ï¼ŒåŒæ ·ç”¨ä»£ç æ¥è§£é‡Šï¼š 12345678910111213console.log('start');const p = new Promise((res, rej) =&gt; &#123; console.log('working...'); res();&#125;);console.log('end');// æµè§ˆå™¨ä¸­çš„è¿è¡Œç»“æœï¼š// start// working...// end Promise çŠ¶æ€ä¸å¯é€†é™¤äº†æœ€å¼€å§‹çš„ pending æ€å¤–ï¼Œä¸€æ—¦è½¬å˜ä¸º fulfilled æˆ– rejected çŠ¶æ€åï¼Œå…¶çŠ¶æ€å°±ä¸ä¼šå†æ”¹å˜äº†ï¼š 123456789const p = new Promise((res, rej) =&gt; &#123; res(1); rej(2);&#125;);console.log(p);// æµè§ˆå™¨ä¸­çš„è¿è¡Œç»“æœï¼š// Promise &#123;&lt;fulfilled&gt;: 1&#125; then é“¾è¿”å›çš„æ˜¯æ–° Promise å¯¹è±¡then é“¾ä¸­ï¼Œæ— è®ºä½ è¿”å›ä»€ä¹ˆå†…å®¹ï¼Œå®ƒéƒ½ä¼šç»™ä½ ç»™ä½ åŒ…è£…ä¸€ä¸ª Promise çš„å¤–å£³ï¼š 12345678910111213141516171819const p = new Promise((res, rej) =&gt; &#123; res();&#125;);console.log(p.then());console.log(p.then(() =&gt; 1));console.log( p.then( () =&gt; new Promise((res, rej) =&gt; &#123; res(); &#125;), ),);// æµè§ˆå™¨ä¸­çš„è¿è¡Œç»“æœï¼š// Promise &#123;&lt;pending&gt;&#125;// Promise &#123;&lt;pending&gt;&#125;// Promise &#123;&lt;pending&gt;&#125; then é“¾æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œç¬¬äºŒä¸ª onReject å‡½æ•°å¦‚æœæœ‰è®¾ç½®ï¼Œé‚£ä¹ˆå…¶åç»­ä¼šè¿”å›è‡³ fulfilled çŠ¶æ€é“¾ï¼š 1234567891011121314151617new Promise((res, rej) =&gt; &#123; rej(1);&#125;) .then( res =&gt; &#123;&#125;, rej =&gt; &#123; console.log('err', rej); // return 2 &#125;, ) .then(res =&gt; &#123; console.log('success', res); &#125;);// æµè§ˆå™¨ä¸­çš„è¿è¡Œç»“æœï¼š// err 1// success undefined âš ï¸ æ³¨æ„ï¼šåœ¨æ—¥å¸¸å¼€å‘ä¸­ä¸è¦è®¾ç½® then é“¾çš„ onReject å‡½æ•°ï¼Œè¯´ä¸å®šé‚£å¤©å°±å› ä¸ºå¸¸è§„æ€ç»´è€Œè¢«å®ƒç»™å‘äº† (Â´âˆ‡ ï½€)ã€‚ then é“¾æ˜¯å¯é€ä¼ çš„å½“ then é“¾å†…çš„å†…å®¹ä¸ºéå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå…¶ä¼šå°†ä¸Šä¸€ä¸ª Promise çš„ç»“æœå’ŒçŠ¶æ€ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‡½æ•°ï¼š 1234567Promise.resolve('start') .then(console.log('pass')) .then(res =&gt; console.log(res));// æµè§ˆå™¨ä¸­çš„è¿è¡Œç»“æœï¼š// pass// start ã€å°è´´å£«ã€‘å…¶å®å·¥ä½œä¸­ç»å¸¸ä¼šç”¨åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œæ¯”å¦‚ then é“¾é»˜è®¤ä¸å†™ç¬¬äºŒä¸ªå‡½æ•°ï¼Œä»è€Œä½¿ç”¨ catch åœ¨ then é“¾æœ«å°¾å•ç‹¬å¯¹é”™è¯¯è¿›è¡Œå¤„ç†ï¼Œå½“ç„¶ catch çš„è¿”å›å€¼é»˜è®¤ä¹Ÿæ˜¯ fulfilled çŠ¶æ€å“Ÿã€‚ ã€æ‹“å±•ã€‘finally æ•ˆæœä¸â€œthen é“¾é€ä¼ â€ä¸€è‡´ï¼Œä»…å¤šäº†å†…éƒ¨å‡½æ•°æ‰§è¡Œï¼Œæ„Ÿå…´è¶£çš„å¯è‡ªè¡Œå°è¯•ä¸€ä¸‹ï½ æ¡ˆä¾‹æ·±å…¥åµŒå¥— Promiseï¼Œthen é“¾è¿”å›é Promise ç»“æœåˆšåˆšèŠçš„éƒ½æ˜¯è¾ƒä¸ºåŸºç¡€çš„ä¾‹å­ï¼Œæƒ³è¦æ‹æ¸… Promise çš„çŸ¥è¯†å¯èƒ½è¿˜éœ€è¦ä¸€äº›ç¨æœ‰éš¾åº¦çš„æ¡ˆä¾‹ï¼Œè¿™æ ·æ‰èƒ½åŠ æ·±å¯¹å®ƒçš„å°è±¡ã€‚é‚£ä¹ˆçœ‹ä¸€ä¸‹è¿™ä¸ªåµŒå¥— Promise çš„ä¾‹å­ï¼Œå¼„æ‡‚äº†å®ƒï¼ŒåŸºæœ¬ä¸Šå°±èƒ½å¯¹ Promise æœ‰ä¸€å®šçš„ç†è§£äº†ï¼Œä¸ä¼šè¢«å¤§å¤šæ•°çš„é¢è¯•é¢˜ç»™éš¾ä½ï¼š 1234567891011121314151617181920Promise.resolve() .then(() =&gt; &#123; console.log('1-1'); new Promise((res, rej) =&gt; &#123; console.log('1-2'); res(); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;) .then(() =&gt; &#123; console.log('1-4'); &#125;); return 'Anything except promise func, also no \"return\"'; &#125;) .then(() =&gt; &#123; console.log('2-1'); &#125;); è¿™é‡Œæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª then é“¾å†…è°ƒç”¨äº†ä¸€ä¸ªæ–°çš„ Promise æ–¹æ³•ï¼Œä½†æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿è¡Œçš„ç»“æœä¼šæ˜¯é¡ºåºæ‰§è¡Œå—ï¼Ÿåœ¨æµè§ˆå™¨ä¸Šè¿è¡Œå¾—åˆ°çš„ç»“æœä¸ºï¼š 123451-11-21-32-11-4 å¯ä»¥çœ‹åˆ° â€œ2-1â€ åœ¨ â€œ1-4â€ ä¹‹å‰æ‰“å°äº†ï¼Œå¯è¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€æ­¥æ­¥åˆ†ææ¥çœ‹ï¼š ã€Step1ã€‘then é“¾å…ˆæ‰“å° 1-1ï¼Œç„¶åè¿›å…¥ Promise å‡½æ•°å†…ï¼› ã€Step2ã€‘æ‰“å° Promise å†…éƒ¨çš„ 1-2ï¼Œæ‰§è¡Œ resolve å‡½æ•°ï¼Œå¹¶å°†ç´§æ¥ç€çš„ then é“¾å­˜å…¥å¾®ä»»åŠ¡äº‹ä»¶é˜Ÿåˆ—ï¼› ã€Step3ã€‘è·³å‡º Promise å¹¶è¿è¡Œè‡³ then é“¾ç»“å°¾ï¼Œæ— è¿”å›å€¼ï¼Œé»˜è®¤ resolve å¤„ç†å¹¶å°†ä¸‹ä¸€ä¸ª then é“¾å­˜å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼› ã€Step4ã€‘æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¿©å¾®ä»»åŠ¡ï¼Œä¾æ¬¡æ‰§è¡Œå¤„ç†ï¼Œåç»­å†…å®¹å°±æ˜¯ä¾æ¬¡æ‰“å° 1-3 å’Œ 2-1 ï¼Œæœ€åå†æ‰“å° 1-4 äº†ï¼› å¾®ä»»åŠ¡é˜Ÿåˆ—å†…å®¹å˜åŒ–å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738/** æ¯æ­¥å¾®ä»»åŠ¡é˜Ÿåˆ—å†…å®¹ */ã€Step 1ã€‘[ then(() =&gt; &#123; console.log('1-1'); new Promise((res, rej) =&gt; &#123; console.log('1-2'); res(); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;) .then(() =&gt; &#123; console.log('1-4'); &#125;); &#125;).then(() =&gt; &#123; console.log('2-1'); &#125;),]ã€Step2ã€‘[ (then(() =&gt; &#123; console.log('1-3'); &#125;).then(() =&gt; &#123; console.log('1-4'); &#125;), then(() =&gt; &#123; console.log('2-1'); &#125;))]ã€Step3ã€‘[ then(() =&gt; &#123; console.log('1-4'); &#125;)]; ä»æ­¤ç»“æœæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œåœ¨æ— è¿”å›å€¼çš„æƒ…å†µä¸‹æœ€å¥½ä¸è¦åœ¨å†…éƒ¨å¤„ç†åˆ«çš„ Promise å‡½æ•°å¹¶æ¥ä¸Š then é“¾æ¥è¾¾åˆ°æ­¥éª¤æ§åˆ¶ï¼Œå¾ˆå®¹æ˜“ä¼šå‡ºç°ä¸€äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ã€‚åœ¨ä¸šåŠ¡ä¸­ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼Œå¦‚ï¼š 1234567891011121314151617181920// åŠ å…¥ http æ˜¯å°è£…å¥½çš„ Axios æ–‡ä»¶const initFunc = async () =&gt; &#123; // ç­‰åˆå§‹åŒ– await http.post('getInfo').then(info =&gt; &#123; const &#123; userId, userRightIds &#125; = info; // è·å–ç”¨æˆ·ä¿¡æ¯ http.post('getUserInfo', &#123; userId &#125;).then(() =&gt; &#123; /* å¤„ç†ç”¨æˆ·ä¿¡æ¯ */ &#125;); // è·å–ç”¨æˆ·ä¿¡æ¯ http.post('getRightList', &#123; userRightIds &#125;).then(() =&gt; &#123; /* å¤„ç†æƒé™ä¿¡æ¯ */ &#125;); &#125;); // åˆå§‹åŒ–åå¤„ç†åˆ«çš„äº‹ // ...ï¼ˆç”µè„‘å‰ï¼Œä¸ºä»€ä¹ˆæ²¡æ‹¿åˆ°æƒé™æ•°æ®å’Œç”¨æˆ·ä¿¡æ¯ï¼Ÿï¼Ÿï¼Ÿå¼„ä¸ª setTimeout å§ï¼‰&#125;&#125;; æ¨¡æ‹Ÿè¯·æ±‚çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021async function test() &#123; let testVal = 1; await Promise.resolve().then(() =&gt; &#123; // åŠ é•¿ then é“¾æ¨¡æ‹Ÿè¯·æ±‚çš„è€—æ—¶ Promise.resolve() .then() .then() .then() .then() .then() .then(() =&gt; &#123; testVal = 2; &#125;); &#125;); console.log(testVal);&#125;test();// ç»“æœæ˜¯ï¼š1 æ‰€ä»¥ï¼Œä¸šåŠ¡ä»£ç å†…å°½é‡ä¸è¦åµŒå¥—å†™ Promiseï¼Œç”¨ async/await æ‹†æ‹†ï¼Œæˆ–è€…æ¯ä¸ªå†…éƒ¨ Promise å‡½æ•°åŠ ä¸Šå¯¹åº”çš„ async/await æ–¹æ³•ä»¤å…¶æ‰§è¡Œå®Œå†åšå…¶å®ƒæ“ä½œï¼Œè¿™æ ·å°±ä¸ä¼šå†™å‡º bug äº†ã€‚ åµŒå¥— Promiseï¼Œthen é“¾è¿”å› Promise ç»“æœå½“ç„¶ï¼ŒåµŒå¥— Promise ä¹Ÿæ˜¯æœ‰å‘å­˜åœ¨çš„ï¼Œè¯´ä¸å®šé‚£å¤©é¢è¯•ä¹Ÿä¼šé¢åˆ°ï¼Œå½“ç„¶é¡¹ç›®å†…æ˜¯ä¸ä¼šå‡ºç°è¿™ç§å†™æ³•çš„ï¼ˆæœ‰çš„è¯é‚£ä¹ˆéœ€è¦é—®é—®æ˜¯è°é¢ä»–è¿›æ¥çš„ï¼ŒåŒæ—¶è¿˜å¾—è€ƒè™‘è€ƒè™‘æ˜¯å¦ç»§ç»­å’Œä»–å…±äº‹ï¼‰ï¼Œè¿”å› Promise ç»“æœçš„ä¾‹å­å’±å…ˆä¸çœ‹ï¼Œå…ˆåˆ†è§£ä¸€ä¸‹ï¼Œçœ‹å¦‚ä¸‹ä¾‹å­ï¼š 123456789101112131415161718192021Promise.resolve() .then(() =&gt; &#123; console.log('1-1'); &#125;) .then(() =&gt; &#123; console.log('1-2'); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;);Promise.resolve() .then(() =&gt; &#123; console.log('2-1'); &#125;) .then(() =&gt; &#123; console.log('2-2'); &#125;) .then(() =&gt; &#123; console.log('2-3'); &#125;); // æµè§ˆå™¨ç»“æœä¸ºï¼ˆå°±ä¸æ¢è¡Œè¾“å‡ºäº†ï¼‰ï¼š// 1-1 2-1 1-2 2-2 1-3 2-3 è¿™ç»“æœæƒ³å¿…éš¾ä¸å€’å¤§å®¶ï¼Œå¯ä»¥å¾ˆè½»æ¾çš„è§£ç­”å‡ºæ¥ï¼Œé‚£ä¹ˆå†ä»£å…¥åµŒå¥—çš„ä¾‹å­çœ‹çœ‹ï¼Œåº”è¯¥å°±å¥½åˆ†æäº†ï¼š 1234567891011121314151617181920212223242526272829303132Promise.resolve() .then(() =&gt; &#123; // åˆ«å: then1 Promise.resolve() .then(() =&gt; &#123; console.log('1-1'); &#125;) .then(() =&gt; &#123; console.log('1-2'); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;); // åˆ«å then2 return Promise.resolve() .then(() =&gt; &#123; console.log('2-1'); &#125;) .then(() =&gt; &#123; console.log('2-2'); &#125;) .then(() =&gt; &#123; console.log('2-3'); &#125;); &#125;) // åˆ«å then3 .then(() =&gt; &#123; console.log('3-1'); &#125;);// æµè§ˆå™¨ç»“æœä¸ºï¼ˆå°±ä¸æ¢è¡Œè¾“å‡ºäº†ï¼‰ï¼š// 1-1 2-1 1-2 2-2 1-3 2-3 3-1 å› ä¸º then3 ä¾èµ– then2 çš„çŠ¶æ€æ”¹å˜ï¼Œè€Œ then2 åˆéœ€è¦å’Œ then1 æŠ¢å¾®ä»»åŠ¡é˜Ÿåˆ—çš„èµ„æºï¼Œå› æ­¤è¿”å›çš„ç»“æœå°±æ˜¯äº¤æ›¿çš„ç»“æœï¼Œ3-1 æœ€åæ‰“å°ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬æŠŠ then2 é“¾ç²¾ç®€ä¸€ä¸‹ï¼Œåªç•™ä¸€ä¸ª 2-1ï¼ŒæŒ‰é“ç†æ¥è¯´ 3-1 åº”è¯¥åœ¨ 1-2 ä¹‹åæ‰“å°çš„ï¼Œä½†å®é™…ç»“æœå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425Promise.resolve() .then(() =&gt; &#123; // åˆ«å: then1 Promise.resolve() .then(() =&gt; &#123; console.log('1-1'); &#125;) .then(() =&gt; &#123; console.log('1-2'); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;); // åˆ«å then2 return Promise.resolve().then(() =&gt; &#123; console.log('2-1'); &#125;); &#125;) // åˆ«å then3 .then(() =&gt; &#123; console.log('3-1'); &#125;);// æµè§ˆå™¨ç»“æœä¸ºï¼ˆå°±ä¸æ¢è¡Œè¾“å‡ºäº†ï¼‰ï¼š// 1-1 2-1 1-2 1-3 3-1 ä¸ºä»€ä¹ˆå’Œé¢„æµ‹ç»“æœä¸ä¸€æ ·äº†å‘¢ï¼Ÿå…¶å®æ­¤é—®é¢˜çš„é—®é¢˜ç‚¹å¹¶ä¸åœ¨ Promise èº«ä¸Šï¼Œå¬æˆ‘ä¸€ä¸€åˆ†æã€‚ é¦–å…ˆï¼Œåœ¨ then2 æ‰“å° 2-1 åï¼Œå…¶ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ƒçš„è¿”å›å€¼ä¸º undefined ç„¶å then1 æ‰“å° 1-2 å¹¶å°† 1-3 æ‰€åœ¨ then é“¾ä¼ å…¥ ç´§æ¥ç€ è¿™ä¸ªè¿”å›å€¼ä¸º undefiend çš„ Promise å¯¹è±¡æ‰§è¡Œï¼Œç„¶åè¿”å›ä¸€ä¸ª undefiend å€¼ï¼Œè¿™å°±å›åˆ°ä¸Šé¢è¿”å›å€¼ä¸ºé Promise çš„æƒ…å½¢äº†ï¼Œç´§æ¥ç€ then3 å°±æ”¾å…¥äº†å¾®ä»»åŠ¡é˜Ÿåˆ— åœ¨çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç° then3 å°±åœ¨ then1 é‚£æœ€åä¸€ä¸ªé“¾ä¹‹åï¼Œé‚£ç»“æœå°±å‘¼ä¹‹æ¬²å‡ºäº†ã€‚ ä»£ç è§£å¦‚ä¸‹ï¼š 12345678910111213141516171819202122ã€Step1ã€‘[ // then1 then(() =&gt; &#123; console.log('1-1'); &#125;) .then(() =&gt; &#123; console.log('1-2'); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;), // then2 çš„ then é“¾ä¼šåŒ…è£¹ Promise å¯¹è±¡ï¼Œå› ä¸º then é“¾ä¸è®º return çš„æ˜¯ä»€ä¹ˆï¼Œå®ƒéƒ½ä¼šè¿”å›ä¸€ä¸ª Promise Promise.resolve(then(() =&gt; &#123; console.log('2-1'); &#125;))]ã€Step2ã€‘[ // then1 then(() =&gt; &#123; console.log('1-2'); &#125;) .then(() =&gt; &#123; console.log('1-3'); &#125;), // then2 Promise.resolve(undefined)]ã€Step3ã€‘[ then(() =&gt; &#123; console.log('1-3'); &#125;), then(() =&gt; &#123; console.log('3-1'); &#125;)] æ­¤éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œthen é“¾å¤„ç†è¿”å›ç»“æœä¸º Promise ç±»å‹æ—¶ï¼Œå…¶ä¼šå¤šä¸€ä¸ª Promise.resolve(undefined) çš„éšè—é“¾ã€‚å½“ç„¶ï¼Œå¦‚æœ then2 ç›´æ¥è¿”å›ä¸€ä¸ª Promise.resolve() å…¶ç»“æœä»ç„¶æ˜¯ä¸€æ ·çš„ï¼Œè¿™å°±æ¶‰åŠåˆ°ä»»åŠ¡é˜Ÿåˆ—çš„æ’é˜Ÿé—®é¢˜äº†ï¼Œå› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œè¿™å’ŒåŸæ¥çš„ Promise é“¾è¿˜æ˜¯æœ‰ä¸€ç‚¹åŒºåˆ«çš„ï¼Œè¿™é‡Œåªéœ€è¦è®°ä½ï¼Œæœ€å¤šå·®ä¸¤æ¡é“¾çš„ç»“æœå°±è¡Œï¼Œæ²¡æœ‰æ·±ç©¶çš„å¿…è¦ï¼ˆå®é™…é¡¹ç›®ä¹Ÿä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼‰ å‚è€ƒæ–‡ç«  Promise A+ è§„èŒƒ Promise æ³¨å†Œå¾®ä»»åŠ¡å’Œæ‰§è¡Œè¿‡ç¨‹ ä¸€æ¬¡å¼„æ‡‚ Event Loopï¼ˆå½»åº•è§£å†³æ­¤ç±»é¢è¯•é—®é¢˜ï¼‰ åŠ¨å›¾å­¦ JavaScript ä¹‹ï¼šäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ ã€å›¾è§£ã€‘æµè§ˆå™¨åŠ nodeJS ä¸­çš„ EventLoop äº‹ä»¶å¾ªç¯æœºåˆ¶","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"Promise","slug":"Promise","permalink":"https://monocy.gitee.io/tags/Promise/"}]},{"title":"Node ç®€å•è„šæ‰‹æ¶æ„å»º","slug":"Node-ç®€å•è„šæ‰‹æ¶æ„å»º","date":"2021-06-30T15:13:15.000Z","updated":"2022-07-26T13:18:06.618Z","comments":true,"path":"2021/06/30/Node-ç®€å•è„šæ‰‹æ¶æ„å»º/","link":"","permalink":"https://monocy.gitee.io/2021/06/30/Node-ç®€å•è„šæ‰‹æ¶æ„å»º/","excerpt":"å‰è¨€è¿‘æœŸç»„å†…æœ‰è„šæ‰‹æ¶ç›¸å…³é¡¹ç›®çš„å¼€å‘æ­å»ºï¼Œå› ä¸ºå…ˆå‰ç”¨è¿‡ vue-cliã€create-react-app ç­‰ç›¸å…³è„šæ‰‹æ¶å·¥å…·ï¼Œå¯¹å…¶å®ç°çš„æ–¹å¼è¿˜æ˜¯æŒºæ„Ÿå…´è¶£çš„ï¼Œå› æ­¤è¶æ­¤æœºä¼šå­¦ä¹ äº†è§£ä¸€ç•ªç»„å†…çš„è„šæ‰‹æ¶å·¥å…·çš„æ­å»ºï¼Œå†™ç¯‡æ–‡ç« å°è®°ä¸€ä¸‹ï½ã€‚","text":"å‰è¨€è¿‘æœŸç»„å†…æœ‰è„šæ‰‹æ¶ç›¸å…³é¡¹ç›®çš„å¼€å‘æ­å»ºï¼Œå› ä¸ºå…ˆå‰ç”¨è¿‡ vue-cliã€create-react-app ç­‰ç›¸å…³è„šæ‰‹æ¶å·¥å…·ï¼Œå¯¹å…¶å®ç°çš„æ–¹å¼è¿˜æ˜¯æŒºæ„Ÿå…´è¶£çš„ï¼Œå› æ­¤è¶æ­¤æœºä¼šå­¦ä¹ äº†è§£ä¸€ç•ªç»„å†…çš„è„šæ‰‹æ¶å·¥å…·çš„æ­å»ºï¼Œå†™ç¯‡æ–‡ç« å°è®°ä¸€ä¸‹ï½ã€‚ æ­å»ºå‰çš„å‡†å¤‡è„šæ‰‹æ¶è¿ä½œåŸç†æˆ‘ä»¬æ—¶å¸¸ä¼šåœ¨ ~/.bashrc å†…æ³¨å†Œè‡ªå·±çš„ alias å‘½ä»¤ï¼Œå¦‚ï¼š 1alias goCode=\"cd ~/Code\" ç„¶å source ~/.bashrc ç”Ÿæ•ˆåï¼Œç›´æ¥åœ¨æ§åˆ¶å°è¾“å…¥ goCode å°±èƒ½å¤Ÿè·³è½¬è‡³å¯¹åº”æ–‡ä»¶å¤¹å†…äº†ã€‚è¿™ä¸ªæŒ‡ä»¤å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªè½¯é“¾ï¼Œå‘Šè¯‰ç³»ç»Ÿæˆ‘è°ƒç”¨å®ƒæ—¶ï¼Œè§¦å‘çš„å°±æ˜¯å…¶è®°å½•çš„ä»£ç ã€‚ Node è„šæ‰‹æ¶çš„è¿è¡Œå…¶å®ä¹Ÿå¾ˆç±»ä¼¼ï¼Œé¦–å…ˆéœ€è¦äº†è§£çš„ä¸€ç‚¹å°±æ˜¯ package.json çš„ bin å­—æ®µï¼Œåœ¨å®‰è£…å¯¹åº”çš„ npm åŒ…æ—¶ï¼Œå®ƒä¼šå‘Šè¯‰ç³»ç»Ÿ bin å†…æ³¨å†Œçš„æŒ‡ä»¤å°±æ˜¯è°ƒç”¨æˆ‘è¿™ä¸ªåŒ…çš„æŒ‡ä»¤ï¼ˆç›¸å½“äºè½¯é“¾ï¼‰ï¼Œåœ¨å‘½ä»¤è¡Œä½¿ç”¨å¯¹åº”å­—æ®µæ—¶å°±èƒ½å¤Ÿè°ƒç”¨æ­¤åŒ…å†…çš„å‘½ä»¤äº†ã€‚ å¼€å‘éœ€è¦çš„åŒ…äº¤äº’åŒ… commanderï¼šå¯ä»¥è‡ªåŠ¨çš„è§£æå‘½ä»¤å’Œå‚æ•°ï¼Œç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼› inquirerï¼šé€šç”¨çš„å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢é›†åˆï¼Œç”¨äºå’Œç”¨æˆ·è¿›è¡Œäº¤äº’ï¼› æ ·å¼åŒ… chalkï¼šå¯ä»¥ç»™ç»ˆç«¯çš„å­—ä½“åŠ ä¸Šé¢œè‰²ï¼› cfontsï¼šå¯ä»¥æ·»åŠ ç‚«é…·çš„æ ‡é¢˜ï¼› oraï¼šä¸‹è½½è¿‡ç¨‹ä¹…çš„è¯ï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºä¸‹è½½ä¸­çš„åŠ¨ç”»æ•ˆæœï¼› æ¨¡æ¿åŒ… download-git-repoï¼šä¸‹è½½å¹¶æå– git ä»“åº“ï¼Œç”¨äºä¸‹è½½é¡¹ç›®æ¨¡æ¿ï¼› ejsï¼šæ¨¡æ¿å¼•æ“ï¼Œå°†ç”¨æˆ·æäº¤çš„ä¿¡æ¯åŠ¨æ€å¡«å……åˆ°æ–‡ä»¶ä¸­ï¼› é¡¹ç›®æ­å»ºåˆå§‹åŒ–ä»“åº“ç»“æ„åœ¨å‡†å¤‡æ­¥éª¤å·²ç»è¯´è¿‡ï¼Œæ­¤éœ€è¦é…åˆä½¿ç”¨åˆ° package.json çš„ bin å­—æ®µï¼Œå‚è€ƒ @vue/cli çš„é¡¹ç›®ç»“æ„ï¼Œåˆå§‹åŒ–é¡¹ç›®çš„ç»“æ„å¦‚ä¸‹ï¼š ç„¶ååœ¨è¯¥é¡¹ç›®å†…æ‰§è¡Œ npm link æŒ‚è½½åœ¨ç³»ç»Ÿå…¨å±€çš„ npm åŒ…åˆ—è¡¨å†…ï¼Œå°±èƒ½å¤Ÿè°ƒç”¨ myInit æŒ‡ä»¤äº†ï¼ˆæ§åˆ¶å°ä¼šæ‰“å°å‡º â€œinitâ€ å†…å®¹ï¼‰ã€‚ å–æ¶ˆæŒ‚åœ¨å‘½ä»¤ä¸ºï¼š npm unlinkï¼ˆä»ç„¶æ˜¯é¡¹ç›®å†…ä½¿ç”¨ï¼‰ æ·»åŠ äº¤äº’ç°åœ¨èƒ½å¤Ÿè°ƒç”¨è‡ªå·±åˆ›å»ºçš„æŒ‡ä»¤äº†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦æ·»åŠ ä¸€äº›äº¤äº’ä¿¡æ¯ï¼Œæ¯”å¦‚æœ€ä¸ºåŸºç¡€çš„ myInit --help æŒ‡ä»¤ï¼Œè·å–å…¨é‡æŒ‡ä»¤åˆ—è¡¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆéœ€è¦å®‰è£… commander åŒ…æ¥å¤„ç†ç”¨æˆ·æç¤ºã€‚ æ­¤åŒ…çš„ä½¿ç”¨æ–¹å¼å¾ˆç®€å•ï¼ŒæŒ‰ç…§ä¸€ä¸‹æ¨¡æ¿å¼€å‘å³å¯ï¼š 1234567891011121314151617181920212223242526272829303132/** åˆå§‹åŒ–å®ä¾‹ */const &#123; Command &#125; = require('commander');const program = new Command();/** ä¿®æ”¹é€šç”¨é…ç½® */// Head Line Tipsprogram.name('myInit').usage('&lt;command&gt; [options]');// Version Optionsconst currentVersion = require('../package.json').version;program.version(currentVersion, '-v, --version', 'output the current version');// Help Optionsprogram.helpOption('-h, --help', 'output usage information');/** æ·»åŠ è‡ªå®šä¹‰ Command æŒ‡ä»¤ */program .command('create &lt;projectName&gt; [opts]') .description('Create a program use remote git model') .option('-i, --inhert', 'create an existed project') .action((name, opts) =&gt; &#123; console.log(`The project name is \"$&#123;name&#125;\", and the option is $&#123;opts&#125;`); &#125;);/** è§¦å‘è°ƒç”¨å’Œé»˜è®¤ä¿¡æ¯æç¤º */// Default value is \"process.argv\"program.parse();// None Matchif (!program.args.length) &#123; program.help();&#125; å°†é€šç”¨é…ç½®éƒ¨åˆ†æŒ‰ç…§è‡ªå·±æ‰€éœ€é…ç½®å¥½åï¼Œåé¢åªéœ€è¦æ‰©å…… Command æŒ‡ä»¤å°±èƒ½å¤Ÿå®ç°æ§åˆ¶å°äº¤äº’çš„æ•ˆæœäº†ã€‚ æ·»åŠ é€‰é¡¹äº¤äº’å¦‚æœéœ€è¦åƒ @vue/cli åˆ›å»ºé¡¹ç›®çš„äº¤äº’é‚£æ ·ï¼Œæ·»åŠ å¯é€‰æ‹©çš„å†…å®¹ï¼Œä»…ä»…ä¾é  commander æ˜¯å®ç°ä¸äº†çš„ï¼Œè¿™æ—¶å€™éœ€è¦é…åˆä½¿ç”¨ inquirer æ¥åšåˆ°é¡µé¢äº¤äº’ã€‚ inquirer çš„ç¤ºä¾‹ä¹Ÿå¾ˆæ¸…æ™°æ˜äº†ï¼Œå¯ä»¥ç›´æ¥çœ‹ github æ–‡æ¡£ï¼Œå„ç§ç±»å‹å‡æœ‰æ‰€ä»‹ç»ï¼Œå¸¸ç”¨çš„ç±»å‹åŒ…æ‹¬ï¼šlistã€checkboxã€inputã€list ç­‰ã€‚å†™æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425const inquirer = require('inquirer');inquirer .prompt([ &#123; type: 'input', name: 'first_name', message: \"What's your first name\", &#125;, &#123; type: 'input', name: 'last_name', message: \"And what's your last name\", &#125;, &#123; type: 'list', name: 'sex', message: 'Are you a girl or boy', choices: ['boy', 'girl'], &#125;, ]) .then(answers =&gt; &#123; // ç»“æœï¼š &#123; first_name: '', last_name: '', sex: '' &#125; console.log(answers); &#125;); inqurer éƒ¨åˆ†çš„å†…å®¹ä¸€èˆ¬æ”¾åœ¨ Commander çš„ action çš„ç»“æœä¼šè°ƒéƒ¨åˆ†ï¼Œç”¨äºæ›´ç²¾ç¡®çš„å¤„ç†ã€‚ æ·»åŠ æ¨¡æ¿ä¸‹è½½æ–¹æ³•åœ¨äº¤äº’å®Œæˆåï¼Œå¯ä»¥åƒ @vue/cli é‚£æ ·ç›´æ¥ä»è¿œç¨‹å°†å¯¹åº”æ¨¡æ¿ç»™ä¸‹è½½ä¸‹æ¥ï¼Œå½“ç„¶ï¼Œä¸‹è½½ä¸‹æ¥çš„æ¨¡æ¿å¦‚æœèƒ½é…åˆå…ˆå‰çš„ inquirer åšè‡ªå®šä¹‰é…ç½®åˆ™ä¼šæ›´å¥½ï¼Œç®€å•å¼„çš„è¯ç›´æ¥æ‹·è´ä¸€ä¸ªæ¨¡æ¿ä»“åº“å°±å·®ä¸å¤šå®Œäº‹äº†ï¼Œæœ€å¤šå†è°ƒç”¨ä¸€ä¸‹ bash æŒ‡ä»¤åšä¸€ä¸‹åŒ…çš„å®‰è£…ï¼Œç®€åŒ–ä¸€ä¸‹ç”¨æˆ·æ“ä½œï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314// download-vue.jsconst download = require('download-git-repo');module.exports = () =&gt; &#123; return new Promise((res, rej) =&gt; &#123; download( 'kazehaiya/vue-typescript-components', 'repo/demo', function (err) &#123; err ? rej('ä¸‹è½½å¤±è´¥') : res('ä¸‹è½½æˆåŠŸ'); &#125;, ); &#125;);&#125;; ä¹‹ååœ¨ commander çš„ actions æ“ä½œä¸­è°ƒç”¨è¯¥æ–‡ä»¶å³å¯ã€‚ ä¼˜åŒ–æ ·å¼åŸºæœ¬çš„æ§åˆ¶å°äº¤äº’æŒ‰ç…§ä¸Šè¿°ä¸¤æ­¥èµ°åŸºæœ¬å°± OK äº†ï¼Œå‰©ä¸‹çš„å¦‚ï¼šæ§åˆ¶å°é¢œè‰²é…ç½®ã€æ ‡é¢˜é…ç½®ã€åŠ è½½ä¸­çŠ¶æ€å¤„ç† ç­‰æ ·å¼éƒ¨åˆ†å¯ä»¥æ…¢æ…¢ä¼˜åŒ–ï¼Œä»£ç å†…ç”¨çš„æ¯”è¾ƒå…¨çš„ä¾‹å­å¦‚ä¸‹ï¼š 123456789101112131415program .command('download') .description('Download Vue Template') .action(async () =&gt; &#123; const spinner = ora(); try &#123; spinner.start(chalk.blue('æ¨¡æ¿ä¸‹è½½ä¸­â€¦â€¦')); await require('../lib/download-vue')(); &#125; catch &#123; spinner.fail(chalk.red('ä¸‹è½½å¤±è´¥')); &#125; finally &#123; spinner.succeed(chalk.green('ä¸‹è½½å®Œæˆ')); &#125; &#125;); é€‚å½“çš„æ—¶å€™ä½¿ç”¨ chalk è°ƒä¸€ä¸‹æ§åˆ¶å°é¢œè‰²ï¼Œè®©è¾“å‡ºçš„å†…å®¹æ›´åŠ é²œæ˜ï¼Œç„¶åå¢åŠ ä¸€ä¸‹åŠ è½½æ•ˆæœï¼Œæ•´ä½“çš„ç”¨æˆ·ä½“éªŒå°±ä¸€ä¸‹å­ä¸Šæ¥äº†ã€‚æœ€åå¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥ç”¨ cfonts å¼„ä¸€ä¸ªç‚«é…·çš„æ ‡é¢˜ï¼Œå¯èƒ½ä¼šæœ‰ä¸ä¸€æ ·çš„æ„Ÿå—ï¼š ä»“åº“åœ°å€ gitee github å‚è€ƒæ–‡ç«  Package.json Commander.js Inquirer.js @vue/cli å‰ç«¯å¦‚ä½•æ­å»ºä¸€ä¸ªç®€å•çš„è„šæ‰‹æ¶ ä» 0 æ­å»ºä¸€ä¸ªè‡ªå·±çš„å‰ç«¯è„šæ‰‹æ¶ å‰ç«¯å¦‚ä½•æ­å»ºä¸€ä¸ªæˆç†Ÿçš„è„šæ‰‹æ¶","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"Node","slug":"Node","permalink":"https://monocy.gitee.io/tags/Node/"},{"name":"è„šæ‰‹æ¶","slug":"è„šæ‰‹æ¶","permalink":"https://monocy.gitee.io/tags/è„šæ‰‹æ¶/"}]},{"title":"Typora ä¸»é¢˜æ”¹é€ ","slug":"Typora-ä¸»é¢˜æ”¹é€ ","date":"2021-06-05T07:06:36.000Z","updated":"2022-07-26T13:18:15.851Z","comments":true,"path":"2021/06/05/Typora-ä¸»é¢˜æ”¹é€ /","link":"","permalink":"https://monocy.gitee.io/2021/06/05/Typora-ä¸»é¢˜æ”¹é€ /","excerpt":"å‰è¨€æœ€è¿‘åœ¨é…ç½® Typora çš„ä¸»é¢˜æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªæŒºä¸é”™çš„ä¸»é¢˜ï¼Œä½†æ˜¯ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ç‘•ç–µï¼ˆå¯¹ä¸ªäººæ¥è¯´ï¼‰ï¼Œå› æ­¤åŸºäºè¯¥ä¸»é¢˜ï¼Œæˆ‘æ›´æ–°äº†éƒ¨åˆ†æ ·å¼çš„é…ç½®ï¼Œä¼˜åŒ–äº†ä¸€äº›å†…å®¹ã€‚","text":"å‰è¨€æœ€è¿‘åœ¨é…ç½® Typora çš„ä¸»é¢˜æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªæŒºä¸é”™çš„ä¸»é¢˜ï¼Œä½†æ˜¯ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ç‘•ç–µï¼ˆå¯¹ä¸ªäººæ¥è¯´ï¼‰ï¼Œå› æ­¤åŸºäºè¯¥ä¸»é¢˜ï¼Œæˆ‘æ›´æ–°äº†éƒ¨åˆ†æ ·å¼çš„é…ç½®ï¼Œä¼˜åŒ–äº†ä¸€äº›å†…å®¹ã€‚ Markdown æ ·å¼æ ·å¼å¤§è‡´å‘ˆç°å¦‚ä¸‹ï¼Œä»£ç å‚è€ƒå¯ç‚¹å‡»æ­¤ä¼ é€é—¨ã€‚ æç¤ºï¼šæƒ³è¦è‡ªå·±å®šä¹‰æ ·å¼ï¼Œå¯å…ˆå¯¼å‡ºä¸º html æ–‡ä»¶ï¼Œç„¶åå†è°ƒæ•´é…ç½®å³å¯ã€‚ å‚è€ƒæ–‡ç«  Typora Documents Theme â€œOrangeHeartâ€","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ä»£ç é…ç½®","slug":"ä»£ç é…ç½®","permalink":"https://monocy.gitee.io/tags/ä»£ç é…ç½®/"}]},{"title":"React é€šç”¨å¼€å‘æ¨¡å¼å°è®°","slug":"React-é€šç”¨å¼€å‘æ¨¡å¼å°è®°","date":"2021-05-07T14:25:37.000Z","updated":"2022-07-26T13:07:57.746Z","comments":true,"path":"2021/05/07/React-é€šç”¨å¼€å‘æ¨¡å¼å°è®°/","link":"","permalink":"https://monocy.gitee.io/2021/05/07/React-é€šç”¨å¼€å‘æ¨¡å¼å°è®°/","excerpt":"å‰è¨€è¿‘æœŸèŠ±äº†å·®ä¸å¤š 1 ä¸ªæœˆçš„æ—¶é—´å¼€å‘é¡¹ç›®ï¼ŒåŒ…å«çœ‹æ¿ã€åˆ—è¡¨ä¸¤ç§ç±»å‹ï¼Œä»æ—©æœŸç£•ç£•ç»Šç»Šçš„é¡µé¢è®¾è®¡ï¼Œä¸­é—´çš„åå¤æ”¹ç‰ˆï¼Œåˆ°æœ€ç»ˆçš„å®Œæˆå¼€å‘ï¼Œä¹Ÿä½“ä¼šåˆ°äº†å¾ˆå¤šä¸ä¸€æ ·çš„ç‚¹ï¼Œæ„Ÿå—ç‰¹åˆ«æ·±çš„æ˜¯ä¸ Vue å¼€å‘æ—¶çš„åŒºåˆ«ï¼Œè¿™é‡Œç®€å•è®°ä¸€ä¸‹æˆ‘çš„å¿ƒå¾—ä½“ä¼šã€‚","text":"å‰è¨€è¿‘æœŸèŠ±äº†å·®ä¸å¤š 1 ä¸ªæœˆçš„æ—¶é—´å¼€å‘é¡¹ç›®ï¼ŒåŒ…å«çœ‹æ¿ã€åˆ—è¡¨ä¸¤ç§ç±»å‹ï¼Œä»æ—©æœŸç£•ç£•ç»Šç»Šçš„é¡µé¢è®¾è®¡ï¼Œä¸­é—´çš„åå¤æ”¹ç‰ˆï¼Œåˆ°æœ€ç»ˆçš„å®Œæˆå¼€å‘ï¼Œä¹Ÿä½“ä¼šåˆ°äº†å¾ˆå¤šä¸ä¸€æ ·çš„ç‚¹ï¼Œæ„Ÿå—ç‰¹åˆ«æ·±çš„æ˜¯ä¸ Vue å¼€å‘æ—¶çš„åŒºåˆ«ï¼Œè¿™é‡Œç®€å•è®°ä¸€ä¸‹æˆ‘çš„å¿ƒå¾—ä½“ä¼šã€‚ å¼€å‘æ–¹å¼çš„æ”¹å˜å¯¹äº Vue æ¥è¯´ï¼Œå› ä¸ºæœ‰åŒå‘ç»‘å®šï¼Œå› æ­¤ä¹ æƒ¯å°†å¤§å¤šæ•°é€»è¾‘å†™åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œé€šè¿‡ computed é’©å­ç›‘å¬å¤šä¸ªä¾èµ–é¡¹çš„å˜åŠ¨ï¼ŒåŒå‘æ•°æ®æµé€šæ‹¿åˆ°éœ€è¦çš„å‚æ•°å€¼ï¼Œå¿…è¦æ—¶å†é…åˆä¸Š Vuexï¼Œä¾¿èƒ½å¾ˆå¥½çš„è§£å†³å¤§å¤šæ•°é€šç”¨è¡¨å•çš„é—®é¢˜ã€‚ ä½†è¿™ä¸ªåœ¨ React ä¸­æ˜¯ä¸å¤ªåƒé¦™çš„ï¼Œå› ä¸º React æ˜¯å•å‘æ•°æ®æµï¼Œå…ˆä¸è®ºæ¯”è¾ƒéº»çƒ¦çš„å€¼ä¼ é€’é—®é¢˜ï¼Œä»…çœ‹ Hook å¯¹å‚æ•°çš„ä¾èµ–ï¼Œä¹Ÿä¼šé€ æˆä¸€äº›æ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š â€‹æŠ˜çº¿å›¾åˆ—è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨æœ‰è‡ªå·±çš„æŸ¥è¯¢æ¡ä»¶ï¼ŒåŒæ—¶ä¹Ÿä¾èµ–å¤–éƒ¨ä¼ å…¥çš„æŸ¥è¯¢æ¡ä»¶ï¼Œä¸ºå®ƒä»¬å°è£…ä¸€ä¸ªç»„ä»¶çš„è¯åˆ™ä¼šæœ‰æ­»å¾ªç¯é—®é¢˜ï¼Œå¿…é¡»æ‹†æˆä¿©ç»„ä»¶æ‰èƒ½è¾ƒå¥½çš„å¤„ç†æ­¤æƒ…å†µï¼Œè€Œ Vue åˆ™å› ä¸ºä¸ç”¨æ‹…å¿ƒå‡½æ•°åˆ·æ–°è§¦å‘æŸ¥è¯¢ï¼Œå› æ­¤å†™åœ¨ä¸€ä¸ªç»„ä»¶å†…ä¹Ÿæ²¡é—®é¢˜ã€‚ å› æ­¤å¯¹äº React æ¥è¯´ï¼Œç»„ä»¶æ‹†çš„è¶Šç»†ï¼Œè€¦åˆç¨‹åº¦è¶Šä½ï¼Œé‚£ä¹ˆä½¿ç”¨ Hook æˆ–è€… HOC æ¥æ‹¼å‡‘èµ·æ¥ä¼šæ›´ä¸ºæ–¹ä¾¿ï¼Œè€Œä¸”å¯¹äºç»„ä»¶ä¼˜åŒ–ã€é€»è¾‘æ¢³ç†ä¹Ÿä¼šæ›´ä¸ºå®¹æ˜“ä¸€äº›ã€‚ é¡µé¢å¼€å‘æ¨¡å¼å¯¹äºé¡¶éƒ¨ Form è¡¨å•ï¼Œåº•éƒ¨å¤šä¸ª æŠ˜çº¿å›¾ã€è¡¨æ ¼ è¿™æ ·å¸¸è§çš„è¡¨å•é¡µé¢ï¼ˆåº•éƒ¨å›¾è¡¨å¯èƒ½è‡ªå¸¦å­è¡¨å•é¡¹ï¼‰ï¼Œæˆ‘æ€»ç»“äº†ä¸€ç‚¹å¼€å‘å¿ƒå¾—ï¼ŒæŒ‰ç…§è¿™ç§æ–¹å¼å¼€å‘ï¼Œèƒ½å‡å°‘å¾ˆå¤šå†™ä»£ç æ—¶çš„å¿ƒæ™ºè´Ÿæ‹…ï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¾¿æ·çš„è§£å†³å¾ˆå¤šè¡¨å•åœºæ™¯ã€‚ ç±»æ¯” Vue çš„ Vuex + Components çš„æ¨¡å¼ï¼Œåœ¨ React å¼€å‘æ—¶ä½¿ç”¨çš„æ¨¡å¼ä¸º CreateContext + Components ï¼ŒStore å­˜å‚¨çš„åŸºç¡€å†…å®¹å¦‚ä¸‹ï¼š 1234567// CreateContext çš„å¯¹è±¡å†…å®¹&#123; form: &#123;&#125;, // form è¡¨å•é¡¹ formLoading: true, // form è¡¨å•æ˜¯å¦æŸ¥è¯¢ä¸­ï¼ˆåˆå§‹åŒ–&amp;æŸ¥è¯¢çŠ¶æ€æ§åˆ¶ï¼‰&#125;// ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ Context æ¥æ›´æ–°å­˜å‚¨ï¼Œè¿˜èƒ½æ ¹æ®æƒ…å†µä¾èµ– Context æˆ– Context.value ï¼Œæ¥æ§åˆ¶å‡½æ•°çš„æ›´æ–°é¢‘æ¬¡ æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ CreateContext + useReducer çš„æ¨¡å¼æ¥åšä¸€äº›å¤æ‚çš„æ§åˆ¶é€»è¾‘ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯ React å®˜ç½‘æ¨å´‡çš„æ–¹å¼ã€‚ ç»„ä»¶éƒ¨åˆ†çš„å†…å®¹å¯åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥æ¥çœ‹ï¼š Form è¡¨å•çš„åˆå§‹åŒ–é¡¶éƒ¨ Form è¡¨å•éƒ¨åˆ†æ¨èå•ç‹¬ä½¿ç”¨ä¸€ä¸ªç»„ä»¶å°è£…ï¼Œä»…å‘å¤–æš´éœ²æœ€ç»ˆçš„ form.getFieldsValue çš„å†…å®¹ï¼ˆæ— éœ€åšä»»ä½•å‚æ•°å¤„ç†ï¼‰ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ç»™å¤–éƒ¨ç•™ä¸‹é¢„æŸ¥è¯¢çš„ä¸€äº›å¤„ç†ã€ä»¥åŠè¡¨å•å†…å®¹çš„å¤„ç†å’Œç¼“å­˜ã€‚å†…éƒ¨åˆå§‹åŒ–å¯è€ƒè™‘å¦‚ä¸‹æ­¥éª¤ï¼š è¡¨å•è®¾ç½®åˆå§‹åŒ– loading çŠ¶æ€ï¼ˆContext ä¸­è·å–ï¼‰ï¼Œé€šè¿‡ useRef åˆ›å»ºä¸€ä¸ªç©ºçš„è¡¨å•åˆå§‹åŒ–å€¼ initValueï¼› æ ¹æ®é¡¹ç›®éœ€è¦ï¼Œä½¿ç”¨ useEffect è·å–è¡¨å•çš„å¼‚æ­¥ä¾èµ–é¡¹ï¼ˆå¦‚ä¸‹æ‹‰èœå•ï¼‰ å¾…æ‰€æœ‰å¼‚æ­¥ä¾èµ–è·å–å®Œåæ›´æ–° ref.current çš„åˆå§‹åŒ–å€¼ï¼Œç„¶åä½¿ç”¨ form.resetFields æ›´æ–°é»˜è®¤é€‰ä¸­é¡¹ç›®ï¼› æœ€åå…³é—­ loading çŠ¶æ€ï¼Œå¹¶æ ¹æ®æƒ…å†µè®¾ç½®æ˜¯å¦é»˜è®¤æŸ¥è¯¢ï¼ˆå‘å¤–è§¦å‘ onChangeï¼‰ï¼› æŸ¥è¯¢å¤„äº loading çŠ¶æ€æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€äº›åŠ¨ç”»æ¥è®©é¡µé¢ä¸æ˜¾å¾—é‚£ä¹ˆçªå…€ã€‚ è¡¨å•æŸ¥è¯¢&amp;ç¼“å­˜Form è¡¨å•æŸ¥è¯¢å¾—åˆ†ä¸ºä¸¤éƒ¨ï¼šé¢„æŸ¥è¯¢&amp;è¡¨å•æŸ¥è¯¢ã€‚ é¢„æŸ¥è¯¢ çš„ç›®çš„å…¶ä¸€æ˜¯ä¸ºäº†æŸ¥è¯¢å‰çš„è¡¨å•æ ¡éªŒï¼Œæ­¤å¤–åˆ™æ˜¯éƒ¨åˆ†æ¡ä»¶çš„åˆå§‹åŒ–å’Œæ ¼å¼åŒ–ï¼ˆå¦‚ table çš„åˆå§‹åˆ†é¡µä¿¡æ¯ã€è¡¨å•æŸ¥è¯¢æ¡ä»¶æ ¼å¼åŒ–ï¼‰ï¼Œè¿™å’Œåˆ†é¡µæŸ¥è¯¢ç­‰çš„é€»è¾‘æ˜¯åˆ†å¼€çš„ï¼Œæœ€åå°±æ˜¯æŸ¥è¯¢æ¡ä»¶çš„ç¼“å­˜äº†ï¼›åç»­çš„ è¡¨å•æŸ¥è¯¢ åˆ™ä½¿ç”¨ä¼ å…¥çš„æŸ¥è¯¢æ¡ä»¶å³å¯ï¼Œå› ä¸ºå¦‚å…¶å®ƒçš„åˆ†é¡µæŸ¥è¯¢ã€é‡ç½®æŸ¥è¯¢ç­‰éƒ½éœ€è¦ä¾èµ–ç¼“å­˜å†…å®¹è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™æ ·æ•´ä½“çš„é€»è¾‘ä¹Ÿå°±æ‹†å¼€äº†ã€‚ æŸ¥è¯¢çš„é€»è¾‘åˆ—ä¸¾å¦‚ä¸‹ï¼š ç‚¹å‡»è¡¨å•çš„æŸ¥è¯¢æŒ‰é’®ï¼Œè§¦å‘è¡¨å•æŸ¥è¯¢å‡½æ•°ï¼Œå‘å¤–éƒ¨ emit å‡ºæ¥çš„å‚æ•°ï¼Œå¹¶è°ƒç”¨ beforeSearch å‡½æ•°ï¼› å¤„ç† form è¡¨å•å‚æ•°ï¼Œåˆå§‹åŒ– åˆ†é¡µã€æ’åº ç­‰å‚æ•°ä¿¡æ¯ï¼Œç¼“å­˜æ ¼å¼åŒ–åçš„æŸ¥è¯¢æ¡ä»¶ï¼Œè®¾ç½® loading çŠ¶æ€ï¼› æ ¹æ®æƒ…å†µè§¦å‘å¯¹åº”çš„æŸ¥è¯¢å‡½æ•°ï¼ˆè°ƒç”¨æŸ¥è¯¢ æˆ– ç›‘å¬ç¼“å­˜æ¡ä»¶æŸ¥è¯¢ï¼‰ï¼› æ¥å£å‚æ•°è¿˜ä¾èµ–è‡ªèº«ç»„ä»¶çš„æƒ…å†µé™¤äº†è¡¨å•æŸ¥è¯¢å¤–ï¼Œéƒ¨åˆ†æ¥å£å¯èƒ½è¿˜æœ‰è‡ªèº«çš„æŸ¥è¯¢æ¡ä»¶ï¼ˆå¦‚ï¼šè‡ªå¸¦æ—¥æœŸç­›é€‰çš„å›¾è¡¨ç»„ä»¶ï¼‰ï¼Œè¿™ç§æƒ…å†µå…¶æ¥å£è§¦å‘æŸ¥è¯¢çš„æƒ…å†µæœ‰ä¸¤ç§ï¼šForm è¡¨å•æŸ¥è¯¢ ä»¥åŠ è‡ªèº«ç­›é€‰æ¡ä»¶å˜æ›´æŸ¥è¯¢ã€‚å¦‚æœç›´æ¥ç›‘å¬ä¸¤è€…åˆ™ä¼šå‡ºç°â€œåˆå§‹åŒ–æŸ¥è¯¢ä¸¤æ¬¡â€çš„é—®é¢˜ï¼Œå› æ­¤éœ€è¦åšä¸€äº›ä¼˜åŒ–ï¼Œè¿™é‡Œæˆ‘æ€»ç»“äº†ä¸€äº›æ–¹æ³•ï¼š ä½¿ç”¨ Ref è®¾ç½®åˆå§‹åŒ–çŠ¶æ€ï¼Œåˆå§‹åŒ–æ—¶ä¸åšå¤„ç†ï¼Œå¾…åç»­å˜æ›´æ—¶å†åšè°ƒç”¨ã€‚ 123456789101112131415import React, &#123; useRef, useEffect &#125; from 'react';const demo = () =&gt; &#123; const initRef = useRef(true); // åˆå§‹åŒ–æ—¶é˜»ç¢è§¦å‘ useEffect(() =&gt; &#123; if (initRef.current) &#123; initRef.current = false; return; &#125; // å…¶å®ƒæ“ä½œ &#125;, [initRef]);&#125;; å°†ä¿©æƒ…å†µæ‹†åˆ†ä¸ºä¸¤ç§å¤„ç†æ–¹å¼ï¼Œå¹¶é€šè¿‡ useRef æ¥å­˜å‚¨å­æŸ¥è¯¢æ¡ä»¶ï¼š Form è¡¨å•é¡¹å˜æ›´ï¼Œé€šè¿‡è§¦å‘ useEffect æ¥è§¦å‘æ¥å£å‡½æ•°ï¼›ï¼ˆå‰¯ä½œç”¨å‡½æ•°ï¼‰ å­æŸ¥è¯¢æ¡ä»¶å˜æ›´ï¼Œè§¦å‘ onChange äº‹ä»¶ï¼Œå¹¶æ›´æ–° ref çš„è‡ªèº«æŸ¥è¯¢ä¾èµ–ï¼Œæ‰‹åŠ¨è°ƒç”¨æ¥å£å‡½æ•°ï¼›ï¼ˆä»…äº‹ä»¶å˜åŠ¨è§¦å‘ï¼‰ æ³¨æ„ï¼šå­æŸ¥è¯¢æ¡ä»¶ä»…æ ¹æ® onChange äº‹ä»¶è§¦å‘ï¼Œåˆå§‹åŒ–å‚æ•°å‡åœ¨å­ç»„ä»¶è®¾ç½®çš„æ—¶å€™åˆå§‹åŒ–å³å¯ã€‚ å‚è€ƒæ–‡ç«  Hooks FAQ","categories":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/tags/React/"}]},{"title":"React.memoã€useMemo å’Œ useCallback çš„åŒºåˆ«","slug":"React-memoã€useMemoå’ŒuseCallbackçš„åŒºåˆ«","date":"2021-02-28T03:39:39.000Z","updated":"2022-07-26T13:07:49.365Z","comments":true,"path":"2021/02/28/React-memoã€useMemoå’ŒuseCallbackçš„åŒºåˆ«/","link":"","permalink":"https://monocy.gitee.io/2021/02/28/React-memoã€useMemoå’ŒuseCallbackçš„åŒºåˆ«/","excerpt":"å‰è¨€åœ¨çœ‹å®Œäº†ä¸€é React çš„åŸºç¡€å†…å®¹åï¼Œç°åœ¨åˆå›è¿‡å¤´æ¥çœ‹ React ç»„ä»¶æ›´æ–°ä¸ä¼˜åŒ–ç›¸å…³çš„çŸ¥è¯†äº†ï¼Œåœ¨ä½¿ç”¨ Hook ä¹‹åï¼Œä¸è¿™ä¸ªè¯é¢˜è„±ä¸å¼€å…³ç³»çš„ä¾¿æœ‰ useMemoã€useCallback å’Œ React.memo äº†ï¼Œæ­£å¥½é¡¹ç›®ä¼˜åŒ–æ—¶ç¢°åˆ°äº†è¿™ä¹ˆäº›çŸ¥è¯†ï¼Œåˆšå¥½æ€»ç»“ä¸€ç•ªã€‚","text":"å‰è¨€åœ¨çœ‹å®Œäº†ä¸€é React çš„åŸºç¡€å†…å®¹åï¼Œç°åœ¨åˆå›è¿‡å¤´æ¥çœ‹ React ç»„ä»¶æ›´æ–°ä¸ä¼˜åŒ–ç›¸å…³çš„çŸ¥è¯†äº†ï¼Œåœ¨ä½¿ç”¨ Hook ä¹‹åï¼Œä¸è¿™ä¸ªè¯é¢˜è„±ä¸å¼€å…³ç³»çš„ä¾¿æœ‰ useMemoã€useCallback å’Œ React.memo äº†ï¼Œæ­£å¥½é¡¹ç›®ä¼˜åŒ–æ—¶ç¢°åˆ°äº†è¿™ä¹ˆäº›çŸ¥è¯†ï¼Œåˆšå¥½æ€»ç»“ä¸€ç•ªã€‚ ä¸‰è€…åŒºåˆ«é¦–å…ˆä»ä½¿ç”¨ä½ç½®æ¥çœ‹å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç§ï¼š ä½œç”¨äºç»„ä»¶ï¼š React.memo ä½œç”¨äºç»„ä»¶å†…ï¼šuseMemo å’Œ useCallback é‚£ä¹ˆåˆ†åˆ«æ¥çœ‹æœ‰ä»€ä¹ˆä½œç”¨å§ï½ React.memoReact.memo ä¸»è¦æ˜¯ä¸ºäº†ç¼“å­˜ç»„ä»¶ï¼Œå½“çˆ¶ç»„ä»¶ state æ›´æ–°ï¼Œä½†æœªæ”¹å˜å­ç»„ä»¶çš„å…¥å‚çš„ state å€¼æ—¶ï¼Œå­ç»„ä»¶åº”è¯¥ä¸è‡ªæˆ‘æ›´æ–°ï¼Œè€Œæ˜¯ç”¨å…ˆå‰çš„ç¼“å­˜å€¼ï¼š çˆ¶ç»„ä»¶ï¼š 123456789101112131415161718192021222324252627282930// çˆ¶ç»„ä»¶ App.tsximport React, &#123; useState, useCallback, useEffect &#125; from 'react';import Counter from './memo-test/counter';function App() &#123; const [counter1, setCounter1] = useState(1); const [counter2] = useState(2); const updateCounter1 = () =&gt; &#123; setCounter1(counter1 + 1); &#125;; useEffect(() =&gt; &#123; console.log('parent update'); &#125;); return ( &lt;&gt; &lt;button onClick=&#123;updateCounter1&#125;&gt;æ›´æ–° Counter1&lt;/button&gt; &lt;h3&gt;Counter 1:&lt;/h3&gt; &lt;Counter count=&#123;counter1&#125; cname='Counter1'&gt;&lt;/Counter&gt; &lt;h3&gt;Counter 2:&lt;/h3&gt; &lt;Counter count=&#123;counter2&#125; cname='Counter2'&gt;&lt;/Counter&gt; &lt;/&gt; );&#125;export default App; å­ç»„ä»¶ï¼š 123456789101112131415161718192021import React, &#123; memo &#125; from 'react';interface IProps &#123; cname: string; count: number;&#125;const Counter = (props: IProps) =&gt; &#123; const &#123; count, cname &#125; = props; // æ¯æ¬¡é‡æ–°åŠ è½½æ—¶è§¦å‘ console.log(`updated $&#123;cname&#125;`); return ( &lt;p&gt; &#123;cname&#125;'s value is: &#123;count&#125; &lt;/p&gt; );&#125;;export default memo(Counter); è¿™é‡Œç‚¹å‡»â€œæ›´æ–° Counter1â€çš„æŒ‰é’®åï¼Œä¼šå¯¼è‡´çˆ¶ç»„ä»¶æ›´æ–°ï¼Œçˆ¶ç»„ä»¶æ›´æ–°åå› ä¸ºæ— ç¼“å­˜ï¼Œå› æ­¤å­ç»„ä»¶ä¹Ÿå°±ä¸€èµ·æ›´æ–°äº†ï¼Œä½†æ˜¯ä»”ç»†åˆ†æä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„ Counter2 çš„ä¼ å‚å¹¶æ— ä»»ä½•å˜åŠ¨ï¼Œè¿™é‡Œæ›´æ–°åé€ æˆäº†å¤šä½™çš„æ¸²æŸ“ï¼Œèµ„æºæµªè´¹ï¼Œå› æ­¤éœ€è¦åšä¸€ä¸‹ç¼“å­˜ï¼ˆå­ç»„ä»¶çš„æ³¨é‡Šæ›¿æ¢ä¸€ä¸‹å³å¯ï¼‰ï¼Œè¿™æ ·å°± Counter2 å°±ä¸ä¼šé‡å¤æ¸²æŸ“äº†ã€‚ä¸ºç¼“å­˜å’Œç¼“å­˜åå†™æ³•çš„ç»“æœåˆ†åˆ«ä¸ºï¼š æœªç¼“å­˜ï¼š å·²ç¼“å­˜ï¼š å¯è§ç¼“å­˜åçš„ç»„ä»¶åœ¨å‚æ•°ä¸å˜çš„æƒ…å†µä¸‹æ˜¯ä¸ä¼šé‡æ–°æ¸²æŸ“çš„ï¼ useMemouseMemo ä¸»è¦æ˜¯å¯¹å˜é‡è¿›è¡Œç¼“å­˜ï¼ˆå½“ç„¶å‡½æ•°ä¹Ÿå¯ä»¥ï¼Œä½†æ¨èä½¿ç”¨ useCallbackï¼Œé™¤ééœ€è¦ä¸€äº›å®šåˆ¶åŒ–é€»è¾‘æ“ä½œï¼‰ï¼Œè¯¥ Hook ä¸€èˆ¬äº useEffect è¿›è¡Œæ¯”è¾ƒã€‚useMemo æ˜¯åœ¨ä¾èµ–å˜åŠ¨åï¼ŒDom å˜åŠ¨å‰è§¦å‘çš„ï¼Œè€Œ useEffect åˆ™æ˜¯ä¾èµ–å˜åŠ¨åï¼ŒDom å˜åŠ¨åæ‰å‡ºå‘ï¼ˆå‰¯ä½œç”¨ï¼‰ã€‚ å› æ­¤ï¼Œå¦‚æœä¾èµ–å˜æ›´åéœ€è¦ç«‹å³åšå‡ºååº”æ—¶å¯ä»¥ä½¿ç”¨ useMemo ï¼Œå¦‚æœæ˜¯ä¾èµ–å˜åŠ¨åï¼Œéœ€è¦å¸¦ç€è§¦å‘ä¸€äº›å…¶å®ƒçš„æ“ä½œï¼Œåˆ™ä½¿ç”¨ useEffectï¼š 12345678910111213141516171819202122232425262728293031323334353637383940import React, &#123; useState, useMemo, useEffect &#125; from 'react';function App() &#123; const [counter1, setCounter1] = useState(1); const updateCounter1 = () =&gt; &#123; setCounter1(counter1 + 1); &#125;; const getRandom = () =&gt; &#123; return Math.random() * 10; &#125;; const memoRandom = useMemo(() =&gt; &#123; // æ­¤å¤„ä¼šç«‹å³è§¦å‘å“Ÿï½ return Math.random() * 10; &#125;, []); useEffect(() =&gt; &#123; console.log('counter1 å˜åŠ¨äº†'); &#125;, [counter1]); useEffect(() =&gt; &#123; console.log('getRandom å˜åŠ¨äº†'); &#125;, [getRandom]); useEffect(() =&gt; &#123; console.log('memoRandom å˜åŠ¨äº†'); &#125;, [memoRandom]); return ( &lt;&gt; &lt;button onClick=&#123;updateCounter1&#125;&gt;æ›´æ–° Counter1&lt;/button&gt; &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt; &lt;p&gt;Counter1: &#123;counter1&#125;&lt;/p&gt; &lt;p&gt;Random: &#123;getRandom()&#125;&lt;/p&gt; &lt;p&gt;MemoRandom: &#123;memoRandom&#125;&lt;/p&gt; &lt;/&gt; );&#125;export default App; è¿™é‡Œå˜æ›´ counter1 æ—¶ï¼Œå’±ä»¬çš„ randome ä¼šä¸€ç›´å˜æ›´ï¼Œä½†è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæ­¤å¤„å°±å¯ä»¥ä½¿ç”¨ useMemo åšä¸€æ¬¡ç¼“å­˜ï¼Œè¿™æ ·å°±ä¸ä¼šéšç€çˆ¶ç»„ä»¶çš„åˆ·æ–°è€Œå˜åŠ¨äº†ã€‚ useMemo å¯ä»¥ç›´æ¥ç†è§£ä¸º Vue çš„ computed é’©å­ useCallbackuseCallback æ˜¯å¯¹ç»„ä»¶å†…çš„å‡½æ•°è¿›è¡Œç¼“å­˜ã€‚å½“ç»„ä»¶çš„ state å˜åŠ¨åï¼Œå…¶ä¼šæ›´æ–°æ•´ä¸ªç»„ä»¶å†…å®¹ï¼Œæœªåšç¼“å­˜çš„å¤„ç†çš„å‡½æ•°éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€æ¬¡ï¼Œè¿™åœ¨æœ‰ useEffect ç›‘å¬çš„æƒ…å†µä¸‹ä¼šé€ æˆæ¯æ¬¡éƒ½è§¦å‘ï¼Œå› æ­¤å¯ç”¨ useCallback è¿›è¡Œå‡½æ•°çš„ç¼“å­˜ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748import React, &#123; useState, useCallback, useMemo, useEffect &#125; from 'react';import Counter from './memo-test/counter';function App() &#123; const [counter1, setCounter1] = useState(1); const [counter2, setCounter2] = useState(2); const updateCounter1 = () =&gt; &#123; setCounter1(counter1 + 1); &#125;; const updateCounter2 = () =&gt; &#123; setCounter2(counter2 + 1); &#125;; const callbackedCounter2 = useCallback(() =&gt; &#123; setCounter2(counter2 + 1); &#125;, [counter2]); useEffect(() =&gt; &#123; console.log('updateCounter1 å˜åŠ¨äº†'); &#125;, [updateCounter1]); useEffect(() =&gt; &#123; console.log('updateCounter2 å˜åŠ¨äº†'); &#125;, [updateCounter2]); useEffect(() =&gt; &#123; console.log('callbackedCounter2 ä»…åœ¨ counter2 å˜æ›´æ—¶å˜æ›´'); &#125;, [callbackedCounter2]); return ( &lt;&gt; &lt;button onClick=&#123;updateCounter1&#125;&gt;æ›´æ–° Counter1&lt;/button&gt; &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt; &lt;button onClick=&#123;updateCounter2&#125;&gt;æ›´æ–° Counter2&lt;/button&gt; &lt;h3&gt;Counter 1:&lt;/h3&gt; &lt;Counter count=&#123;counter1&#125; cname='Counter1'&gt;&lt;/Counter&gt; &lt;h3&gt;Counter 2:&lt;/h3&gt; &lt;Counter count=&#123;counter2&#125; cname='Counter2' callbackedCounter2=&#123;callbackedCounter2&#125; &gt;&lt;/Counter&gt; &lt;/&gt; );&#125;export default App; ç‚¹å‡»â€œæ›´æ–° Counter1â€çš„ç»“æœå¦‚ä¸‹ï¼š å¦‚æœä»…ä»…åªæ˜¯çˆ¶ç»„ä»¶å†…æœ‰å‡½æ•°å˜åŠ¨ï¼Œç”¨ä¸ç”¨ useCallback å½±å“ä¸å¤§ï¼Œä½†æ˜¯ä¸€æ—¦æœ‰å­ç»„ä»¶æœ‰ä¼ å…¥çˆ¶ç»„ä»¶çš„å‡½æ•°æ—¶ï¼Œä¸€å®šå¾—æ³¨æ„ useCallback æ¥ç¼“å­˜çˆ¶ç»„ä»¶çš„å‡½æ•°ï¼Œå¦åˆ™ä¼šå¸¦æ¥ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ useCallback æ˜¯ useMemo çš„è¯­æ³•ç³–ï¼šuseCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps) æ€»ç»“ React.memo çš„ä½¿ç”¨åœºæ™¯ï¼šçˆ¶ç»„ä»¶é¢‘ç¹å˜æ›´çš„å†…å®¹ä¸ä¼šå½±å“åˆ°å­ç»„ä»¶æ—¶ï¼Œéœ€è¦å¯¹å­ç»„ä»¶åš React.memo ç¼“å­˜å¤„ç†ï¼› useMemo çš„ä½¿ç”¨åœºæ™¯ï¼šå½“ç»„ä»¶å†…çš„å‡½æ•°è¿”å›å€¼ä¸éœ€è¦éšç€ç»„ä»¶çš„åˆ·æ–°è€Œå˜æ›´æ—¶ï¼Œéœ€è¦å¯¹å…¶åš useMemo ç¼“å­˜å¤„ç† useCallback çš„ä½¿ç”¨åœºæ™¯ï¼šçˆ¶ç»„ä»¶ä¼ é€’å‡½æ•°ç»™å­ç»„ä»¶ï¼Œè¯¥å‡½æ•°å‡éœ€åš useCallback ç¼“å­˜å¤„ç†ï¼Œå‡å°‘å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼› 12345678910111213// useMemo å’Œ useCallback å‡½æ•°ç¼“å­˜å†™æ³•const memoFunc = useMemo(() =&gt; &#123; // æ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ä¼šæ‰§è¡Œçš„éƒ¨åˆ†ï¼Œå¯ä»¥åšé¢å¤–æ“ä½œ return () =&gt; &#123; // å‡½æ•°å†…å®¹ &#125;;&#125;, []);// åªæœ‰ useMemo çš„ return çš„éƒ¨åˆ†const callbackFunc = useCallback(() =&gt; &#123; // å‡½æ•°å†…å®¹&#125;, []); âš ï¸ æ³¨ï¼šå¼€å‘ç¯å¢ƒè¯·æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œç¼“å­˜ä¼˜åŒ–ï¼Œå› ä¸ºç¼“å­˜çš„ç›‘å¬å‡½æ•°ä¹Ÿæ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼Œè¿‡åº¦ç¼“å­˜æœ‰æ—¶ä¼šé€‚å¾—å…¶åã€‚ å‚è€ƒæ–‡ç«  ä»‹ç» React.memo, useMemo å’Œ useCallback ä½¿ç”¨ memo,useMemo å’Œ useCallback ä¼˜åŒ– react æ¸²æŸ“æ€§èƒ½ useMemo å’Œ useEffect æœ‰ä»€ä¹ˆåŒºåˆ«","categories":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/tags/React/"}]},{"title":"TS é«˜çº§æŠ€å·§","slug":"TS-é«˜çº§æŠ€å·§","date":"2021-02-18T02:39:36.000Z","updated":"2022-07-26T13:07:42.136Z","comments":true,"path":"2021/02/18/TS-é«˜çº§æŠ€å·§/","link":"","permalink":"https://monocy.gitee.io/2021/02/18/TS-é«˜çº§æŠ€å·§/","excerpt":"å‰è¨€å‡æœŸåœ¨å®¶ä¸­æ— æ„é—´åˆ·åˆ°äº†ä¸€ç¯‡ TS æŠ€å·§çš„æ–‡ç« ï¼Œè‡ªå·±å°è¯•äº†ä¸€ä¸‹ï¼Œè§‰å¾—ç¡®å®æŒºä¸é”™çš„ï¼Œå› æ­¤è¿™é‡Œåšä¸€äº›è®°å½•ã€‚","text":"å‰è¨€å‡æœŸåœ¨å®¶ä¸­æ— æ„é—´åˆ·åˆ°äº†ä¸€ç¯‡ TS æŠ€å·§çš„æ–‡ç« ï¼Œè‡ªå·±å°è¯•äº†ä¸€ä¸‹ï¼Œè§‰å¾—ç¡®å®æŒºä¸é”™çš„ï¼Œå› æ­¤è¿™é‡Œåšä¸€äº›è®°å½•ã€‚ æ´»ç”¨æç¤ºåœ¨ä½¿ç”¨ ts çš„ interface åšå®šä¹‰å£°æ˜æ—¶ï¼Œä¸€èˆ¬å†™æ³¨é‡Šæ—¶éƒ½ä¹ æƒ¯æ€§çš„ä½¿ç”¨å•è¡Œæ³¨é‡Š // ...ï¼Œè™½ç„¶åœ¨çœ‹å¯¹åº”çš„ interface æ—¶æˆ‘ä»¬èƒ½çŸ¥é“æ˜¯ä»€ä¹ˆå†…å®¹ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶å¾€å¾€åªæœ‰ä¸ªå…‰ç§ƒç§ƒçš„å£°æ˜ï¼ŒåæœŸç»´æŠ¤æ—¶ä¼šæ„Ÿè§‰ç‰¹åˆ«é¸¡è‚‹ï¼š ä½†æ˜¯å¦‚æœè¿™æ ·å†™æ³¨é‡Šçš„è¯ï¼Œåœ¨æ³¨é‡Šçš„å‘ˆç°ä¸Šä¼šæ›´åˆ©äºé˜…è¯»ï¼š å¯¹è¿”å›å‚æ•°ã€ç»„ä»¶ä¼ å‚å£°æ˜ ç­‰ä¼šç»å¸¸å»æŸ¥é˜…çš„ ts å£°æ˜éƒ¨åˆ†ï¼Œå¯ä½¿ç”¨å¤šè¡Œæ³¨é‡Šçš„å†™æ³•ï¼Œè®©ä½¿ç”¨ä½“éªŒæ›´å‹å¥½ã€‚ interface &amp; typeTypeScript ä¸­æœ‰ä¸¤ç§å®šä¹‰æ¥å£ç±»å‹çš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š interfaceï¼ˆæ¥å£ï¼‰ã€type aliasï¼ˆç±»å‹åˆ«åï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯èƒ½å¤Ÿè‡ªèº«ç»§æ‰¿ã€ç›¸äº’ç»§æ‰¿çš„ï¼š 123456789101112131415161718192021222324// interface ç»§æ‰¿ interfaceinterface Item &#123; name: string;&#125;interface SubItem extends Item &#123; age: number;&#125;// type alias ç»§æ‰¿ type aliastype Shape = &#123; name: string &#125;;type SubShape = Shape &amp; &#123; age: number &#125;;// interface ç»§æ‰¿ type aliastype Data = &#123; name: string &#125;;interface SubData extends Data &#123; age: number;&#125;// type alias ç»§æ‰¿ interfaceinterface List &#123; name: string;&#125;type SubList = List &amp; &#123; age: number &#125;; è¿™ä¸¤è€…ä½¿ç”¨ä¸Šç‰¹åˆ«ç›¸ä¼¼ï¼Œä½†ä¹Ÿç¨å¾®æœ‰äº›ä¸ä¸€æ ·çš„åœ°æ–¹ 1. å†™æ³•ä¸åŒ1234567891011121314// interfaceï¼ˆåå‘äºï¼šç±»ã€å®ä¾‹ï¼‰interface IProps &#123; name: string; funcA: (param1: number) =&gt; void;&#125;// type aliasï¼ˆåå‘äºï¼šå­—é¢é‡å½¢å¼çš„å€¼/å¯¹è±¡ã€å‡½æ•°ï¼‰type data = &#123; name: string &#125;;type funcA = (param1: number) =&gt; void;// å‡½æ•°çš„ ts å£°æ˜çš„ä¸‰ç§å†™æ³•const func1: funcA = p =&gt; &#123;&#125;; // type å£°æ˜const func2: IProps['funcA'] = p =&gt; &#123;&#125;; // interface å£°æ˜const func3 = (p: number): void =&gt; &#123;&#125;; // å†…è”å¼å£°æ˜ ç›®å‰é¡¹ç›®ä¸­ä½¿ç”¨é¢å‘å¯¹è±¡çš„å†™æ³•ä¼šå¤šä¸€äº›ï¼Œå› æ­¤ ç±»ã€å®ä¾‹ çš„å‡ºç°æ¯”ä¾‹ä¼šæ‰“ä¸€äº›ï¼Œå¯¹äºå•ç‹¬ .ts æ–‡ä»¶å†…å£°æ˜çš„å‡½æ•°å¯ç”¨ type åšå£°æ˜ä¼šæ›´æ–¹ä¾¿ä¸€äº› 2. å…¶å®ƒä¸åŒå…¶å®ƒéƒ¨åˆ†å°±ç›´æ¥ç²˜è´´çœ‹åˆ°çš„æ–‡ç« äº†ï¼Œå°±ä¸èµ˜è¿°äº† typeofè¿™ä¸€ç‚¹å…ˆå‰ç¡®å®æ²¡å…³æ³¨è¿‡ï¼Œä¸è¿‡å¯¹äºæœ‰é»˜è®¤å€¼çš„ç±»å‹ï¼Œç¡®å®ä¼šèŠ‚çœä¸å°‘æ—¶é—´ï¼š 12345678910const defaultProps = &#123; /** è¿™é‡Œå†™å±æ€§çš„æç¤ºï¼šå§“å */ name: '',&#125;;/** è¿™é‡Œå†™æ•´ä½“çš„æç¤º */type IProps = typeof defaultProps;// è¿™é‡Œ hover ä¸Šæ—¶ä¼šæœ‰æç¤ºconst myData: IProps = defaultProps; keyofè¿™ä¸ªå•ç‹¬æ¥çœ‹ç”¨é€”å¯èƒ½ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯å°è£…é€šç”¨å‡½æ•°æ—¶ï¼Œæ²¡æœ‰è¿™ä¸ªå¯èƒ½é—®é¢˜å¾ˆå¤§ï¼š æŒ‰ç…§ä»¥å‰çš„å†™æ³•ï¼Œæ‰€è·å¾—çš„å€¼ä¼šä¸¢å¤±ç±»å‹ï¼Œè¿™ ts å°±æœ‰äº›å°´å°¬ï¼š ä½¿ç”¨ keyof æ–¹æ³•æ”¹å†™åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœï¼š è¿™æ ·æˆ‘ä»¬ä¾¿èƒ½å¤Ÿä»æ–¹æ³•ä¸­æ¨æ–­å‡ºå¯¹åº”å¯¹è±¡çš„ç±»å‹äº†ï¼Œç¡®å®æ–¹ä¾¿äº†å¾ˆå¤šã€‚ å‚è€ƒæ–‡ç«  TypeScript: Interfaces vs Types [TypeScript ä¸­æå‡å¹¸ç¦æ„Ÿçš„ 10 ä¸ªé«˜çº§æŠ€å·§](","categories":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/categories/TypeScript/"}],"tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/tags/TypeScript/"}]},{"title":"Chales å®‰è£…é…ç½®","slug":"Chales-å®‰è£…é…ç½®","date":"2021-01-09T08:08:19.000Z","updated":"2022-07-26T13:04:12.248Z","comments":true,"path":"2021/01/09/Chales-å®‰è£…é…ç½®/","link":"","permalink":"https://monocy.gitee.io/2021/01/09/Chales-å®‰è£…é…ç½®/","excerpt":"å‰è¨€æœ€è¿‘åšåˆ°ä¸€äº› H5 ç›¸å…³çš„å†…å®¹å¼€å‘ï¼Œå› ä¸ºéœ€è¦æ‰‹æœºç«¯çš„ç™»é™† Cookie ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦é€šè¿‡ Charles æŠ“åŒ…æ¥è·å– Cookieã€‚å®‰è£…è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªæ¯”è¾ƒå‘çš„ç‚¹ç€å®èŠ±è´¹äº†æˆ‘ä¸å°‘æ—¶é—´ï¼Œè¿™é‡Œåšä¸€ä¸‹è®°å½•ã€‚","text":"å‰è¨€æœ€è¿‘åšåˆ°ä¸€äº› H5 ç›¸å…³çš„å†…å®¹å¼€å‘ï¼Œå› ä¸ºéœ€è¦æ‰‹æœºç«¯çš„ç™»é™† Cookie ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦é€šè¿‡ Charles æŠ“åŒ…æ¥è·å– Cookieã€‚å®‰è£…è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªæ¯”è¾ƒå‘çš„ç‚¹ç€å®èŠ±è´¹äº†æˆ‘ä¸å°‘æ—¶é—´ï¼Œè¿™é‡Œåšä¸€ä¸‹è®°å½•ã€‚ å®‰è£…ä¸‹è½½ä¸‹è½½ç›´æ¥å»å®˜ç½‘ä¸‹è½½å³å¯ï¼ˆç‰¹åˆ«æ…¢ï¼Œèƒ½ç§‘å­¦ä¸Šç½‘çš„å°½é‡ç§‘å­¦ï¼‰ï¼Œä¸‹è½½å®Œåæœ‰ 30 å¤©çš„è¯•ç”¨æœŸï¼Œå¯ä»¥å°è¯•åœ¨Charles æˆæƒç åœ¨çº¿ç”Ÿæˆç½‘ç«™ä¸Šç”Ÿæˆ Charles ç ï¼Œæˆ–è€…ç”¨å¦‚ä¸‹æ¿€æ´»ç è¯•è¯•ï¼š 12name: https://zhile.iokey: 48891cf209c6d32bf4 é…ç½®ä»£ç†http è§£æé…ç½®æ‰“å¼€ Proxy -&gt; Proxy Settingsï¼Œå‹¾é€‰ä¸Š Enable transparent HTTP proxying å³å¯ï¼ŒSockets éƒ¨åˆ†å¯æ ¹æ®è‡ªå·±æƒ…å†µé…ç½®ï¼š è¿™æ ·æœ¬æœºçš„ http è¯·æ±‚å°±èƒ½è§£æäº†ã€‚ https è§£æé…ç½®æ‰“å¼€ Proxy -&gt; SSL Proxying Settingsï¼Œå‹¾é€‰ä¸Š Enable SSL Proxyingï¼Œç„¶åæ·»åŠ  *:443 é…ç½®ï¼Œç”¨äºæ‹¦æˆªæ‰€æœ‰çš„ https è¯·æ±‚ï¼š é…ç½®è¯ä¹¦1. é…ç½® Mac è¯ä¹¦ç‰¹åˆ«æ˜¯å¯¹äºç¬¬ä¸€æ¬¡å®‰è£… Charles çš„äººæ¥è¯´ï¼Œè¿™ä¸€æ­¥å¾ˆå®¹æ˜“å¿½ç•¥æ‰ï¼š è¯ä¹¦å®‰è£…å®Œåå…¶é»˜è®¤æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ç”Ÿæ•ˆæ‰èƒ½çœŸæ­£å®‰è£…å®Œï¼š 2. iOS è¯ä¹¦å®‰è£…é™¤äº†ç”µè„‘è¯ä¹¦å¤–ï¼Œæ‰‹æœºç«¯çš„è¯ä¹¦ä¹Ÿæ¯”è¾ƒé‡è¦ï¼Œå¯ä»¥ä¸€å¹¶å®‰è£…ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œç¡®ä¿æ‰‹æœºå’Œç”µè„‘è¿æ¥çš„æ˜¯åŒä¸€å±€åŸŸç½‘å†…ã€‚ ã€1ã€‘ é¦–å…ˆéœ€è¦é…ç½®æ‰‹æœºè¿æ¥çš„å±€åŸŸç½‘ä»£ç†ï¼ˆiOS æ˜¯è¿æ¥çš„ç½‘ç»œçš„ i å›¾æ ‡ -&gt; é…ç½®ä»£ç†ï¼Œæ”¹æˆæ‰‹åŠ¨ï¼‰ï¼š æœåŠ¡å™¨ï¼š Mac çš„ ip åœ°å€ ç«¯å£ï¼š é…ç½® Proxy Settings æ—¶çš„ 8888 ç«¯å£ï¼ˆæ ¹æ®è‡ªå·±çš„è®¾ç½®è¿›è¡Œé…ç½®ï¼‰ âš ï¸ ï¼šé…ç½®å Mac ä¼šå‡ºæ¥ä¸€ä¸ªå¼¹æ¡†ï¼ˆé»˜è®¤ä¸º Denyï¼‰ï¼Œæ­¤å¤„ä¸€å®šå¾—æ³¨æ„ç‚¹å‡» Allow ã€2ã€‘ ä¸‹è½½æ‰‹æœºç«¯çš„è¯ä¹¦ï¼ŒSafari æ‰“å¼€å¦‚ä¸‹åœ°å€ï¼š https://chls.pro/sslï¼Œæ­¤å¤„ä¼šæç¤ºä½ å®‰è£…è¯ä¹¦ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚ å®‰è£…åéœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹è¿›è¡Œé…ç½®ï¼š è¿›äººé€šç”¨ -&gt; æè¿°æ–‡ä»¶ä¸è®¾å¤‡ç®¡ç†ï¼Œå®‰è£…åˆšä¸‹è½½çš„æè¿°æ–‡ä»¶ è¿›å…¥é€šç”¨ -&gt; å…³äºæœ¬æœº -&gt; è¯ä¹¦ä¿¡ä»»è®¾ç½®ï¼Œå¼€å¯åˆšåˆšæ–°å¢è¯ä¹¦çš„ä¿¡ä»» âš ï¸ ï¼šä»¥ä¸Šä¿©æ­¥ç¼ºå°‘ä¸€ä¸ªå¯èƒ½å¯¼è‡´æ‰‹æœºç«¯æ— æ³•ä¸Šç½‘ï¼ŒCharles æ‹¦æˆªä¹±ç ä¿¡æ¯ å…¶å®ƒé—®é¢˜Charles æ‹¦æˆªä¸åˆ°æµè§ˆå™¨è¯·æ±‚å¦‚æœé…ç½®å®Œæˆå Charles ä»ç„¶æ‹¦æˆªä¸åˆ°æµè§ˆå™¨è¯·æ±‚ï¼Œè¯·æŸ¥çœ‹ Chrome æ’ä»¶æ˜¯å¦å¼€å¯äº† vpn æ’ä»¶ï¼Œä¸€èˆ¬å¼€å¯åå°±æ‹¦æˆªä¸åˆ°äº†ã€‚ é…ç½®æ‰‹æœºä»£ç†æ—¶ä¸å°å¿ƒç‚¹äº† Denyç‚¹äº† Deny ä¸è¦ç´§ï¼Œæ‰‹åŠ¨å°†ä»£ç†çš„ IP åœ°å€å¡«ä¸Šå³å¯ï¼Œæ·»åŠ ä»£ç†åœ°å€çš„è·¯å¾„ä¸ºï¼š Proxy -&gt; Access Control Settings æ³¨æ„ï¼Œæ·»åŠ çš„åœ°å€ä¸ºæœ€ç»ˆä»£ç†çš„åœ°å€ï¼Œä¸€èˆ¬ App éƒ½æ˜¯ç”¨æ‰€ä»£ç†çš„ç”µè„‘ IPï¼ˆå³é…ç½®å±€åŸŸç½‘ä»£ç†æ—¶å¡«å†™çš„ IPï¼‰ å‚è€ƒæ–‡ç«  Mac ä¸‹é…ç½® Charlesï¼Œå®‰è£…è¯ä¹¦ Charles å¸¸ç”¨åŠŸèƒ½ ç»†è¯´ Charles é…ç½® HTTPS ä»£ç†çš„ä¹±ç é—®é¢˜","categories":[{"name":"Env","slug":"Env","permalink":"https://monocy.gitee.io/categories/Env/"}],"tags":[{"name":"é…ç½®å®‰è£…","slug":"é…ç½®å®‰è£…","permalink":"https://monocy.gitee.io/tags/é…ç½®å®‰è£…/"}]},{"title":"React Hook åˆå­¦è®°å½•","slug":"React-Hook-åˆå­¦è®°å½•","date":"2020-12-05T09:38:00.000Z","updated":"2022-07-26T13:07:52.872Z","comments":true,"path":"2020/12/05/React-Hook-åˆå­¦è®°å½•/","link":"","permalink":"https://monocy.gitee.io/2020/12/05/React-Hook-åˆå­¦è®°å½•/","excerpt":"å‰è¨€æ­¤ç¯‡ä¸ºæˆ‘ä» Vue è½¬ Reactï¼Œåˆå­¦ React Hook çš„ä¸€äº›è®°å½•ï¼Œè®°å½•ä¸€äº›å†™æ³•å’Œæ³¨æ„é¡¹ã€‚","text":"å‰è¨€æ­¤ç¯‡ä¸ºæˆ‘ä» Vue è½¬ Reactï¼Œåˆå­¦ React Hook çš„ä¸€äº›è®°å½•ï¼Œè®°å½•ä¸€äº›å†™æ³•å’Œæ³¨æ„é¡¹ã€‚ useStateæ­¤ hook ç›¸å½“äº Vue ä¸­ Date å‡½æ•°è¿”å›çš„å¯¹è±¡çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼š 1234// state: å¯¹åº”çš„å€¼// setState: æ›´æ–°æ”¹å€¼çš„å‡½æ•°// initialState: åˆå§‹åŒ–å€¼const [state, setState] = useState(initialState); useState çš„ä¸¤ç§å†™æ³•ï¼š 12345678// å¯¹äºç®€å•å€¼å¯ç›´æ¥è®¾ç½®useState(initVal);// å¯¹äºå¤æ‚çš„æ“ä½œï¼Œå¯ä½¿ç”¨å‡½æ•°å¤„ç†useState(() =&gt; &#123; // initVal ä»…åœ¨åˆå§‹åŒ–æ¸²æŸ“æ—¶èµ·ä½œç”¨ const initVal = complexFunc(props); return initVal;&#125;); setState æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š 1234567// ç›´æ¥è®¾ç½®æ–°å€¼setState(newVal);// åŸºäºæ—§å€¼æ“ä½œè·å¾—æ–°å€¼setState(preVal =&gt; &#123; // ... return newVal;&#125;); useEffectæ­¤ hook ç›¸å½“äº Vue çš„ updated é’©å­ï¼Œå…¶ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åå»¶è¿Ÿæ‰§è¡Œï¼ˆä¼šä¿è¯åœ¨ä»»ä½•æ–°çš„æ¸²æŸ“å‰æ‰§è¡Œï¼‰ï¼Œä¹Ÿå¯ä»¥é…ç½®è®©å…¶ä»…åœ¨æŸäº›å€¼æ”¹å˜çš„æ—¶å€™æ‰§è¡Œï¼š 12345678910111213141516171819// return æ–¹æ³•ç”¨äºæ¸…æ¥šä¸€äº›å‰¯ä½œç”¨å‡½æ•°ï¼ˆå¦‚ï¼šremoveEventListenerï¼‰// æ³¨ï¼šä¸èƒ½ä¼ å…¥å¼‚æ­¥å‡½æ•°useEffect(() =&gt; &#123; someFunc(); return () =&gt; &#123; someClearFunc(); &#125;;&#125;);// åœ¨æŸäº›å€¼æ”¹å˜çš„æƒ…å†µä¸‹æ‰§è¡Œ// æ³¨æ„ï¼šæ²¡æœ‰ someVal æ—¶æ”¹ hook ä»…ä¼šåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡ŒuseEffect(() =&gt; &#123; someFunc(); return () =&gt; &#123; someClearFunc(); &#125;;&#125;, [someVal]); å¦‚æœéœ€è¦åœ¨æ‰€æœ‰ DOM å˜åŠ¨ä¹‹ååŒæ­¥è°ƒç”¨ effectï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ° useLayoutEffectï¼Œä½†æ¨èä¸€å¼€å§‹æ—¶ä¼˜å…ˆä½¿ç”¨ useEffect æ–¹æ³•ã€‚ è‹¥è¦ä»æœåŠ¡ç«¯æ¸²æŸ“çš„ HTML ä¸­æ’é™¤ä¾èµ–å¸ƒå±€ effect çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ showChild &amp;&amp; &lt;Child /&gt; è¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨ useEffect(() =&gt; { setShowChild(true); }, []) å»¶è¿Ÿå±•ç¤ºç»„ä»¶ã€‚è¿™æ ·ï¼Œåœ¨å®¢æˆ·ç«¯æ¸²æŸ“å®Œæˆä¹‹å‰ï¼ŒUI å°±ä¸ä¼šåƒä¹‹å‰é‚£æ ·æ˜¾ç¤ºé”™ä¹±äº†ã€‚ï¼ˆå¦‚å¼¹æ¡†ç»„ä»¶åˆå§‹åŒ–é—®é¢˜ï¼‰ useContextå¯ä»¥ç†è§£ä¸º Vue çš„ Provide/Inject é’©å­ï¼ˆä¸æ˜¯ ProvideReactive/InjectReactiveï¼‰: 123456789const MyContext = React.createContext(/* default value */);function App() &#123; return ( &lt;MyContext.Provider value=&#123;themes.dark&#125;&gt;// Components&lt;/MyContext.Provider&gt; );&#125;useContext(MyContext); Provider å†…å¦‚æœç»‘å®šäº† valueï¼ˆå³ä½¿æ˜¯ undefinedï¼‰,default value ä¹Ÿä¸ä¼šç”Ÿæ•ˆ useReducerç®€åŒ–ç‰ˆçš„ Reduxï¼Œä¸ useState çš„åŒºåˆ«æ˜¯éœ€è¦é…ç½® reducer å‡½æ•°ï¼Œå¤„ç†ä¸åŒ type çš„æ“ä½œã€‚ é¡¹ç›®å¼€å‘å¯èƒ½ä½¿ç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼Œä¸åšè¿‡å¤šè®°å½• useCallbackå¯ä»¥ç†è§£æˆ Vue çš„ computed é’©å­ï¼Œä¸è¿‡å…¶è®°å½•çš„æ˜¯å‡½æ•°ï¼Œä½¿å…¶ä»…åœ¨ä¾èµ–é¡¹å˜æ›´æ—¶æ‰æ›´æ–°å‡½æ•°ã€‚å½“ä¾èµ–å‚æ•°ä¸ç»å¸¸å˜æ—¶ï¼Œå¯ä»¥ä¼˜åŒ–å­ç»„ä»¶çš„æ¸²æŸ“ï¼ˆè¿”å›çš„æ˜¯å­ç»„ä»¶ï¼‰ã€‚ 1234// ä¾èµ–é¡¹æ•°ç»„ä¸ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°const memoizedCallback = useCallback(() =&gt; &#123; doSomething(a, b);&#125;, [a, b]); æ­¤ hook useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps)ã€‚æ³¨ï¼šæ»¥ç”¨çš„è¯ä¸ä»…ä¸ä¼šæå‡æ€§èƒ½ï¼Œåè€Œä¼šé™ä½æ€§èƒ½ã€‚ useMemoç›¸å½“äº Vue çš„ computed é’©å­äº†ï¼Œæœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚ 1const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]); ä¼ å…¥ useMemo çš„å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œã€‚è¯·ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œä¸æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œè¯¸å¦‚å‰¯ä½œç”¨è¿™ç±»çš„æ“ä½œå±äº useEffect çš„é€‚ç”¨èŒƒç•´ï¼Œè€Œä¸æ˜¯ useMemoã€‚å¤§è‡´æµç¨‹ï¼šDom å˜æ›´ -&gt; useMemo -&gt; æ‰€æœ‰ Dom æ¸²æŸ“å®Œæˆ -&gt; useEffect useRefå¯ä»¥ç†è§£æˆ Vue çš„ Ref é’©å­ï¼Œä½†æ˜¯å…¶ä¸ä»…ä»…å±€é™äºä¿å­˜ DOM èŠ‚ç‚¹ï¼Œå…¶ .current å±æ€§ä¸­å¯ä»¥ä¿å­˜ä¸€ä¸ªå¯å˜å€¼ã€‚ 1const refContainer = useRef(initialValue); useRef() å’Œè‡ªå»ºä¸€ä¸ª {current: ...} å¯¹è±¡çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼ŒuseRef ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›åŒä¸€ä¸ª ref å¯¹è±¡ã€‚æ³¨ï¼š å½“ ref å¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseRef å¹¶ä¸ä¼šé€šçŸ¥ä½ ã€‚å˜æ›´ .current å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ useImperativeHandleå¢å¼ºç‰ˆ useRefï¼Œå¯ä»¥è‡ªå®šä¹‰è®¾ç½®åœ¨ä½¿ç”¨ ref æ—¶éœ€è¦æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ï¼Œä¸”useImperativeHandle åº”å½“ä¸ forwardRef ä¸€èµ·ä½¿ç”¨ï¼š 1234567891011121314// åŸºæœ¬æ–¹æ³•useImperativeHandle(ref, createHandle, [deps]);// å®ä¾‹function FancyInput(props, ref) &#123; const inputRef = useRef(); useImperativeHandle(ref, () =&gt; (&#123; focus: () =&gt; &#123; inputRef.current.focus(); &#125; &#125;)); return &lt;input ref=&#123;inputRef&#125; ... /&gt;;&#125;FancyInput = forwardRef(FancyInput); åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ï¼Œå¯è€ƒè™‘ä½¿ç”¨ useImperativeHandle åšä¸€å±‚å±æ€§ä¸Šçš„å°è£…ã€‚ useLayoutEffectå®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectï¼Œåœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚ å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ useEffect ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚useLayoutEffect ä¸ componentDidMountã€componentDidUpdate çš„è°ƒç”¨é˜¶æ®µæ˜¯ä¸€æ ·çš„ã€‚ useDebugValueuseDebugValue å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚ 1234567891011function useFriendStatus(friendID) &#123; const [isOnline, setIsOnline] = useState(null); // ... // åœ¨å¼€å‘è€…å·¥å…·ä¸­çš„è¿™ä¸ª Hook æ—è¾¹æ˜¾ç¤ºæ ‡ç­¾ // e.g. \"FriendStatus: Online\" useDebugValue(isOnline ? 'Online' : 'Offline'); return isOnline;&#125; ä¸æ¨èä½ å‘æ¯ä¸ªè‡ªå®šä¹‰ Hook æ·»åŠ  debug å€¼ã€‚å½“å®ƒä½œä¸ºå…±äº«åº“çš„ä¸€éƒ¨åˆ†æ—¶æ‰æœ€æœ‰ä»·å€¼ã€‚ å‚è€ƒæ–‡æ¡£ Hook ç®€ä»‹","categories":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/categories/React/"}],"tags":[{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/tags/React/"}]},{"title":"2020 å¹´å¤§å‚é¢è¯•æ€»ç»“","slug":"2020-å¹´å¤§å‚é¢è¯•æ€»ç»“","date":"2020-10-24T09:31:17.000Z","updated":"2022-07-26T13:17:22.498Z","comments":true,"path":"2020/10/24/2020-å¹´å¤§å‚é¢è¯•æ€»ç»“/","link":"","permalink":"https://monocy.gitee.io/2020/10/24/2020-å¹´å¤§å‚é¢è¯•æ€»ç»“/","excerpt":"å‰è¨€è¿™æ¬¡é¢è¯•å› ä¸ºæœ‰æ¯”è¾ƒæ˜ç¡®çš„ç›®æ ‡ï¼Œæƒ³å» é˜¿é‡Œã€ç¾å›¢ã€å¿«æ‰‹ã€å¤´æ¡ ç­‰å¤§å…¬å¸æå‡æå‡è‡ªå·±ï¼Œå› æ­¤åœ¨å‡†å¤‡äº†ä¸€ç•ªåï¼Œä¾æ¬¡é¢äº†å¯¹åº”çš„å…¬å¸ã€‚æ­¤å¤„ä¸»è¦æ˜¯æ€»ç»“ä¸€ä¸‹å½“æ—¶é¢è¯•é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œçœ‹çœ‹å¯¹äº 2 å¹´å‰ç«¯ç»éªŒçš„äººé¢è¯•å®˜ä»¬åˆ°åº•éœ€è¦æ€æ ·çš„èƒ½åŠ›ï¼Œä»¥åŠéƒ¨åˆ†é—®é¢˜çš„è§£ä½“çš„æ€è·¯ã€‚ æ³¨ï¼šé¢è¯•ä¸€å®šå¾—è¡¨ç°çš„è‡ªç„¶ï¼Œè½»æ¾è‡ªç„¶ã€è¯´è¯æµç•…è‡ªä¿¡ä¼šæ›´å®¹æ˜“é€šè¿‡é¢è¯•ï¼","text":"å‰è¨€è¿™æ¬¡é¢è¯•å› ä¸ºæœ‰æ¯”è¾ƒæ˜ç¡®çš„ç›®æ ‡ï¼Œæƒ³å» é˜¿é‡Œã€ç¾å›¢ã€å¿«æ‰‹ã€å¤´æ¡ ç­‰å¤§å…¬å¸æå‡æå‡è‡ªå·±ï¼Œå› æ­¤åœ¨å‡†å¤‡äº†ä¸€ç•ªåï¼Œä¾æ¬¡é¢äº†å¯¹åº”çš„å…¬å¸ã€‚æ­¤å¤„ä¸»è¦æ˜¯æ€»ç»“ä¸€ä¸‹å½“æ—¶é¢è¯•é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œçœ‹çœ‹å¯¹äº 2 å¹´å‰ç«¯ç»éªŒçš„äººé¢è¯•å®˜ä»¬åˆ°åº•éœ€è¦æ€æ ·çš„èƒ½åŠ›ï¼Œä»¥åŠéƒ¨åˆ†é—®é¢˜çš„è§£ä½“çš„æ€è·¯ã€‚ æ³¨ï¼šé¢è¯•ä¸€å®šå¾—è¡¨ç°çš„è‡ªç„¶ï¼Œè½»æ¾è‡ªç„¶ã€è¯´è¯æµç•…è‡ªä¿¡ä¼šæ›´å®¹æ˜“é€šè¿‡é¢è¯•ï¼ CSS éƒ¨åˆ†åœ¨æˆ‘é¢è¯•æ—¶ï¼Œé‡åˆ°çš„ CSS ç›¸å…³é—®é¢˜å¾ˆå°‘ï¼Œå¤§æ¦‚æŒæ¡ä¸¤ä¸ªé—®é¢˜å³å¯ã€‚ æ›´å¤š CSS ç›¸å…³é¢è¯•é¢˜å¯æŸ¥é˜…ï¼š CSS çŸ¥è¯†ç‚¹æ•´ç† 1. æ°´å¹³å±…ä¸­å¸ƒå±€è¿™ä¸ªç®—æ˜¯ç»å…¸ä¸­çš„ç»å…¸é¢˜äº†ï¼Œä¹‹å‰æˆ‘ä¹Ÿæ€»ç»“è¿‡ä¸€ç¯‡ æ°´å¹³å‚ç›´å±…ä¸­ çš„æ–‡ç« ï¼Œç½‘ä¸ŠåŒæ ·ä¹Ÿæœ‰å¾ˆå¤šç›¸å…³çš„é¢˜ç›®ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚ å½“ç„¶ï¼Œè¿™ä¸ªé—®é¢˜é—®å‡ºæ¥åªèƒ½ç®—æ˜¯ä¸€ä¸ªå¼•å­ï¼Œäºæ­¤å¼•å‡ºçš„é—®é¢˜è¿˜åŒ…æ‹¬ï¼š flex ç›¸å…³çŸ¥è¯† translate å­—ä½“æ¨¡ç³Šé—®é¢˜ ç›¸å…³æ–‡ç« ï¼š Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ translateZ å­—ä½“æ¨¡ç³Šé—®é¢˜ transform ä½¿ç”¨å¯¼è‡´å…ƒç´ å†…å­—ä½“å‡ºç°æ¨¡ç³Šçš„å‘ 2. BFC é—®é¢˜è¯¥éƒ¨åˆ†ä¹Ÿæ˜¯è€ç”Ÿé•¿è°ˆçš„å†…å®¹ï¼Œå¯å‚è€ƒæˆ‘ä¹‹å‰æ€»ç»“çš„æ–‡ç«  æµ…è°ˆ BFCï¼Œè¿™é‡Œä¹Ÿä¸åšèµ˜è¿°äº†ã€‚ é¢è¯•å‡º CSS çš„é—®é¢˜å¯ä»¥è¯´åŸºæœ¬ä¸Šå°±è¿™ä¹ˆä¿©ï¼Œä¸ä¼šæœ‰è¿‡å¤šå…¶ä½™çš„ç»†èŠ‚è€ƒå¯Ÿï¼ˆé™¤éæ ¡æ‹›ç”Ÿï¼‰ï¼Œé‡ç‚¹è¿˜æ˜¯åœ¨ JavaScriptã€ç®—æ³•å’Œé¡¹ç›®ç»éªŒä¸Šã€‚ JavaScript éƒ¨åˆ†JS éƒ¨åˆ†é¢è¯•ä¹ŸåŸºæœ¬å’Œç½‘ä¸Šçš„é¢ç»å·®å¼‚ä¸å¤§ï¼Œé™¤éåƒå¤´æ¡ã€é˜¿é‡Œéƒ¨åˆ†ä¼šè€ƒå¯Ÿä¸€äº›ååŸç†æ€§çš„é—®é¢˜å¤–ï¼Œå…¶ä½™çš„åŸºæœ¬æ˜¯ ES6 å¤–åŠ ä¸€ä¸¤é“ JS é¢˜ï¼Œå¤§è‡´æœ‰å¦‚ä¸‹å†…å®¹ï¼š 1. ES6 ï½ 11 æ–°ç‰¹æ€§è¯¥éƒ¨åˆ†çš„é—®é¢˜åŸºæœ¬ä¸Šå’Œ ES6 å…¥é—¨æ•™ç¨‹ æ²¡å¤ªå¤šå‡ºå…¥ï¼ŒæŠŠç½‘ä¸Šé‚£éƒ¨åˆ†çŸ¥è¯†å•ƒå®Œï¼Œç„¶åé¡¹ç›®ä¸­å¤šæ’¸æ’¸åŸºæœ¬ä¸Šæ²¡é—®é¢˜ï¼Œæ¯”è¾ƒé‡ç‚¹çš„æ˜¯è¿™ä¹ˆå‡ ä¸ªï¼š ä» letã€const é—®åˆ° é—­åŒ…å‡½æ•°ï¼Œæœ€ååˆ° ä½œç”¨åŸŸ ç›¸å…³å†…å®¹ åŸå‹é“¾ ä¸ Class Promise ä¸ ä»£ç æ‰§è¡Œé¡ºåº ES Module ä¸ CommonJs å·®å¼‚ ç®­å¤´å‡½æ•° ä¸ this ç›¸å…³é—®é¢˜ åƒ Proxyã€è§£æ„ã€Setã€Mapã€å¯¹è±¡æ•°ç»„ç­‰çš„æ‰©å±• é—®é¢˜ä¹‹ç±»çš„ï¼Œé—®çš„é¢‘ç‡å¾ˆå°ï¼Œæˆ‘æ˜¯æ²¡æœ‰è¢«é—®åˆ°è¿‡ã€‚ ç›¸å…³æ–‡ç« ï¼š æ·±å…¥ç†è§£ JavaScript é—­åŒ…ä¹‹ä»€ä¹ˆæ˜¯é—­åŒ… 2. bind å’Œ apply/call çš„åŒºåˆ«ï¼Œå®ç°ä¸€ä¸ª bindæ ¹æœ¬åŒºåˆ«æ˜¯ bind è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç»‘å®šæ—¶ä¸æ‰§è¡Œï¼Œè°ƒç”¨æ—¶æ‰§è¡Œï¼›åè€…ç›´æ¥æ‰§è¡Œã€‚ å‚è€ƒé¢è¯•é¢˜é¢˜è§£ 3. å®ç°ä¸€ä¸ªä»»åŠ¡è°ƒåº¦å‡½æ•°è¿™éƒ¨åˆ†è€ƒå¯Ÿå¯¹ Promise çš„ç†è§£ï¼Œåªè¦çŸ¥é“â€œå½“å¼‚æ­¥å‡½æ•°å¤„ç†å®Œè·å¾—äº†è¿”å›çš„ç»“æœåï¼Œå†è°ƒç”¨ä¸‹ä¸€ä¸ªä»»åŠ¡â€è¿™ä¸ªé€»è¾‘åï¼Œé¢˜ç›®å°±å¾ˆå¥½è§£å¼€äº†ã€‚ å‚è€ƒé¢è¯•é¢˜é¢˜è§£ 4. å®ç°ä¸€ä¸ª JSONPè¿™ä¸ªé—®é¢˜æˆ‘å½“æ—¶æ²¡å†™å‡ºæ¥ï¼Œä½†æ˜¯å’Œé¢è¯•å®˜è¯´æ˜äº†æ€è·¯ï¼ˆåˆ·é¢˜åˆ·æ¼äº†ï¼‰ã€‚JSONP çš„æ€è·¯æ˜¯ script è„šæœ¬ä¸å—è·¨åŸŸé™åˆ¶ï¼Œå› æ­¤åç«¯å°†è¿”å›å†…å®¹é€šè¿‡ JSON æ‹¼æ¥åˆ° script é“¾æ¥å‡½æ•°å†…åï¼Œå‰ç«¯æ‹¿åˆ° script è„šæœ¬å°±ä¼šè§¦å‘å…¨å±€å‡½æ•°æ‰§è¡Œï¼ˆæè¯·æ³¨å†Œçš„ä¸€ä¸ª callback å‡½æ•°ï¼‰ã€‚ å‚è€ƒé¢è¯•é¢˜é¢˜è§£ 5. å®ç° excel çš„å­—ç¬¦ä¸²åæ ‡è½¬æ•°ç»„è¿™ä¸ªé¢è¯•é¢˜æ˜¯æˆ‘è§‰å¾—æœ€ç®€å•çš„ä¸€ä¸ªï¼Œä¸»è¦æ˜¯è€ƒå¯Ÿç®€å•çš„æ­£åˆ™ä»¥åŠè¿›åˆ¶è½¬æ¢ã€‚åªè¦çŸ¥é“â€œ10 è¿›åˆ¶è½¬ N è¿›åˆ¶â€ä»¥åŠâ€œN è¿›åˆ¶è½¬ 10 è¿›åˆ¶â€çš„é€»è¾‘ï¼Œè¯¥é¢˜ä¸éš¾è§£ã€‚ å‚è€ƒé¢è¯•é¢˜é¢˜è§£ å¤§è‡´éƒ½æ˜¯ä¸€äº›ä¸æ˜¯ç‰¹åˆ«éš¾çš„æ‰‹å†™ä»£ç çš„é¢˜ç›®ï¼Œæ›´å¤šæ‰‹å†™ä»£ç çš„é¢˜ç›®å¯å‚è€ƒ æ‰‹å†™ä»£ç ç³»åˆ— 6. ä¸ºä»€ä¹ˆæå‰è°ƒç”¨ let å£°æ˜çš„å˜é‡ä¼šæŠ¥é”™è¿™ä¸ªå¾—å›ç­”åˆ° let ä¼šåˆ›å»ºä¸€ä¸ªå±€éƒ¨å—ï¼Œå› ä¸ºä» ES6 ä¹‹åå°±æœ‰äº†å—çº§ä½œç”¨åŸŸäº†ï¼Œä½œç”¨åŸŸå¤–çš„å˜é‡æ— æ³•è°ƒç”¨åˆ°ä½œç”¨åŸŸå†…çš„å˜é‡ï¼Œå› æ­¤åœ¨ JS ç¬¬ä¸€æ¬¡è§£æä»£ç çš„æ—¶å€™ï¼Œè¿™ä¸œè¥¿ä¸ä¼šå¼„åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼Œåœ¨å®ƒä¹‹å‰è°ƒç”¨æ—¶ï¼Œé€šè¿‡ RHS æŸ¥è¯¢å°±æ— æ³•æŸ¥åˆ°ï¼Œäºæ˜¯å°±æŠ¥é”™äº†ã€‚ å¯å‚é˜… let å’Œ var çš„åŒºåˆ« Nodeè¿™éƒ¨åˆ†æˆ‘ä¹Ÿé‡åˆ°è¿‡ä¸€äº›ï¼Œè§£é‡Šè¿‡åªä¼šå¾ˆæµ…çš„ä½¿ç”¨ï¼Œç„¶åé¢åˆ°çš„é—®é¢˜ä¸»è¦ä¸ºä¸€ä¸‹ä¸¤ä¸ªã€‚Node æ·±æŒ–ä¹Ÿä¼šæŒ–å‡ºå¾ˆå¤šå†…å®¹ï¼Œæ¯”å¦‚ï¼šV8 å’Œ Chrome æµè§ˆå™¨å†…æ ¸çš„ V8 æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œäº‹ä»¶å¾ªç¯çš„åŒºåˆ«ç­‰ç­‰ï¼Œæœ€å¥½å‡†å¤‡å‡†å¤‡ã€‚ 1. è§£é‡Šä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯ Event Loopå…¶å®è¿™ä¸ªåªè¦ç­”é“ â€œå¼‚æ­¥éé˜»å¡æ¨¡å¼â€ ä»¥åŠè§£é‡Šä¸€ä¸‹ å®ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€åŒæ­¥ä»»åŠ¡ çš„ä¸ªäººç†è§£åŸºæœ¬ä¸Šèƒ½è¿‡ï¼Œå½“ç„¶è¶Šæ ‡å‡†è¶Šå¥½ï¼Œå› ä¸ºè¿™ä¸ªå­¦ä¹  Node çš„æœ€åŸºæœ¬çš„çŸ¥è¯†ã€‚ å¯å‚é˜… å¸¦ä½ å½»åº•å¼„æ‡‚ Event Loop JavaScript ä¸­çš„ Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æœºåˆ¶ 2. npm çš„ç†è§£è¯¥éƒ¨åˆ†ä¸»è¦è¿˜æ˜¯å¯¹ node_modules çš„ä¸€äº›å˜åŒ–å’Œé—®é¢˜è¿›è¡Œè€ƒå¯Ÿï¼Œä»¥åŠ lock æ–‡ä»¶çš„ç†è§£ï¼Œè§£é‡Šæ¸…é™¤è¿™ä¸ªå°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚ å¯å‚é˜… npm install åŸç†åˆ†æ 3. npm å‘å¸ƒæ—¶ç‰ˆæœ¬å·çš„é—®é¢˜emmmï¼Œè¿™éƒ¨åˆ†è§£é‡Šä¸€ä¸‹é¡¹ç›®ä¸åŒç¨‹åº¦çš„ä¿®æ”¹è¯¥æ€ä¹ˆå‡çº§ç‰ˆæœ¬å·å³å¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼š é¡¹ç›®ä» v1.0.0 å‡çº§ç‰ˆæœ¬ æ”¹äº†ä¸ªç»„ä»¶çš„å° bugï¼š v1.0.1 æ›´æ–°äº†ä¸€ä¸ªç»„ä»¶çš„å‡½æ•°ï¼Œæ–°å¢äº†ä¸€äº›ç»„ä»¶ï¼š v1.1.0 ç»„ä»¶åº“ä»æ”¯æŒ Vue å˜ä¸ºæ”¯æŒ React äº†ï¼š v2.0.0 ç®—æ³•é¢˜å› ä¸ºå‰ç«¯å¯¹ç®—æ³•ä¸æ˜¯å¾ˆä¸¥ï¼Œé™¤äº†å¤´æ¡æœ‰äº›ç¥ç»è´¨ä»¥å¤–ï¼Œå…¶ä½™çš„åªéœ€è¦ç¨å¾®åˆ·åˆ· leetcode ä¸Šçš„ç®€å•ç®—æ³•é¢˜ï¼ˆä¸»è¦åˆ·åˆ· äºŒå‰æ ‘ çš„é¢˜ï¼‰ï¼ŒåŸºæœ¬ä¸Šæ²¡é—®é¢˜ã€‚ ç®—æ³•é¢˜çš„é‡ç‚¹åŸºæœ¬ä¸Šåœ¨äºŒå‰æ ‘ä¸Šï¼Œå› ä¸ºå¯ä»¥ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿï¼Œç„¶åå°±æ˜¯å †å’ŒåŠ¨æ€è§„åˆ’ã€‚ æ¨èåˆ·é¢˜æ€è·¯ä¸ºï¼š åŸºç¡€æ’åºç®—æ³• æ•°ç»„ç›¸å…³ç®—æ³• äºŒå‰æ ‘çš„ç®—æ³•é¢˜ å †å’ŒåŠ¨æ€è§„åˆ’ ä¸€èˆ¬åˆ·ç®€å•çš„å°±è¡Œäº†ã€‚ leetcode ä¼ é€é—¨ HTTPHTTP æ–¹ä¾¿ä¸»è¦è¿˜æ˜¯è€ƒå¯ŸçŠ¶æ€ç ã€ç¼“å­˜å’Œæµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹ï¼Œç¨å¾®æ·±ä¸€ç‚¹çš„å°±æ˜¯å¦‚ä¸ºä»€ä¹ˆ TCP æ…¢ã€DNS è§£æç›¸å…³ã€é¦–éƒ¨å‹ç¼©ç®—æ³• ç­‰ã€‚ æµè§ˆå™¨æ¸²æŸ“ï¼ˆä»è¾“å…¥ url åˆ°é¡µé¢æ¸²æŸ“çš„å®Œæˆè¿‡ç¨‹ï¼‰è¿™ä¸ªé¢˜å…¶å®é—®çš„æŒºå¤šçš„ï¼Œç®€å•æè¿°ä¸€ä¸‹æ•´ä½“æµç¨‹ï¼š DNS è§£æåŸŸåå¾—åˆ° IPï¼›ï¼ˆæµè§ˆå™¨ç¼“å­˜ -&gt; æœ¬åœ°ç¼“å­˜ -&gt; DNS æœåŠ¡å™¨ -&gt; æ ¹æœåŠ¡å™¨ï¼‰ æ‹¿åˆ°æœåŠ¡å™¨åœ°å€ï¼Œä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œ3 æ¬¡æ¡æ‰‹ï¼› è·å–å¹¶è§£æ html æ–‡ä»¶ï¼Œå¼€å§‹æ„å»º CSSTree å’Œ DomTreeï¼› åˆæˆ RenderTree å¹¶åœ¨é¡µé¢å¸ƒå±€ï¼› é¡µé¢ç»˜åˆ¶ï¼› ç¦»å¼€é¡µé¢ï¼Œ4 æ¬¡æŒ¥æ‰‹ è¿™é‡Œé¢ä¹Ÿä¼šç»†æ‰£ä¸€äº›å†…å®¹ï¼Œæ¯”å¦‚DNS æ€ä¹ˆè§£æçš„ã€3 æ¬¡æ¡æ‰‹ å’Œ 4 æ¬¡æŒ¥æ‰‹åˆ†åˆ«åšäº†ä»€ä¹ˆ 304 ä¸ç¼“å­˜è¯¥éƒ¨åˆ†ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™å³å¯ã€‚ å‚é˜… https://juejin.im/post/6844903512946507790 HTTPã€HTTPSã€HTTP2ã€HTTP3 å’Œ WebSocketè¿™äº›çŸ¥è¯†åŸºæœ¬ä¸Šæ˜¯ä¸€å¥—èµ°çš„ï¼Œå¤šæŸ¥é˜…æ–‡ç« å³å¯ã€‚å› ä¸ºæˆ‘æŒæ¡çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œä»…æ˜¯æµ…æµ…è°ˆäº†ä¸€äº›å†…å®¹ä»¥åŠéƒ¨åˆ†å®ç°ï¼Œè¿™äº›ç½‘ä¸ŠåŸºæœ¬éƒ½èƒ½æ‰¾åˆ°ï¼Œæƒ³å’Œé¢è¯•å®˜è°ˆç¬‘é£ç”Ÿçš„è¯æœ€å¥½è¿˜æ˜¯ç ”ç©¶ç ”ç©¶ã€‚ æˆ‘é‡åˆ°çš„é—®é¢˜åŒ…æ‹¬ï¼š HTTP å’Œ HTTPS æœ‰ä»€ä¹ˆä¸åŒ HTTP2 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Œä¸ HTTP1.1 ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ HTTP2 çš„åŠ å¯†æµç¨‹èƒ½æè¿°ä¸€ä¸‹å— HTTP3 ä½ æœ‰äº†è§£å—ï¼Œä¸ HTTP2 ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ å¡å°¼é¡¹ç›®ä¸­æœ‰ç”¨åˆ° Websocketï¼Œä½ èƒ½è¯´è¯´å®ƒæœ‰ä»€ä¹ˆå¥½å¤„å— å‚é˜… HTTP2 ä¸ HTTP3 æ–°ç‰¹æ€§ä¸€è§ˆ HTTP2 è¯¦è§£ å·©å›ºä½ çš„ HTTP çŸ¥è¯†ä½“ç³» Nginx æ­£å‘ä»£ç†å’Œåå‘ä»£ç† è´Ÿè½½å‡è¡¡å’Œå®ç°æ–¹å¼ï¼Œä¼˜ç¼ºç‚¹ gzip é¦–éƒ¨å‹ç¼© Webpackè¿™éƒ¨åˆ†å†…å®¹åœ¨å‰ç«¯é¢è¯•æ—¶ä¹Ÿæ˜¯åŠ åˆ†é¡¹ï¼Œå¼€å‘ç‚¹åŸºç¡€æ’ä»¶ï¼Œäº†è§£ä¸‹ Webpack ç¼–è¯‘åçš„å†…å®¹å’Œæºç ç›¸å…³çš„å†…å®¹ï¼Œå¼€å‘ç‚¹ç®€å•çš„åŒ…ï¼ŒåŸºç¡€æ‰å®å·©å›ºã€‚ æ›´å¤š Webpacké—®é¢˜å¯å‚é˜…ï¼šå…³äº webpack çš„é¢è¯•é¢˜ 1. webpack ä¸»è¦æ˜¯ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜çš„æ ¸å¿ƒæ€è·¯ï¼š JS çš„æ¨¡å—åŒ–å¼€å‘ æ‰“åŒ…æ„å»ºä¸ºä¸€ä¸ªæ•´ä½“ å…¶å®æŠ“ä½â€œæ¨¡å—åŒ–â€æ¥å›ç­”å³å¯ï¼Œå¯ä»¥ç®€å•è¯´ä¸€ä¸‹ webpack çš„ç”±æ¥åŸå› ï¼Œä½†ä¸»è¦è¿˜æ˜¯å› ä¸º JS çš„æ¨¡å—åŒ–å¼€å‘æ–¹å¼ã€‚ 2. plugins å’Œ loader çš„åŒºåˆ« Loader: ä¸»è¦ç”¨äºä½¿ Webpack å°†é JS æ–‡ä»¶è½¬åŒ–ä¸º JS æ–‡ä»¶ Plugins: ä¸»è¦ç”¨äºè§£å†³ Loader æ— æ³•è§£å†³çš„äº‹ï¼Œç”¨äºè¾…åŠ©ï¼Œå¦‚ï¼šå‹ç¼©ã€æ‰“åŒ… ç­‰ 3. Webpack çš„ Loader å’Œ Plugins çš„å¼€å‘æ€æƒ³è¿™éƒ¨åˆ†æˆ‘æ²¡å›ç­”ä¸Šæ¥ï¼Œæ²¡å¼€å‘è¿‡ï¼Œå¯å‚è€ƒä¸€ä¸‹å¯¹åº”æ–‡ç« ã€‚ 4. äº†è§£è¿‡ Webpack åŸç†å—ï¼Œèƒ½ç®€å•ä»‹ç»ä¸€ä¸‹å—åŒæ ·æ²¡å›ç­”ä¸Šæ¥ã€‚ 5. åšè¿‡å“ªäº› Webpack çš„æ€§èƒ½ä¼˜åŒ–å› ä¸ºäº†è§£è¿‡ Vue Plugins éƒ¨åˆ†çš„ç¼–å†™ï¼Œä¹Ÿåšè¿‡ä¸€ç‚¹ç‚¹ DllPlugins çš„ç¼–å†™ï¼Œå°†è¿™äº›ç»™é¢è¯•å®˜è¯´äº† DllPlugins é¢„æ‰“åŒ… éƒ¨åˆ† ES6 æ¨¡å—çš„ TreeShaking åˆ†æåŒ…ä½“ç§¯ï¼Œç„¶åéƒ¨åˆ†æ’ä»¶æŒ‰éœ€å¼•ç”¨ 6. æœ‰åšè¿‡åŒ…çš„å¼€å‘å—ï¼Œèƒ½æè¿°ä¸€ä¸‹å¼€å‘æ€è·¯ä»‹ç»äº†ä¸€ä¸‹å½“åˆå†™ npm åŒ…æ—¶çš„ä¸€äº›æ€æƒ³ï¼š Library æ‰“åŒ…å’ŒæŒ‰éœ€æ‰“åŒ… ç±»ä¼¼ Element-ui çš„é¡¹ç›®ç»“æ„çš„åˆ’åˆ† æ–‡æ¡£çš„ä¸€äº›è®¾è®¡å’Œå»ºè®¾æ€è·¯ ç»„ä»¶çš„ä¸€äº›ç¼–å†™æ€è·¯ TypeScriptè¿™éƒ¨åˆ†ä¹Ÿæ˜¯åŠ åˆ†é¡¹ï¼Œä»¥å‰æœ‰è¿‡ Java åŸºç¡€è¿™éƒ¨åˆ†åº”è¯¥é—®é¢˜ä¸å¤§ï¼Œç†Ÿè¯»å®˜ç½‘ï¼Œå­¦ä¹ ä¸‹è£…é¥°å™¨çš„ç¼–å†™ï¼Œä¸€èˆ¬ä¹Ÿæ²¡ä»€ä¹ˆå¤ªéš¾çš„å†…å®¹ã€‚ æ›´å¤šå†…å®¹å¯ä»¥å‚é˜… Typescript é¢è¯•é—®é¢˜ 1. interface å’Œ type æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬èƒ½äº’ç›¸ç»§æ‰¿å— interface ä¸èƒ½å£°æ˜åŸºæœ¬ç±»å‹ï¼Œtype å¯ä»¥ï¼› type æ— æ³• extendsï¼Œä½†èƒ½é€šè¿‡äº¤å‰ç»§æ‰¿ï¼ˆ&amp;ï¼‰æ¥å®ç°ç»§æ‰¿ï¼› interface èƒ½å¤Ÿåˆå¹¶å£°æ˜ï¼› interface èƒ½ extends typeï¼Œtype ä¹Ÿèƒ½äº¤å‰ç»§æ‰¿ï¼ˆ&amp;ï¼‰ interfaceï¼Œå®ƒä»¬ä¹Ÿèƒ½è‡ªå·±ç»§æ‰¿è‡ªå·±ã€‚ å¯å‚é˜…ï¼š interface VS type 2. namespace å’Œ module åŒºåˆ«ç®€å•æ¥è¯´ï¼Œnamespace ç›¸å½“äºåŒ…åï¼Œmodule ç›¸å½“äºæ–‡ä»¶ï¼Œå®˜æ–¹ä¸æ¨èç”¨ module äº†ã€‚ä¸»è¦è§£å†³å¤šæ–‡ä»¶å‘½åå†²çªé—®é¢˜ï¼Œç›®å‰æˆ‘åœ¨é¡¹ç›®å†…ä»… vuex éƒ¨åˆ†ä½¿ç”¨ï¼Œä¸€å¤„å£°æ˜ï¼Œå¤šå¤„ä½¿ç”¨ã€‚ 3. TypeScript ä¼˜ç¼ºç‚¹è¿™éƒ¨åˆ†ä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºï¼Œæˆ‘æ€»ç»“çš„ä¸€äº›ï¼š å‰æœŸå¼€å‘æ—¶é—´æˆæœ¬å¤§ï¼ŒåæœŸç»´æŠ¤æ–¹ä¾¿ åˆä½œå¼€å‘æ–¹ä¾¿ï¼Œè§„èŒƒæ€§å¼º ç»„ä»¶æ½œåœ¨é—®é¢˜å‰æœŸå®¹æ˜“æš´éœ²å‡ºæ¥ï¼Œéšè—é”™è¯¯å°‘ è£…é¥°å™¨å¼€å‘æ¨¡å¼å¾ˆä¾¿æ· è¿™é‡Œä¸ä¼šè£…é¥°å™¨çš„å°½é‡ä¸è¦è°ˆè¿™æ–¹é¢çš„å†…å®¹ï¼Œä½†è¿™éƒ¨åˆ†ç®—æ˜¯ TS çš„é‡ç‚¹éƒ¨åˆ†ï¼Œå»ºè®®è¡¥è¡¥ã€‚ æ¡†æ¶ç›¸å…³æ¡†æ¶å› ä¸ºæˆ‘è¿™è¾¹æ˜¯å­¦ä¹  Vue ç›¸å…³çš„å†…å®¹ï¼Œäº†è§£éƒ¨åˆ†æºç çš„çŸ¥è¯†ï¼Œè¿™éƒ¨åˆ†æ·±æŒ–ä¸€ç‚¹å‡†æ²¡é”™ï¼ŒåŸºæœ¬é—®é¢˜ç½‘ä¸Šèƒ½æ‰¾åˆ°ï¼Œè¿™é‡Œå°±åˆ—ä¸¾ä¸€äº›ï¼š Vue çš„ æ•°ç»„ æ˜¯æ€ä¹ˆç›‘å¬å˜åŒ–çš„ï¼Ÿï¼ˆåŸç”Ÿæ–¹æ³•é‡å†™ï¼‰ ç®€å•çš„ Observer å‡½æ•°èƒ½å®ç°ä¸€ä¸ªå—ï¼Ÿï¼ˆObject.definePropertyï¼‰ å¦‚æœä¸ç”¨ Vue ç»„ä»¶èƒ½å®ç° EventBus å—ï¼Ÿï¼ˆå¯ä»¥ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ Vue ç»„ä»¶é€šè®¯çš„æ–¹å¼ï¼Ÿï¼ˆ$emitã€propã€providerã€eventbusã€vuex ç­‰ï¼‰ watch å’Œ computed åŒºåˆ«ï¼Ÿï¼ˆæ˜¯å¦åè®¡ç®—å±æ€§ï¼Œæ˜¯å¦ç¼“å­˜å€¼ï¼‰ Vue ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå®˜ç½‘å›¾æœ‰ï¼‰ Vue3 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿï¼ˆproxyã€å‡½æ•°å¼é£æ ¼ç­‰ï¼‰ Diff ç®—æ³•ï¼Ÿï¼ˆåŠ¨æ€è§„åˆ’æ‰¾èŠ‚ç‚¹æ ‘ã€patch è¡¥ä¸åˆ¤æ–­æ˜¯å¦æ›´æ–°èŠ‚ç‚¹ã€æ›´æ–°ï¼‰ é¡¹ç›®ç›¸å…³å…¶å®é¢è¯•é¢˜åœ¨æ•´ä¸ªé¢è¯•ç¯èŠ‚ä¸­ä»…ä»…åœ¨ä¸€é¢ç¢°çš„è¾ƒå¤šï¼ŒäºŒé¢ä¼šç¨å¾®æåˆ°ä¸€éƒ¨åˆ†ï¼ˆä¸€èˆ¬æ˜¯ç®—æ³•ï¼‰ï¼Œåé¢åŸºæœ¬ä¸Šéƒ½æ˜¯é—®é¡¹ç›®ç›¸å…³çš„å†…å®¹äº†ã€‚è¿™éƒ¨åˆ†ä¸å¤ªå¥½æè¿°ï¼Œå¤§æ¦‚çš„ä¸€äº›é—®é¢˜å¦‚ä¸‹ï¼š ç®€å•è§£é‡Šä¸€ä¸‹ä½ çš„é¡¹ç›®ï¼Ÿï¼ˆæè¿°éœ€è¦ç²¾ç®€ã€æµç•…ã€é¡¹ç›®é—´æ˜¯å¦æœ‰å…³è”ã€é¡¹ç›®å¼€å‘çš„ç›®çš„ï¼‰ é¡¹ç›®ä¸­é‡åˆ°æœ€éš¾çš„é—®é¢˜ï¼Œä½ æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿï¼ˆæœ‰æŠŠæ¡çš„ï¼Œæœ€å¥½æ˜¯å¯ä»¥ä½“ç°è‡ªèº«åœ¨è§£å†³é—®é¢˜æ—¶èƒ½å‡¸æ˜¾ä»·å€¼çš„ï¼‰ ä½ å¯¹ xxx é¡¹ç›®çš„ç†è§£ï¼Œæ€ä¹ˆè®¾è®¡çš„ï¼Ÿï¼ˆæœ€å¥½è¿‘æœŸå¼€å‘çš„é¡¹ç›®æ‹¿æ¥è¯´ï¼Œæ¯”è¾ƒç†Ÿï¼Œéœ€è¦ç†ŸçŸ¥æ•´ä½“æµç•…ï¼‰ å¼€å‘å“ªä¸ªé¡¹ç›®æ—¶æ˜¯ä½ æ„Ÿè§‰æ”¶è·æœ€å¤§çš„ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆèƒ½å‡¸æ˜¾ä¸ªäººèƒ½åŠ›çš„é¡¹ç›®ï¼‰ ä½ ä¸ºä»€ä¹ˆè¦æ¢å·¥ä½œï¼Ÿï¼ˆè‡ªå·±æ€è€ƒæ¸…é™¤åŸå› ï¼Œä¸€å®šå¾—æ¸…æ™°ï¼‰ ä½ æœ‰ä»€ä¹ˆä¸ªäººçš„èŒä¸šè§„åˆ’å—ï¼Ÿï¼ˆè‡ªå·±ä¹‹åçš„å‘å±•æ€è·¯ï¼Œæå‰æƒ³æ˜ç™½ï¼‰ ä½ è§‰å¾—ä½ çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¾ˆå…³é”®ï¼Œåƒä¸‡ä¸è¦è¯´ä»€ä¹ˆæœ‰æ½œåŠ›ä¹‹ç±»çš„è¯ï¼ŒåŸºæœ¬å·®è¯„ï¼Œå¾—å‡¸æ˜¾è‡ªå·±çš„ä»·å€¼ï¼šèƒ½ç‹¬ç«‹å¼€å‘é¡¹ç›®ã€èƒ½å¸¦å›¢é˜Ÿã€å–„äºæ²Ÿé€šç­‰ç­‰ï¼‰ å½“ç„¶é¢è¯•æ—¶ç»“ç»“å·´å·´çš„å°±ä¸è¦è¯´è‡ªå·±å–„äºæ²Ÿé€šäº†â€¦â€¦","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"è®°ä¸€æ¬¡ä»»åŠ¡è°ƒåº¦ç®—æ³•é¢˜","slug":"è®°ä¸€æ¬¡ä»»åŠ¡è°ƒåº¦ç®—æ³•é¢˜","date":"2020-09-22T08:32:49.000Z","updated":"2022-07-26T13:15:01.315Z","comments":true,"path":"2020/09/22/è®°ä¸€æ¬¡ä»»åŠ¡è°ƒåº¦ç®—æ³•é¢˜/","link":"","permalink":"https://monocy.gitee.io/2020/09/22/è®°ä¸€æ¬¡ä»»åŠ¡è°ƒåº¦ç®—æ³•é¢˜/","excerpt":"å‰è¨€ES6 çš„ Promise å¯ä»¥æ‹“å±•å¾ˆå¤šæ¯”è¾ƒå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œæ¯”å¦‚æœ€è¿‘ç¢°åˆ°çš„ä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„ç®€å•ä»»åŠ¡è°ƒåº¦å®ç°çš„é¢˜ç›®ï¼Œè¿™é‡Œæˆ‘è®°å½•ä¸€ä¸‹æˆ‘çš„æ€è€ƒå’Œå®ç°ã€‚","text":"å‰è¨€ES6 çš„ Promise å¯ä»¥æ‹“å±•å¾ˆå¤šæ¯”è¾ƒå¥½çš„è°ƒåº¦ç®—æ³•ï¼Œæ¯”å¦‚æœ€è¿‘ç¢°åˆ°çš„ä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„ç®€å•ä»»åŠ¡è°ƒåº¦å®ç°çš„é¢˜ç›®ï¼Œè¿™é‡Œæˆ‘è®°å½•ä¸€ä¸‹æˆ‘çš„æ€è€ƒå’Œå®ç°ã€‚ é¢˜ç›®12345678910111213141516171819202122232425class Scheduler &#123; add(promiseCreator) &#123; // ä»£ç éƒ¨åˆ† &#125;&#125;const scheduler = new Scheduler();function addTask(time, order) &#123; scheduler.add(() =&gt; &#123; return new Promise((res, rej) =&gt; &#123; setTimeout(() =&gt; &#123; console.log('order', order); res(); &#125;, time); &#125;); &#125;);&#125;addTask(1000, '1');addTask(500, '2');addTask(300, '3');addTask(400, '4');// ç»“æœè¦æ±‚ order ä¸ºï¼š 2ã€3ã€1ã€4 æ€è·¯&amp;é¢˜è§£ åˆ†æï¼š ä»ç»“æœæ¥çœ‹ï¼Œå› ä¸ºæ¯æ¬¡åªèƒ½æ‰§è¡Œä¿©å¼‚æ­¥å‡½æ•°ï¼Œå› æ­¤æ•°ç»„å¤„ç†é€»è¾‘å¤§è‡´ä¸ºâ€œé˜Ÿåˆ—â€ ä» scheduler çš„é“¾å¼è°ƒç”¨å¯å‘ç°æ¯æ¬¡è¿”å›çš„éƒ½æ˜¯ Promise å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748(function () &#123; class Scheduler &#123; constructor() &#123; this.eventList = []; this.used = 0; this.currentPos = 0; &#125; add(promiseCreator) &#123; this.eventList.push(promiseCreator); // æ‰§è¡Œä»»åŠ¡ return Promise.resolve(this.excute()); &#125; excute() &#123; if (this.used &lt; 2 &amp;&amp; this.currentPos &lt; this.eventList.length) &#123; this.used++; const currentFunc = this.eventList[this.currentPos++]; return Promise.resolve(currentFunc()).then(() =&gt; &#123; this.used--; // æ¯æ¬¡æ‰§è¡Œå®ŒæŸ¥çœ‹æ˜¯å¦ç»§ç»­æ‰§è¡Œåé¢çš„å†…å®¹ this.excute(); &#125;); &#125; &#125; &#125; const scheduler = new Scheduler(); function addTask(time, order) &#123; scheduler.add(() =&gt; &#123; return new Promise((res, rej) =&gt; &#123; setTimeout(() =&gt; &#123; console.log('order', order); res(); &#125;, time); &#125;); &#125;); &#125; addTask(1000, '1'); addTask(500, '2'); addTask(300, '3'); addTask(400, '4');&#125;)(); éš¾åº¦æå‡å…ˆå‰çš„æ‰“å°éƒ½æ˜¯åœ¨ addTask å‡½æ•°å†…éƒ¨çš„ï¼Œå‡å¦‚æ²¡æœ‰è¿™ä¸ª addTask å‡½æ•°ï¼Œè€Œä¸”è·å–çš„å‡½æ•°ç»“æœéœ€è¦åœ¨ then é“¾ä¸­æ‰“å°å‡ºæ¥ï¼Œè¿™ä¸ªæ”¹æ€ä¹ˆé‡å†™è¿™ä¸ªç±»ã€‚é¢˜è§£å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061(function () &#123; class Scheduler &#123; constructor(maxUsed = 2) &#123; this.eventList = []; this.used = 0; this.maxUsed = maxUsed; this.currentPos = 0; &#125; add(timeout, val) &#123; const excute = () =&gt; &#123; if ( this.currentPos &lt; this.eventList.length &amp;&amp; this.used &lt; this.maxUsed ) &#123; const tarData = this.eventList[this.currentPos++]; const &#123; res, rej, timeout, val &#125; = tarData; this.used++; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(val); &#125;, timeout); &#125;) .then(res, rej) .finally(() =&gt; &#123; this.used--; excute(); &#125;); &#125; &#125;; // æ‰§è¡Œä»»åŠ¡ return new Promise((res, rej) =&gt; &#123; this.eventList.push(&#123; res, rej, timeout, val, &#125;); return excute(); &#125;); &#125; &#125; const scheduler = new Scheduler(); scheduler.add(1000, '1').then(res =&gt; &#123; console.log(res); &#125;); scheduler.add(500, '2').then(res =&gt; &#123; console.log(res); &#125;); scheduler.add(300, '3').then(res =&gt; &#123; console.log(res); &#125;); scheduler.add(400, '4').then(res =&gt; &#123; console.log(res); &#125;);&#125;)(); å°ç»“å…¶å®é¢˜ç›®è€ƒå¯Ÿçš„æ˜¯å¯¹äº Promise å‡½æ•°ä»¥åŠé“¾å¼è°ƒç”¨çš„ç†è§£ï¼Œäº†è§£è¿‡ Promise å®ç°æœºåˆ¶å…¶å®åœ¨ç¢ç£¨æ­¤é¢˜æ—¶è¿˜æ˜¯æœ‰é‚£ä¹ˆä¸€ç‚¹å¤´ç—›ï¼Œåªè¦å…³é”®çš„ç±»é€’å½’å‡½æ•°éƒ¨åˆ†ç¢ç£¨æ¸…æ¥šäº†ï¼Œæ•´ä½“ä¹Ÿä¸æ˜¯å¾ˆéš¾ã€‚","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"å˜é‡æå‡å®Œå…¨è§£è¯»","slug":"å˜é‡æå‡å®Œå…¨è§£è¯»","date":"2020-09-21T11:58:00.000Z","updated":"2020-09-21T13:27:34.883Z","comments":true,"path":"2020/09/21/å˜é‡æå‡å®Œå…¨è§£è¯»/","link":"","permalink":"https://monocy.gitee.io/2020/09/21/å˜é‡æå‡å®Œå…¨è§£è¯»/","excerpt":"å‰è¨€å˜é‡æå‡è¿™ä¸ªé—®é¢˜ä¸è®ºæ˜¯ä»¥å‰è¿˜æ˜¯ç°åœ¨ï¼Œæ€»æ˜¯ä½œä¸ºé¢è¯•å¸¸è€ƒé¢˜å‹å‡ºç°ï¼Œå› ä¸º ES6 çš„æ–°ç‰¹æ€§çš„æ¨è¡Œï¼Œå¯¹äº var æ‰€å¯¼è‡´çš„å˜é‡æå‡é—®é¢˜åœ¨é¡¹ç›®ä¸­å°±å¾ˆå°‘å­˜åœ¨äº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ letã€const èƒ½è§£å†³è¿™ä¸ªå˜é‡æå‡çš„é—®é¢˜å‘¢ï¼Œé™ä¸‹å¿ƒæ¥å“ä¸€å“ï¼Œå…¶å®è¿˜æ˜¯æœ‰å¾ˆå¤šå†…å®¹å¯ä»¥å­¦åˆ°çš„ã€‚","text":"å‰è¨€å˜é‡æå‡è¿™ä¸ªé—®é¢˜ä¸è®ºæ˜¯ä»¥å‰è¿˜æ˜¯ç°åœ¨ï¼Œæ€»æ˜¯ä½œä¸ºé¢è¯•å¸¸è€ƒé¢˜å‹å‡ºç°ï¼Œå› ä¸º ES6 çš„æ–°ç‰¹æ€§çš„æ¨è¡Œï¼Œå¯¹äº var æ‰€å¯¼è‡´çš„å˜é‡æå‡é—®é¢˜åœ¨é¡¹ç›®ä¸­å°±å¾ˆå°‘å­˜åœ¨äº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ letã€const èƒ½è§£å†³è¿™ä¸ªå˜é‡æå‡çš„é—®é¢˜å‘¢ï¼Œé™ä¸‹å¿ƒæ¥å“ä¸€å“ï¼Œå…¶å®è¿˜æ˜¯æœ‰å¾ˆå¤šå†…å®¹å¯ä»¥å­¦åˆ°çš„ã€‚ å˜é‡æå‡çš„æœ¬è´¨é¦–å…ˆä¸ºä»€ä¹ˆä¼šæœ‰å˜é‡æå‡ï¼Ÿå…ˆå‰åœ¨æ·±å…¥äº†è§£ thisä¸€æ–‡ä¸­æœ‰ç®€å•æåˆ°è¿‡ï¼šâ€œJS å› ä¸ºæ˜¯è¿è¡Œæ—¶ç¼–è¯‘çš„ï¼Œä¼šç²—ç•¥çš„æå–å˜é‡å£°æ˜ï¼Œå› æ­¤ä¼šæœ‰å˜é‡æå‡â€ã€‚åœ¨å˜é‡æå‡åï¼Œå½“ç¨‹åºæ‰§è¡Œåˆ°å¯¹åº”è¡Œåœ¨è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå› æ­¤å¤§æ¦‚æµå‡ºå¦‚ä¸‹ï¼š å˜é‡å£°æ˜æå‡ å‡½æ•°å£°æ˜æå‡ï¼ˆå·²ç»æŒ‡å‘äº†å‡½æ•°å£°æ˜çš„å†…å­˜å—ï¼‰ å˜é‡èµ‹å€¼ è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå‡½æ•°å’Œå˜é‡ä¸€èµ·æå‡ï¼Œä½†æ˜¯åœ¨åé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œç»“æœéƒ½ä¼šæ˜¯å‡½æ•°ã€‚ å°ç»“ï¼šå˜é‡å£°æ˜çš„æå‡ä¼˜äºå‡½æ•°å£°æ˜çš„æå‡ã€‚ å˜é‡æå‡çš„ä½ç½®å…¶å®å˜é‡æå‡çš„é—®é¢˜é™¤äº†æå‡çš„é¡ºåºå¤–ï¼Œå¦ä¸€ä¸ªå°±æ˜¯æå‡çš„ä½ç½®äº†ã€‚å…¶å®è¿™ä¸ªåªéœ€è¦è®°ä½ JS ä¸­æœ‰å“ªäº›ä½œç”¨åŸŸäº†ã€‚åœ¨ ES6 ä¹‹å‰ï¼ŒJS çš„ä½œç”¨åŸŸä»…æœ‰ä¸¤ä¸ªï¼š å‡½æ•°ä½œç”¨åŸŸ å…¨å±€ä½œç”¨åŸŸ åœ¨å¼•å…¥ ES6 åæœ‰æ–°å¢äº†ä¸€ä¸ª å—çº§ä½œç”¨åŸŸã€‚åœ¨å˜é‡æå‡æ—¶ï¼Œå…¶å£°æ˜ä»…ä»…èƒ½å¤Ÿæå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€é¡¶ç«¯ï¼ˆå…·ä½“åŸå› å¯æŸ¥é˜…ç¬¬äºŒç¯‡å‚è€ƒæ–‡ç« ï¼‰ã€‚æ‰€ä»¥åœ¨ç¡®å®šäº†ä½œç”¨åŸŸçš„æƒ…å†µä¸‹ï¼Œç»“åˆæå‡çš„é¡ºåºï¼Œæˆ‘ä»¬å°±èƒ½å¾ˆæ˜ç¡®çš„äº†è§£åˆ°å˜é‡çš„é¡ºåºäº†ã€‚ å°ç»“ï¼šJS ä»…æœ‰ å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸ å’Œ å—çº§ä½œç”¨åŸŸã€‚ å°è¯•ç‰›åˆ€åœ¨ä½œç”¨åŸŸå’Œå˜é‡æå‡é¡ºåºéƒ½æ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œè·Ÿç€æ€è·¯è¿‡ä¸€é“é¢˜åŠ æ·±ä¸€ä¸‹å°è±¡ï¼š 12345678910111213141516171819202122232425262728console.log(bb); // function bb() &#123; console.log('change'); &#125;var aa = 123;var bb = 'string';let cc = &#123;&#125;;function bb() &#123; console.log('change');&#125;(function () &#123; var ee = dd = []; cc = 'new String';&#125;)();console.log(aa); // 123console.log(bb); // 'string'var aa;var bb = function() &#123; console.log('who am I');&#125;console.log(aa); // 123console.log(bb); // \"function bb() &#123; console.log('who am I'); &#125;\"console.log(cc); // 'new String'console.log(dd); // []console.log(ee); // Error: ee is not defined è¿™é‡Œåˆå‡ ä¸ªæ³¨æ„çš„å°ç»†èŠ‚ï¼š JS èµ‹å€¼æ“ä½œä¸ºâ€œè‡ªå³å‘å·¦â€è¿›è¡Œçš„ JS å–å€¼æ“ä½œå–æœ€è¿‘çš„ä¸€æ¬¡èµ‹å€¼çš„å€¼ æœªå£°æ˜çš„å˜é‡ä¼šæŠ¥é”™ï¼Œè€Œé undefined å‚è€ƒä¸€ä¸‹å¤„ç†åçš„ç»“æ„ï¼ˆå»ºè®®å¼€ä¸¤ä¸ªé¡µé¢åˆ†å±çœ‹ï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839var aa = undefined;var bb = undefined;let cc; // ä»…å£°æ˜ï¼Œäº§ç”Ÿä¸´æ—¶ç´¢å–ï¼ˆå–ä¸åˆ°å€¼ï¼‰function bb() &#123; console.log('change');&#125;console.log(bb); // function bb() &#123; console.log('change'); &#125;aa = 123;bb = 'string';cc = &#123;&#125;;// console.log(dd) // Error: ee is not defined(function () &#123; var ee = undefined; dd; // æ— å£°æ˜é»˜è®¤æŒ‚åœ¨åˆ° window äº†ï¼ˆæ­¤æ—¶æ‰æŒ‚è½½ä¸Š window çš„ï¼Œå‰é¢æ‹¿ä¸åˆ°ï¼‰ dd = []; ee = dd; // èƒ½æ‹¿åˆ°ä¸Šçº§ä½œç”¨åŸŸä¸­çš„ cc å˜é‡ cc = 'new String';&#125;)();console.log(aa); // 123console.log(bb); // 'string'bb = function() &#123; console.log('who am I');&#125;console.log(aa); // 123console.log(bb); // \"function bb() &#123; console.log('who am I'); &#125;\"console.log(cc); // 'new String'console.log(dd); // []console.log(ee); // Error: ee is not defined æ€»ç»“é‡åˆ°å˜é‡æå‡ç›¸å…³é—®é¢˜æ—¶ï¼Œåªéœ€å…³æ³¨ä¸€ä¸‹å‡ ç‚¹åŸºæœ¬éƒ½èƒ½è§£ç­”ä¸Šæ¥ï¼š å˜é‡æ‰€åœ¨ä½œç”¨åŸŸä½ç½®ï¼› åŒºåˆ†å‡½æ•°æå‡å’Œå˜é‡æå‡ï¼Œå– console æ—¶æœ€è¿‘çš„ä¸€æ¬¡èµ‹å€¼ä½ç½®ï¼› å°å¿ƒå…¨å±€å˜é‡å£°æ˜çš„é™·é˜±ï¼› æ— å˜é‡å£°æ˜çš„æƒ…å†µä¸‹ï¼Œæ‰“å°ä¼šæŠ¥é”™ï¼› å‚è€ƒæ–‡ç«  js ä¸ºä»€ä¹ˆä¼šè¿›è¡Œå˜é‡æå‡ï¼ˆè¯æ³•åˆ†æï¼‰ JS å˜é‡çš„æ‰§è¡Œç¯å¢ƒå’Œç”Ÿå‘½å‘¨æœŸ","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"Mac ç¯å¢ƒé…ç½®","slug":"Mac-ç¯å¢ƒé…ç½®","date":"2020-08-26T08:20:44.000Z","updated":"2022-07-26T13:17:58.422Z","comments":true,"path":"2020/08/26/Mac-ç¯å¢ƒé…ç½®/","link":"","permalink":"https://monocy.gitee.io/2020/08/26/Mac-ç¯å¢ƒé…ç½®/","excerpt":"å‰è¨€æœ€è¿‘æ–°æ¢äº†ä¸€å° Macï¼ˆåŸæ¥å…¬å¸çš„ Mac æ•²å¤šäº†èƒ³è†Šé…¸ï¼‰ï¼Œå› æ­¤åˆè¦é‡æ–°é…ç½® Mac ç¯å¢ƒï¼Œæƒ³äº†æƒ³å¦‚æœä¹‹å Mac åˆæ¢äº†ä¸€å°ï¼Œé‚£ä¸åˆåŒå’å•å¾—é‡æ–°ç¿»é˜…æ–‡æ¡£å†é…ç½®ä¸€é Mac å—ã€‚ä¸ºäº†çœå»ä¹‹åå†æ¬¡æŸ¥èµ„æ–™çš„éº»çƒ¦ï¼Œè¿™é‡Œå†™ä¸€ç¯‡è®°å½•æ–‡ã€‚","text":"å‰è¨€æœ€è¿‘æ–°æ¢äº†ä¸€å° Macï¼ˆåŸæ¥å…¬å¸çš„ Mac æ•²å¤šäº†èƒ³è†Šé…¸ï¼‰ï¼Œå› æ­¤åˆè¦é‡æ–°é…ç½® Mac ç¯å¢ƒï¼Œæƒ³äº†æƒ³å¦‚æœä¹‹å Mac åˆæ¢äº†ä¸€å°ï¼Œé‚£ä¸åˆåŒå’å•å¾—é‡æ–°ç¿»é˜…æ–‡æ¡£å†é…ç½®ä¸€é Mac å—ã€‚ä¸ºäº†çœå»ä¹‹åå†æ¬¡æŸ¥èµ„æ–™çš„éº»çƒ¦ï¼Œè¿™é‡Œå†™ä¸€ç¯‡è®°å½•æ–‡ã€‚ å®‰è£… HomebrewHomebrew å¯ä»¥è¯´æ˜¯æ¯å° Mac å¿…å¤‡çš„åŒ…ç®¡ç†å·¥å…·äº†ã€‚å› ä¸ºå®˜æ–¹çš„æºç»å¸¸è¿æ¥ä¸ä¸Šï¼Œå› æ­¤å¯ç”¨é•œåƒå®‰è£…æ–¹å¼æ¥å®‰è£…ï¼š 12# ä¸­ç§‘å¤§çš„æº/usr/bin/ruby -e \"$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install)\" å¦‚æœä¸­é—´ homebrew-core å®‰è£…ä¸ä¸Šï¼Œåˆ™å…ˆç»ˆæ­¢å®‰è£…ï¼Œç„¶åæ‰§è¡Œä¸‹è¿°æ“ä½œï¼š 12345678# è¿›å…¥å®‰è£…ç›®å½•cd \"$(brew --repo)/Library/Taps/\"# åˆ›å»º homebrew ç›®å½•mkdir homebrew &amp;&amp; cd homebrew# å…‹éš† homebrew-core ä»“åº“git clone git://mirrors.ustc.edu.cn/homebrew-core.git å…‹éš†å®Œæˆåæ‰§è¡Œï¼š 1brew update å¦‚æœæƒ³æ¢æºå¯æŸ¥çœ‹å‚è€ƒæ–‡æ¡£æˆ–è‡ªè¡ŒæŸ¥è¯¢ç›¸å…³æ–‡æ¡£ã€‚ å®‰è£… gitgit åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šç”¨åˆ°ï¼Œå› æ­¤ä¼˜å…ˆå®‰è£…ã€‚ 12345678brew install git# é…ç½® gitgit config --global user.name \"ä½ çš„åå­—\"git config --global user.email \"ä½ çš„é‚®ç®±\"# ç”Ÿæˆ ssh keyï¼ˆä¸€ç›´å›è½¦å³å¯ï¼‰ssh-keygen -t rsa -C \"ä½ çš„é‚®ç®±\" é…ç½® vimå› ä¸ºåç»­çš„é…ç½®éœ€è¦ç”¨åˆ° vimï¼Œå› æ­¤æˆ‘ä»¬å…ˆé…ç½®ä¸€ä¸‹ vimï¼Œè®©ç¼–è¾‘å¾—æ›´èˆ’æœã€‚ åˆ›å»ºä¸€ä¸ª .vimrc æ–‡ä»¶ï¼Œåœ¨å†…éƒ¨åŠ ä¸Šå¦‚ä¸‹å†…å®¹ï¼š 123456789101112131415syntax on \" è®¾ç½®é«˜äº®set number \" é»˜è®¤æ˜¾ç¤ºè¡Œå·set ruler \" æ˜¾ç¤ºæ ‡å°ºset expandtab \" ç©ºæ ¼ä»£æ›¿ Tabset tabstop=2 \" Tab é”®å®½ä¸º 2set nobackup \" ä¸ç”Ÿæˆä¸´æ—¶æ–‡ä»¶set noeb \" åœ¨å¤„ç†æœªä¿å­˜æˆ–åªè¯»æ–‡ä»¶çš„æ—¶å€™ï¼Œå¼¹å‡ºç¡®è®¤set scrolloff=3 \" å…‰æ ‡ç§»åŠ¨åˆ°bufferçš„é¡¶éƒ¨å’Œåº•éƒ¨æ—¶ä¿æŒ3è¡Œè·ç¦»set mouse=a \" å†…éƒ¨æ»šåŠ¨\" è¯­è¨€è®¾ç½®set langmenu=zh_CN.UTF-8set helplang=cn\" ä¸»é¢˜è®¾ç½®set background=darkcolorscheme solarized ä¸»é¢˜éƒ¨åˆ†éœ€è¦å®‰è£…å¯¹åº”çš„åŒ…ï¼Œæ“ä½œå¦‚ä¸‹ï¼ˆå¦‚æœæœ‰åˆ™å¿½ç•¥ï¼‰ï¼š 123456789# åˆ›å»º .vim/colors æ–‡ä»¶å¤¹ï¼ˆæœ‰åˆ™è·³è¿‡ï¼‰mkdir -p ~/.vim/colors# è¿›å…¥æ–‡ä»¶å¤¹cd ~/.vim/colors# å…‹éš†ä¸»é¢˜å¹¶æ‹·è´å‡ºæ¥git clone git://github.com/altercation/vim-colors-solarized.gitcp vim-colors-solarized/colors/solarized.vim ~/.vim/colors/# åˆ é™¤ä»“åº“rm -rf vim-colors-solarized å®‰è£… oh-my-zshåŒæ · oh-my-zsh å®˜æ–¹ç‰ˆå®¹æ˜“æŒ‚ï¼Œè¿™é‡Œä»ç„¶è®°å½•çš„æ˜¯é•œåƒç‰ˆçš„å®‰è£…æ–¹å¼ï¼š 12345# åˆ‡æ¢ shell ä¸º zshï¼ˆé‡æ–°æ‰“å¼€åç”Ÿæ•ˆï¼‰chsh -s /bin/zsh# ä¸‹è½½ oh-my-zsh é•œåƒsh -c \"$(curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)\" é»˜è®¤çš„ zsh è²Œä¼¼ä»…æœ‰ git æ’ä»¶ï¼Œä¸»é¢˜ä¹Ÿä¸æ€ä¹ˆå¥½çœ‹ï¼Œè¿™é‡Œå…ˆæ”¹æ”¹ ~/.zshrcï¼š 123456789101112# åˆ›å»ºä¸€ä¸ª .bashrc æ–‡ä»¶touch ~/.bashrc# æ›´æ”¹ ~/.zshrc## ä¸»é¢˜éƒ¨åˆ†è®¾ç½®ZSH_THEME=\"pygmalion\"## æ’ä»¶éƒ¨åˆ†çš„è®¾ç½®plugins=(git zsh-syntax-highlighting zsh-autosuggestions)## æœ€åä¸€è¡Œæ·»åŠ ä¸Šï¼ˆé™„å¸¦å¯åŠ¨æ‰§è¡Œçš„æ–‡ä»¶ï¼‰source ~/.bashrc é…ç½®å®Œäº†ï¼Œç„¶åæ˜¯ä¸‹è½½æ’ä»¶ 12345# è¿›å…¥è‡ªå®šä¹‰æ’ä»¶ç›®å½•cd ~/.oh-my-zsh/custom/plugins# æ‹·è´æ’ä»¶git clone https://github.com/zsh-users/zsh-autosuggestions.gitgit clone https://github.com/zsh-users/zsh-syntax-highlighting.git é…ç½® itermä¸‹è½½ solarized ä¸»é¢˜ï¼Œä¸‹è½½é“¾æ¥ï¼Œè¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ª Custom æ–‡ä»¶å¤¹ï¼Œè§£å‹ç¼©åœ¨é‡Œè¾¹ï¼Œç„¶åè¿›å…¥ oxs-terminal.app-colors-solarized æ–‡ä»¶å¤¹ï¼Œå®‰è£…å¯¹åº”çš„ä¿© .terminal ä¸»é¢˜ï¼ˆåŒå‡»è¿è¡Œå³å¯ï¼‰ã€‚ å®‰è£…å®Œåä¸‹è½½çš„ä¸»é¢˜å¯ä»¥åˆ æ‰äº† æ‰“å¼€ iTerm2 -&gt; Preferencesï¼Œåˆ†åˆ«é…ç½®ä¸‰å¤„åœ°æ–¹ï¼ˆColorsã€Textã€Windowï¼‰ Colors éƒ¨åˆ†ï¼šé…ç½®ä¸»é¢˜è‰²ä¸º solarized dark Text éƒ¨åˆ†ï¼šè®¾ç½®å­—ä½“ Font å¤§å° Window éƒ¨åˆ†ï¼šè®¾ç½® Transparent èƒŒæ™¯é€æ˜åº¦ ä¸€èˆ¬è®¾ç½®å‰ä¿©å°±å¤Ÿäº†ï¼ŒWindow ä¸»è¦é…ç½® transparence æ¥æ§åˆ¶èƒŒæ™¯é€æ˜åº¦ã€‚ é…ç½® nvmé…ç½® node ç¯å¢ƒè¿™é‡Œé€‰ç”¨ nvm æ¥æ§åˆ¶ï¼Œè¿™æ ·æ–¹ä¾¿ node ç‰ˆæœ¬å¿«é€Ÿåˆ‡æ¢ï¼ŒMac çš„å®‰è£…æ–¹å¼å¾ˆç®€å•ï¼š 1brew install nvm nvm å®‰è£…å®Œåï¼Œé€šè¿‡ nvm ls-remote v12 æ¥çœ‹äº‘ä¸Š 12 ç‰ˆæœ¬ node æœ‰å“ªäº›ï¼Œå®‰è£…æœ€æ–°ç»´æŠ¤ç‰ˆæœ¬çš„ node å³å¯ï¼ˆå…¶ä½™ç‰ˆæœ¬åŒç†ï¼‰ï¼š 12345678# å®‰è£… nodenvm install v12.18.3# å–ä¸ªåˆ«åæ–¹ä¾¿æŸ¥æ‰¾nvm alias node12 v12.18.3# ä½¿ç”¨ node12nvm use node12 æ­¤å¤–ï¼Œéƒ¨åˆ†å…¨å±€å®‰è£…çš„åŒ…è¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹ï¼š yarnï¼ˆé€šè¿‡ yarn å®‰è£…å…¨å±€åŒ…å°±ä¸ç”¨æ‹…å¿ƒ node åˆ‡æ¢åæ‰¾ä¸åˆ°åŒ…ï¼‰ nrmï¼ˆæ¢ npm æºæ¯”è¾ƒæ–¹ä¾¿ï¼‰ pm2ï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰ å®‰è£… nginxä½¿ç”¨ä¸‡èƒ½çš„ brew å®‰è£… 12345# å®‰è£… nginxbrew install nginx# åå°å¯åŠ¨brew services start nginx é™„å¸¦ä¸€äº› nginx çš„é»˜è®¤é…ç½®åœ°å€ï¼š 123456# brew å®‰è£… nginx çš„è·¯å¾„/usr/local/Cellar/nginx/1.6.2# é…ç½®æ–‡ä»¶è·¯å¾„/usr/local/etc/nginx/nginx.conf# æœåŠ¡å™¨é»˜è®¤è·¯å¾„/usr/local/var/www å› ä¸ºå±‚çº§æ¯”è¾ƒæ·±ï¼Œå»ºè®®è¿˜æ˜¯ç”¨ ln -s è½¯é“¾å‡ºæ¥ï¼Œç»Ÿä¸€ç®¡ç†ä¼šæ›´ä¸ºæ–¹ä¾¿ å¸¸ç”¨å·¥å…·æ¨èé™¤äº†ç¯å¢ƒå¤–æˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›åŠå…¬å·¥å…·ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€äº›ï¼š Vscode Numiï¼ˆè‡ªç„¶è¯­è¨€è®¡ç®—å™¨ï¼‰ Chrome Navicat Agendaï¼ˆæˆ‘æ¯”è¾ƒå–œæ¬¢çš„ todoList è½¯ä»¶ï¼‰ WPS XMind Transmitï¼ˆè¿æ¥æœåŠ¡å™¨çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼‰ Alfred4ï¼ˆé«˜é…èšç„¦ï¼‰ Postman Typoraï¼ˆmarkdown å†™ä½œå·¥å…·ï¼‰ Github Desctop rdmï¼ˆredis è¿æ¥å·¥å…·ï¼‰ StarUMLï¼ˆæµç¨‹å›¾ï¼‰ Omniplanï¼ˆæ’æœŸå·¥å…·ï¼‰ OneNote æˆ– æœ‰é“äº‘ç¬”è®° V2Rayxï¼ˆç§‘å­¦ä¸Šç½‘éœ€è¦ï¼‰ Scroll Reverserï¼ˆå¤–æ¥é¼ æ ‡æ»šè½®æ–¹å‘é…ç½®ï¼‰ Axureï¼ˆçœ‹äº§å“åŸå‹å›¾å¿…å¤‡ï¼‰ é…ç½® VSCodeé€šè¿‡ Sync åŒæ­¥æˆ‘ä¸ªäººçš„é…ç½®ï¼Œè¿™é‡Œè®°å½• Sync çš„é…ç½®ï¼Œåç»­åªéœ€é€šè¿‡ gist æ‹‰å–å³å¯ Command/Ctrl + Shift + P è°ƒå‡ºæ§åˆ¶å°ï¼› è¾“å…¥ Syncï¼Œé€‰æ‹© Sync æ‰“å¼€è®¾ç½®ï¼› æ·»åŠ  GIST ID ä¸ºï¼š0e7fde6e07ce3d8a9947880187fe5a3f å‹¾é€‰ â€œå¼ºåˆ¶ä¸‹è½½â€ å’Œ â€œåŒæ­¥æ‰©å±•â€ é€‰é¡¹ï¼ˆå¦‚æœä¸‹è½½ä¸ä¸‹æ¥åˆ™å°†â€œåˆ é™¤æ‰©å±•â€ä¹Ÿé€‰ä¸Šï¼‰ï¼› Shift + Option + D ä¸‹è½½æ’ä»¶å³å¯ï¼› ä¸‹è½½å®Œæˆä¹‹åå¯è®² Sync åŒæ­¥é…ç½®ç»™å…³é—­ï¼Œç„¶åæ ¹æ®è‡ªå·±å–œå¥½æ›´æ–° settings.json çš„é…ç½®æ–‡ä»¶å’Œå®‰è£…è‡ªå·±å–œæ¬¢çš„æ’ä»¶ã€‚ å‚è€ƒæ–‡ç«  Mac ä¸‹é•œåƒå®‰è£… Homebrew å¾ˆå¥½å¾ˆå¼ºå¤§çš„ vimrcï¼ˆå¸¦æ³¨é‡Šç‰ˆï¼‰ ç»™ vim é…ç½® solarized ä¸»é¢˜é¢œè‰² Oh-My-Zsh çš„é…ç½®ä¸ä½¿ç”¨ mac ä¸‹ iterm é…è‰²ã€åŠé€æ˜ä¸æ ·å¼è®¾ç½®","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/tags/ç¯å¢ƒé…ç½®/"}]},{"title":"èƒŒæ™¯æ°´å°ä¸ MutationObserver","slug":"èƒŒæ™¯æ°´å°ä¸-MutationObserver","date":"2020-08-05T03:23:28.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2020/08/05/èƒŒæ™¯æ°´å°ä¸-MutationObserver/","link":"","permalink":"https://monocy.gitee.io/2020/08/05/èƒŒæ™¯æ°´å°ä¸-MutationObserver/","excerpt":"å‰è¨€å› ä¸ºé¡¹ç›®éœ€è¦é…ç½®èƒŒæ™¯æ°´å°ï¼Œä»…å‘ˆç°èƒŒæ™¯æ°´å°è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å½“èƒŒæ™¯æ°´å°éƒ¨åˆ†çš„ä»£ç é€šè¿‡ä»€ä¹ˆåŸå› è¢«å¹²æ‰äº†ï¼ˆä¾‹å¦‚ï¼šæ‰“å¼€æ§åˆ¶å°ï¼Œç»™èƒŒæ™¯æ°´å°éƒ¨åˆ†ä»£ç åŠ ä¸Š display: noneï¼‰ï¼Œéœ€è¦æ£€æµ‹è¿™ä¸ªå˜åŒ–é‡æ–°å°†æ°´å°æ›´æ–°ä¼šåŸçŠ¶ï¼Œemmmmï¼Œè¿™å°±æœ‰çš„æŠ˜è…¾äº†ã€‚äºæ˜¯ä¹å°±å‘ç°äº† MutationObserver æ–¹æ³•ï¼Œåœ¨æ­¤ç®€å•ç¬”è®°ä¸€ä¸‹ã€‚","text":"å‰è¨€å› ä¸ºé¡¹ç›®éœ€è¦é…ç½®èƒŒæ™¯æ°´å°ï¼Œä»…å‘ˆç°èƒŒæ™¯æ°´å°è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å½“èƒŒæ™¯æ°´å°éƒ¨åˆ†çš„ä»£ç é€šè¿‡ä»€ä¹ˆåŸå› è¢«å¹²æ‰äº†ï¼ˆä¾‹å¦‚ï¼šæ‰“å¼€æ§åˆ¶å°ï¼Œç»™èƒŒæ™¯æ°´å°éƒ¨åˆ†ä»£ç åŠ ä¸Š display: noneï¼‰ï¼Œéœ€è¦æ£€æµ‹è¿™ä¸ªå˜åŒ–é‡æ–°å°†æ°´å°æ›´æ–°ä¼šåŸçŠ¶ï¼Œemmmmï¼Œè¿™å°±æœ‰çš„æŠ˜è…¾äº†ã€‚äºæ˜¯ä¹å°±å‘ç°äº† MutationObserver æ–¹æ³•ï¼Œåœ¨æ­¤ç®€å•ç¬”è®°ä¸€ä¸‹ã€‚ MutationObserver ä½œç”¨ç®€å•æ¥è¯´ï¼Œè¯¥æ–¹æ³•å°±æ˜¯ç”¨æ¥ç›‘å¬ Dom å˜åŒ–çš„ï¼ŒDom çš„ä»»ä½•å¾®å°å˜åŠ¨å®ƒéƒ½èƒ½æ¥å—å¾—åˆ°ã€‚å¼•ç”¨ä¸€ä¸‹é˜®è€å¸ˆå¯¹ Mutation Observer çš„ç‰¹ç‚¹çš„æè¿°ï¼š å®ƒç­‰å¾…æ‰€æœ‰è„šæœ¬ä»»åŠ¡å®Œæˆåï¼Œæ‰ä¼šè¿è¡Œï¼ˆå³å¼‚æ­¥è§¦å‘æ–¹å¼ï¼‰ å®ƒæŠŠ DOM å˜åŠ¨è®°å½•å°è£…æˆä¸€ä¸ªæ•°ç»„è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¡æ¡ä¸ªåˆ«å¤„ç† DOM å˜åŠ¨ã€‚ å®ƒæ—¢å¯ä»¥è§‚å¯Ÿ DOM çš„æ‰€æœ‰ç±»å‹å˜åŠ¨ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåªè§‚å¯ŸæŸä¸€ç±»å˜åŠ¨ã€‚ å› æ­¤åœ¨çˆ¶çº§å…ƒç´ ä¸ŠæŒ‚åœ¨ä¸€ä¸ª MutationObserver äº‹ä»¶ç›‘å¬æ–¹æ³•ï¼Œä¸å°±å¯ä»¥åšåˆ°å¯¹èƒŒæ™¯æ°´å°å…ƒç´ å˜åŠ¨çš„ç›‘å¬äº†ä¹ˆï¼ èƒŒæ™¯æ°´å°çš„è§£å†³æ€è·¯ç”±äºæ˜¯å…¬å¸å†…éƒ¨ä»£ç ï¼Œè¿™é‡Œå°±ä¸åšç²˜è´´äº†ï¼Œä»…è¯´æ˜ä¸€ä¸‹æ°´å°çš„è§£å†³æ€è·¯ã€‚ æ£€æµ‹ DOM ä¸Šæ˜¯å¦å­˜åœ¨æ°´å°èŠ‚ç‚¹ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢æ°´å°èŠ‚ç‚¹ ä¸ºæ°´å°èŠ‚ç‚¹æ–°å¢ Mutation Observer æ–¹æ³•ï¼Œè§‚å¯Ÿå…¶å¯¹åº”å±æ€§å˜åŒ–ï¼Œæ›´æ–°ç›‘å¬ é…åˆ Vue çš„é€»è¾‘åˆ™æ˜¯ç¼–å†™ä¸€ä¸ª vue çš„å…¨å±€æŒ‡ä»¤ï¼Œåšåˆ°åŠ¨æ€æ›´æ–°å³å¯ã€‚ MutationObserver ç¤ºä¾‹è¯¥ä¾‹å­åªæ˜¯å¯¹ Mutation Observer API çš„å­¦ä¹ ä¾‹å­ï¼Œä»…ä¾›å‚è€ƒã€‚ ä¼ é€é—¨ å‚è€ƒæ–‡ç«  MDN MutationObserver Mutation Observer API MutationObserver ä¸ ResizeObserver","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"iptables ç«¯å£è½¬å‘é…ç½®","slug":"iptables-ç«¯å£è½¬å‘é…ç½®","date":"2020-07-14T02:27:42.000Z","updated":"2020-08-17T06:25:42.066Z","comments":true,"path":"2020/07/14/iptables-ç«¯å£è½¬å‘é…ç½®/","link":"","permalink":"https://monocy.gitee.io/2020/07/14/iptables-ç«¯å£è½¬å‘é…ç½®/","excerpt":"å‰è¨€å…ˆå‰è½¬è½½äº†ä¸€ç¯‡ iptables çš„ä½¿ç”¨å’Œé…ç½®çš„æ–‡ç« ï¼Œä½†æ˜¯å‡¡äº‹éƒ½å¾—è‡ªå·±åŠ¨æ‰‹å­¦ä¹ ä¸€ä¸‹æ‰èƒ½æ·±å…¥äº†è§£ï¼Œå› æ­¤æœ¬ç¯‡ç”¨æ¥è®°å½•åŠ¨æ‰‹æ“ä½œäº†ä¸€ç•ªåçš„ä¸€äº›é…ç½®å¿ƒå¾—ã€‚å½“ç„¶å»ºè®®å¤§å®¶äº†è§£çš„æ—¶å€™è¯»ä¸€è¯»å‚è€ƒæ–‡ç« ï¼Œç‰¹åˆ«æ˜¯ iptables å…¥é—¨æŒ‡å— å’Œ iptables è¯¦è§£ï¼Œèƒ½è®©ä½ å¯¹ iptables æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚","text":"å‰è¨€å…ˆå‰è½¬è½½äº†ä¸€ç¯‡ iptables çš„ä½¿ç”¨å’Œé…ç½®çš„æ–‡ç« ï¼Œä½†æ˜¯å‡¡äº‹éƒ½å¾—è‡ªå·±åŠ¨æ‰‹å­¦ä¹ ä¸€ä¸‹æ‰èƒ½æ·±å…¥äº†è§£ï¼Œå› æ­¤æœ¬ç¯‡ç”¨æ¥è®°å½•åŠ¨æ‰‹æ“ä½œäº†ä¸€ç•ªåçš„ä¸€äº›é…ç½®å¿ƒå¾—ã€‚å½“ç„¶å»ºè®®å¤§å®¶äº†è§£çš„æ—¶å€™è¯»ä¸€è¯»å‚è€ƒæ–‡ç« ï¼Œç‰¹åˆ«æ˜¯ iptables å…¥é—¨æŒ‡å— å’Œ iptables è¯¦è§£ï¼Œèƒ½è®©ä½ å¯¹ iptables æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚ æŸ¥çœ‹æœ¬åœ°è§„åˆ™root ç”¨æˆ·ä¸‹ 1iptables -nL -t nat --line-number æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š 123456789101112131415[root@/]# iptables -nL -t natChain PREROUTING (policy ACCEPT)target prot opt source destinationREDIRECT tcp -- 0.0.0.0/0 0.0.0.0/0 tcp dpt:80 redir ports 8020Chain INPUT (policy ACCEPT)target prot opt source destinationChain OUTPUT (policy ACCEPT)target prot opt source destinationREDIRECT tcp -- 0.0.0.0/0 127.0.0.1 tcp dpt:80 redir ports 8020REDIRECT tcp -- 0.0.0.0/0 &lt;æœ¬æœºIP&gt; tcp dpt:80 redir ports 8020Chain POSTROUTING (policy ACCEPT)target prot opt source destination å…¶ä¸­ Chain PREROUTING (policy ACCEPT) æŒ‡çš„æ˜¯æœ‰å¤–éƒ¨è®¿é—®æœ¬æœºçš„ 80 ç«¯å£æ—¶ï¼Œå…¶ä¼šè½¬å‘åˆ° 8020 ç«¯å£ï¼›Chain OUTPUT (policy ACCEPT) æŒ‡çš„æ˜¯å†…éƒ¨æœºå™¨åœ°å€è¾“å‡ºæ—¶ï¼Œå½“ç›‘æµ‹åˆ°ç›®æ ‡åœ°å€ä¸º 127.0.0.1 / &lt;æœ¬æœºIP&gt; æ—¶ï¼Œå…¶é»˜è®¤çš„ 80 ç«¯å£ä¼šè½¬å‘åˆ° 8020 ç«¯å£ï¼Œä»è€Œå®ç° 80 -&gt; 8020 ç«¯å£çš„è½¬å‘ã€‚ æ·»åŠ è½¬å‘è§„åˆ™å¤–éƒ¨è®¿é—®ç«¯å£è½¬å‘iptables è½¬å‘ç«¯å£æ—¶ï¼Œå…¶ä½¿ç”¨çš„å¹¶éé»˜è®¤çš„ filterï¼Œå› æ­¤éœ€è¦ -t åˆ¶å®šä¸º natï¼Œæ­¤å¤–ä¸Šé¢æœ‰è¯´åˆ°ï¼Œå¤–éƒ¨è®¿é—®æ—¶ä¼šç»ç”± PREROUTINGï¼Œå› æ­¤éœ€è¦å¯¹æ­¤è§„åˆ™åšé…ç½®ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š 1iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8020 -tï¼š æŒ‡å®šè¡¨ä¸º nat è¡¨ï¼ˆé»˜è®¤ä¸º filter è¡¨ï¼‰ -Aï¼š æŒ‡å®š nat è¡¨ä¸­çš„ä¸‰é¡¹è§„åˆ™ä¸­çš„å“ªä¸€é¡¹ï¼Œåˆ†åˆ«ä¸ºï¼š OUTPUTã€PREROUTINGã€POSTEROUTING -pï¼š æŒ‡å®šä½¿ç”¨çš„åè®® --dport: æŒ‡å®šç›®æ ‡ç«¯å£ -jï¼š æŒ‡å®šé’ˆå¯¹æœ¬æœºåšé‡å®šå‘æ“ä½œï¼ˆDROPã€ACCEPTã€REDIRECT ç­‰ï¼‰ --to-portï¼š é‡å®šå‘çš„ç«¯å£ è¡¥å……ï¼Œä¸åŒè¡¨çš„æ“ä½œé“¾ è¡¨ INPUT FORWARD OUTPUT PREROUTING POSTEROUTING Filter true true true false false Nat false false true true true Mangle true true true true true å†…éƒ¨è®¿é—®ç«¯å£è½¬å‘ä»…å¤–éƒ¨è½¬å‘å…¶å®æ˜¯ä¸å¤Ÿçš„ï¼Œå¯¹äºå†…éƒ¨åœ°å€è®¿é—®æ—¶ä»éœ€è¦è¿›è¡Œä¸€æ¬¡è½¬å‘æ‰èƒ½æ»¡è¶³å†…å¤–ä¸€è‡´çš„æƒ…å†µï¼Œä¸ä¸ŠæŒ‡ä»¤ç±»ä¼¼ï¼š 1iptables -t nat -A OUTPUT -p tcp -d 127.0.0.1 --dport 80 -j REDIRECT --to-port 8020 -dï¼š æŒ‡å®šç›®çš„åœ°å€åœ°å€ï¼ˆä¸ä¹‹ç›¸åçš„ -s ä¸ºæŒ‡å®šæºåœ°å€ï¼‰ åˆ é™¤è½¬å‘è§„åˆ™åˆ é™¤æŒ‡ä»¤å¦‚ä¸‹ï¼š 1iptables - t nat -D OUTPUT &lt;number&gt; éªŒè¯è§„åˆ™ç”Ÿæ•ˆtelnet ip portï¼š æŸ¥çœ‹æŸä¸€ä¸ªæœºå™¨ä¸Šçš„æŸä¸€ä¸ªç«¯å£æ˜¯å¦å¯ä»¥è®¿é—®ï¼Œå¦‚ï¼š 1telnet 127.0.0.1 8020 é…ç½®å¼€æœºå¯åŠ¨ç»“åˆ iptables-save å’Œ iptables-reload ä½¿ç”¨ 1iptables-save &gt; /root/iptables.bk é…ç½®å¯åŠ¨è„šæœ¬ 123456789101112# é…ç½®å¯åŠ¨è„šæœ¬vim /root/iptables-preload#### å°†å¦‚ä¸‹å†…å®¹è´´å…¥å…¶ä¸­å¹¶ä¿å­˜#!/bin/bash/sbin/iptables-restore &lt; /root/iptables.up.rules####chmod +x /root/iptables-preload#### ç¼–è¾‘ /etc/rc.localï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹/root/iptables-preload å‚è€ƒæ–‡ç«  iptables å·¥å…·å‘½ä»¤ iptables è¯¦è§£ Linuxä¹‹iptablesç«¯å£è½¬å‘ï¼ˆå¤–ç½‘è®¿é—®å†…ç½‘ï¼‰ iptables å…¥é—¨æŒ‡å—","categories":[{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/tags/Linux/"}]},{"title":"Linux é˜²ç«å¢™çš„ä½¿ç”¨å’Œé…ç½®ï¼ˆè½¬è½½ï¼‰","slug":"Linux-é˜²ç«å¢™çš„ä½¿ç”¨å’Œé…ç½®ï¼ˆè½¬è½½ï¼‰","date":"2020-07-09T06:54:52.000Z","updated":"2021-06-30T15:25:42.952Z","comments":true,"path":"2020/07/09/Linux-é˜²ç«å¢™çš„ä½¿ç”¨å’Œé…ç½®ï¼ˆè½¬è½½ï¼‰/","link":"","permalink":"https://monocy.gitee.io/2020/07/09/Linux-é˜²ç«å¢™çš„ä½¿ç”¨å’Œé…ç½®ï¼ˆè½¬è½½ï¼‰/","excerpt":"å‰è¨€æ–‡ç« è½¬è½½è‡ª linux é˜²ç«å¢™ä½¿ç”¨ä»¥åŠé…ç½®ï¼Œä½¿ç”¨æ–¹æ³•å¤§åŒå°å¼‚ï¼Œåœ¨æ­¤è½¬è½½ä¸€ç¯‡åšä¸ªç¬”è®°ã€‚","text":"å‰è¨€æ–‡ç« è½¬è½½è‡ª linux é˜²ç«å¢™ä½¿ç”¨ä»¥åŠé…ç½®ï¼Œä½¿ç”¨æ–¹æ³•å¤§åŒå°å¼‚ï¼Œåœ¨æ­¤è½¬è½½ä¸€ç¯‡åšä¸ªç¬”è®°ã€‚ Centos 7 firewall ï¼š1. firewalld çš„åŸºæœ¬ä½¿ç”¨ å¯åŠ¨ï¼š systemctl start firewalld å…³é—­ï¼š systemctl stop firewalld æŸ¥çœ‹çŠ¶æ€ï¼š systemctl status firewalld å¼€æœºç¦ç”¨ ï¼š systemctl disable firewalld å¼€æœºå¯ç”¨ ï¼š systemctl enable firewalld 2. systemctl æ˜¯ CentOS7 çš„æœåŠ¡ç®¡ç†å·¥å…·ä¸­ä¸»è¦çš„å·¥å…·ï¼Œå®ƒèåˆä¹‹å‰ service å’Œ chkconfig çš„åŠŸèƒ½äºä¸€ä½“ã€‚ å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl start firewalld.service å…³é—­ä¸€ä¸ªæœåŠ¡ï¼šsystemctl stop firewalld.service é‡å¯ä¸€ä¸ªæœåŠ¡ï¼šsystemctl restart firewalld.service æ˜¾ç¤ºä¸€ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼šsystemctl status firewalld.service åœ¨å¼€æœºæ—¶å¯ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl enable firewalld.service åœ¨å¼€æœºæ—¶ç¦ç”¨ä¸€ä¸ªæœåŠ¡ï¼šsystemctl disable firewalld.service æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨ï¼šsystemctl is-enabled firewalld.service æŸ¥çœ‹å·²å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl list-unit-files|grep enabled æŸ¥çœ‹å¯åŠ¨å¤±è´¥çš„æœåŠ¡åˆ—è¡¨ï¼šsystemctl --failed 3. é…ç½® firewalld-cmd æŸ¥çœ‹ç‰ˆæœ¬ï¼šfirewall-cmd --version æŸ¥çœ‹å¸®åŠ©ï¼šfirewall-cmd --help æ˜¾ç¤ºçŠ¶æ€ï¼šfirewall-cmd --state æŸ¥çœ‹æ‰€æœ‰æ‰“å¼€çš„ç«¯å£ï¼šfirewall-cmd --zone=public --list-ports æ›´æ–°é˜²ç«å¢™è§„åˆ™ï¼šfirewall-cmd --reload æŸ¥çœ‹åŒºåŸŸä¿¡æ¯ï¼š firewall-cmd --get-active-zones æŸ¥çœ‹æŒ‡å®šæ¥å£æ‰€å±åŒºåŸŸï¼šfirewall-cmd --get-zone-of-interface=eth0 æ‹’ç»æ‰€æœ‰åŒ…ï¼šfirewall-cmd --panic-on å–æ¶ˆæ‹’ç»çŠ¶æ€ï¼šfirewall-cmd --panic-off æŸ¥çœ‹æ˜¯å¦æ‹’ç»ï¼šfirewall-cmd --query-panic é‚£æ€ä¹ˆå¼€å¯ä¸€ä¸ªç«¯å£å‘¢ï¼Ÿ æ·»åŠ ï¼š firewall-cmd --zone=public --add-port=80/tcp --permanent ï¼ˆâ€“permanent æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆï¼‰ é‡æ–°è½½å…¥ï¼šfirewall-cmd --reload æŸ¥çœ‹ï¼šfirewall-cmd --zone= public --query-port=80/tcp åˆ é™¤ï¼šfirewall-cmd --zone= public --remove-port=80/tcp --permanent è°ƒæ•´é»˜è®¤ç­–ç•¥ï¼ˆé»˜è®¤æ‹’ç»æ‰€æœ‰è®¿é—®ï¼Œæ”¹æˆå…è®¸æ‰€æœ‰è®¿é—®ï¼‰ï¼š 12firewall-cmd --permanent --zone=public --set-target=ACCEPTfirewall-cmd --reload å¯¹æŸä¸ª IP å¼€æ”¾å¤šä¸ªç«¯å£ï¼š 12firewall-cmd --permanent --add-rich-rule=\"rule family=\"ipv4\" source address=\"10.159.60.29\" port protocol=\"tcp\" port=\"1:65535\" accept\"firewall-cmd --reload Centos 6 iptablesï¼š1. iptables çš„åŸºæœ¬ä½¿ç”¨ å¯åŠ¨ï¼šservice iptables start å…³é—­ï¼šservice iptables stop æŸ¥çœ‹çŠ¶æ€ï¼šservice iptables status å¼€æœºç¦ç”¨ï¼šchkconfig iptables off å¼€æœºå¯ç”¨ï¼šchkconfig iptables on 2. å¼€æ”¾æŒ‡å®šçš„ç«¯å£-A å’Œ -I å‚æ•°åˆ†åˆ«ä¸ºæ·»åŠ åˆ°è§„åˆ™æœ«å°¾å’Œè§„åˆ™æœ€å‰é¢ã€‚ å…è®¸æœ¬åœ°å›ç¯æ¥å£(å³è¿è¡Œæœ¬æœºè®¿é—®æœ¬æœº)ï¼šiptables -A INPUT -i lo -j ACCEPT å…è®¸å·²å»ºç«‹çš„æˆ–ç›¸å…³è¿çš„é€šè¡Œï¼šiptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT å…è®¸æ‰€æœ‰æœ¬æœºå‘å¤–çš„è®¿é—®ï¼š 12iptables -P INPUT ACCEPTiptables -A OUTPUT -j ACCEPT å…è®¸è®¿é—® 22 ç«¯å£ï¼š 123# -s åå¯ä»¥è·Ÿ IP æ®µæˆ–æŒ‡å®š IP åœ°å€iptables -A INPUT -p tcp --dport 22 -j ACCEPTiptables -A INPUT -p tcp -s 10.159.1.0/24 --dport 22 -j ACCEPT å…è®¸è®¿é—® 80 ç«¯å£ï¼šiptables -A INPUT -p tcp --dport 80 -j ACCEPT å…è®¸ FTP æœåŠ¡çš„ 21 å’Œ 20 ç«¯å£ï¼š 123iptables -A INPUT -p tcp --dport 21 -j ACCEPTiptables -A INPUT -p tcp --dport 20 -j ACCEPT# å¦‚æœæœ‰å…¶ä»–ç«¯å£çš„è¯ï¼Œè§„åˆ™ä¹Ÿç±»ä¼¼ï¼Œç¨å¾®ä¿®æ”¹ä¸Šè¿°è¯­å¥å°±è¡Œ å…è®¸ pingï¼šiptables -A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT ç¦æ­¢å…¶ä»–æœªå…è®¸çš„è§„åˆ™è®¿é—®ï¼š 123# æ³¨ï¼šå¦‚æœ 22 ç«¯å£æœªåŠ å…¥å…è®¸è§„åˆ™ï¼ŒSSH é“¾æ¥ä¼šç›´æ¥æ–­å¼€ã€‚iptables -A INPUT -j REJECTiptables -A FORWARD -j REJECT 3. å±è”½ IP æ³¨ï¼šå¦‚æœåªæ˜¯æƒ³å±è”½ IP çš„è¯ï¼Œä¸Šè¿° â€œ2. å¼€æ”¾æŒ‡å®šçš„ç«¯å£â€ å¯ä»¥ç›´æ¥è·³è¿‡ã€‚ å±è”½å•ä¸ª IP çš„å‘½ä»¤æ˜¯ï¼šiptables -I INPUT -s 123.45.6.7 -j DROP å°æ•´ä¸ªæ®µ(å³ä» 123.0.0.1 åˆ° 123.255.255.254)çš„å‘½ä»¤ï¼šiptables -I INPUT -s 123.0.0.0/8 -j DROP å° IP æ®µ(å³ä» 123.45.0.1 åˆ° 123.45.255.254)çš„å‘½ä»¤ï¼šiptables -I INPUT -s 124.45.0.0/16 -j DROP å° IP æ®µ(å³ä» 123.45.6.1 åˆ° 123.45.6.254)çš„å‘½ä»¤æ˜¯ï¼šiptables -I INPUT -s 123.45.6.0/24 -j DROP 4. iptables çš„è§„åˆ™æŸ¥çœ‹å·²æ·»åŠ çš„è§„åˆ™iptables -L -n åªæ˜¾ç¤º IP åœ°å€å’Œç«¯å£å·ï¼Œä¸å°† IP è§£æä¸ºåŸŸå åˆ é™¤å·²æ·»åŠ çš„ iptables çš„è§„åˆ™å°†æ‰€æœ‰ iptables ä»¥åºå·æ ‡è®°æ˜¾ç¤ºï¼Œæ‰§è¡Œï¼š iptables -L -n --line-numbers æ¯”å¦‚è¦åˆ é™¤ INPUT é‡Œåºå·ä¸º 8 çš„è§„åˆ™ï¼Œæ‰§è¡Œï¼š iptables -D INPUT 8 5. å¯ä»¥ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  iptables é˜²ç«å¢™è§„åˆ™ï¼šiptables çš„é…ç½®æ–‡ä»¶ä¸º /etc/sysconfig/iptables ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š vi /etc/sysconfig/iptables æ–‡ä»¶ä¸­çš„é…ç½®è§„åˆ™ä¸é€šè¿‡çš„ iptables å‘½ä»¤é…ç½®ï¼Œè¯­æ³•ç›¸ä¼¼ï¼š å¦‚ï¼Œé€šè¿‡ iptables çš„å‘½ä»¤é…ç½®ï¼Œå…è®¸è®¿é—® 80 ç«¯å£ï¼š iptables -A INPUT -p tcp --dport 80 -j ACCEPT é‚£ä¹ˆï¼Œåœ¨æ–‡ä»¶ä¸­é…ç½®ï¼Œåªéœ€è¦å»æ‰å¥é¦–çš„ iptablesï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š -A INPUT -p tcp --dport 80 -j ACCEPT ä¿å­˜é€€å‡ºã€‚ æœ‰ä¸¤ç§æ–¹å¼æ·»åŠ è§„åˆ™ iptables -A å’Œiptables -I iptables -A æ·»åŠ çš„è§„åˆ™æ˜¯æ·»åŠ åœ¨æœ€åé¢ã€‚å¦‚é’ˆå¯¹ INPUT é“¾å¢åŠ ä¸€æ¡è§„åˆ™ï¼Œæ¥æ”¶ä» eth0 å£è¿›å…¥ä¸”æºåœ°å€ä¸º 192.168.0.0/16 ç½‘æ®µå‘å¾€æœ¬æœºçš„æ•°æ®ã€‚ iptables -A INPUT -i eth0 -s 192.168.0.0/16 -j ACCEPT iptables -I æ·»åŠ çš„è§„åˆ™é»˜è®¤æ·»åŠ è‡³ç¬¬ä¸€æ¡ã€‚ å¦‚æœè¦æŒ‡å®šæ’å…¥è§„åˆ™çš„ä½ç½®ï¼Œåˆ™ä½¿ç”¨ iptables -I æ—¶æŒ‡å®šä½ç½®åºå·å³å¯ã€‚ åˆ é™¤è§„åˆ™ å¦‚æœåˆ é™¤æŒ‡å®šåˆ™ï¼Œä½¿ç”¨ iptables -D å‘½ä»¤ï¼Œå‘½ä»¤åå¯æ¥åºå·ã€‚æ•ˆæœè¯·å¯¹æ¯”ä¸Šå›¾ã€‚ æˆ– iptables -D æ¥è¯¦ç»†å®šä¹‰ï¼› å¦‚æœæƒ³æŠŠæ‰€æœ‰è§„åˆ™éƒ½æ¸…é™¤æ‰ï¼Œå¯ä½¿ç”¨ iptables -Fã€‚ å¤‡ä»½ iptabes rules ä½¿ç”¨ iptables-save å‘½ä»¤ï¼Œå¦‚ï¼š iptables-save &gt; /etc/sysconfig/iptables.save æ¢å¤ iptables rules ä½¿ç”¨ iptables å‘½ä»¤ï¼Œå¦‚ï¼š iptables-restore &lt; /etc/sysconfig/iptables.save iptables é…ç½®ä¿å­˜ ä»¥ä¸Šåšçš„é…ç½®ä¿®æ”¹ï¼Œåœ¨è®¾å¤‡é‡å¯åï¼Œé…ç½®å°†ä¸¢å¤±ã€‚å¯ä½¿ç”¨ service iptables save è¿›è¡Œä¿å­˜ã€‚ é‡å¯ iptables çš„æœåŠ¡ä½¿å…¶ç”Ÿæ•ˆï¼š service iptables save æ·»åŠ è§„åˆ™åä¿å­˜é‡å¯ç”Ÿæ•ˆã€‚ service iptables restart åè®°å…³äºæ›´å¤šçš„ iptables çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥æ‰§è¡Œï¼š iptables --help","categories":[{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/tags/Linux/"}]},{"title":"Mysql çš„å°æŠ€å·§","slug":"Mysql-çš„å°æŠ€å·§","date":"2020-06-09T02:50:48.000Z","updated":"2022-07-26T13:09:59.035Z","comments":true,"path":"2020/06/09/Mysql-çš„å°æŠ€å·§/","link":"","permalink":"https://monocy.gitee.io/2020/06/09/Mysql-çš„å°æŠ€å·§/","excerpt":"å‰è¨€è¿‘æœŸå¼€å§‹å­¦ä¹  Node å’Œ MySQL ç›¸å…³çš„çŸ¥è¯†äº†ï¼Œé¡¹ç›®ä¹Ÿå¼€å§‹ä»çº¯å‰ç«¯è½¬å‘äº†â€œå…¨æ ˆâ€ï¼ˆåˆšåˆšèµ·æ­¥ï¼‰ã€‚èµ·åˆè¿˜æ˜¯æŒºç—›è‹¦çš„ï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢ï¼Œå¤§å­¦å­¦ä¹ çš„ä¸œè¥¿åŸºæœ¬éƒ½è¿˜å›å»äº†ï¼Œä¸è¿‡åœ¨ä¸€æ¬¡æ¬¡é—®é¢˜ä¸­ä¹Ÿæ¸æ¸æ€»ç»“äº†äº›ç»éªŒï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹â€œåˆå­¦è€…â€éš¾å…ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚","text":"å‰è¨€è¿‘æœŸå¼€å§‹å­¦ä¹  Node å’Œ MySQL ç›¸å…³çš„çŸ¥è¯†äº†ï¼Œé¡¹ç›®ä¹Ÿå¼€å§‹ä»çº¯å‰ç«¯è½¬å‘äº†â€œå…¨æ ˆâ€ï¼ˆåˆšåˆšèµ·æ­¥ï¼‰ã€‚èµ·åˆè¿˜æ˜¯æŒºç—›è‹¦çš„ï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢ï¼Œå¤§å­¦å­¦ä¹ çš„ä¸œè¥¿åŸºæœ¬éƒ½è¿˜å›å»äº†ï¼Œä¸è¿‡åœ¨ä¸€æ¬¡æ¬¡é—®é¢˜ä¸­ä¹Ÿæ¸æ¸æ€»ç»“äº†äº›ç»éªŒï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹â€œåˆå­¦è€…â€éš¾å…ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ è®¾ç½®é»˜è®¤å€¼å…¶å®å…ˆå¤„ç†æ¨¡å‹ï¼Œç„¶åå†æ ¹æ®æ¨¡å‹å»ºåº“å’Œè¡¨ï¼ŒåŸºæœ¬ä¸Šæ²¡ä»€ä¹ˆå¤ªå¤§é—®é¢˜ï¼ˆæ¯•ç«Ÿéƒ½æ˜¯å¯è§†åŒ–æ“ä½œï¼Œä¸å†™ SQL ä»£ç ç”Ÿæˆäº†ï¼‰ã€‚ä¸è¿‡ï¼Œåœ¨å¯è§†åŒ–å»ºè¡¨çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™ä¸ºäº†å›¾å¿«å¾€å¾€å®¹æ˜“å¿½è§†ä¸€äº›é…ç½®ï¼Œå¦‚ï¼š int çš„é»˜è®¤å€¼éƒ¨åˆ†é…ç½® datetime é»˜è®¤å€¼éƒ¨åˆ†é…ç½® æ ¹æ®æƒ…å†µé…ç½®å¯¹åº”é»˜è®¤å€¼å¯ä»¥å‡å°‘ä»£ç å†…çš„éƒ¨åˆ†é‡å¤æ“ä½œï¼Œå¦‚ï¼š é…ç½® create_time é»˜è®¤å€¼ä¸º CURRENT_TIMESTAMPï¼Œ é‚£ä¹ˆæ¯æ¬¡æ–°å¢æ—¶å°±å¯ä»¥ä¸ç”¨å¸¦ä¸Šæ—¶é—´æˆ³äº†ã€‚ é…ç½® modify_time é»˜è®¤å€¼å‹¾é€‰ä¸Š â€œæ ¹æ®å½“å‰æ—¶é—´æˆ³æ›´æ–°â€ï¼Œé‚£ä¹ˆæ¯æ¬¡ç¼–è¾‘æ—¶å¯ä»¥ä¸ç”¨å»é…ç½®ä¿®æ”¹æ—¶é—´ï¼Œå¯¹äºé‡å¤æ•°æ®æ“ä½œä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚ æ—¥æœŸæ›´æ–°å½“ç„¶ï¼Œä¹Ÿæœ‰æƒ…å†µæ˜¯éœ€è¦åœ¨è¿›è¡ŒæŸäº›æ“ä½œåï¼Œæ›´æ–°å…¶å®ƒæ•°æ®çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™ä¹‹ä¸­æ¯”è¾ƒéº»çƒ¦çš„æ˜¯â€œæ—¥æœŸâ€ç›¸å…³çš„æ“ä½œï¼Œåœ¨ç½‘ä¸Šä¹Ÿæ²¡æ‰¾åˆ°æ¯”è¾ƒåˆé€‚çš„åšæ–‡æ¥è§£å†³ã€‚è¿™é‡Œåœ¨ç¿»æŸ¥äº† Mysql çš„ä¸€äº›å‡½æ•°ï¼Œé¡ºåˆ©è§£å†³äº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œä¿®æ”¹æ•°æ®æ—¶é—´çš„ sql ä¸ºï¼š 123update xxx_tableset xxx_time = CURRENT_TIMESTAMP()where xxx_id = 1 é…åˆ mysql çš„æ—¶é—´å‡½æ•°èƒ½æ¯”è¾ƒæ–¹ä¾¿çš„å¤„ç†æ—¶é—´ç›¸å…³çš„æ“ä½œã€‚ ALTER å’Œ UPDATE åŒºåˆ«æœ€å¼€å§‹å†™ sql æ—¶ï¼Œæ€»æ˜¯ä¹ æƒ¯æ€§çš„ä½¿ç”¨ ALTERï¼Œæ¯•ç«Ÿæ˜¯ ALTER æ˜¯ä¿®æ”¹çš„æ„æ€å˜›ã€‚å®é™…ä¸Šè¿™ä¸¤ä¸ªåŒºåˆ«å¾ˆå¤§ï¼ŒALTER æ˜¯ä¿®æ”¹è¡¨ç»“æ„çš„ï¼Œè€Œ UPDATE æ˜¯æ›´æ–°è¡¨æ•°æ®ä¿¡æ¯çš„ã€‚å› æ­¤åœ¨å¹³æ—¶å¯¹æ•°æ®è¿›è¡Œ CRUD æ—¶ï¼Œè®°ä½ä½¿ç”¨ UPDATE å³å¯ã€‚è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼š ALTERã€DROP æ˜¯ç»“æ„ä¸Šçš„æ›´æ–°å’Œåˆ é™¤ UPDATEã€DELETE æ˜¯æ•°æ®ä¸Šçš„æ›´æ–°å’Œåˆ é™¤ group_concat çš„é•¿åº¦é™åˆ¶åœ¨åšå‡½æ•°èšåˆå¤„ç†æ—¶ï¼Œä¼šç»å¸¸ä½¿ç”¨åˆ° group_concat å‡½æ•°å¯¹å­—æ®µè¿›è¡Œèšåˆï¼Œä½†æ˜¯ mysql é»˜è®¤å¯¹èšåˆçš„å­—ä¸²è®¾æœ‰é•¿åº¦é™åˆ¶ï¼ˆæ²¡è®°é”™çš„è¯åº”è¯¥æ˜¯ 1024ï¼‰,è¿™ä¼šå¯¼è‡´åœ¨å–å€¼çš„æ—¶å€™å¯¹äºæ¯”è¾ƒé•¿çš„å­—æ®µå°±ç›´æ¥è¢«æˆªå–æ‰äº†ï¼Œè¿˜æ¯”è¾ƒéš¾å‘ç°é—®é¢˜ã€‚ å¯¹äºè‡ªå·±çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹é»˜è®¤é•¿åº¦ï¼š 1show variables like 'group_concat_max_len'; å¦‚æœè¦ä¿®æ”¹å…¶é•¿åº¦é™åˆ¶çš„è¯ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š ï¼ˆ1ï¼‰æ›´æ”¹ Mysql é…ç½®æ–‡ä»¶ 12# åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼šgroup_concat_max_len = 1024000 ï¼ˆ2ï¼‰åœ¨ Navicat å†…è¿è¡Œå¦‚ä¸‹å‘½ä»¤ 12set global group_concat_max_len = 1024000;set session group_concat_max_len = 1024000; æ³¨æ„ï¼š è¯¥æ–¹æ³•ç¼ºç‚¹æ˜¯é‡å¯æœåŠ¡åè®¾ç½®å¤±æ•ˆ mysql è¿æ¥é˜»å¡é—®é¢˜æœ€è¿‘é‡åˆ°æ­å»ºçš„æµ‹è¯•ç¯å¢ƒæŠ¥é”™ï¼ŒæŸ¥çœ‹æ—¥å¿—å‘ç°æ˜¯ mysql çš„ max_connect_errors æŠ¥é”™å¯¼è‡´æœåŠ¡å™¨ ip è¢«ç¦æ­¢è¿æ¥ mysqlã€‚ä½†æ˜¯è‡ªå·±é€šè¿‡ navcat èƒ½å¤Ÿè¿æ¥ä¸Šæ•°æ®åº“ï¼ŒæŸ¥äº†ä¸‹åŸå› ï¼Œå‘ç°åº”è¯¥æ˜¯ä¸­é—´æœ‰ä¸€ç‰ˆæœ¬çš„ä»£ç éƒ¨ç½²åï¼Œnode ä»£ç æ•°æ®åº“è¿æ¥éƒ¨åˆ†é…ç½®å¤±è¯¯ï¼Œå¯¼è‡´é”™è¯¯è¿æ¥æ•°è¿‡å¤§ï¼Œip è¢«ç¦æ­¢è¿æ¥ mysql äº†ï¼Œé’ˆå¯¹ä¸åŒæƒ…å†µæœ‰ä¸åŒçš„è§£å†³æ–¹æ³•ï¼Œè¿™é‡Œéƒ½åˆ—ä¸¾å‡ºæ¥ï¼š max_connect_errors å€¼è¿‡å°ï¼Œå®¹æ˜“å‡ºé”™é€šè¿‡ navicat è¿æ¥ä¸Š mysqlï¼ŒæŸ¥è¯¢ä¸€ä¸‹ mysql çš„ max_connect_errors å±æ€§æ˜¯å¦å€¼è¿‡å°ï¼Œè¾ƒå°æ—¶ä»£ç æ›´æ–°è¿‡ç¨‹ä¸­å®¹æ˜“äº§ç”Ÿ max_connect_errors é”™è¯¯å¯¼è‡´ mysql è¿æ¥ä¸ä¸Šï¼ŒæŸ¥è¯¢å¹¶æ›´æ–°æ–¹æ³•å¦‚ä¸‹ï¼š 12345# æŸ¥è¯¢è¿æ¥æ•°show variables like '%max_connect_errors%';# è®¾ç½®è¿æ¥æ•°set global max_connect_errors = 1000; ç´¯è®¡è¿æ¥é”™è¯¯æ•°è¶…å‡ºå¦‚æœæŸ¥è¯¢åˆ°çš„ max_connect_errors æ•°å€¼å·²ç»æ¯”è¾ƒå¤§äº†ï¼Œä½†æ˜¯ä»ç„¶æŠ¥ max_connect_errors è¶…å‡ºçš„é”™è¯¯ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ mysql çš„é”™è¯¯è¿æ¥ç´¯è®¡æ•°é‡è¶…å‡ºäº†ï¼Œæ­¤æ—¶éœ€è¦æ¸…ç©ºä¸€ä¸‹ max_connect_errors æ•°ï¼Œåœ¨ navicat çš„æŸ¥è¯¢ä¸­è¾“å…¥ï¼š 1flush hosts; mysql çš„ max_connect_errors é‡å¯åå˜å°å› ä¸º mysql é‡å¯åä¼šé‡æ–°è¯»å– mysql çš„ conf æ–‡ä»¶ï¼Œå¦‚æœä¸æƒ³æ¯æ¬¡é‡å¯ mysql éƒ½éœ€è¦é‡æ–°æ›´æ”¹ max_connect_errors æ•°å€¼ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ä¸€ä¸‹ my.cnf æ–‡ä»¶ï¼Œå°†ä¸€ä¸‹å†…å®¹çš„å€¼æ”¹æ”¹ 1max_connect_errors = 1000 insert æ•°æ®é‡å¤é—®é¢˜åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œæœ‰æ—¶å€™ä¼šç¢°åˆ°æ’å…¥çš„æ•°æ®é‡å¤ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ insert ... update ... è¯­å¥æ¥è¿›è¡Œæ’å…¥/æ›´æ–°ã€‚ ä½¿ç”¨è¯­æ³•å¤§è‡´å¦‚ä¸‹ï¼š 12345insert into target_table(unique_col1, col2, col3)values (val1, valb, valc), (val1, val2, val3)on duplicate key update col2 = values(col2), col3 = values(col3) æ„æ€å¯ç†è§£ä¸ºè¿™æ ·ï¼š å½“æ’å…¥çš„ unique_col1 å€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿›è¡Œæ–°å¢æ“ä½œï¼Œå…¶å€¼åˆ†åˆ«å¯¹åº”ä¸ºï¼š(val1ã€val2ã€val3) å½“æ’å…¥çš„ unique_col1 å€¼å­˜åœ¨æ—¶ï¼Œè¿›è¡Œæ›´æ–°æ“ä½œï¼Œåˆ†åˆ«æ›´æ–° col2 å’Œ col3 çš„å€¼ä¸ºä¼ å…¥ values ç»„å¯¹åº”çš„ val2 å’Œ val3 æ³¨æ„ï¼Œå”¯ä¸€å€¼é‡å¤æ—¶ï¼Œåé¢çš„æ•°æ®ä¼šè¦†ç›–å‰é¢çš„æ•°æ®å†…å®¹ï¼ˆå³åªå–æœ€æ–°æ•°æ®ï¼‰ å‚è€ƒæ–‡æ¡£ MySQL å‡½æ•° MySQL ä¸­ insert into â€¦ on duplicate key update â€¦ values() çš„ä½¿ç”¨ç¬”è®°","categories":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/categories/æ•°æ®åº“/"}],"tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/tags/æ•°æ®åº“/"},{"name":"Mysql","slug":"Mysql","permalink":"https://monocy.gitee.io/tags/Mysql/"}]},{"title":"åœ¨ typescript ä¸­æ·»åŠ  webworker","slug":"åœ¨-typescript-ä¸­æ·»åŠ -webworker","date":"2020-04-28T10:15:05.000Z","updated":"2022-07-26T13:12:51.192Z","comments":true,"path":"2020/04/28/åœ¨-typescript-ä¸­æ·»åŠ -webworker/","link":"","permalink":"https://monocy.gitee.io/2020/04/28/åœ¨-typescript-ä¸­æ·»åŠ -webworker/","excerpt":"å‰è¨€æœ€è¿‘åœ¨åš Vue é¡¹ç›®æ—¶é‡åˆ°ä¸€ä¸ªè¯»å– xlsx æ–‡ä»¶çš„éœ€æ±‚ï¼Œè€ƒè™‘åˆ°æ–‡ä»¶å¯èƒ½æ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œä¸ºäº†ä¸è®©é¡µé¢å¡æ­»ï¼Œå› æ­¤å¼•å…¥äº† webworkerï¼Œæœ¬æ¥æƒ³ç€åº”è¯¥æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œç»“æœå´å¹¶ä¸æ˜¯å¾ˆç®€å•ï¼Œä¸»è¦éš¾åœ¨é…ç½®ä¸Šï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹é…ç½®æ—¶é‡åˆ°çš„å›°éš¾ã€‚","text":"å‰è¨€æœ€è¿‘åœ¨åš Vue é¡¹ç›®æ—¶é‡åˆ°ä¸€ä¸ªè¯»å– xlsx æ–‡ä»¶çš„éœ€æ±‚ï¼Œè€ƒè™‘åˆ°æ–‡ä»¶å¯èƒ½æ¯”è¾ƒå¤§çš„æƒ…å†µï¼Œä¸ºäº†ä¸è®©é¡µé¢å¡æ­»ï¼Œå› æ­¤å¼•å…¥äº† webworkerï¼Œæœ¬æ¥æƒ³ç€åº”è¯¥æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œç»“æœå´å¹¶ä¸æ˜¯å¾ˆç®€å•ï¼Œä¸»è¦éš¾åœ¨é…ç½®ä¸Šï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹é…ç½®æ—¶é‡åˆ°çš„å›°éš¾ã€‚ é…ç½® loaderå› ä¸ºæ˜¯ ts å†™çš„é¡¹ç›®ï¼Œå› æ­¤æŸ¥é˜…äº†ä¸€ä¸‹å¼•å…¥ webworker éœ€è¦é‚£äº›æ’ä»¶ï¼Œå› æ­¤é¦–å…ˆéœ€è¦é…ç½®çš„æ˜¯ loader æ–‡ä»¶äº†ã€‚ å®‰è£… worker-loader 1yarn add worker-loader -D åœ¨ vue.config.js å†…æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 123456789101112module.exports = &#123; chainWebpack: config =&gt; &#123; // ... // æ·»åŠ  worker-loader æ”¯æŒ config.module .rule('webWorker') .post() .test(/\\.worker\\.(j|t)s$/) .use('worker-loader') .loader('worker-loader'); &#125;,&#125;; é‡å¯é¡¹ç›® worker æ–‡ä»¶çš„å†™æ³•åœ¨ ts é¡¹ç›®ä¸­ï¼Œç±»å‹å£°æ˜æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå¯¹äº worker æ–‡ä»¶å› ä¸ºæ²¡æœ‰å¯¼å‡ºï¼Œåœ¨ä¸»è¿›ç¨‹ä¸­å¼•å…¥ä¼šå¾ˆæ£˜æ‰‹ï¼Œå‚è€ƒç½‘ä¸Šçš„ä¾‹å­ï¼Œä¸€èˆ¬ worker æ–‡ä»¶éœ€è¦è¿™ä¹ˆé…ç½® 1234567891011121314151617// æ–‡ä»¶å‘½åï¼š xxx.worker.ts// åˆ›å»º this æŒ‡é’ˆï¼Œæˆ–è€…é…ç½® webpack çš„ output çš„ globalObject å±æ€§const _self: Worker = self as any;// ç›‘å¬ message äº‹ä»¶_self.addEventListener( 'message', e =&gt; &#123; // ... &#125;, false,);// ç›‘å¬é”™è¯¯äº‹ä»¶_self.addEventListener('error', e =&gt; &#123; throw new Error(e.message);&#125;); å‚è€ƒæ–‡ç«  Web Worker ä½¿ç”¨æ•™ç¨‹ å¦‚ä½•ä½¿ç”¨ JavaScript å®ç°çº¯å‰ç«¯è¯»å–å’Œå¯¼å‡º excel æ–‡ä»¶ webpack + typescript ç¯å¢ƒä¸‹é…ç½®","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"}]},{"title":"é‡ä¹  typescript","slug":"é‡ä¹ -typescript","date":"2020-04-14T04:19:22.000Z","updated":"2022-07-26T13:12:47.194Z","comments":true,"path":"2020/04/14/é‡ä¹ -typescript/","link":"","permalink":"https://monocy.gitee.io/2020/04/14/é‡ä¹ -typescript/","excerpt":"å‰è¨€ä¿—è¯è¯´çš„å¥½ï¼šâ€œæ¸©æ•…è€ŒçŸ¥æ–°â€ï¼Œä»¥å‰å­¦ä¹  typescript åªæ˜¯å› ä¸ºå·¥ä½œéœ€è¦å»äº†è§£ï¼Œç„¶åä¸´æ—¶ç£¨åˆ€å­¦äº†äº›çš®æ¯›ï¼Œä½†ç¼ºæ²¡æœ‰å¯¹ typescript æœ‰æ›´æ·±å…¥çš„ç†è§£ï¼Œå› æ­¤ä»Šå¤©è¶å·¥ä½œä¹‹ä½™ï¼Œç³»ç»Ÿäº†è§£ä¸€ä¸‹ typescript çš„ç›¸å…³çŸ¥è¯†ï¼Œä¸ºåç»­çš„å­¦ä¹ åšå¥½é“ºå«ã€‚ æ³¨æ„ï¼šæ–‡ç« å¤§éƒ¨åˆ†ä¸ºå¼•ç”¨å†…å®¹ï¼Œä¸”å¤šä¸ºä¸ªäººè®¤ä¸ºé‡è¦å’Œéš¾ä»¥è®°ä½çš„åœ°æ–¹","text":"å‰è¨€ä¿—è¯è¯´çš„å¥½ï¼šâ€œæ¸©æ•…è€ŒçŸ¥æ–°â€ï¼Œä»¥å‰å­¦ä¹  typescript åªæ˜¯å› ä¸ºå·¥ä½œéœ€è¦å»äº†è§£ï¼Œç„¶åä¸´æ—¶ç£¨åˆ€å­¦äº†äº›çš®æ¯›ï¼Œä½†ç¼ºæ²¡æœ‰å¯¹ typescript æœ‰æ›´æ·±å…¥çš„ç†è§£ï¼Œå› æ­¤ä»Šå¤©è¶å·¥ä½œä¹‹ä½™ï¼Œç³»ç»Ÿäº†è§£ä¸€ä¸‹ typescript çš„ç›¸å…³çŸ¥è¯†ï¼Œä¸ºåç»­çš„å­¦ä¹ åšå¥½é“ºå«ã€‚ æ³¨æ„ï¼šæ–‡ç« å¤§éƒ¨åˆ†ä¸ºå¼•ç”¨å†…å®¹ï¼Œä¸”å¤šä¸ºä¸ªäººè®¤ä¸ºé‡è¦å’Œéš¾ä»¥è®°ä½çš„åœ°æ–¹ äº†è§£ tsconfig é…ç½®åš ts é¡¹ç›®çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‘ç°é¡¹ç›®å†…æœ‰ä¸ª tsconfig.json çš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™äº›é…ç½®æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Œå®ƒå…·ä½“æœ‰é‚£äº›é…ç½®å±æ€§å‘¢ï¼Œè¿™é‡Œå°±ä¸€ç‚¹ç‚¹åˆ—ä¸¾ï¼š ç”Ÿæˆé…ç½®å±æ€§12345678# è‡ªå·±è¿›å…¥ä¸€ä¸ªç©ºé¡¹ç›®yarn add typescript# åœ¨ package.json çš„ script å†…å†™ä¸Šï¼š# \"tsinit\": \"tsc --init\"# ç”Ÿæˆ tsconfig.jsonyarn tsinit é…ç½®å±æ€§å†…å®¹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980&#123; \"compilerOptions\": &#123; /* * Basic Options */ // \"incremental\": true, /* æ˜¯å¦å¢é‡ç¼–è¯‘ */ \"target\": \"es5\" /* æŒ‡å®šç¼–è¯‘åçš„ ECMAScript ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019', 'ES2020', or 'ESNEXT'. */, \"module\": \"commonjs\" /* æŒ‡å®šä½¿ç”¨çš„æ¨¡å—æ ‡å‡†: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', 'es2020', or 'ESNext'. */, // \"lib\": [], /* æŒ‡å®šç¼–è¯‘æ—¶åŒ…å«çš„åº“æ–‡ä»¶ */ // \"allowJs\": true, /* æŒ‡å®šæ˜¯å¦å…è®¸ç¼–è¯‘ js ç±»å‹æ–‡ä»¶ */ // \"checkJs\": true, /* æŒ‡å®šæ˜¯å¦æ£€æŸ¥å’ŒæŠ¥å‘Š js æ–‡ä»¶ä¸­çš„é”™è¯¯ï¼Œé€šå¸¸ä¸ allowJS ä¸€èµ·ä½¿ç”¨ */ // \"jsx\": \"preserve\", /* æŒ‡å®š jsx ä»£ç ç”¨äºçš„å¼€å‘ç¯å¢ƒ: 'preserve', 'react-native', or 'react' */ // \"declaration\": true, /* æ˜¯å¦åœ¨ç¼–è¯‘çš„æ—¶å€™ç”Ÿæˆç›¸åº”çš„ \".d.ts\" å£°æ˜æ–‡ä»¶ï¼Œä½†æ˜¯ declaration å’Œ allowJs ä¸èƒ½åŒæ—¶è®¾ä¸º true */ // \"declarationMap\": true, /* æ˜¯å¦ä¸ºå£°æ˜æ–‡ä»¶ç”Ÿæˆ map æ–‡ä»¶ */ // \"sourceMap\": true, /* ç¼–è¯‘æ—¶æ˜¯å¦ç”Ÿæˆ map æ–‡ä»¶ */ // \"outFile\": \"./\", /* æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶ï¼Œå®ƒçš„å€¼ä¸ºä¸€ä¸ªæ–‡ä»¶è·¯å¾„åï¼Œåªæœ‰è®¾ç½® module çš„å€¼ä¸º amd å’Œ system æ¨¡å—æ—¶æ‰æ”¯æŒè¿™ä¸ªé…ç½® */ // \"outDir\": \"./\", /* æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹ */ // \"rootDir\": \"./\", /* æŒ‡å®šç¼–è¯‘æ–‡ä»¶çš„æ ¹ç›®å½• */ // \"composite\": true, /* æ˜¯å¦ç¼–è¯‘æ„å»ºå¼•ç”¨é¡¹ç›® */ // \"tsBuildInfoFile\": \"./\", /* å¢é‡ç¼–è¯‘æ–‡ä»¶çš„å­˜å‚¨ä½ç½® */ // \"removeComments\": true, /* æ˜¯å¦å°†ç¼–è¯‘åçš„æ–‡ä»¶ä¸­çš„æ³¨é‡Šåˆ æ‰ */ // \"noEmit\": true, /* ä¸ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ */ // \"importHelpers\": true, /* æŒ‡å®šæ˜¯å¦å¼•å…¥ tslib é‡Œçš„è¾…åŠ©å·¥å…·å‡½æ•° */ // \"downlevelIteration\": true, /* å½“ target ä¸º 'ES5' æˆ– 'ES3' æ—¶ï¼Œä¸º 'for-of', 'spread' å’Œ 'destructuring' ä¸­çš„è¿­ä»£å™¨æä¾›å®Œå…¨æ”¯æŒ */ // \"isolatedModules\": true, /* æŒ‡å®šæ˜¯å¦å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºå•ç‹¬çš„æ¨¡å—ï¼ˆä¸â€œts.transpileModuleâ€ç±»ä¼¼ï¼‰ */ /* * Strict Type-Checking Options */ \"strict\": true /* å¼€å¯æ‰€æœ‰ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ */, // \"noImplicitAny\": true, /* ç¦æ­¢éšå¼çš„ any ç±»å‹ */ // \"strictNullChecks\": true, /* ä¸å…è®¸æŠŠ nullã€undefined èµ‹å€¼ç»™å…¶ä»–ç±»å‹å˜ç½® */ // \"strictFunctionTypes\": true, /* æŒ‡å®šæ˜¯å¦ä½¿ç”¨å‡½æ•°å‚æ•°åŒå‘åå˜æ£€æŸ¥ */ // \"strictBindCallApply\": true, /* å¯¹ bindã€call å’Œ apply ç»‘å®šçš„æ–¹æ³•çš„å‚æ•°çš„æ£€æµ‹æ˜¯ä¸¥æ ¼æ£€æµ‹çš„ */ // \"strictPropertyInitialization\": true, /* æ£€æŸ¥ç±»çš„é undefined å±æ€§æ˜¯å¦å·²ç»åœ¨æ„é€ å‡½æ•°é‡Œåˆå§‹åŒ–ï¼Œéœ€è¦åŒæ—¶å¼€å¯ strictNullChecks */ // \"noImplicitThis\": true, /* ç¦æ­¢ this çš„ç±»å‹ä¸º any */ // \"alwaysStrict\": true, /* æŒ‡å®šå§‹ç»ˆä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘ä¹‹åçš„ js æ–‡ä»¶ä¸­åŠ å…¥ \"use strict\" å­—ç¬¦ä¸² */ /* * Additional Checks */ // \"noUnusedLocals\": true, /* ç”¨äºæ£€æŸ¥æ˜¯å¦æœ‰å®šä¹‰äº†ä½†æ˜¯æ²¡æœ‰ä½¿ç”¨çš„å˜é‡ */ // \"noUnusedParameters\": true, /* ç”¨äºæ£€æŸ¥æ˜¯å¦æœ‰åœ¨å‡½æ•°ä½“ä¸­æ²¡æœ‰ä½¿ç”¨çš„å‚æ•° */ // \"noImplicitReturns\": true, /* ç”¨äºæ£€æŸ¥å‡½æ•°æ˜¯å¦æœ‰è¿”å›å€¼ */ // \"noFallthroughCasesInSwitch\": true, /* ç”¨äºæ£€æŸ¥ switch ä¸­æ˜¯å¦æœ‰ case æ²¡æœ‰ä½¿ç”¨ break è·³å‡º switch */ /* * Module Resolution Options */ // \"moduleResolution\": \"node\", /* æ¨¡å—è§£æç­–ç•¥: 'node' (Node.js) æˆ–è€… 'classic' (TypeScript pre-1.6). */ // \"baseUrl\": \"./\", /* è®¾ç½®è§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºæœ¬ç›®å½• */ // \"paths\": &#123;&#125;, /* è®¾ç½®æ¨¡å—åç§°åˆ°åŸºäºbaseUrlçš„è·¯å¾„æ˜ å°„ï¼Œç±»ä¼¼äº webpack çš„ alias åˆ«å */ // \"rootDirs\": [], /* æŒ‡å®šä¸€ä¸ªè·¯å¾„åˆ—è¡¨ï¼Œåœ¨æ„å»ºæ—¶ç¼–è¯‘å™¨ä¼šå°†è¿™ä¸ªè·¯å¾„åˆ—è¡¨ä¸­çš„è·¯å¾„çš„å†…å®¹éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ */ // \"typeRoots\": [], /* æŒ‡å®šå£°æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è·¯å¾„åˆ—è¡¨ï¼Œå¦‚æœæŒ‡å®šäº†æ­¤é¡¹ï¼Œåˆ™åªæœ‰åœ¨è¿™é‡Œåˆ—å‡ºçš„å£°æ˜æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½ */ // \"types\": [], /* æŒ‡å®šéœ€è¦åŒ…å«çš„æ¨¡å—ï¼Œåªæœ‰åœ¨è¿™é‡Œåˆ—å‡ºçš„æ¨¡å—çš„å£°æ˜æ–‡ä»¶æ‰ä¼šè¢«åŠ è½½è¿›æ¥ */ // \"allowSyntheticDefaultImports\": true, /* å…è®¸å¼•å…¥æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å— */ \"esModuleInterop\": true /* é€šè¿‡ä¸ºå¯¼å…¥å†…å®¹åˆ›å»ºå‘½åç©ºé—´ï¼Œå®ç°CommonJSå’ŒESæ¨¡å—ä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚éœ€è¦é…ç½® 'allowSyntheticDefaultImports'. */, // \"preserveSymlinks\": true, /* ä¸æŠŠç¬¦å·é“¾æ¥è§£æä¸ºå…¶çœŸå®è·¯å¾„ */ // \"allowUmdGlobalAccess\": true, /* å…è®¸ä»æ¨¡å—è®¿é—® UMD å…¨å±€å˜é‡ */ /* * Source Map Options */ // \"sourceRoot\": \"\", /* æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶ä½ç½® */ // \"mapRoot\": \"\", /* æŒ‡å®šè°ƒè¯•å™¨æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œéç”Ÿæˆæ–‡ä»¶çš„ä½ç½® */ // \"inlineSourceMap\": true, /* æŒ‡å®šæ˜¯å¦å°† map æ–‡ä»¶çš„å†…å®¹å’Œ js æ–‡ä»¶ç¼–è¯‘åœ¨åŒä¸€ä¸ª js æ–‡ä»¶ä¸­ */ // \"inlineSources\": true, /* ç”¨äºæŒ‡å®šæ˜¯å¦è¿›ä¸€æ­¥å°† *.ts æ–‡ä»¶çš„å†…å®¹ä¹ŸåŒ…å«åˆ°è¾“å…¥æ–‡ä»¶ä¸­; éœ€è¦è®¾ç½® '--inlineSourceMap' æˆ–è€… '--sourceMap' */ /* * Experimental Options */ // \"experimentalDecorators\": true, /* æŒ‡å®šæ˜¯å¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ */ // \"emitDecoratorMetadata\": true, /* æŒ‡å®šæ˜¯å¦ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®æ”¯æŒ */ /* * Advanced Options */ \"forceConsistentCasingInFileNames\": true /* ä¸å…è®¸ä¸åŒå˜é‡æ¥ä»£è¡¨åŒä¸€æ–‡ä»¶ */ &#125;&#125; ### åŸºç¡€è¯­æ³•æ•°ç»„æ•°ç»„æœ‰ä¸¤å¼ å†™æ³•ï¼Œä¸ªäººæ¨èç¬¬ä¸€ç§ï¼Œä¸€ç›®äº†ç„¶ã€‚ 12345// å†™æ³•ä¸€let list: number[] = [1, 2, 3];// å†™æ³•äºŒlet list: Array&lt;number&gt; = [1, 2, 3]; å…ƒç»„å…ƒç»„å¤šç”¨äºè®°å½•ç¡®å®šæ•°é‡å’Œç±»å‹çš„æ•°ç»„ã€‚ 123let x: [string, number];x = ['hello', 10]; // OKx = [10, 'hello']; // Error å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ï¼š 1234x[3] = 'world'; // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹x[6] = true; // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹console.log(x[5].toString()); // OK, 'string' å’Œ 'number' éƒ½æœ‰ toString æšä¸¾ä½¿ç”¨æšä¸¾å¯ä»¥å®šä¹‰ä¸€äº›æœ‰åå­—çš„æ•°å­—å¸¸é‡ 123456enum Color &#123; Red, Green, Blue,&#125;let c: Color = Color.Green; Anyå¤„ç†ä¸ç¡®å®šçš„å†…å®¹ï¼šæ¯”å¦‚æ²¡æœ‰ ts å£°æ˜çš„ç¬¬ä¸‰æ–¹åº“/ç”¨æˆ·è‡ªå®šä¹‰åº“ 123let notSure: any = 4;notSure = 'maybe a string instead';notSure = false; // okay, definitely a boolean æ³¨ï¼šèƒ½ä¸ç”¨å°±å°½é‡ä¸ç”¨ï¼Œå› ä¸ºä½¿ç”¨æ­¤å’Œä¸ç”¨ ts æ²¡ä»€ä¹ˆåŒºåˆ« Voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œå¸¸ç”¨äºæ— è¿”å›å€¼çš„å‡½æ•°ã€‚ 123function warnUser(): void &#123; console.log('This is my warning message');&#125; æ³¨ï¼šå£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ undefined å’Œ nullã€‚ Nevernever ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¸€èˆ¬ç”¨äºæŠ¥é”™å‡½æ•°æˆ–è€…æ— ç»ˆæ­¢æ¡ä»¶çš„å‡½æ•°ã€‚ never ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ never çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ never ç±»å‹ï¼ˆé™¤äº† never æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ any ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ neverã€‚ 1234567891011121314// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never &#123; throw new Error(message);&#125;// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºneverfunction fail() &#123; return error('Something failed');&#125;// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never &#123; while (true) &#123;&#125;&#125; Objectobject è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ numberï¼Œstringï¼Œbooleanï¼Œsymbolï¼Œnull æˆ– undefined ä¹‹å¤–çš„ç±»å‹ã€‚ ç±»å‹æ–­è¨€ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š 123let someValue: any = 'this is a string';let strLength: number = (&lt;string&gt;someValue).length; å¦ä¸€ä¸ªä¸º as è¯­æ³•ï¼š 123let someValue: any = 'this is a string';let strLength: number = (someValue as string).length; å½“åœ¨ TypeScript é‡Œä½¿ç”¨ JSX æ—¶ï¼Œåªæœ‰ as è¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚ æ³¨ï¼šç±»å‹æ–­è¨€ä¼šå½±å“ ts çš„ç±»å‹æ ¡éªŒï¼Œå¯¹äºååˆ†ç¡®å®šçš„æƒ…å†µå¯ä»¥ä½¿ç”¨æ–­è¨€æ¥å‡å°‘ä¸€äº›è½¬æ¢é—®é¢˜ï¼Œä½†ä¸è¦æ»¥ç”¨ã€‚ æ¥å£åŸºæœ¬å†™æ³•1234567891011interface LabelledValue &#123; label: string; size?: number;&#125;function printLabel(labelledObj: LabelledValue) &#123; console.log(labelledObj.label);&#125;let myObj = &#123; size: 10, label: 'Size 10 Object' &#125;;printLabel(myObj); æ³¨æ„ï¼šå¯é€‰å±æ€§å¦‚æœå‡ºç°æŠ¥çº¢æç¤ºæ—¶ï¼Œéœ€è¦è€ƒè™‘ä¼ å…¥çš„å˜é‡ç±»å‹ä¸º undefined çš„æƒ…å†µï¼Œå› ä¸º undefined å’Œ null æ˜¯æ‰€æœ‰åŸºç¡€ç±»å‹çš„å­é›† åªè¯»å±æ€§ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨ readonly æ¥æŒ‡å®šåªè¯»å±æ€§: 1234interface Point &#123; readonly x: number; readonly y: number;&#125; TypeScript å…·æœ‰ ReadonlyArray&lt;T&gt; ç±»å‹ï¼Œå®ƒä¸ Array&lt;T&gt; ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚ 123456let a: number[] = [1, 2, 3, 4];let ro: ReadonlyArray&lt;number&gt; = a;ro[0] = 12; // error!ro.push(5); // error!ro.length = 100; // error!a = ro; // error! âš ï¸ï¼šä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œå¯ä»¥çœ‹åˆ°å°±ç®—æŠŠæ•´ä¸ª ReadonlyArray èµ‹å€¼åˆ°ä¸€ä¸ªæ™®é€šæ•°ç»„ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ã€‚ ä½†æ˜¯ä½ å¯ä»¥ç”¨ç±»å‹æ–­è¨€é‡å†™ï¼š 1a = ro as number[]; æœ€ç®€å•åˆ¤æ–­è¯¥ç”¨ readonly è¿˜æ˜¯ const çš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡ä½¿ç”¨è¿˜æ˜¯åšä¸ºä¸€ä¸ªå±æ€§ã€‚åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨ constï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨ readonlyã€‚ é¢å¤–çš„å±æ€§æ£€æŸ¥å¯¹è±¡å­—é¢é‡ä¼šè¢«ç‰¹æ®Šå¯¹å¾…è€Œä¸”ä¼šç»è¿‡é¢å¤–å±æ€§æ£€æŸ¥ï¼Œå½“å°†å®ƒä»¬èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å­—é¢é‡å­˜åœ¨ä»»ä½•â€œç›®æ ‡ç±»å‹â€ä¸åŒ…å«çš„å±æ€§æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚ 1234567891011interface SquareConfig &#123; color?: string; width?: number;&#125;function createSquare(config: SquareConfig): &#123; color: string; area: number &#125; &#123; // ...&#125;// error: 'colour' not expected in type 'SquareConfig'let mySquare = createSquare(&#123; colour: 'red', width: 100 &#125;); ç»•å¼€è¿™äº›æ£€æŸ¥éå¸¸ç®€å•ã€‚ æœ€ç®€ä¾¿çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç±»å‹æ–­è¨€ï¼š 1let mySquare = createSquare(&#123; width: 100, opacity: 0.5 &#125; as SquareConfig); ç„¶è€Œï¼Œæœ€ä½³çš„æ–¹å¼æ˜¯èƒ½å¤Ÿæ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾åï¼Œå‰ææ˜¯ä½ èƒ½å¤Ÿç¡®å®šè¿™ä¸ªå¯¹è±¡å¯èƒ½å…·æœ‰æŸäº›åšä¸ºç‰¹æ®Šç”¨é€”ä½¿ç”¨çš„é¢å¤–å±æ€§ã€‚ 12345interface SquareConfig &#123; color?: string; width?: number; [propName: string]: any;&#125; âš ï¸ æ³¨æ„ è¿˜æœ‰æœ€åä¸€ç§è·³è¿‡è¿™äº›æ£€æŸ¥çš„æ–¹å¼ï¼Œè¿™å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°æƒŠè®¶ï¼Œå®ƒå°±æ˜¯å°†è¿™ä¸ªå¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå¦ä¸€ä¸ªå˜é‡ï¼šå› ä¸º squareOptions ä¸ä¼šç»è¿‡é¢å¤–å±æ€§æ£€æŸ¥ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ã€‚ 12let squareOptions = &#123; colour: 'red', width: 100 &#125;;let mySquare = createSquare(squareOptions); å‡½æ•°ç±»å‹ä¸ºäº†ä½¿ç”¨æ¥å£è¡¨ç¤ºå‡½æ•°ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¥å£å®šä¹‰ä¸€ä¸ªè°ƒç”¨ç­¾åã€‚ å®ƒå°±åƒæ˜¯ä¸€ä¸ªåªæœ‰å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹çš„å‡½æ•°å®šä¹‰ã€‚å‚æ•°åˆ—è¡¨é‡Œçš„æ¯ä¸ªå‚æ•°éƒ½éœ€è¦åå­—å’Œç±»å‹ã€‚ 123456789interface SearchFunc &#123; (source: string, subString: string): boolean;&#125;let mySearch: SearchFunc;mySearch = function (source: string, subString: string) &#123; let result = source.search(subString); return result &gt; -1;&#125;; å¯¹äºå‡½æ•°ç±»å‹çš„ç±»å‹æ£€æŸ¥æ¥è¯´ï¼Œå‡½æ•°çš„å‚æ•°åä¸éœ€è¦ä¸æ¥å£é‡Œå®šä¹‰çš„åå­—ç›¸åŒ¹é…ï¼Œå‡½æ•°çš„å‚æ•°ä¼šé€ä¸ªè¿›è¡Œæ£€æŸ¥ï¼Œè¦æ±‚å¯¹åº”ä½ç½®ä¸Šçš„å‚æ•°ç±»å‹æ˜¯å…¼å®¹çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç é‡å†™ä¸Šé¢çš„ä¾‹å­ï¼š 12345678910111213// ä¸å¯¹åº”å˜é‡ålet mySearch: SearchFunc;mySearch = function (src: string, sub: string): boolean &#123; let result = src.search(sub); return result &gt; -1;&#125;;// ä»€ä¹ˆéƒ½ä¸åŠ let mySearch: SearchFunc;mySearch = function (src, sub) &#123; let result = src.search(sub); return result &gt; -1;&#125;; å¯ç´¢å¼•çš„ç±»å‹ä½¿ç”¨æ¥å£çš„æ–¹å¼æ¥ä¸ºæ•°ç»„è¿›è¡Œç±»å‹å£°æ˜ 12345678interface StringArray &#123; [index: number]: string;&#125;let myArray: StringArray;myArray = ['Bob', 'Fred'];let myStr: string = myArray[0]; å­—ç¬¦ä¸²ç´¢å¼•ç­¾åèƒ½å¤Ÿå¾ˆå¥½çš„æè¿° dictionary æ¨¡å¼ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿä¼šç¡®ä¿æ‰€æœ‰å±æ€§ä¸å…¶è¿”å›å€¼ç±»å‹ç›¸åŒ¹é…ã€‚ å› ä¸ºå­—ç¬¦ä¸²ç´¢å¼•å£°æ˜äº† obj.property å’Œ obj[&quot;property&quot;] ä¸¤ç§å½¢å¼éƒ½å¯ä»¥ã€‚ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œname çš„ç±»å‹ä¸å­—ç¬¦ä¸²ç´¢å¼•ç±»å‹ä¸åŒ¹é…ï¼Œæ‰€ä»¥ç±»å‹æ£€æŸ¥å™¨ç»™å‡ºä¸€ä¸ªé”™è¯¯æç¤ºï¼š 12345interface NumberDictionary &#123; [index: string]: number; length: number; // å¯ä»¥ï¼Œlengthæ˜¯numberç±»å‹ name: string; // é”™è¯¯ï¼Œ`name`çš„ç±»å‹ä¸ç´¢å¼•ç±»å‹è¿”å›å€¼çš„ç±»å‹ä¸åŒ¹é…&#125; å‡½æ•°å‰©ä½™å‚æ•°å‰©ä½™å‚æ•°ä¼šè¢«å½“åšä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚ å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ 12345function buildName(firstName: string, ...restOfName: string[]) &#123; return firstName + ' ' + restOfName.join(' ');&#125;let employeeName = buildName('Joseph', 'Samuel', 'Lucas', 'MacKinzie'); å£°æ˜æ–‡ä»¶UMDUMD æ¨¡å—æ˜¯æŒ‡é‚£äº›æ—¢å¯ä»¥ä½œä¸ºæ¨¡å—ä½¿ç”¨ï¼ˆé€šè¿‡å¯¼å…¥ï¼‰åˆå¯ä»¥ä½œä¸ºå…¨å±€ï¼ˆåœ¨æ²¡æœ‰æ¨¡å—åŠ è½½å™¨çš„ç¯å¢ƒé‡Œï¼‰ä½¿ç”¨çš„æ¨¡å—ã€‚ è®¸å¤šæµè¡Œçš„åº“ï¼Œæ¯”å¦‚ Moment.jsï¼Œå°±æ˜¯è¿™æ ·çš„å½¢å¼ã€‚ æ¯”å¦‚ï¼Œåœ¨ Node.js æˆ– RequireJs é‡Œï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š 12import moment = require('moment');console.log(moment.format()); namespace å’Œ modulenamespaceTS é‡Œçš„ namespace ä¸»è¦æ˜¯è§£å†³å‘½åå†²çªçš„é—®é¢˜ï¼Œä¼šåœ¨å…¨å±€ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰åœ¨ namespace å†…éƒ¨çš„ç±»éƒ½è¦é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„å±æ€§è®¿é—®ã€‚å¯¹äºå†…éƒ¨æ¨¡å—æ¥è¯´ï¼Œå°½é‡ä½¿ç”¨ namespace æ›¿ä»£ moduleï¼Œå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ä¾‹å¦‚ï¼š 123456789101112namespace Test &#123; export const USER_NAME = 'test name'; export namespace Polygons &#123; export class Triangle &#123;&#125; export class Square &#123;&#125; &#125;&#125;// å–åˆ«åimport polygons = Test.Polygons;const username = Test.username; æ³¨æ„ï¼šimport xx = require(â€˜xxâ€™) ä¸ºåŠ è½½æ¨¡å—çš„å†™æ³•ï¼Œä¸è¦ä¸å–åˆ«åçš„å†™æ³•æ··æ·†ã€‚ é»˜è®¤å…¨å±€ç¯å¢ƒçš„ namespace ä¸º global moduleæ¨¡å—å¯ç†è§£æˆ Vue ä¸­çš„å•ä¸ª vue æ–‡ä»¶ï¼Œå®ƒæ˜¯ä»¥åŠŸèƒ½ä¸ºå•ä½è¿›è¡Œåˆ’åˆ†çš„ï¼Œä¸€ä¸ªæ¨¡å—è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ã€‚å…¶ä¸ namespace çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼šnamespace æ˜¯è·¨æ–‡ä»¶çš„ï¼Œmodule æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½çš„ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª moduleã€‚ç±»æ¯” Javaï¼Œnamespace å°±å¥½æ¯” Java ä¸­çš„åŒ…ï¼Œè€Œ module åˆ™ç›¸å½“äºæ–‡ä»¶ã€‚ å‚è€ƒæ–‡æ¡£ tsconfig.json é…ç½®è¯¦è§£ å®˜æ–¹æ–‡æ¡£ åŒºåˆ† TS ä¸­çš„ namespace å’Œ module å…³äº TypeScript ä¸­çš„ module å’Œ export å…³é”®è¯","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/tags/TypeScript/"}]},{"title":"React ä»£ç è§„èŒƒé…ç½®","slug":"React-ä»£ç è§„èŒƒé…ç½®","date":"2020-03-29T09:30:36.000Z","updated":"2022-07-26T13:18:11.824Z","comments":true,"path":"2020/03/29/React-ä»£ç è§„èŒƒé…ç½®/","link":"","permalink":"https://monocy.gitee.io/2020/03/29/React-ä»£ç è§„èŒƒé…ç½®/","excerpt":"å‰è¨€æœ€è¿‘å¼€å§‹åˆæ­¥å­¦ä¹  React çš„ä¸€äº›çŸ¥è¯†ï¼Œæ¯•ç«Ÿå®…å®¶è¿™ä¹ˆä¹…ï¼Œæ€»å¾—å¼€å§‹å­¦ä¹ å­¦ä¹ æ–°çš„å†…å®¹äº†ã€‚â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€ï¼Œå› æ­¤ä»Šå¤©ä¸»è¦æ˜¯é…ç½® VSCode çš„ React æ”¯æŒï¼ŒæŠ˜è…¾æ¥æŠ˜è…¾å»ï¼Œæ ¸å¿ƒçš„é…ç½®å¤§æ¦‚å°±å¦‚æ–‡ä¸­æ‰€ç¤ºäº†ã€‚ æ¨èé˜…è¯»ï¼šMac ç¯å¢ƒé…ç½® çš„ â€œé…ç½® VScodeâ€ éƒ¨åˆ†ï¼Œé€šè¿‡ Sync å®‰è£…æˆ‘æ€»ç»“çš„æ’ä»¶å¯ä¸ç”¨å…³å¿ƒä»¥ä¸‹çš„é…ç½®ï¼Œé»˜è®¤é…ç½®å¥½ã€‚","text":"å‰è¨€æœ€è¿‘å¼€å§‹åˆæ­¥å­¦ä¹  React çš„ä¸€äº›çŸ¥è¯†ï¼Œæ¯•ç«Ÿå®…å®¶è¿™ä¹ˆä¹…ï¼Œæ€»å¾—å¼€å§‹å­¦ä¹ å­¦ä¹ æ–°çš„å†…å®¹äº†ã€‚â€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€ï¼Œå› æ­¤ä»Šå¤©ä¸»è¦æ˜¯é…ç½® VSCode çš„ React æ”¯æŒï¼ŒæŠ˜è…¾æ¥æŠ˜è…¾å»ï¼Œæ ¸å¿ƒçš„é…ç½®å¤§æ¦‚å°±å¦‚æ–‡ä¸­æ‰€ç¤ºäº†ã€‚ æ¨èé˜…è¯»ï¼šMac ç¯å¢ƒé…ç½® çš„ â€œé…ç½® VScodeâ€ éƒ¨åˆ†ï¼Œé€šè¿‡ Sync å®‰è£…æˆ‘æ€»ç»“çš„æ’ä»¶å¯ä¸ç”¨å…³å¿ƒä»¥ä¸‹çš„é…ç½®ï¼Œé»˜è®¤é…ç½®å¥½ã€‚ æ’ä»¶ä¾èµ– Prettier ï¼ˆæ ¼å¼åŒ–æ’ä»¶ï¼‰ ESlintï¼ˆæ ¼å¼åŒ–æ’ä»¶ï¼‰ ES7 React/Redux/GraphQL/React-Native snippets (å¿«æ·æŒ‡ä»¤) æ³¨ï¼š æ­¤å¤„ä¸ºä¸€äº›å¿…é¡»å®‰è£…çš„æ’ä»¶ï¼Œå®‰è£…åé…ç½®æ‰ä¼šç”Ÿæ•ˆ é¡¹ç›®é…ç½®VSCode æœ‰æ•´ä½“çš„ setting.json é…ç½®å’Œå•é¡¹ç›®é…ç½®ï¼Œä¸ªäººè¿˜æ˜¯æ¨èå•é¡¹ç›®é…ç½®ï¼Œæ¯•ç«Ÿè‡ªå·±çš„å¼€å‘å™¨å¯èƒ½å¼€å‘ä¸ä»…ä»…å°±ä¸€ç§è¯­è¨€çš„å§ï¼Œå› æ­¤è¿˜æ˜¯å»ºç«‹å¦‚ä¸‹æ–‡ä»¶ï¼š 123--|- .vscode |- settings.json ç„¶å settings.json å†…é…ç½®å†…å®¹ä¸ºï¼š 1234567891011121314151617181920&#123; // ç¼–è¾‘å™¨éƒ¨åˆ† \"editor.tabSize\": 2, \"editor.wordWrap\": \"on\", \"editor.formatOnSave\": true, \"editor.renderWhitespace\": \"none\", \"editor.multiCursorModifier\": \"ctrlCmd\", \"editor.defaultFormatter\": \"esbenp.prettier-vscode\", // é»˜è®¤å¯ç”¨çš„ä»£ç æ ¼å¼åŒ–æ’ä»¶ \"files.insertFinalNewline\": true, /** * ä»£ç é…ç½® */ // eslint éƒ¨åˆ† \"eslint.run\": \"onSave\", \"eslint.format.enable\": true, \"editor.codeActionsOnSave\": &#123; \"source.fixAll.eslint\": true &#125;, \"eslint.validate\": [\"typescriptreact\", \"typescript\"]&#125; æ ·å¼æ–‡ä»¶é…ç½®å› ä¸ºé¡¹ç›®ä½¿ç”¨çš„æ˜¯ prettier æ ¼å¼åŒ–æ’ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª .prettierrc çš„æ–‡ä»¶ï¼Œç„¶åç²˜è´´ä¸€ä¸‹å†…å®¹ï¼ˆä» ant design æ‹·è´è¿‡æ¥çš„ï¼Œä¹‹åæ ¹æ®ä½¿ç”¨ä¹ æƒ¯å†åšä¿®æ”¹ï¼‰ 123456789101112131415&#123; \"singleQuote\": true, \"trailingComma\": \"all\", \"printWidth\": 100, \"proseWrap\": \"never\", \"arrowParens\": \"avoid\", \"overrides\": [ &#123; \"files\": \".prettierrc\", \"options\": &#123; \"parser\": \"json\" &#125; &#125; ]&#125;","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ä»£ç é…ç½®","slug":"ä»£ç é…ç½®","permalink":"https://monocy.gitee.io/tags/ä»£ç é…ç½®/"}]},{"title":"Docker å®‰è£… mysql","slug":"Docker-å®‰è£…-mysql","date":"2020-03-11T11:27:28.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2020/03/11/Docker-å®‰è£…-mysql/","link":"","permalink":"https://monocy.gitee.io/2020/03/11/Docker-å®‰è£…-mysql/","excerpt":"å‰è¨€è‡ªå­¦ Docker ç³»åˆ—ï¼Œäº†è§£å¸¸ç”¨åŒ…çš„ä½¿ç”¨å’Œé…ç½®å®‰è£…ï¼Œæ­¤ç¯‡è®°å½• mysql çš„å®‰è£…","text":"å‰è¨€è‡ªå­¦ Docker ç³»åˆ—ï¼Œäº†è§£å¸¸ç”¨åŒ…çš„ä½¿ç”¨å’Œé…ç½®å®‰è£…ï¼Œæ­¤ç¯‡è®°å½• mysql çš„å®‰è£… å®‰è£…é…ç½®ä¸‹è½½ mysqlï¼ˆ8 ç‰ˆæœ¬å’Œ 7 ç‰ˆæœ¬ä¸å¤ªä¸€æ ·ï¼‰ 12docker pull mysql:latestdocker pull mysql:5.7 å®‰è£… mysql57 1docker run --name mysql57 -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d mysql:5.7 æ­¤æ—¶ç›´æ¥é€šè¿‡ tomcat æˆ–è€… workbench è¿æ¥ä¸Šå³å¯ å®‰è£… mysql:latest 1docker run --name mysql -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d mysql å¦‚æœç”¨ tomcat è¿æ¥ä¸ä¸Š mysqlï¼Œé‚£ä¹ˆè¯·å‚é˜…å‚è€ƒæ–‡ç«  å‚è€ƒæ–‡ç«  Docker å®‰è£… mysql","categories":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/tags/Docker/"}]},{"title":"Docker å®‰è£… nginx","slug":"Docker-å®‰è£…-nginx","date":"2020-03-11T07:44:19.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2020/03/11/Docker-å®‰è£…-nginx/","link":"","permalink":"https://monocy.gitee.io/2020/03/11/Docker-å®‰è£…-nginx/","excerpt":"å‰è¨€è‡ªå­¦ Docker ç³»åˆ—ï¼Œäº†è§£å¸¸ç”¨åŒ…çš„ä½¿ç”¨å’Œé…ç½®å®‰è£…ï¼Œæ­¤ç¯‡è®°å½• nginx çš„å®‰è£…","text":"å‰è¨€è‡ªå­¦ Docker ç³»åˆ—ï¼Œäº†è§£å¸¸ç”¨åŒ…çš„ä½¿ç”¨å’Œé…ç½®å®‰è£…ï¼Œæ­¤ç¯‡è®°å½• nginx çš„å®‰è£… å®‰è£…é…ç½®ä¸‹è½½ nginx 1docker pull nginx:latest æ™®é€šè¿è¡Œ 1docker run --name nginx -p 80:80 -d nginx å¦‚æœéœ€è¦æŒ‚è½½åœ¨æœ¬åœ°ï¼Œåˆ™éœ€è¦è®¾ç½®è™šæ‹Ÿå·å®— 1docker run --name nginx -p 80:80 -v /Users/saitane/Docker/nginx/nginx.conf:/etc/nginx/nginx.conf -v /Users/saitane/Docker/nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf -v /Users/saitane/Docker/nginx/html:/usr/share/nginx/html -d nginx æ­¤å¤„æˆ‘å°† nginx.confã€default.conf å’Œ htmlé™æ€æ–‡ä»¶å¤¹ æ˜ å°„åˆ°æœ¬åœ°çš„ nginx æ–‡ä»¶å¤¹å†…ï¼Œä¹‹åå°±ä¸ç”¨è¿›å…¥å®¹å™¨å†…é…ç½®æ–‡ä»¶ä»¥åŠç¹ççš„ docker cp æ‹·è´ä»£ç äº†ï¼Œä½†å¾—æ³¨æ„ç”Ÿæˆå®¹å™¨åéœ€è¦å°†æ–‡ä»¶æ‹·è´åˆ°æœ¬åœ° æœåŠ¡å™¨ nginx å®‰è£…é™¤äº† Docker çš„å®‰è£…æ–¹å¼ï¼Œæ­¤å¤„è®°å½•ä¸€ä¸‹æˆ‘åœ¨ centos è£… nginx é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚ å®‰è£… nginxcentos è£… ngixn å…ˆæŸ¥çœ‹ä¸‹æ˜¯å¦æœ‰å®‰è£… nginx çš„æº 1234567yum repolist# å¦‚æœæœ‰å®‰è£…ä¼šæœ‰è¿™ä¹ˆä¸€è¡Œä¿¡æ¯# æºæ ‡è¯† æºåç§°# ...# nginx/x86_64 nginx repo# ... è‹¥æ²¡æœ‰å®‰è£…æºï¼Œåˆ™å®‰è£…ä¸€ä¸‹ nginx çš„æº 1rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm å¯åŠ¨ nginxé…ç½®å‰å…ˆçœ‹ä¸€çœ‹æ˜¯å¦æœ‰å†å²é—ç•™çš„ nginx æœåŠ¡ 123456netstat -lntp | grep nginx# å¦‚æˆ‘è¿™é‡Œå°±æœ‰ä¸€äº›å®‰è£…çš„ï¼Œä½†æ˜¯éƒ¨åˆ†æ²¡ç”¨å´æ²¡æœ‰åœæ­¢çš„æœåŠ¡ï¼Œæ ¹æ®æƒ…å†µ kill æ‰éƒ¨åˆ†# tcp 0 0 0.0.0.0:80 0.0.0.0:* LISTEN 14514/nginx: master# tcp 0 0 0.0.0.0:440 0.0.0.0:* LISTEN 3451/nginx: master# tcp 0 0 0.0.0.0:8099 0.0.0.0:* LISTEN 24166/nginx: master å¦‚æœéœ€è¦æ·±åº¦æ¸…ç†æ®‹ç•™ nginx æ–‡ä»¶ï¼Œfind / -name nginx æ ¹æ®æƒ…å†µæ¥å¤„ç†å³å¯ å¤„ç†å®Œæˆåï¼Œæ³¨å†Œ nginx æœåŠ¡ 1234567# æ³¨å†Œå¼€æœºå¯åŠ¨ nginxsystemctl enable nginx# å¯åŠ¨ nginxservice start nginx# é‡å¯æŒ‡ä»¤ï¼š `service restart nginx`# åœæ­¢æŒ‡ä»¤ï¼š `service stop nginx` æ³¨æ„ï¼Œæ›´æ–° nginx æ–‡ä»¶åéœ€è¦é‡å¯ nginx ç„¶å nginx å°±å¯åŠ¨æˆåŠŸäº† é…ç½® nginxyum å®‰è£…çš„ nginx é…ç½®æ–‡ä»¶ä¸€èˆ¬åœ¨ /etc/nginx å†…ï¼Œé…ç½® nginx.conf æˆ–è€… conf.d/default.conf å³å¯ï¼Œæ›´å¤šé…ç½®å¯ä»¥ç¿»æŸ¥ä¸‹æ–‡æ¡£ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚ 12# æ˜¯åœ¨è®°ä¸ä½å°±ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥æ‰¾ï¼Œå®ƒä¼šåˆ—ä¸¾å¤„æ‰€æœ‰åœ°å€whereis nginx æ­¤å¤„ä»…ä»…æ”¹äº† root æ–‡ä»¶å¤¹çš„ä½ç½®ï¼Œæ–¹ä¾¿é¡¹ç›®æ„å»º 12345# conf.d/default.conflocation / &#123; root &lt;target-path&gt;; index index.html index.htm;&#125; ä¾¿æ·æŒ‡ä»¤è®°å½•ï¼š æŸ¥çœ‹æœåŠ¡å™¨ IP åœ°å€å‘½ä»¤ï¼š ifconfig -a æŸ¥çœ‹ç«¯å£æ˜¯å¦å ç”¨ï¼š lsof -i:&lt;ç«¯å£&gt; é—®é¢˜æ€»ç»“nginx åå‘ä»£ç†æ›¿æ¢è§„åˆ™ä»£ç†åœ°å€æ˜¯å¦æ·»åŠ å°¾éƒ¨ â€˜/â€˜ ä¼šå½±å“åˆ°è·¯å¾„çš„åŒ¹é…ï¼Œæ€»ç»“çš„è§„å¾‹å¦‚ä¸‹ï¼š 1234567location ^~ /xxx/ &#123; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_pass http://127.0.0.1:1234/;&#125;# æ­¤æœ€ç»ˆä¼šè¢«æ›¿æ¢æˆï¼š http://127.0.0.1:1234/ 1234567location ^~ /xxx/ &#123; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_pass http://127.0.0.1:1234;&#125;# æ­¤æœ€ç»ˆä¼šè¢«æ›¿æ¢æˆï¼š http://127.0.0.1:1234/xxx/ nginx çš„ nginx.pid ä¸¢å¤±é—®é¢˜nginx é‡å¯æ—¶æœ‰æ—¶å€™ä¼šä¸¢å¤± pid æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯è¢«å¼ºåˆ¶æ€æ‰è¿›ç¨‹çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦è¿›å…¥ nginx çš„å®‰è£…ç›®å½•çš„ sbin ä¸‹é‡æ–°å¯åŠ¨ nginxï¼š 12# cd &lt;nginx-dir&gt;/sbin./nginx -c &lt;nginx.conf path&gt; é˜²æ­¢æ­¤ä¸¢å¤±é—®é¢˜å‘ç”Ÿï¼Œåœ¨æ›´æ–° nginx æ—¶å°½é‡ä½¿ç”¨ nginx reload æ¥å¹³æ»‘é‡å¯ï¼Œé‡è½½é…ç½®ã€‚ å‚è€ƒæ–‡ç«  CentOS 7 yum å®‰è£… Nginx Linux å½»åº•å¸è½½ Nginx Linux kill å‘½ä»¤ nginx é‡å¯æŠ¥æ‰¾ä¸åˆ° nginx.pid çš„è§£å†³æ–¹æ³•","categories":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/tags/Docker/"}]},{"title":"Github æ— æ³•ç™»é™†é—®é¢˜","slug":"Github-æ— æ³•ç™»é™†é—®é¢˜","date":"2020-03-09T07:47:11.000Z","updated":"2022-07-26T13:12:10.759Z","comments":true,"path":"2020/03/09/Github-æ— æ³•ç™»é™†é—®é¢˜/","link":"","permalink":"https://monocy.gitee.io/2020/03/09/Github-æ— æ³•ç™»é™†é—®é¢˜/","excerpt":"å‰è¨€ä»è¿‡å¹´å›å®¶åˆ°ç°åœ¨ï¼ˆè‚ºç‚å°åŸï¼‰ï¼Œgithub å°±ä»æ¥æ²¡æœ‰ç™»é™†æˆåŠŸï¼ŒåŸå…ˆä¸€ç›´ä»¥ä¸ºæ˜¯å®¶é‡Œç½‘çš„é—®é¢˜ï¼ŒçŸ¥é“ä»Šå¤©å¶ç„¶é—´ç”¨æ‰‹æœºç™»ä¸Šäº† githubï¼Œå‘ç°äº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œé‡æ–°é…ç½®äº†ä¸€ä¸‹ /etc/hosts æ–‡ä»¶åï¼Œç»ˆäºèƒ½ç™»ä¸Š github å®˜ç½‘äº†ã€‚","text":"å‰è¨€ä»è¿‡å¹´å›å®¶åˆ°ç°åœ¨ï¼ˆè‚ºç‚å°åŸï¼‰ï¼Œgithub å°±ä»æ¥æ²¡æœ‰ç™»é™†æˆåŠŸï¼ŒåŸå…ˆä¸€ç›´ä»¥ä¸ºæ˜¯å®¶é‡Œç½‘çš„é—®é¢˜ï¼ŒçŸ¥é“ä»Šå¤©å¶ç„¶é—´ç”¨æ‰‹æœºç™»ä¸Šäº† githubï¼Œå‘ç°äº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œé‡æ–°é…ç½®äº†ä¸€ä¸‹ /etc/hosts æ–‡ä»¶åï¼Œç»ˆäºèƒ½ç™»ä¸Š github å®˜ç½‘äº†ã€‚ hosts æ–‡ä»¶Hosts æ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„ç³»ç»Ÿæ–‡ä»¶ï¼Œå…¶ä½œç”¨å°±æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„ç½‘å€åŸŸåä¸å…¶å¯¹åº”çš„ IP åœ°å€å»ºç«‹ä¸€ä¸ªå…³è”â€œæ•°æ®åº“â€ï¼Œå½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªéœ€è¦ç™»å½•çš„ç½‘å€æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè‡ªåŠ¨ä» Hosts æ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„ IP åœ°å€ï¼Œä¸€æ—¦æ‰¾åˆ°ï¼Œç³»ç»Ÿä¼šç«‹å³æ‰“å¼€å¯¹åº”ç½‘é¡µï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç³»ç»Ÿä¼šå†å°†ç½‘å€æäº¤ DNS åŸŸåè§£ææœåŠ¡å™¨è¿›è¡Œ IP åœ°å€çš„è§£æã€‚ æ³¨æ„ï¼šHosts æ–‡ä»¶é…ç½®çš„æ˜ å°„æ˜¯é™æ€çš„ï¼Œå¦‚æœç›®æ ‡åŸŸåå¯¹åº”çš„ ip æ›´æ”¹äº†ï¼Œä½† hosts æ–‡ä»¶çš„æ˜ å°„æ²¡æœ‰åŠæ—¶æ›´æ–°ï¼Œä¼šå¯¼è‡´é¡µé¢æ— æ³•è®¿é—®ã€‚ è§£å†³è§£å†³æ–¹æ³•éå¸¸ç®€å•ï¼Œå°† /etc/host æ–‡ä»¶å†…çš„ github.com çš„æ˜ å°„æ³¨é‡Šæ‰å³å¯ï¼Œæˆ–è€…æ˜¯æ›´æ–°å¯¹åº”çš„ ipã€‚ ä¸€èˆ¬åœ¨ IPAddress é‡Œé¢è¿›è¡Œ IP æŸ¥è¯¢ã€‚ è¡¥å……ï¼šæ›´æ–° IP çš„æ–¹æ³•å¥½åƒä¸è¡Œ å‚è€ƒæ–‡æ¡£ hosts","categories":[{"name":"é—®é¢˜ä¿®å¤","slug":"é—®é¢˜ä¿®å¤","permalink":"https://monocy.gitee.io/categories/é—®é¢˜ä¿®å¤/"}],"tags":[{"name":"é—®é¢˜ä¿®å¤","slug":"é—®é¢˜ä¿®å¤","permalink":"https://monocy.gitee.io/tags/é—®é¢˜ä¿®å¤/"}]},{"title":"npx çš„ç”¨é€”","slug":"npx-çš„ç”¨é€”","date":"2020-03-04T13:27:52.000Z","updated":"2022-07-26T13:18:09.282Z","comments":true,"path":"2020/03/04/npx-çš„ç”¨é€”/","link":"","permalink":"https://monocy.gitee.io/2020/03/04/npx-çš„ç”¨é€”/","excerpt":"å‰è¨€æœ€è¿‘åœ¨ä½¿ç”¨ package.json çš„ script è¿è¡ŒæŒ‡ä»¤æ—¶ï¼Œå‘ç°é€šè¿‡ npm åŒ…å®‰è£…çš„éƒ¨åˆ†æŒ‡ä»¤æ— æ³•ä½¿ç”¨ï¼ˆæ¯”å¦‚ docsify æŒ‡ä»¤ï¼‰ï¼ŒåŸå› æ˜¯å› ä¸º docsify-cli å½“ä½œ devDependence ä¾èµ–é¡¹å®‰è£…è‡³é¡¹ç›®ä¸­äº†ï¼Œè¿™ä¸åœ¨ç»ˆç«¯ä¸Šç›´æ¥è¿è¡Œ docsify æŒ‡ä»¤ä¸€æ ·ï¼Œå› ä¸ºå…¨å±€ç¯å¢ƒå¹¶æ²¡æœ‰å¯¹åº”çš„æŒ‡ä»¤ï¼Œå› æ­¤ä¼šæç¤ºæ‰¾ä¸åˆ°å¯¹åº”çš„æŒ‡ä»¤ï¼Œè¿™æ—¶å€™å°±èƒ½ç”¨ä¸Š npx äº†ã€‚","text":"å‰è¨€æœ€è¿‘åœ¨ä½¿ç”¨ package.json çš„ script è¿è¡ŒæŒ‡ä»¤æ—¶ï¼Œå‘ç°é€šè¿‡ npm åŒ…å®‰è£…çš„éƒ¨åˆ†æŒ‡ä»¤æ— æ³•ä½¿ç”¨ï¼ˆæ¯”å¦‚ docsify æŒ‡ä»¤ï¼‰ï¼ŒåŸå› æ˜¯å› ä¸º docsify-cli å½“ä½œ devDependence ä¾èµ–é¡¹å®‰è£…è‡³é¡¹ç›®ä¸­äº†ï¼Œè¿™ä¸åœ¨ç»ˆç«¯ä¸Šç›´æ¥è¿è¡Œ docsify æŒ‡ä»¤ä¸€æ ·ï¼Œå› ä¸ºå…¨å±€ç¯å¢ƒå¹¶æ²¡æœ‰å¯¹åº”çš„æŒ‡ä»¤ï¼Œå› æ­¤ä¼šæç¤ºæ‰¾ä¸åˆ°å¯¹åº”çš„æŒ‡ä»¤ï¼Œè¿™æ—¶å€™å°±èƒ½ç”¨ä¸Š npx äº†ã€‚ ç®€ä»‹ npxnpx æ˜¯è‡ª npm5.2 ä¹‹åå‘å¸ƒçš„ä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºæ‰§è¡Œ node_modules/.bin å†…çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œå…¶ä¸»è¦è§£å†³çš„å°±æ˜¯å‰è¨€ä¸­æè¿°çš„é—®é¢˜ï¼šèƒ½å¤Ÿç›´æ¥æ‰§è¡Œé¡¹ç›®å†…å®‰è£…çš„æ¨¡å—çš„å‘½ä»¤ã€‚ npx çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š å» node_modules/.bin è·¯å¾„æ£€æŸ¥ npx åé¢çš„å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œæ‰¾åˆ°ä¹‹åæ‰§è¡Œï¼› æ‰¾ä¸åˆ°ï¼Œå°±å»ç¯å¢ƒå˜é‡ $PATH é‡Œé¢ï¼Œæ£€æŸ¥ npx åé¢çš„å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œæ‰¾åˆ°ä¹‹åæ‰§è¡Œ; è¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªä¸´æ—¶çš„ä¾èµ–åŒ…æœ€æ–°ç‰ˆæœ¬åœ¨ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œç„¶åå†è¿è¡Œå‘½ä»¤ï¼Œè¿è¡Œå®Œä¹‹ååˆ é™¤ï¼Œä¸æ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚ ä½¿ç”¨ npx èƒ½å¤Ÿå‡å°‘æ— ç”¨çš„å…¨å±€æ¨¡å—çš„å®‰è£…ï¼Œæ¯”å¦‚ npx http-server å¯ä»¥åœ¨å½“å‰ç›®å½•å¯åŠ¨ä¸€ä¸ª Web æœåŠ¡ï¼Œå³ä½¿æ²¡æœ‰å®‰è£…å¯¹åº”çš„åŒ… npx å¸¸ç”¨å‚æ•°â€“no-install å‚æ•°å¦‚æœæƒ³è®© npx å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ â€“no-install å‚æ•°ã€‚å¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚ 1npx --no-install http-server â€“ignore-existing å‚æ•°ä¸ä¸Šé¢ç›¸åï¼Œæ­¤å‘½ä»¤æ˜¯å¼ºåˆ¶å¿½ç•¥æœ¬åœ°çš„åŒåæ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—ã€‚æ¯”å¦‚ï¼Œæœ¬åœ°å·²ç»å…¨å±€å®‰è£…äº† create-react-appï¼Œä½†è¿˜æ˜¯æƒ³ä½¿ç”¨è¿œç¨‹æ¨¡å—ï¼Œå°±ç”¨è¿™ä¸ªå‚æ•°ã€‚ 1npx --ignore-existing create-react-app my-react-app å‚è€ƒæ–‡æ¡£ npx npx ä½¿ç”¨æ•™ç¨‹ npx è¯¦ç»†ä½¿ç”¨","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ç‰¹æ€§ä»‹ç»","slug":"ç‰¹æ€§ä»‹ç»","permalink":"https://monocy.gitee.io/tags/ç‰¹æ€§ä»‹ç»/"}]},{"title":"å‰ç«¯é¢è¯•é¢˜å¤§å…¨","slug":"å‰ç«¯é¢è¯•é¢˜å¤§å…¨","date":"2020-01-27T07:37:14.000Z","updated":"2022-07-26T13:14:49.487Z","comments":true,"path":"2020/01/27/å‰ç«¯é¢è¯•é¢˜å¤§å…¨/","link":"","permalink":"https://monocy.gitee.io/2020/01/27/å‰ç«¯é¢è¯•é¢˜å¤§å…¨/","excerpt":"å‰è¨€ä¸´è¿‘æ˜¥èŠ‚ï¼Œå¾ˆå¤šäººåˆè€ƒè™‘æ¢å·¥ä½œäº†ï¼Œè€ƒè™‘åˆ°è¿˜æœ‰ä¸€å¹´å¤šçš„å·¥ä½œçš„æ—¶é—´ï¼Œæå‰æ€»ç»“æ€»ç»“ä¹Ÿæ˜¯ä¸é”™çš„ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹æœ€è¿‘ç¿»åˆ°äº†ä»¥åŠå…ˆå‰è‡ªå·±æ€»ç»“çš„ä¸€äº›é—®é¢˜ï¼Œä¸ºä¹‹åçš„å¤ä¹ åšå‡†å¤‡ã€‚","text":"å‰è¨€ä¸´è¿‘æ˜¥èŠ‚ï¼Œå¾ˆå¤šäººåˆè€ƒè™‘æ¢å·¥ä½œäº†ï¼Œè€ƒè™‘åˆ°è¿˜æœ‰ä¸€å¹´å¤šçš„å·¥ä½œçš„æ—¶é—´ï¼Œæå‰æ€»ç»“æ€»ç»“ä¹Ÿæ˜¯ä¸é”™çš„ï¼Œè¿™é‡Œå°±è®°å½•ä¸€ä¸‹æœ€è¿‘ç¿»åˆ°äº†ä»¥åŠå…ˆå‰è‡ªå·±æ€»ç»“çš„ä¸€äº›é—®é¢˜ï¼Œä¸ºä¹‹åçš„å¤ä¹ åšå‡†å¤‡ã€‚ HTML ç¯‡H5 æœ‰å“ªäº›æ–°ç‰¹æ€§ è¯­ä¹‰åŒ–æ ‡ç­¾ï¼ˆheaderã€footerã€navã€asideã€articleã€section ç­‰ï¼‰ å¢å¼ºè¡¨å•ï¼ˆä¼ é€é—¨ï¼‰ æœ¬åœ°å­˜å‚¨ å¤šåª’ä½“å…ƒç´ æ ‡ç­¾ï¼š vedio ä¸ audio æ–°å¢åœ°ç†å®šä½æ–¹æ³• canvas ç”»å¸ƒ æ‹–æ”¾äº‹ä»¶ webWorker webSocket webStorage å’Œ Cookie çš„åŒºåˆ«ä»¥åŠå„è‡ªçš„ä¼˜ç¼ºç‚¹ ç‰¹æ€§ cookie localStorage sessionStorage æ•°æ®ç”Ÿå‘½å‘¨æœŸ ä¸€èˆ¬ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ é™¤éè¢«æ¸…ç†ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨ é¡µé¢å…³é—­å°±æ¸…ç† æ•°æ®å­˜å‚¨å¤§å° 4K 5M 5M ä¸æœåŠ¡ç«¯é€šä¿¡ æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨ header ä¸­ï¼Œå¯¹äºè¯·æ±‚æ€§èƒ½å½±å“ ä¸å‚ä¸ ä¸å‚ä¸ ä»ä¸Šè¡¨å¯ä»¥çœ‹åˆ°ï¼Œcookie å·²ç»ä¸å»ºè®®ç”¨äºå­˜å‚¨ã€‚å¦‚æœæ²¡æœ‰å¤§é‡æ•°æ®å­˜å‚¨éœ€æ±‚çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ localStorage å’Œ sessionStorage ã€‚å¯¹äºä¸æ€ä¹ˆæ”¹å˜çš„æ•°æ®å°½é‡ä½¿ç”¨ localStorage å­˜å‚¨ï¼Œå¦åˆ™å¯ä»¥ç”¨ sessionStorage å­˜å‚¨ã€‚ svg ä¸ canvas svg canvas svg æ˜¯ä¸€ç§ä½¿ç”¨ xml æè¿° 2D å›¾å½¢çš„è¯­è¨€ï¼ŒçŸ¢é‡å›¾ canvas é€šè¿‡ javascript æ¥ç»˜åˆ¶ 2D å›¾å½¢ï¼Œæ ‡é‡å›¾ svg åŸºäº xmlï¼Œè¿™æ„å‘³ç€ svg DOM ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯ç”¨çš„ï¼Œæ‚¨å¯ä»¥ä¸ºæŸä¸ªå…ƒç´ é™„åŠ  javascript äº‹ä»¶å¤„ç†å™¨ canvas æ˜¯é€åƒç´ è¿›è¡Œæ¸²æŸ“çš„ã€‚åœ¨ canvas ä¸­ï¼Œä¸€æ—¦å›¾å½¢è¢«ç»˜åˆ¶å®Œæˆï¼Œå®ƒå°±ä¸ä¼šç»§ç»­å¾—åˆ°æµè§ˆå™¨çš„å…³æ³¨ã€‚å¦‚æœå…¶ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªåœºæ™¯ä¹Ÿéœ€è¦é‡æ–°ç»˜åˆ¶ï¼ŒåŒ…æ‹¬ä»»ä½•æˆ–è®¸å·²è¢«å›¾å½¢è¦†ç›–çš„å¯¹è±¡ ç§»åŠ¨ç«¯é¡µé¢é€‚é…æ–¹æ¡ˆ1234567891011121314151617181920&lt;script&gt; // è·å–ç¼©æ”¾å¤§å° var scale = 1 / window.devicePixelRatio; // content é…ç½®é»˜è®¤ç¼©æ”¾å¤§å°ï¼Œä¸å…è®¸ç¼©æ”¾ var content = 'width=device-width,initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no'; // åŠ¨æ€ meta æ ‡ç­¾é€‚é… document .querySelector('meta[name=\"viewport\"]') .setAttribute('content', content); // åŸºå‡† font-size è®¾ç½® document.documentElement.style.fontSize = document.documentElement.clientWidth / 75 + 'px';&lt;/script&gt; CSS ç¯‡CSS3 çš„æ–°ç‰¹æ€§ transitionï¼ˆè¿‡æ¸¡åŠ¨ç”»ï¼‰ã€animationï¼ˆè´åŠ¨ç”»ï¼‰ã€transformï¼ˆå½¢çŠ¶å˜åŒ–ï¼‰ æ–°å¢é€‰æ‹©å™¨ï¼ˆä¼ªç±»é€‰æ‹©å™¨ã€ç›¸é‚»é€‰æ‹©å™¨ç­‰ï¼‰ è¾¹æ¡†ã€é˜´å½±ã€æ»¤é•œç­‰ å¼¹æ€§å¸ƒå±€ã€æ …æ ¼å¸ƒå±€ æ¨èé˜…è¯» position é»˜è®¤å€¼ä»¥åŠé»˜è®¤åŸºäºä»€ä¹ˆå®šä½é»˜è®¤å€¼ä¸ºï¼šstaticï¼› å®šä½æ˜¯åŸºäºæœ€è¿‘çš„ä¸” position å€¼ä¸ºé static çš„çˆ¶å…ƒç´ ï¼› æ°´å¹³å‚ç›´å±…ä¸­æœ‰å“ªäº›æ–¹æ³•ã€‚ï¼ˆè‡³å°‘ 3 ç§ï¼‰ translate æ–¹æ³• position + margin å®šä½ flex å¸ƒå±€ table-ceil æ–¹æ³• padding å®ç° æ¸…é™¤æµ®åŠ¨æœ‰å“ªäº›æ–¹å¼ã€‚ after ä¼ªç±»ï¼ˆIE éœ€è¦è®¾ç½® zoom: 1ï¼‰ ç©º div å…ƒç´ ï¼Œè®¾ç½® css ï¼š clear: both çˆ¶çº§å½¢æˆ BFC ç»“æ„ï¼Œå¦‚: overflow: hidden BFC çš„ç›¸å…³çŸ¥è¯†è€ƒå¯Ÿ BFC æä¾›äº†ä¸€ä¸ªç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­æŒ‰ç…§ä¸€å®šè§„åˆ™è¿›è¡Œå¸ƒå±€ä¸ä¼šå½±å“åˆ°å…¶å®ƒç¯å¢ƒä¸­çš„å¸ƒå±€ã€‚ å¸¸è§é—®é¢˜ï¼š é«˜åº¦å¡Œé™· å¤–è¾¹è·æŠ˜å  å®ç°æ–¹å¼ï¼š æµ®åŠ¨å…ƒç´ ï¼Œfloat é™¤ none ä»¥å¤–çš„å€¼ ç»å¯¹å®šä½å…ƒç´ ï¼Œpositionï¼ˆabsoluteï¼Œfixedï¼‰ display ä¸ºä»¥ä¸‹å…¶ä¸­ä¹‹ä¸€çš„å€¼ inline-blockï¼Œtable-cellsï¼Œtable-captions overflow é™¤äº† visible ä»¥å¤–çš„å€¼ï¼ˆhiddenï¼Œautoï¼Œscrollï¼‰ â€¦â€¦ å‚è€ƒæ–‡ç« ï¼š æµ…è°ˆ BFC CSS é€‰æ‹©å™¨å®ç°ä»¥ä¸‹å­—ä½“æ ·å¼æ•ˆæœ 12345678910111213&lt;div&gt; &lt;p&gt;&lt;!-- çº¢ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- ç™½ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- çº¢ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- ç™½ --&gt;&lt;/p&gt; &lt;!-- ... n ä¸ª p --&gt; &lt;p class=\"center\"&gt;&lt;!-- é»„ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- è“ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- è“ --&gt;&lt;/p&gt; &lt;p&gt;&lt;!-- è“ --&gt;&lt;/p&gt; &lt;!-- ... n ä¸ª p --&gt; &lt;p&gt;&lt;!-- ç»¿ --&gt;&lt;/p&gt;&lt;/div&gt; 12345678910111213141516171819202122div &#123; background-color: black;&#125;p &#123; &amp;:nth-child(2n) &#123; color: white; &#125; &amp;:nth-child(2n + 1) &#123; color: red; &#125; &amp;.center &#123; color: yellow; &#125; // æ­¤å¤„å¾—è€ƒè™‘ä¼˜å…ˆçº§é—®é¢˜ &amp;.center ~ p:not(:last-child) &#123; color: blue; &#125; &amp;:last-child &#123; color: green; &#125;&#125; JavaScript ç¯‡ES6+ æœ‰å“ªäº›æ–°ç‰¹æ€§ let, const å˜é‡ æ¨¡æ¿å­—ç¬¦ä¸² â€œ`â€ è§£æ„èµ‹å€¼ ä¸ æ‰©å±•è¿ç®—ç¬¦ï¼ˆ... è¿ç®—ç¬¦ï¼‰ Promise ä¸ async Mapã€Set class Array çš„ä¸€äº›åŸç”Ÿæ–¹æ³• ç®­å¤´å‡½æ•°ã€é»˜è®¤å€¼ â€¦ let ä¸é—­åŒ…ã€è§£æ„ undefined å’Œ null çš„å€¼æ—¶çš„é»˜è®¤å€¼é—®é¢˜ã€class ä¸åŸå‹é“¾ã€Set ä¸ é™¤é‡æ–¹æ³•ç­‰ç­‰ Promise.all() çš„å®ç°12345678910111213141516171819202122232425function PromiseAll(promiseArr) &#123; if (!Array.isArray(promiseArr)) &#123; throw new TypeError('You must pass an array'); &#125; const arrayLen = promiseArr.length; const resolvedArr = []; let pos = 0; return new Promise((resolve, reject) =&gt; &#123; promiseArr.forEach(item =&gt; &#123; Promise.resolve(item) .then(res =&gt; &#123; resolvedArr.push(res); pos++; if (pos === arrayLen) &#123; resolve(resolvedArr); &#125; &#125;) .catch(e =&gt; &#123; reject(e); &#125;); &#125;) &#125;);&#125; æ•°ç»„å»æ‹¬å·å¹¶å»é‡12// è¯•é¢˜let originArr = [1, 2, [2, 3], 3, [2, [3, 0]], 4, [[[5]]]] 1234567891011121314151617// å®ç°çš„æ–¹æ³•:function formatArr(originArr) &#123; function flattenDeep(arr) &#123; let resArr = []; if (Array.isArray(arr)) &#123; resArr = arr.reduce((a,b)=&gt;[...a, ...flattenDeep(b)], resArr); &#125; else &#123; resArr.push(arr); &#125; return resArr; &#125; const flatArr = flattenDeep(originArr); return [...new Set(flatArr)];&#125;const testArr = [1, [[2], [3, [4, 5]], 5]];console.log(formatArr(testArr)); 123456// ç®€å•æ–¹æ³•function formatArr(originArr) &#123; const flatArr = originArr.toString().split(','); const filteredArr = [...new Set(flatArr)]; return filteredArr.map(n =&gt; Number(n));&#125; This æŒ‡å‘é—®é¢˜123456789let obj = &#123; b: 1, a: () =&gt; &#123; console.log(this.b) &#125;&#125;obj.a()// è¾“å‡º undefined å‚è€ƒæ–‡ç« ï¼š æ·±å…¥äº†è§£ this ä»¥ä¸‹ä»£ç ä¾æ¬¡è¾“å‡ºçš„ç»“æœ1234567891011121314151617181920212223242526async function async1() &#123; console.log('as1') await async2() console.log('end as1')&#125;async function async2() &#123; console.log('as2')&#125;console.log('start')async1(1)setTimeout(() =&gt; &#123; console.log('setTimeout')&#125;)new Promise((rs, rj) =&gt; &#123; console.log('promise') rs()&#125;).then(() =&gt; &#123; console.log('then')&#125;)console.log('end') 12345678startas1as2promiseendend as1thensetTimeout HTTP ç¯‡å¸¸ç”¨çš„ HTTP æ–¹æ³•æœ‰å“ªäº› GETï¼šç”¨äºè¯·æ±‚è®¿é—®å·²ç»è¢« URI è¯†åˆ«çš„èµ„æºï¼Œå¯ä»¥é€šè¿‡ URL ä¼ å‚ç»™æœåŠ¡å™¨ POSTï¼šç”¨äºä¼ è¾“ä¿¡æ¯ç»™æœåŠ¡å™¨,ä¸»è¦åŠŸèƒ½ GET ç±»ä¼¼ï¼Œä½†ä¸€èˆ¬æ¨èä½¿ç”¨ POST æ–¹å¼ PUTï¼šä¼ è¾“æ–‡ä»¶ï¼ŒæŠ¥æ–‡ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œä¿å­˜åˆ°å¯¹åº”çš„ URI ä½ç½® HEADï¼šè·å¾—æŠ¥æ–‡é¦–éƒ¨ï¼Œä¸ GET æ–¹æ³•ç±»ä¼¼ï¼Œåªæ˜¯ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“ï¼Œä¸€èˆ¬ç”¨äºéªŒè¯ URI æ˜¯å¦æœ‰æ•ˆ DELETEï¼šåˆ é™¤æ–‡ä»¶ï¼Œä¸ PUT æ–¹æ³•ç›¸åï¼Œåˆ é™¤å¯¹åº” URI ä½ç½®çš„æ–‡ä»¶ OPTIONSï¼šæŸ¥è¯¢å¯¹åº” URI æ”¯æŒçš„ HTTP æ–¹æ³• GET å’Œ POST çš„åŒºåˆ« GET é‡ç‚¹ä»æœåŠ¡å™¨ä¸Šè·å–èµ„æºï¼ŒPOST é‡ç‚¹å‘æœåŠ¡å™¨å‘é€æ•°æ® GET ä¼ è¾“çš„æ•°æ®é‡å°ï¼Œå› ä¸ºå— URL é•¿åº¦é™åˆ¶ï¼Œä½†æ•ˆç‡è¾ƒé«˜ï¼›POST å¯ä»¥ä¼ è¾“å¤§é‡æ•°æ®ï¼Œæ‰€ä»¥ä¸Šä¼ æ–‡ä»¶æ—¶åªèƒ½ç”¨ POST æ–¹å¼ï¼› GET æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸º URL æ˜¯å¯è§çš„ï¼Œå¯èƒ½ä¼šæ³„éœ²ç§å¯†ä¿¡æ¯ï¼Œå¦‚å¯†ç ç­‰ï¼›POST è¾ƒ GET å®‰å…¨æ€§è¾ƒé«˜ï¼› è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡a. è¯·æ±‚æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š è¯·æ±‚è¡Œï¼šåŒ…å«è¯·æ±‚æ–¹æ³•ã€URIã€HTTP ç‰ˆæœ¬ä¿¡æ¯ è¯·æ±‚é¦–éƒ¨å­—æ®µ è¯·æ±‚å†…å®¹å®ä½“ b. å“åº”æŠ¥æ–‡åŒ…å«ä¸‰éƒ¨åˆ†ï¼š çŠ¶æ€è¡Œï¼šåŒ…å« HTTP ç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€ç çš„åŸå› çŸ­è¯­ å“åº”é¦–éƒ¨å­—æ®µ å“åº”å†…å®¹å®ä½“ å¸¸è§çš„çŠ¶æ€ç  200ï¼šè¡¨ç¤ºè¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚ 301ï¼šæ°¸ä¹…é‡å®šå‘ï¼Œèµ„æºå·²æ°¸ä¹…åˆ†é…æ–° URIã€‚ 302ï¼šä¸´æ—¶é‡å®šå‘ï¼Œèµ„æºå·²ä¸´æ—¶åˆ†é…æ–° URIã€‚ 304ï¼šè‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚ 307ï¼šä¸´æ—¶é‡å®šå‘ï¼ŒPOST ä¸ä¼šå˜æˆ GETã€‚ 401ï¼šéœ€è¦é€šè¿‡ HTTP è®¤è¯ï¼Œæˆ–è®¤è¯å¤±è´¥ã€‚ 403ï¼šè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»äº†ã€‚ 404ï¼šè¡¨ç¤ºæœåŠ¡å™¨æ‰¾ä¸åˆ°ä½ è¯·æ±‚çš„èµ„æºã€‚ 500ï¼šè¡¨ç¤ºæœåŠ¡å™¨æ‰§è¡Œè¯·æ±‚çš„æ—¶å€™å‡ºé”™äº†ã€‚ 503ï¼šè¡¨ç¤ºæœåŠ¡å™¨è¶…è´Ÿè½½æˆ–æ­£åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ã€‚ å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜a. å¼ºç¼“å­˜ç›¸å…³çš„å­—æ®µï¼š expires cache-controlï¼šmax-age=number b. åå•†ç¼“å­˜ç›¸å…³çš„å­—æ®µï¼š Last-Modified/If-Modified-Since Etag/If-None-Match æ€§èƒ½ä¼˜åŒ–HTML ä¸è¦ä½¿ç”¨ç©º src çš„ image æ ‡ç­¾ å‡å°‘ iframe çš„æ•°é‡ï¼Œå…¶å¼€é”€é«˜ï¼Œä¼šé˜»å¡ onload äº‹ä»¶ï¼ŒåŒåŸŸä¼šæŠ¢èµ„æº å‡å°‘ä¸å¿…è¦çš„ DOM å…ƒç´  å›¾ç‰‡æ‡’åŠ è½½ ä½¿ç”¨ CDN çš„èµ„æº css æ ·å¼æ”¾åœ¨é¡¶éƒ¨ headerï¼Œjs æ”¾åœ¨ body æœ€åé¢ CSS èƒ½ä½¿ç”¨ base64 çš„å°½é‡ä½¿ç”¨ base64 èƒŒæ™¯å›¾åŠ è½½ å°½é‡ä¸ä½¿ç”¨ @import è¯­æ³• JavaScript å‡å°‘ DOM è®¿é—® å¤šæ¬¡ä¿®æ”¹ç»Ÿä¸€èŠ‚ç‚¹æ—¶ä½¿ç”¨ documentFragment æ–‡æ¡£ç‰‡æ®µæ¥åšä¸­é—´æ‹¼æ¥å¤„ç† å‡å°‘è·å– clientHeight ç­‰ä¿¡æ¯çš„æ¬¡æ•°ï¼Œä¼šé€ æˆåå¤é‡ç»˜ åˆç†æ·»åŠ äº‹ä»¶ç›‘å¬å‡½æ•° å…¶å®ƒçŸ­é“¾æ¥çš„ç”Ÿæˆæ€è·¯ä¸€èˆ¬é“¾æ¥çš„ç‰¹ç‚¹ï¼šä¸è€ƒè™‘ query å­—æ®µï¼Œä¸€èˆ¬å°±åªæœ‰ 26 ä¸ªè‹±æ–‡å­—æ¯ï¼Œè€ŒçŸ­é“¾æ¥çš„ç‰¹ç‚¹æ˜¯å«æœ‰ ([a-z][a-z][0-9])ï¼Œå› æ­¤ä¸€ä¸ªç²—ç•¥çš„æƒ³æ³•å°±æ˜¯å°† 26 è¿›åˆ¶è½¬åŒ–æˆ 62 è¿›åˆ¶ï¼Œå› æ­¤å°†å¯¹åº”ç®—æ³•å†™å‡ºæ¥åŸºæœ¬ä¸Šå°±ç®—æ˜¯ç­”é“ç‚¹å­ä¸Šäº†ã€‚ ç®—æ³•çš„å¤§è‡´æ€è·¯ä¸ºï¼š 26 è¿›åˆ¶ -&gt; 10 è¿›åˆ¶ -&gt; 62 è¿›åˆ¶ å‚è€ƒæ–‡æ¡£ å‰ç«¯é¢è¯•é—®é¢˜","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"Mac æŒ‡ä»¤å­¦ä¹ ","slug":"Mac-æŒ‡ä»¤å­¦ä¹ ","date":"2020-01-19T12:24:18.000Z","updated":"2022-07-26T13:18:01.110Z","comments":true,"path":"2020/01/19/Mac-æŒ‡ä»¤å­¦ä¹ /","link":"","permalink":"https://monocy.gitee.io/2020/01/19/Mac-æŒ‡ä»¤å­¦ä¹ /","excerpt":"å‰è¨€æœ€è¿‘åœ¨ç ”ç©¶å¯è§†åŒ–ç¼–è¾‘å™¨éƒ¨åˆ†çš„å†…å®¹ï¼ŒåŒæ—¶å€Ÿæ­¤æœºä¼šå­¦ä¹ å­¦ä¹  node ç›¸å…³çš„çŸ¥è¯†ã€‚ç„¶è€Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¥½ä¸å®¹æ˜“ç”³è¯·ä¸‹æ¥çš„æµ‹è¯•æœºå´ä¸ä¼šç”¨ï¼Œæ˜¯æ—¶å€™è¯¥è¡¥å……è¡¥å…… linux ç›¸å…³çš„çŸ¥è¯†äº†ï¼ è¯¥æ–‡æ¡£æŒç»­å®Œå–„ï¼Œäº‰å–æ¯å‘¨ä¸€ä¸ªæŒ‡ä»¤","text":"å‰è¨€æœ€è¿‘åœ¨ç ”ç©¶å¯è§†åŒ–ç¼–è¾‘å™¨éƒ¨åˆ†çš„å†…å®¹ï¼ŒåŒæ—¶å€Ÿæ­¤æœºä¼šå­¦ä¹ å­¦ä¹  node ç›¸å…³çš„çŸ¥è¯†ã€‚ç„¶è€Œåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¥½ä¸å®¹æ˜“ç”³è¯·ä¸‹æ¥çš„æµ‹è¯•æœºå´ä¸ä¼šç”¨ï¼Œæ˜¯æ—¶å€™è¯¥è¡¥å……è¡¥å…… linux ç›¸å…³çš„çŸ¥è¯†äº†ï¼ è¯¥æ–‡æ¡£æŒç»­å®Œå–„ï¼Œäº‰å–æ¯å‘¨ä¸€ä¸ªæŒ‡ä»¤ grep å‘½ä»¤123# è·å–å¯¹åº”æ–‡ä»¶å†…çš„å†…å®¹## -n è¡¨ç¤ºåŠ ä¸Šè¡Œå·ï¼Œfile æ”¯æŒ * é€šé…ç¬¦grep -n &lt;content&gt; &lt;file&gt; du å‘½ä»¤du å‘½ä»¤ç”¨äºæ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶çš„å¤§å° 123# æŸ¥çœ‹æ–‡ä»¶æ·±åº¦ä¸º n çš„æ‰€æœ‰æ–‡ä»¶å¤§å°# n=0 æ—¶ä¸ºè¯¥æ–‡ä»¶å¤§å°du -d &lt;depth &gt;= 0&gt; -h &lt;file-path&gt; tar å‘½ä»¤tar æ˜¯ç”¨æ¥å»ºç«‹ï¼Œè¿˜åŸå¤‡ä»½æ–‡ä»¶çš„å·¥å…·ç¨‹åºï¼Œå®ƒå¯ä»¥åŠ å…¥ï¼Œè§£å¼€å¤‡ä»½æ–‡ä»¶å†…çš„æ–‡ä»¶ã€‚å¯ä»¥ç”¨æ¥åšæ–‡ä»¶å‹ç¼© 123456789# touch a.c# å‹ç¼© a.cæ–‡ä»¶ä¸º test.tar.gztar -czvf test.tar.gz a.c# åˆ—å‡ºå‹ç¼©æ–‡ä»¶ä¸­çš„å†…å®¹tar -tzvf test.tar.gz# è§£å‹ç¼©tar -xzvf test.tar.gz -vï¼šæ˜¾ç¤ºè¿‡ç¨‹ï¼› -c å»ºç«‹æ–°çš„å¤‡ä»½æ–‡ä»¶ï¼› -zï¼šgzip å¤„ç†å¤‡ä»½æ–‡ä»¶ï¼› -xï¼šä»å¤‡ä»½æ–‡ä»¶ä¸­è¿˜åŸæ–‡ä»¶ï¼› -tï¼šåˆ—å‡ºæ–‡ä»¶å†…å®¹ which æŒ‡ä»¤å…¶ä¸»è¦ç”¨é€”æ˜¯å®šä½ç¨‹åºåœ¨ç³»ç»Ÿçš„å“ªä¸ªä½ç½®ï¼Œä½¿ç”¨æ–¹æ³•å¾ˆç®€å• 1which &lt;target1&gt; &lt;target2&gt;","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ç‰¹æ€§ä»‹ç»","slug":"ç‰¹æ€§ä»‹ç»","permalink":"https://monocy.gitee.io/tags/ç‰¹æ€§ä»‹ç»/"}]},{"title":"Docker å®‰è£…ç¬”è®°","slug":"Docker-å®‰è£…ç¬”è®°","date":"2019-12-14T06:00:36.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/12/14/Docker-å®‰è£…ç¬”è®°/","link":"","permalink":"https://monocy.gitee.io/2019/12/14/Docker-å®‰è£…ç¬”è®°/","excerpt":"å‰è¨€ä¸çŸ¥ä¸è§‰å·²ç»å¿«è¿‡ 2 ä¸ªæœˆäº†ï¼Œè¿™æœŸé—´ç”±äºé¡¹ç›®å˜æ›´ï¼Œå†åŠ ä¸Šé‡åˆ°äº†ä¸€äº›ç”Ÿæ´»ä¸Šçš„æ³¢æŠ˜ï¼ŒåŸºæœ¬ä¸Šæ²¡å¤ªå¤šå¿ƒæ€èŠ±åœ¨åšæ–‡çš„ç¼–å†™äº†ã€‚å¥½ä¸å®¹æ˜“ç¨å¾®æœ‰ç‚¹æ—¶é—´äº†ï¼Œç«‹é©¬å¼€å§‹å†™ä¸Šä¸€ç¯‡ï¼Œè®°å½•ä¸€ä¸‹æœ€è¿‘æŠ˜è…¾é…ç½®çš„ç¯å¢ƒã€‚ ä»…è®°å½• Mac ç¯å¢ƒçš„é…ç½®","text":"å‰è¨€ä¸çŸ¥ä¸è§‰å·²ç»å¿«è¿‡ 2 ä¸ªæœˆäº†ï¼Œè¿™æœŸé—´ç”±äºé¡¹ç›®å˜æ›´ï¼Œå†åŠ ä¸Šé‡åˆ°äº†ä¸€äº›ç”Ÿæ´»ä¸Šçš„æ³¢æŠ˜ï¼ŒåŸºæœ¬ä¸Šæ²¡å¤ªå¤šå¿ƒæ€èŠ±åœ¨åšæ–‡çš„ç¼–å†™äº†ã€‚å¥½ä¸å®¹æ˜“ç¨å¾®æœ‰ç‚¹æ—¶é—´äº†ï¼Œç«‹é©¬å¼€å§‹å†™ä¸Šä¸€ç¯‡ï¼Œè®°å½•ä¸€ä¸‹æœ€è¿‘æŠ˜è…¾é…ç½®çš„ç¯å¢ƒã€‚ ä»…è®°å½• Mac ç¯å¢ƒçš„é…ç½® Docker å®‰è£…Docker å®‰è£…å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼ˆåŸºæœ¬ä¸Šç½‘ä¸Šéƒ½æœ‰ï¼‰ï¼Œåˆ†åˆ«ä¸ºï¼š brew å®‰è£… å®‰è£…åŒ…å®‰è£… brew å®‰è£…brew å®‰è£…å¾ˆç®€å•ï¼Œå‘½ä»¤ä¸ºï¼š 12## ç­‰å¾…çš„æ—¶é—´ä¼šæœ‰ç‚¹é•¿brew cask install docker æ‰‹åŠ¨ä¸‹è½½å®‰è£…docker æ‰‹åŠ¨ä¸‹è½½å®‰è£…ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œä½†æ˜¯ä¸ºäº†æ›´ä¸ºæ–¹ä¾¿å¿«æ·ï¼Œæœ€å¥½è¿˜æ˜¯å»å®˜ç½‘æ³¨å†Œä¸€ä¸ª IDï¼ˆè¿Ÿæ—©ä¼šå»æ³¨å†Œè´¦å·çš„ï¼‰ï¼Œç„¶åå† download æ¡Œé¢ç‰ˆã€‚ è™½ç„¶ä¸çŸ¥é“èƒ½ä¸èƒ½æ‰“å¼€æ­¤é“¾æ¥ï¼Œä½†æ˜¯è¿˜æ˜¯å¥‰ä¸Š download ä¼ é€é—¨ æ­¤å¤–ï¼Œè¿˜æœ‰å…¶å®ƒçš„å®‰è£…é€”å¾„ï¼Œæ¯”å¦‚ Docker æé€Ÿä¸‹è½½ ç½‘ç«™ï¼ˆè¯¥ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œå› æ­¤éœ€è¦è‡ªå·±å‡çº§ï¼‰ Docker é•œåƒåŠ é€ŸDocker é»˜è®¤ä½¿ç”¨çš„æ˜¯å›½å¤–çš„æºï¼Œè€Œå›½å¤–çš„æºæœ‰æ—¶ä¼šæœ‰ç½‘ç»œçš„é—®é¢˜ï¼Œåœ¨åç»­çš„æ‹‰å–ä¸­ä¼šæ¯”è¾ƒç¼“æ…¢ã€‚ Mac ä¸Šçš„æ›´æ”¹æ“ä½œæ¯”è¾ƒç®€å•ï¼Œæ­¥éª¤ä¸ºï¼š ç‚¹å‡» Docker å›¾æ ‡ -&gt; Perferences -&gt; Daemon æ ‡ç­¾é¡µ -&gt; Registry mirrors å¯æ·»åŠ æºæœ‰ï¼š 12345678# å›½å†…å®˜æ–¹https://registry.docker-cn.com# ç½‘æ˜“æºhttps://hub-mirror.c.163.com# é˜¿é‡Œäº‘https://registry.aliyuncs.com# ä¸­ç§‘å¤§https://docker.mirrors.ustc.edu.cn ä¹‹åç‚¹å‡» Apply &amp; Restart ç­‰å¾…ç‰‡åˆ»å³å¯ã€‚ åŸºç¡€å‘½ä»¤æ‹‰å–è¿œç¨‹é•œåƒ1docker pull [registry[:port]/]packages[:tags] é»˜è®¤æ‹‰å–çš„ä¸º Docker Hub çš„ latest ç‰ˆæœ¬çš„åŒ… é•œåƒåˆ—ä¸¾ä¸ç©ºé—´å ç”¨1234# æŸ¥çœ‹å½“å‰ä¸‹è½½çš„é•œåƒèµ„æºï¼ˆå‹ç¼©çš„ï¼‰docker images# æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€å·å®—å ç”¨ä½“ç§¯docker system df docker image prune åˆ é™¤æ— ç”¨é•œåƒ åˆ é™¤é•œåƒä¸å®¹å™¨1234# åˆ é™¤é•œåƒdocker rmi &lt;image&gt; [others...]# åˆ é™¤å®¹å™¨docker rm &lt;container-hash/container-name&gt; è¿è¡Œä¸æ“ä½œå®¹å™¨åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ 1234567docker run [--name &lt;container-name&gt;] [-p &lt;image-port&gt;:&lt;local-port&gt;] [-v &lt;local-path&gt;:&lt;container-path&gt;] [-e &lt;container-env&gt;=&lt;params&gt;] [-d] &lt;image-name&gt; name ä¸ºå®¹å™¨åˆ«åï¼› p ä¸ºç«¯å£æ˜ å°„ï¼› v ä¸ºå·å®—åœ°å€æ˜ å°„ï¼› e ä¸ºç¯å¢ƒå˜é‡å£°æ˜ï¼› d ä¸ºåå°è¿è¡Œå®¹å™¨ å¯åŠ¨å®¹å™¨ 1docker start &lt;container-name/container-hash&gt; é‡æ–°å¯åŠ¨å®¹å™¨ 1docker restart &lt;container-name/container-hash&gt; ç»ˆæ­¢å®¹å™¨ 1docker stop &lt;container-name/container-hash&gt; è¿›å…¥å®¹å™¨ 12# ä»¥ bash çš„æ–¹å¼ï¼Œè¿›å…¥ä¼ªç»ˆç«¯ï¼› -itï¼š æ”¯æŒ stdin åˆ‡æ¨å‡ºä¸ä¼šåœæ­¢å®¹å™¨docker exec -it &lt;container-name&gt; bash æ‹·è´é•œåƒå†…å®¹1docker cp &lt;container&gt;:&lt;path&gt; &lt;local-path&gt; å‚è€ƒæ–‡ç«  MacOS Docker å®‰è£… Docker â€” ä»å…¥é—¨åˆ°å®è·µ","categories":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/categories/Docker/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/tags/Docker/"}]},{"title":"webpack library","slug":"webpack-library","date":"2019-10-18T12:26:58.000Z","updated":"2022-07-26T13:04:34.146Z","comments":true,"path":"2019/10/18/webpack-library/","link":"","permalink":"https://monocy.gitee.io/2019/10/18/webpack-library/","excerpt":"å‰è¨€è™½ç„¶å…ˆå‰æœ‰è¿‡ä½¿ç”¨ webpack æ„å»ºåŒ…çš„ç»éªŒï¼Œä½†æ˜¯æœ€è¿‘åŒäº‹é—®æˆ‘ library ç›¸å…³çŸ¥è¯†æ—¶ï¼Œè¿˜æ˜¯æ”¯æ”¯å¾å¾ç­”ä¸ä¸Šæ¥ã€‚æƒ³äº†æƒ³ï¼ŒçŸ¥å…¶ç„¶è€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè¿™å’Œæ²¡å­¦æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å•Šã€‚æ‰€ä»¥ï¼Œç»è¿‡ä¸€ç•ªåŠªåŠ›ï¼Œæ€»ç»“äº†ä¸€ç‚¹å…³äº library çš„çŸ¥è¯†ï¼Œè¿™é‡Œå°±åšä¸ªç¬”è®°ï¼Œä»¥åšå¤‡å¿˜å§ã€‚","text":"å‰è¨€è™½ç„¶å…ˆå‰æœ‰è¿‡ä½¿ç”¨ webpack æ„å»ºåŒ…çš„ç»éªŒï¼Œä½†æ˜¯æœ€è¿‘åŒäº‹é—®æˆ‘ library ç›¸å…³çŸ¥è¯†æ—¶ï¼Œè¿˜æ˜¯æ”¯æ”¯å¾å¾ç­”ä¸ä¸Šæ¥ã€‚æƒ³äº†æƒ³ï¼ŒçŸ¥å…¶ç„¶è€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè¿™å’Œæ²¡å­¦æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å•Šã€‚æ‰€ä»¥ï¼Œç»è¿‡ä¸€ç•ªåŠªåŠ›ï¼Œæ€»ç»“äº†ä¸€ç‚¹å…³äº library çš„çŸ¥è¯†ï¼Œè¿™é‡Œå°±åšä¸ªç¬”è®°ï¼Œä»¥åšå¤‡å¿˜å§ã€‚ é…ç½®ç›®çš„åœ¨å¼€å‘ npm åº“æ—¶ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦è€ƒè™‘é…ç½®å¤šåœºæ™¯çš„å¼•å…¥æ–¹å¼ï¼Œæ¯”å¦‚ï¼š AMDã€CommonJSã€ES6 Mouduleã€NodeJs/Window ç­‰ç­‰ã€‚é‚£ä¹ˆä¸ºäº†èƒ½å¤Ÿæ”¯æŒè¿™ä¹ˆäº›å¼•å…¥æ–¹å¼ï¼Œlibrary ä¾¿æ˜¯ webpack ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–æ‰“åŒ…ç­–ç•¥çš„æ–¹æ³•ï¼Œä½¿ç”¨ library çš„é…ç½®æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬ä¸“æ³¨äº ES6 çš„å†™æ³•ï¼Œè€Œç¼–è¯‘éƒ¨åˆ†å°±ä¸åšè¿‡å¤šè€ƒè™‘äº†ã€‚ ç”±äº ECMAScript è¶Šæ¥è¶Šæ™®åŠï¼Œæ­¤å¤„ä»…ä»‹ç» ECMAScript æ¨¡å—è¯­æ³•é…ç½®éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚ æ–‡ä»¶é…ç½®å•æ–‡ä»¶é…ç½®å•æ–‡ä»¶ library çš„é…ç½®å°±éå¸¸ç®€å•äº†ï¼Œå®˜æ–¹å°±æœ‰å¾ˆå¥½çš„ä¾‹å­ï¼Œè¿™é‡Œå°±å…ˆè´´ä¸€ä¸‹ï¼š 123456789101112var path = require('path');moudule.export = &#123; entry: './src/index.js', output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'webpack-numbers.js', library: 'webpack-demo', // æ”¯æŒ AMD å’Œ CommonJS libraryTarget: \"umd\" &#125;&#125; å¯¹äºå¦‚ä»Šçš„é¡¹ç›®æ¥è¯´ï¼Œå¦‚æœä¸æ˜¯å¯¹å¼•å…¥æ–¹å¼æœ‰ç‰¹åˆ«è¦æ±‚ï¼Œå»ºè®®ä½¿ç”¨ umd æ–¹å¼ï¼›å¦‚æœæœ‰æ˜ç¡®æŒ‡å®šç¯å¢ƒæ—¶ï¼Œå†æ¢æˆå¯¹åº”é…ç½®å³å¯ã€‚ å¤šæ–‡ä»¶é…ç½®å¤šæ–‡ä»¶é…ç½®å”¯ä¸€æ³¨æ„çš„æ˜¯æ–‡ä»¶çš„å¼•å…¥ï¼Œä»¥åŠé»˜è®¤ library ååŒæ ·éœ€è¦è®¾ç½®æˆåŠ¨æ€çš„ã€‚ 123456789101112131415161718var path = require('path');// å¤šå…¥å£æ–‡ä»¶ JSON å¯¹è±¡var components = require('./components.json');moudule.export = &#123; entry: components, output: &#123; path: path.resolve(__dirname, 'dist'), filename: '[name].js', // æ¯ä¸ªæ–‡ä»¶çš„å¯¼å‡ºå¯¹è±¡åä¸æ–‡ä»¶åä¿æŒä¸€è‡´ library: '[name]', // æ”¯æŒ AMD å’Œ CommonJS libraryTarget: \"umd\", // ES6 ç¼–å†™çš„ç»„ä»¶ï¼Œå¦‚æœå¯¼å‡ºä¸º export default // å¦‚æœæ–‡ä»¶å¼•å…¥æµ‹è¯•æœ‰é—®é¢˜ï¼Œå¯é…ç½®æ­¤å±æ€§ libraryExport: \"default\" &#125;&#125; å±æ€§è¯¦è§£å…¶å®é…ç½®ä»€ä¹ˆçš„ï¼Œéšä¾¿åœ¨ç½‘ä¸ŠæŸ¥æŸ¥ï¼Œå†æ ¹æ®è‡ªèº«çš„ç†è§£å°è¯•ï¼Œéƒ½èƒ½æœ‰æ‰€æˆæ•ˆã€‚ä½†æ˜¯çŸ¥å…¶ç„¶æˆ‘ä»¬ä¹Ÿå¾—çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬å°±çœ‹çœ‹å¤§å®¶æ‰€å…³æ³¨çš„ libraryã€libraryTargetã€libraryExport æ­¤ä¸‰å±æ€§å§ã€‚ librarylibrary å¯è®¾ç½®çš„ç±»å‹æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šstring å’Œ objectã€‚ å½“æˆ‘ä»¬éœ€è¦å¯¹ä¸åŒç¯å¢ƒè®¾ç½®ä¸å¤ªä¸€æ ·çš„å¯¼å‡ºåæ—¶ï¼Œæˆ‘ä»¬æ‰å¯èƒ½ç”¨åˆ° objectï¼Œä¾‹å¦‚ï¼š 12345678// ä»…æ­¤ä¸‰å±æ€§// æ—  root é…ç½®åˆ™å…¶é‡‡ç”¨ commonjs åï¼Œåä¹‹ commonjs é‡‡ç”¨ rootï¼Œæ­¤ä¸¤å±æ€§å¿…é¡»é…ç½®å…¶// ä¸€ï¼Œå¦åˆ™ä¼šæœ‰å…¨å±€æ±¡æŸ“çš„å±é™©library: &#123; commonjs: 'my-package-a', amd: 'my-package-b', root: 'my-package-c'&#125; è‡ªæµ‹ demo ç»“æœå±•ç¤ºï¼š 1234567(function e(t, n) &#123; if (typeof exports === 'object' &amp;&amp; typeof module === 'object') module.exports = n(); else if (typeof define === 'function' &amp;&amp; define.amd) define([], n); else if (typeof exports === 'object') exports['my-package-a'] = n(); else t['my-package3-c'] = n();&#125;)(/*...*/); å¦åˆ™ç›´æ¥ä½¿ç”¨ string æ¨¡å¼å³å¯ã€‚ æ³¨æ„ï¼Œlibrary å¯¹è±¡æ¨¡å¼å¿…é¡»è®¾ç½® libraryTarget ä¸º umd æ¨¡å¼ï¼›æ­¤å¤– library åç§°æœ€å¥½ä½¿ç”¨é©¼å³°å¼ï¼Œæ¯•ç«Ÿç”Ÿæˆçš„æ˜¯å˜é‡ã€‚ ç–‘é—®ï¼š umd æ¨¡å¼æ— è®ºå¦‚ä½•é…ç½® amdï¼Œæ‰“åŒ…å‡ºçš„å†…å®¹ amd éƒ¨åˆ†åŸºæœ¬éƒ½æ˜¯ define([], n);ï¼Œå³ä½¿é…ç½®æˆé©¼å³°å¼çš„å€¼ï¼Œæ­¤å¤–å®˜æ–¹çš„ä¾‹å­ä¸Šä¹Ÿæ²¡æœ‰å¯¹åº”å€¼ï¼Œä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆé—®é¢˜ï¼›ä½† amd æ¨¡å¼å•ç‹¬æ‰“åŒ…åˆ™æœ‰å¯¹åº”çš„é…ç½®åç§°ã€‚æ­¤ amd çš„é…ç½®ä¸ amd-require çš„ç»“æœå¾ˆç›¸ä¼¼ã€‚ libraryTargetlibraryTarget å±æ€§ä¸»è¦é…ç½®å¦‚ä½•æš´éœ²æˆ‘ä»¬çš„ library åã€‚å…¶æ”¯æŒçš„å€¼å¦‚ä¸‹ï¼š å˜é‡ç±»å‹ï¼š varï¼ˆé»˜è®¤ï¼‰ assignï¼ˆäº§ç”Ÿéšå«çš„å…¨å±€å˜é‡ï¼Œæ…ç”¨ï¼‰ å¯¹è±¡ç±»å‹ï¼š thisï¼ˆç»‘å®šè‡³ this å¯¹è±¡ä¸Šï¼‰ windowï¼ˆæµè§ˆå™¨ç¯å¢ƒçš„å…¨å±€å¯¹è±¡ ï¼‰ globalï¼ˆnode ç¯å¢ƒçš„å…¨å±€å¯¹è±¡ï¼‰ commonjsï¼ˆç»‘å®šè‡³ export å¯¹è±¡ï¼‰ selfï¼ˆç»‘å®šè‡³ self å¯¹è±¡ï¼‰ æ¨¡å—ç±»å‹ï¼š amdï¼ˆamd å¼•å…¥æ¨¡å¼ï¼‰ umdï¼ˆå¤šæ¨¡å¼å¹¶å­˜ï¼‰ commonjs-moduleï¼ˆmodule.exportsï¼‰ commonjs2ï¼ˆcommonjs-module çš„æ¨¡å—å¯¼å‡º + commonjs å¯¹è±¡ï¼Œä¼šå¿½ç•¥ library åï¼‰ amd-requireï¼ˆç«‹å³åŠ è½½ç‰ˆçš„ amdï¼Œä¼šå¿½ç•¥ library åï¼‰ systemï¼ˆsystemJs å¼•å…¥ï¼‰ umd2 å…¶ä»–ç±»å‹ï¼š jsonpï¼ˆlibrary ä¸ºåçš„ jsonp å®¹å™¨ï¼‰ ä¸€èˆ¬æ ¹æ®æƒ…å†µé€‰å–åˆé€‚çš„ target æ–¹å¼ï¼Œé€šå¸¸æ¥çœ‹ umd å·²ç»èƒ½è§£å†³ç»å¤§å¤šæ•°é€šç”¨çš„å¼•å…¥æ¨¡å¼äº†ã€‚ umd2 ç»“æœå’Œ umd è²Œä¼¼å·®ä¸å¤šï¼Œä¸ªäººæš‚æœªæ‰¾åˆ°ç›¸åº”çš„è§£é‡Š libraryExportè¯¥å±æ€§ä¸»è¦æ˜¯ç”¨äºé…ç½®ç»ç”± libraryTarget å…¬å¼€é‚£äº›æ¨¡å—ï¼Œé»˜è®¤ä¸º undefinedã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ˆå‡è®¾ libraryTarget ä¸º varï¼‰ï¼Œå˜é‡å¯¼å‡ºçš„æ ¼å¼ä¸ºï¼š 1var MyDefaultModule = _entry_return_; å¦‚æœéœ€è¦æ˜¾ç¤ºè¡¨æ˜å¯¼å‡ºå“ªäº›æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆé…ç½®ï¼š 1234567// æŒ‡å®šæ¨¡å—// libraryExport: 'MyModule'var MyModule = _entry_return_.MyModule;// æŒ‡å®šæ¨¡å—è·¯å¾„// libraryExport: ['MyModule', 'MySubModule']var MySubModule = _entry_return_.MyModule.MySubModule; ä¸€èˆ¬å¹¶ä¸éœ€è¦é…ç½®æ­¤å±æ€§ï¼Œæœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼šå½“æˆ‘ä»¬ä½¿ç”¨ ES6 ç¼–å†™æ¨¡å—æ—¶ï¼Œæœ‰æ—¶å€™æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶åœ¨å¼•å…¥æ—¶ï¼Œå…¶å†…å®¹å‘ˆç°ä¸ºï¼š 123&#123; default: &#123;/* ... */&#125;&#125; æ¯•ç«Ÿ ES6 çš„ export default å…¶ default ä¸¥æ ¼ä¸Šæ¥è¯´ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡åï¼Œå› æ­¤ä¸ºäº†ä¿®å¤æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® libraryExport: &#39;default&#39;ï¼Œå°†é»˜è®¤å¯¼å‡ºåˆ†é…ç»™åº“ç›®æ ‡ æµ‹è¯•ä¾‹å­è¯¥éƒ¨åˆ†å†…å®¹è¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹ï¼Œé…åˆå®˜æ–¹æ–‡æ¡£ç†è§£èµ·æ¥ä¼šæ›´å¿«ï¼Œå¯ä»¥æ‹·è´è¯¥ æµ‹è¯• Demo è¿›è¡Œå°è¯•ã€‚ å‚è€ƒæ–‡ç«  output.library åˆ›å»º library muti-part-library webpack å…¨é‡é…ç½® commonjs ä¸ commonjs2","categories":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/categories/Webpack/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"}]},{"title":"ä½¿ç”¨ git submodule æ¥ç®¡ç†å­æ¨¡å—","slug":"ä½¿ç”¨-git-submodule-æ¥ç®¡ç†å­æ¨¡å—","date":"2019-10-17T02:40:40.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/10/17/ä½¿ç”¨-git-submodule-æ¥ç®¡ç†å­æ¨¡å—/","link":"","permalink":"https://monocy.gitee.io/2019/10/17/ä½¿ç”¨-git-submodule-æ¥ç®¡ç†å­æ¨¡å—/","excerpt":"å‰è¨€è¿‘æœŸåœ¨è€ƒè™‘é¡¹ç›®æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºå…¬å…±ç»„ä»¶çš„ç»´æŠ¤æ€»å…±æ‰¾åˆ°äº†ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼šå‘å¸ƒ npm åŒ…ä¸ git submodule å­æ¨¡å—ç®¡ç†ã€‚å¯¹äº npm å‘åŒ…çš„æ–¹æ³•è¿™é‡Œæˆ‘å°±ä¸åšèµ˜è¿°äº†ï¼ˆå…ˆå‰æœ‰å†™åˆ°è¿‡ï¼‰ï¼Œè€Œå¦ä¸€ç§ git submodule çš„æ–¹æ³•è¿™é‡Œå°±è¯¦ç»†ä»‹ç»ä¸€ä¸‹ï¼Œå¯¹äºä¸æƒ³ä½¿ç”¨å‘åŒ…çš„æ–¹å¼ï¼ˆæ¯”è¾ƒç¹çï¼‰æ¥ç»´æŠ¤å­é¡¹ç›®çš„ coder æ¥è¯´ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç®—æ˜¯æœ€ä¸ºæ–¹ä¾¿çš„äº†ã€‚","text":"å‰è¨€è¿‘æœŸåœ¨è€ƒè™‘é¡¹ç›®æ‹†åˆ†çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºå…¬å…±ç»„ä»¶çš„ç»´æŠ¤æ€»å…±æ‰¾åˆ°äº†ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼šå‘å¸ƒ npm åŒ…ä¸ git submodule å­æ¨¡å—ç®¡ç†ã€‚å¯¹äº npm å‘åŒ…çš„æ–¹æ³•è¿™é‡Œæˆ‘å°±ä¸åšèµ˜è¿°äº†ï¼ˆå…ˆå‰æœ‰å†™åˆ°è¿‡ï¼‰ï¼Œè€Œå¦ä¸€ç§ git submodule çš„æ–¹æ³•è¿™é‡Œå°±è¯¦ç»†ä»‹ç»ä¸€ä¸‹ï¼Œå¯¹äºä¸æƒ³ä½¿ç”¨å‘åŒ…çš„æ–¹å¼ï¼ˆæ¯”è¾ƒç¹çï¼‰æ¥ç»´æŠ¤å­é¡¹ç›®çš„ coder æ¥è¯´ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç®—æ˜¯æœ€ä¸ºæ–¹ä¾¿çš„äº†ã€‚ ä½¿ç”¨åœºæ™¯æœ‰ç§æƒ…å†µæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ï¼šæŸä¸ªå·¥ä½œä¸­çš„é¡¹ç›®éœ€è¦åŒ…å«å¹¶ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®ã€‚ä¹Ÿè®¸æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ–è€…ä½ ç‹¬ç«‹å¼€å‘çš„ï¼Œç”¨äºå¤šä¸ªçˆ¶é¡¹ç›®çš„åº“ã€‚ç°åœ¨é—®é¢˜æ¥äº†ï¼šä½ æƒ³è¦æŠŠå®ƒä»¬å½“åšä¸¤ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼ŒåŒæ—¶åˆæƒ³åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å¦ä¸€ä¸ªã€‚ æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ã€‚å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™ç„¶ååˆ›å»ºäº† Atom è®¢é˜…ã€‚ä½ å†³å®šä½¿ç”¨ä¸€ä¸ªåº“ï¼Œè€Œä¸æ˜¯å†™è‡ªå·±çš„ Atom ç”Ÿæˆä»£ç ã€‚ä½ å¯èƒ½ä¸å¾—ä¸é€šè¿‡ CPAN å®‰è£…æˆ– Ruby gem æ¥åŒ…å«å…±äº«åº“ä¸­çš„ä»£ç ï¼Œæˆ–è€…å°†æºä»£ç ç›´æ¥æ‹·è´åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚å¦‚æœå°†è¿™ä¸ªåº“åŒ…å«è¿›æ¥ï¼Œé‚£ä¹ˆæ— è®ºç”¨ä½•ç§æ–¹å¼éƒ½å¾ˆéš¾å®šåˆ¶å®ƒï¼Œéƒ¨ç½²åˆ™æ›´åŠ å›°éš¾ï¼Œå› ä¸ºä½ å¿…é¡»ç¡®ä¿æ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½åŒ…å«è¯¥åº“ã€‚å¦‚æœå°†ä»£ç å¤åˆ¶åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œé‚£ä¹ˆä½ åšçš„ä»»ä½•è‡ªå®šä¹‰ä¿®æ”¹éƒ½ä¼šä½¿åˆå¹¶ä¸Šæ¸¸çš„æ”¹åŠ¨å˜å¾—å›°éš¾ã€‚ Git é€šè¿‡å­æ¨¡å—æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ã€‚å®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚ è¯¥éƒ¨åˆ†ç›´æ¥å¼•ç”¨å®˜æ–¹çš„ä¾‹å­ï¼Œå°±ä¸é€ è½®å­äº†ã€‚ å‘½ä»¤ä½¿ç”¨ä½¿ç”¨ git submodule æ—¶ï¼Œéœ€è¦çš„ä¸€äº›å‘½ä»¤æœ‰ï¼š 12345678910111213# å½“å‰é¡¹ç›®æ–‡ä»¶åå¦‚ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºä»“åº“å# ç›®æ ‡ä»“åº“è·¯å¾„å¯ä¸ºè¿œç¨‹ä»“åº“åœ°å€ï¼Œä¹Ÿå¯ä¸ºå½“å‰ç›¸å¯¹è·¯å¾„git submodule add &lt;ç›®æ ‡ä»“åº“è·¯å¾„&gt; &lt;å½“å‰é¡¹ç›®æ–‡ä»¶å&gt;# æŸ¥çœ‹å­æ¨¡å—çŠ¶æ€git submodule (status)# å°†å­æ¨¡å—ä¸è¿œç¨‹ä¿æŒåŒæ­¥ï¼ˆä¼šåˆ‡æ¢è‡³ä¸€ä¸ªä¸´æ—¶åˆ†æ”¯ï¼‰git submodule update --remote# å°†æ‰€æœ‰å­æ¨¡å—éƒ½åˆ‡æ¢è‡³ master åˆ†æ”¯git submodule foreach 'git checkout master'# å°†æ‰€æœ‰å­æ¨¡å—åŒæ­¥è¿œç¨‹æ›´æ–°git submodule foreach 'git pull'# æŸ¥çœ‹å­æ¨¡å—è¿½è¸ªçš„å†…å®¹ä¿¡æ¯git diff --cached --submodule åˆæ¬¡æ·»åŠ ä»“åº“æ“ä½œä½œä¸ºæ·»åŠ è€…æ¥è¯´ï¼Œå­æ¨¡å—çš„æ·»åŠ æ˜¯å¾ˆç®€å•çš„ä¸€ä»¶äº‹ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š 1234567891011# æ·»åŠ ä»“åº“git submodule add &lt;å­æ¨¡å—ä»“åº“è·¯å¾„&gt; &lt;å½“å‰é¡¹ç›®æ–‡ä»¶å&gt;# æ­¤æ—¶æ‰“å° git status ä¼šæ˜¾ç¤º submodule çš„ä¸€äº›ä¿¡æ¯# .submodule æ–‡ä»¶å†…å­˜å‚¨çš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ˜ å°„ä¿¡æ¯äº†# æäº¤æ›´æ–°å¹¶æ¨é€è‡³è¿œç¨‹# å½“ä»“åº“æäº¤è‡³è¿œç¨‹æ—¶ï¼Œå­æ¨¡å—çš„å†…å®¹å¹¶ä¸ä¼šè¢«å¸¦è¿‡å»git add .git commit -m \"init submodule\"git push æ‹·è´è¿œç¨‹ä»“åº“æ‹·è´è¿œç¨‹å¸¦æœ‰å­æ¨¡å—çš„é¡¹ç›®éœ€è¦ç¨å¾®æ³¨æ„ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯å­æ¨¡å—éœ€è¦é¢å¤–çš„æ­¥éª¤æ‰èƒ½å°†å†…å®¹æ‹·è´ä¸‹æ¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š 123456789# å…‹éš†ä»“åº“git clone &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;# æ­¤æ—¶å­æ¨¡å—æ˜¯æ²¡æœ‰å†…å®¹çš„ï¼Œæ‰€ä»¥# åˆå§‹åŒ–æœ¬åœ°é…ç½®æ–‡ä»¶git submodule init# é…ç½®æ–‡ä»¶æœ‰è®°å½•å¯¹åº”çš„ commit idï¼Œæ­¤å°†å­æ¨¡å—æ–‡ä»¶åŒæ­¥è‡³é…ç½®æ–‡ä»¶å†…è®°å½•çš„ id å¤„# æ³¨æ„ï¼š `git submodule update` æ‹¿åˆ°çš„æ–‡ä»¶å†…å®¹å¹¶ä¸ä¸€å®šä¸å­æ¨¡å—ä»“åº“çš„æœ€æ–°çŠ¶æ€ä¿æŒä¸€è‡´# å› ä¸ºå®ƒè®°å½•çš„ä¸ºå…ˆå‰åˆå§‹åŒ–æ—¶çš„ç‰ˆæœ¬ï¼Œéœ€è¦é¢å¤–æ›´æ–°git submodule update ä¸‰æ­¥ç®€åŒ–æˆä¸€æ­¥çš„æ“ä½œä¸ºï¼š git clone &lt;è¿œç¨‹ä»“åº“åœ°å€&gt; â€“recursive æ›´æ–°å­æ¨¡å—æ›´æ–°çš„æ–¹æ³•ä¹Ÿæœ‰å¤šç§ï¼Œæœ€ä¸ºåŸºç¡€çš„å¤„ç†æ–¹å¼æ˜¯ï¼š 1234567# è¿›å…¥é¡¹ç›®ä¸­çš„å­æ¨¡å—å†…cd &lt;child-module&gt;# æ‹‰å–æ–°å†…å®¹git fetch# åˆå¹¶æ–°å†…å®¹git merge# fetch å’Œ merge å¯ä»¥ç®€åŒ–ä¸ºä¸€æ­¥ï¼š git pull å½“ç„¶ï¼Œæ­¤åšæ³•æ¯”è¾ƒç¹æ‚ï¼Œè¾ƒä¸ºç®€ä¾¿çš„å¤„ç†æ–¹æ³•æ˜¯ï¼ˆæ— éœ€è¿›å…¥å­æ¨¡å—ï¼‰ï¼š 12# æ·»åŠ  remote ä¼šæ›´æ–°è‡³è¿œç¨‹é¡¹ç›®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™æ˜¯æœ¬åœ°æœ€æ–°ç‰ˆæœ¬git submodule update --remote Git ä¼šè‡ªåŠ¨è¿›å…¥å­æ¨¡å—å¹¶æ›´æ–°å®ƒã€‚ä½†æ˜¯è¯¥å‘½ä»¤ä¼šé»˜è®¤å‡å®šä½ æƒ³è¦æ›´æ–°å¹¶æ£€å‡ºå­æ¨¡å—çš„ master åˆ†æ”¯ã€‚ç®€å•çš„è¯´ï¼Œæ­¤æ—¶å­æ¨¡å—ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°ä¸´æ—¶åˆ†æ”¯ï¼Œä¸è¿œç¨‹çš„æºä¿æŒä¸€è‡´ï¼Œå¦‚æœå­æ¨¡å—å†…éƒ¨æœ‰æ”¹åŠ¨ï¼Œæƒ³è¦è¿å›ï¼Œé‚£ä¹ˆå°†å­æ¨¡å—çš„ branch åˆ‡å›åŸæ¥çš„åˆ†æ”¯å³å¯ã€‚ ä¾‹å¦‚ï¼šå­æ¨¡å—æœ¬æ¥æ˜¯ master åˆ†æ”¯ï¼Œåæ¥è¿œç¨‹å­æ¨¡å—çš„æºæ›´æ–°äº†ï¼Œæ­¤æ—¶ git submodule update --remote ä¼šå°†å­æ¨¡å—åˆ†æ”¯åˆ‡æ¢æˆä¸€ä¸ª hash id åˆ†æ”¯ã€‚æ­¤æ—¶è¿›å…¥å­æ¨¡å—ç›®å½•ï¼Œgit checkout master åˆ‡å› master åˆ†æ”¯ï¼Œä½ ä¼šå‘ç°è¯¥ master åˆ†æ”¯å†…å®¹ä¸æ‰§è¡Œ update æŒ‡ä»¤ä¹‹å‰çš„æ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰å˜åŠ¨ï¼Œä½†ä¼šæé†’ä½ è¿œç¨‹çš„æºå·²ç»æ›´æ–°äº†ï¼Œéœ€è¦æ‰‹åŠ¨ pull ä¸€ä¸‹ã€‚ è¿™æ ·çœ‹æ¥ï¼Œè¿™ä¸¤ç§å†™æ³•éƒ½æ²¡å·®å•¦ï½åæ­£æœ€åéƒ½å¾—è‡ªå·±æ‰‹åŠ¨å¤„ç†ä¸€ä¸‹ã€‚ å¯¹äºåŒ…å«å¤šä¸ªå­æ¨¡å—çš„é¡¹ç›®æ¥è¯´ï¼Œè¿›å…¥å­æ¨¡å—ä¸€ä¸ªä¸ªæ›´æ–°ç€å®æ˜¯å¾ˆéº»çƒ¦ï¼Œæ‰¹é‡æ›´æ–°å¯ä»¥ä½¿ç”¨ foreachï¼Œä¾‹å¦‚ï¼š 12345# åŒæ­¥æœ€æ–°çš„ head æŒ‡é’ˆï¼Œå¦åˆ™git submodule update --remote# å°†é»˜è®¤è¿å‡ºçš„åˆ†æ”¯è¿å› masterï¼Œç„¶åæ‹‰å–æ›´æ–°git submodule foreach git checkout mastergit submodule foreach git pull æˆ–è€…ï¼Œå¦‚æœçŸ¥é“æ›´æ–°äº†ï¼Œå¯ä»¥çœç•¥æ‰å‰ä¸¤æ­¥éª¤ï¼ˆå‰é¢æ­¥éª¤ä¸»è¦æ˜¯ä¸ºäº† git status | git submodules çœ‹æœ‰æ²¡æœ‰å­æ¨¡å—å˜åŠ¨ï¼‰ï¼Œç›´æ¥æ‹‰å–å°±è¡Œï¼Œè¿™æ ·ä¹Ÿä¸ç”¨å†å»åˆ‡åˆ†æ”¯äº†ã€‚ 1git submodule foreach git pull æ›´æ”¹å­æ¨¡å—å‰é¢å¯¹å­æ¨¡å—çš„å¤„ç†ä»…ä»…åªæ˜¯åŒæ­¥æ›´æ–°è€Œå·²ï¼Œè¿™å’Œä½¿ç”¨ npm åŒ…æ²¡å•¥åŒºåˆ«ï¼Œä½†æ¯•ç«Ÿæ˜¯å°†å­æ¨¡å—ç»™å¼„è¿›é¡¹ç›®äº†ï¼Œå½“ä¸ªåŒ…æ”¾åœ¨é‚£é‡Œç”¨ï¼Œé‚£ä¹Ÿå¤ªå§”å±ˆäº†ã€‚å…¶å®åœ¨ä¸»é¡¹ç›®å†…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å­æ¨¡å—è¿›è¡Œæ›´æ–°ï¼Œè¿˜å¯ä»¥å¹¶å‘å¸ƒå…¶æ”¹åŠ¨ï¼Œè¿™æ ·å°±èƒ½èŠ‚çœå¾ˆå¤šæ—¶é—´å’ŒåŠ³åŠ›äº†ï¼ˆå‰ææ˜¯åˆ«æ”¹é€ å¾—åˆ«äººæ— æ³•ä½¿ç”¨ï¼Œå˜æˆç§æœ‰ä»£ç åº“äº†ï¼‰ã€‚ è¿™é‡Œä»…ä»‹ç»æ¯”è¾ƒçœæ—¶çš„æ“ä½œï¼Œç›´æ¥å¯åŠ¨ merge ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š 1git submodule update --remote --merge è¿›å…¥å­æ¨¡å—åï¼Œæˆ‘ä»¬å°±èƒ½å’Œå¹³å¸¸ä¸€æ ·çš„åˆå¹¶å†²çªäº†ã€‚ åœ¨ä¸»åˆ†æ”¯è¿›è¡Œæ¨é€æ—¶ï¼Œæˆ‘ä»¬å¾—ä¿è¯å½“å‰åˆ†æ”¯çš„æ‰€æœ‰å­æ¨¡å—éƒ½å·²ç»ä¸è¿œç¨‹ä¸€è‡´ï¼ˆæˆ–è€…éƒ½è½åï¼Œä½†ä¸å¯ divergedï¼‰ï¼Œé˜²æ­¢åˆ«çš„ä¼™ä¼´æ¥å—ä¸åˆ°æ–°çš„å˜åŠ¨ï¼Œå› æ­¤æ¨é€çš„å‘½ä»¤æ”¹ä¸ºï¼š 123# è¿™æ · git ä¼šè¿›å…¥åˆ°å­æ¨¡å—ä¸­ç„¶ååœ¨æ¨é€ä¸»é¡¹ç›®å‰æ¨é€äº†å®ƒã€‚å¦‚æœé‚£ä¸ªå­æ¨¡å—å› ä¸ºæŸäº›åŸå› æ¨é€å¤±è´¥ï¼Œä¸»é¡¹ç›®ä¹Ÿä¼šæ¨é€å¤±è´¥# è¯¥æ–¹æ³•æš‚æœªå°è¯•ï¼Œä¸€ç›´ç”¨çš„ foreach pushï¼Œæ¯”è¾ƒæ–¹ä¾¿git push --recurse-submodules=on-demand æ³¨ï¼šå¦‚æœå‡ºç°äº†æ— æ³•æ¨é€çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯è¿œç¨‹åˆ†æ”¯ä¸ºæœ¬åœ°é¡¹ç›®çš„æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è¿›å…¥è¯¥è¿œç¨‹åˆ†æ”¯ï¼Œç„¶åè®¾ç½® â€˜.git/configâ€™ æ–‡ä»¶ï¼ŒåŠ ä¸Šå†…å®¹å¦‚ä¸‹ï¼š 12[receive] denyCurrentBranch = false è¿™æ ·å°±èƒ½ push äº†ã€‚ åˆ é™¤å­æ¨¡å—åˆ é™¤å­æ¨¡å—éœ€è¦è¿›è¡Œ 2 æ­¥æ“ä½œï¼Œé¦–å…ˆå¾—åˆ é™¤å¯¹åº”çš„ cache ç¼“å­˜è¿½è¸ªï¼Œç„¶åå†åˆ é™¤å¯¹åº”çš„æ¨¡å—æ–‡ä»¶ 12git rm --cached &lt;fileName&gt;rm --rf &lt;fileName&gt; å‚è€ƒæ–‡ç«  Git å­æ¨¡å— Git å­æ¨¡å—çš„ç®¡ç†å’Œä½¿ç”¨","categories":[{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/categories/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/tags/Git/"}]},{"title":"åˆ†æ Vue çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸­ï¼‰","slug":"åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸­ï¼‰","date":"2019-10-11T03:48:30.000Z","updated":"2022-07-26T13:15:52.449Z","comments":true,"path":"2019/10/11/åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸­ï¼‰/","link":"","permalink":"https://monocy.gitee.io/2019/10/11/åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸­ï¼‰/","excerpt":"å‰è¨€åœ¨ä¸Šç¯‡åˆ†æ Vue çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰ä¸­ï¼Œç®€å•å®ç°äº†â€œæ‰‹åŠ¨â€ç‰ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼Œè€Œåœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬ç»§ç»­æ²¿ç€è¯¥æ€è·¯å¾€ä¸‹æ¢ç´¢ï¼Œçœ‹å¦‚ä½•å®ç°â€œè‡ªåŠ¨â€ç‰ˆçš„è§‚å¯Ÿè€…ã€‚","text":"å‰è¨€åœ¨ä¸Šç¯‡åˆ†æ Vue çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰ä¸­ï¼Œç®€å•å®ç°äº†â€œæ‰‹åŠ¨â€ç‰ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼Œè€Œåœ¨æœ¬ç¯‡ä¸­æˆ‘ä»¬ç»§ç»­æ²¿ç€è¯¥æ€è·¯å¾€ä¸‹æ¢ç´¢ï¼Œçœ‹å¦‚ä½•å®ç°â€œè‡ªåŠ¨â€ç‰ˆçš„è§‚å¯Ÿè€…ã€‚ å®Œå–„çš„è§‚å¯Ÿè€…ç´§æ¥ç€ä¸Šæ–‡çš„æ€è·¯ï¼Œå› ä¸ºæˆ‘ä»¬åªæ˜¯å®ç°äº† Dep ä¾èµ–ï¼ˆç®¡å®¶ï¼‰ï¼Œå´è¿˜æ²¡æœ‰å¯¹å¹³å°çš„è§‚å¯Ÿå¤„ç†æ–¹å¼ä¼˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†æ­¤æ­¥éª¤ç»™å®Œå–„èµ·æ¥ã€‚ é¦–å…ˆï¼Œè¦å®ç°å‘å¸ƒè€…æ›´æ–°å†…å®¹åè‡ªåŠ¨è§¦å‘è®¢é˜…äº‹ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦çš„æ˜¯å¯¹å‘å¸ƒè€…å†…å®¹æ”¹å˜çš„ç›‘å¬ï¼ŒES5 ä¸­æ°å¥½æœ‰è¿™ä¹ˆä¸€ç§æ–¹æ³•èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯ Object.defineProperty(...)ã€‚å…¶è¯­æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ­¤å¤„ä»…ä»…éœ€è¦æ‹¦æˆª get å’Œ set æ–¹æ³•ï¼Œå¤§è‡´å†™æ³•ä¸ºï¼š 1234567891011121314const data = &#123; name: 'test'&#125;;Object.defineProperty(data, name, &#123; get() &#123; return data.name; &#125;, set(newVal) &#123; // è°ƒç”¨ setter æ–¹æ³•ï¼Œä¸å¯ç›´æ¥èµ‹å€¼ï¼Œå¦åˆ™ä¼šæ­»å¾ªç¯ // é”™è¯¯å†™æ³• obj[key] = newVal // å¯æŸ¥çœ‹ Vue ä¸­çš„ setter è·å– &#125;&#125;) æ—¢ç„¶æœ‰äº†èƒ½å¤Ÿè§‚æµ‹å‘å¸ƒè€…çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå¯¹äºå¯¹è±¡å˜æ›´åçš„ç›‘å¬å°±èƒ½è‡ªåŠ¨åŒ–å¤„ç†äº†ï¼Œé‚£ä¹ˆå…ˆå‰æ‰‹åŠ¨è§¦å‘ dep.depend() å’Œ dep.notify() å‡½æ•°çš„æ“ä½œå°±èƒ½æ•´åˆå…¥ Object.defineProperty å†…äº†ã€‚ å»¶ç»­å…ˆå‰çš„é€»è¾‘ï¼Œdep.notify() æ–¹æ³•æ‰§è¡Œéƒ½å¾—åœ¨å¯¹è±¡å€¼å˜åŠ¨ä¹‹åï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ­¤æ–¹æ³•æ”¾å…¥ set å‡½æ•°å†…ï¼›è€Œ dep.depend() æ–¹æ³•ä¸»è¦æ˜¯å°†è®¢é˜…è€…äº‹ä»¶å­˜å‚¨å…¥è‡ªèº«çš„äº‹ä»¶åˆ—è¡¨ä¸­ï¼Œå› æ­¤è¯¥æ–¹æ³•æ‰§è¡Œä¸€æ¬¡å°±è¡Œï¼Œä¹‹åæ¯æ¬¡æ›´æ–°éƒ½è§¦å‘ notify æ¥ä¾æ¬¡æ‰§è¡Œæ³¨å†Œçš„å‡½æ•°å³å¯ã€‚å› æ­¤ï¼Œåœ¨è€ƒè™‘åªæ˜¯ä¼ å…¥ç®€å•å¯¹è±¡çš„æƒ…å†µæ—¶ï¼Œè¿™é˜¶æ®µçš„ä»£ç æ€è·¯å¤§è‡´æ˜¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445// ï¼ˆç§äººç®¡å®¶ï¼‰ä¾èµ–æ”¶é›†class Dep &#123; constructor() &#123; this.subscriberList = []; &#125; // æ·»åŠ è®¢é˜…æ–¹æ³• depend() &#123; // æ­¤å¤„æ·»åŠ å¯¹åº”è®¢é˜…æ–¹æ³• &#125; // å‘å¸ƒè€…æ›´æ–°æ¶ˆæ¯ notify() &#123; this.subscriberList.forEach(sub =&gt; &#123; // ä¾æ¬¡å¤„ç†è®¢é˜…çš„æ–¹æ³• &#125;); &#125;&#125;// ï¼ˆå‘å¸ƒè€…å’Œç®¡å®¶çš„è”ç³»æ–¹å¼ï¼‰ç›‘å¬å™¨function observer(data = &#123;&#125;) &#123; Object.keys(data).forEach(key =&gt; &#123; let val = data[key]; const dep = new Dep(); Object.defineProperty(data, key, &#123; get() &#123; // get æ—¶æ·»åŠ ä¾èµ–ï¼Œå½“æœ‰ç›®æ ‡çš„æ—¶å€™æ‰æ·»åŠ  if (target) &#123; dep.depend(); &#125; return val; &#125;, set(newVal) &#123; if (newVal === val) &#123; return; &#125; // set æ—¶è§¦å‘æ›´æ–° // æ­¤å¤„ç”¨ setter åšå˜åŠ¨ï¼Œæ­¤å¤„å·æ‡’ä¸€ä¸‹ï¼Œä¸è¦ç›´æ¥èµ‹å€¼ï¼Œä¼šåå¤è§¦å‘ set val = newVal; dep.notify(); &#125; &#125;) &#125;);&#125; é‚£ä¹ˆç°åœ¨é—®é¢˜åˆæœ‰äº†ã€‚ç›®å‰ä»£ç å®ç°è‡³æ­¤æˆ‘ä»¬ä»…ä»…åªæ˜¯å°†å‘å¸ƒè€…ä¸å…¶ Dep ä¾èµ–è¿›è¡Œäº†å…³è”ï¼Œé‚£ä¹ˆè§‚å¯Ÿè€…åˆè¯¥å¦‚ä½•å°†å…¶è·è®¢é˜…è€…çš„äº‹ä»¶ä¸ Dep å­˜å‚¨çš„äº‹ä»¶åˆ—è¡¨è¿›è¡Œå…³è”å‘¢ï¼Ÿä»è®¢é˜…è€…è§’åº¦åˆ†æä¸€ä¸‹ï¼š è®¢é˜…è€…å†³å®šå¥½è¦è®¢é˜…çš„å†…å®¹ï¼ˆè®¢é˜…è€…çš„å‡½æ•°ï¼‰ï¼› è®¢é˜…è€…åœ¨å¯¹åº”çš„è§‚å¯Ÿè€…å¹³å°ä¸Šæ³¨å†Œäº‹ä»¶ï¼Œç»‘å®šå‘å¸ƒè€…ä¿¡æ¯ï¼› è§‚å¯Ÿè€…å…ˆè”ç³»åˆ° Dep ç®¡å®¶ï¼Œå°†è®¢é˜…äº‹ä»¶å­˜æ”¾è‡³ç®¡å®¶å¤„ï¼› å¾…ç®¡å®¶æ‹¿åˆ°äº†å‘å¸ƒè€…æ–°æƒ…æŠ¥ï¼Œåˆ™å“åº”æ‰€æœ‰å­˜å‚¨å¥½çš„è®¢é˜…è€…çš„è®¢é˜…äº‹ä»¶äº†ã€‚ æ€è·¯é€æ¸æ¸…æ™°ï¼Œé‚£ä¹ˆè¿™ä¹ˆä¸ªæµç¨‹æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºå¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728target = null;class Dep &#123; constructor() &#123; this.sub = []; &#125; depend() &#123; if (target &amp;&amp; !this.sub.includes(target)) &#123; this.sub.push(target); &#125; &#125; notify() &#123; this.sub.forEach(cb =&gt; cb()); &#125;&#125;function watcher(callback) &#123; target = callback; // æ­¤å¤„è§¦å‘ä¸€ä¸‹ç›‘å¬å¯¹è±¡çš„ get æ–¹æ³•ï¼Œå°† callback æ–¹æ³•åŠ å…¥ Dep ä¾èµ–çš„è®¢é˜…é˜Ÿåˆ—ä¸­ // ç„¶åæ¸…é™¤æ‰ targetï¼Œé˜²æ­¢é‡å¤æ³¨å†Œ target = null;&#125;watcher(() =&gt; &#123; // æ­¤å¤„æ˜¯è®¢é˜…äº‹ä»¶&#125;) è¿™æ ·æˆ‘ä»¬å°±è®²è§‚å¯Ÿè€…çš„è®¢é˜…æ–¹æ³•å’Œ Dep ä¾èµ–ç»™ç»‘å®šä¸Šäº†ã€‚è€ƒè™‘åˆ° watcher çš„é€šç”¨æ€§ï¼Œè¿™é‡Œå†™äº†ä¸€ä¸ªåŠ å¼ºç‰ˆçš„ demoï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899let target = null;// ï¼ˆç§äººç®¡å®¶ï¼‰ä¾èµ–æ”¶é›†class Dep &#123; constructor() &#123; this.subscriberList = []; &#125; // å°†å½“å‰çš„ watcher åŠ å…¥ dep ä¸­ addSub(watcher) &#123; this.subscriberList.push(watcher) &#125; // æ·»åŠ è®¢é˜…æ–¹æ³• depend() &#123; if (target) &#123; target.addDep(this); &#125; &#125; // å‘å¸ƒè€…æ›´æ–°æ¶ˆæ¯ï¼Œè§¦å‘æ‰€æœ‰çš„è®¢é˜…æ–¹æ³• notify() &#123; this.subscriberList.forEach(sub =&gt; &#123; sub.update(); &#125;); &#125;&#125;// ï¼ˆå¹³å°ï¼‰è§‚å¯Ÿè€…class Watcher &#123; constructor(data = &#123;&#125;, key = '', cb = () =&gt; &#123;&#125;) &#123; this.cb = cb; this._data = data; this.key = key; target = this; // è§¦å‘ getterï¼Œå­˜å‚¨æœ¬ watcher this.value = data[key]; // é˜²æ­¢åå¤è§¦å‘ target = null; &#125; addDep(dep) &#123; dep.addSub(this); &#125; update() &#123; const newVal = this._data[this.key]; this.value = newVal; this.cb(newVal); &#125;&#125;// ï¼ˆå‘å¸ƒè€…å’Œç®¡å®¶çš„è”ç³»æ–¹å¼ï¼‰ç›‘å¬å™¨function observer(data = &#123;&#125;) &#123; Object.keys(data).forEach(key =&gt; &#123; let val = data[key]; const dep = new Dep(); Object.defineProperty(data, key, &#123; get() &#123; if (target) &#123; // get æ—¶æ·»åŠ ä¾èµ– dep.depend(); &#125; return val; &#125;, set(newVal) &#123; if (newVal === val) &#123; return; &#125; // set æ—¶è§¦å‘æ›´æ–° val = newVal; dep.notify(); &#125; &#125;) &#125;);&#125;// å‘å¸ƒè€…const publisher = &#123; bookName: 'book', bookContent: 'hello world'&#125;// ç®¡å®¶å¼€å§‹è§‚æµ‹å‘å¸ƒè€…observer(publisher);// è®¢é˜…è€…åœ¨å¹³å°ä¸Šè®¢é˜…å‘å¸ƒè€…çš„éƒ¨åˆ†ä¿¡æ¯new Watcher(publisher, 'bookName', name =&gt; &#123; console.log(`new book name is $&#123;name&#125;`);&#125;);new Watcher(publisher, 'bookContent', content =&gt; &#123; console.log(`new book content is $&#123;content&#125;`);&#125;);// å‘å¸ƒè€…å‘å¸ƒä¿¡æ¯publisher.bookName = 'new book';publisher.bookContent = 'new content'; Vue è§‚å¯Ÿè€…çš„å®ç°åœ¨çœ‹æºç ä¹‹å‰ï¼Œé¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹ Vue çš„å®ç°åŸç†å›¾ï¼š å…ˆä»…è€ƒè™‘ data éƒ¨åˆ†çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¤§è‡´æ­¥éª¤ä¸ºï¼š ä¸ºå‘å¸ƒè€… data åšæ•°æ®ç›‘å¬å¤„ç†ï¼› ä¸ºåŠ«æŒæ–¹æ³•æ·»åŠ  Dep ä¾èµ–æ”¶é›†ï¼Œget å­˜å‚¨ target ç›®æ ‡ï¼Œset è®¾ç½® target ç›®æ ‡ï¼› ä¾èµ–æ”¶é›†è§¦å‘åï¼Œè§¦å‘ Watch è§‚å¯Ÿè€…ï¼Œé€šçŸ¥è®¢é˜…è€…æ”¹å˜ã€‚ å› ä¸ºæµç¨‹å›¾ä¸­åªæ˜¯è¯¦ç»†å±•ç¤ºäº†å“åº”å¼éƒ¨åˆ†çš„å˜åŠ¨ï¼Œä¸ºäº†ä¾¿äºå¤§å®¶æ›´æ¸…æ¥šçš„ç†è§£è¿™éƒ¨åˆ†çš„æµç¨‹ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆè§£é‡Šä¸€ä¸‹ Vue ä¸­å®Œæ•´çš„æµç¨‹ï¼š é¡µé¢å¼€å§‹æ¸²æŸ“ï¼Œå¯¹ data è¿›è¡Œä¾èµ–æ”¶é›†ï¼› ä¾èµ–æ”¶é›†å®Œæ¯•ï¼Œå¼€å§‹ç›‘æµ‹è®¢é˜…è€…çš„æ–¹æ³•ï¼Œå¹¶å­˜å‚¨åŸå€¼æ–¹ä¾¿å˜æ›´æ—¶çš„å¯¹æ¯”ï¼› å› ä¸ºä¾èµ–æ”¶é›†å®Œæ¯•ï¼Œè¦å­˜å‚¨åŸå€¼åˆ™è§¦å‘äº† get äº‹ä»¶ï¼Œæ­¤æ—¶æ·»åŠ  dep ä¾èµ–ï¼Œå°†å¯¹åº”ç”Ÿæˆçš„ watcher å­˜å‚¨å…¥ä¾èµ–åˆ—è¡¨å†… é¡µé¢æ¸²æŸ“å®Œæˆï¼Œç”¨æˆ·è§¦å‘é¡µé¢æŸäº›ç‚¹å‡»äº‹ä»¶ï¼ˆæ¯”å¦‚æŒ‰é’®ï¼‰ï¼› ç‚¹å‡»äº‹ä»¶ç»‘å®šäº†æŸä¸ª methods æ–¹æ³•ï¼Œè¯¥ methods æ–¹æ³•ä½¿å¾— data éƒ¨åˆ†å†…å®¹æ›´æ–°äº†ï¼› å› ä¸ºå·²ç»å¯¹ data è¿›è¡Œäº†ä¾èµ–æ”¶é›†ï¼Œè§¦å‘äº†å¯¹åº”çš„ set æ–¹æ³•ï¼› set æ–¹æ³•å¯¹æ¯”æ–°æ—§å€¼å‘ç°å€¼æ›´æ–°äº†ï¼Œæ­¤æ—¶é‡æ–°æ”¶é›†ä¾èµ–æ–°çš„å€¼ï¼ˆç‰¹åˆ«æ˜¯å¯¹è±¡çš„æƒ…å†µï¼‰ï¼Œç„¶åé€šçŸ¥å®ƒçš„ç§æœ‰ç®¡å®¶ Dep è¿›è¡Œæ›´æ–°ï¼› Dep ä¾èµ–å¼€å§‹éå†å…¶æ‰€å­˜å‚¨çš„æ•°ç»„ï¼Œä¸ºè¯¥å‘å¸ƒè€…çš„è®¢é˜…è€…ä»¬å‘é€æ¶ˆæ¯ï¼Œè§¦å‘è®¢é˜…äº‹ä»¶ã€‚ å„è®¢é˜…è€…äº‹ä»¶è§¦å‘ update æ›´æ–°ï¼Œæ­¤æ—¶ä¾¿æµè½¬åˆ° render æ¸²æŸ“ï¼Œä¹‹åé¡µé¢å°±æ›´æ–°å•¦ï¼ ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£æºç ï¼Œè¿™é‡Œæ‰‹åŠ¨å®ç°äº†ä¸€ä¸ªç®€å•çš„ observer æ¨¡å¼ï¼ŒåŸºæœ¬æ˜¯æŒ‰ç€æºç çš„æ€è·¯ä¸€ç‚¹ç‚¹æ’¸å‡ºæ¥çš„ï¼Œæ³¨é‡Šå¾ˆå…¨ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ï¼ ä¸ªäººç‰ˆ vue-observer æºç  æºç åœ°å€æ‰€æœ‰çš„ demo éƒ½å†™å…¥ä»“åº“äº†ï¼Œä»“åº“åœ°å€ä¸ºï¼šä¼ é€é—¨","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"JS æ¨¡å‹","slug":"JS-æ¨¡å‹","permalink":"https://monocy.gitee.io/tags/JS-æ¨¡å‹/"}]},{"title":"åˆ†æ Vue çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰","slug":"åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰","date":"2019-10-10T07:34:04.000Z","updated":"2022-07-26T13:15:59.165Z","comments":true,"path":"2019/10/10/åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰/","link":"","permalink":"https://monocy.gitee.io/2019/10/10/åˆ†æ-Vue-çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¸Šï¼‰/","excerpt":"å‰è¨€æœ€è¿‘åˆé¼“èµ·å‹‡æ°”é¼“æ£ vue æºç ï¼Œç„¶åä¸ç»æ„é—´ç…äº†ç…æœ€æ—©å¼€å§‹å­¦ä¹  vue æºç æ—¶è·Ÿç€æ’¸çš„ä¸€ä¸ª vue-observer çš„å®ä¾‹ï¼Œå‘ç°è‡ªå·±å¯¹äºè§‚å¯Ÿè€…æ¨¡å¼è¿˜æ˜¯æœ‰äº›ä¸å¤ªæ˜ç™½ã€‚å› æ­¤ï¼Œåœ¨å­¦ä¹ äº†ã€ŠJavaScript è®¾è®¡æ¨¡å¼ã€‹çš„â€œè§‚å¯Ÿè€…æ¨¡å¼â€ä¸€ç¯‡åï¼Œæ€»ç®—æœ‰äº†ä¸€ç‚¹çµæ„Ÿã€‚ç›®å‰è¶çµæ„Ÿè¿˜åœ¨ï¼Œåœ¨æ­¤ä¾¿è®°å½•ä¸‹æˆ‘çš„ç†è§£ã€‚","text":"å‰è¨€æœ€è¿‘åˆé¼“èµ·å‹‡æ°”é¼“æ£ vue æºç ï¼Œç„¶åä¸ç»æ„é—´ç…äº†ç…æœ€æ—©å¼€å§‹å­¦ä¹  vue æºç æ—¶è·Ÿç€æ’¸çš„ä¸€ä¸ª vue-observer çš„å®ä¾‹ï¼Œå‘ç°è‡ªå·±å¯¹äºè§‚å¯Ÿè€…æ¨¡å¼è¿˜æ˜¯æœ‰äº›ä¸å¤ªæ˜ç™½ã€‚å› æ­¤ï¼Œåœ¨å­¦ä¹ äº†ã€ŠJavaScript è®¾è®¡æ¨¡å¼ã€‹çš„â€œè§‚å¯Ÿè€…æ¨¡å¼â€ä¸€ç¯‡åï¼Œæ€»ç®—æœ‰äº†ä¸€ç‚¹çµæ„Ÿã€‚ç›®å‰è¶çµæ„Ÿè¿˜åœ¨ï¼Œåœ¨æ­¤ä¾¿è®°å½•ä¸‹æˆ‘çš„ç†è§£ã€‚ è§‚å¯Ÿè€…æ¨¡å¼ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼å‘¢ï¼Ÿé¦–å…ˆå¼•ç”¨ä¸€ä¸‹æ¯”è¾ƒæ­£è§„çš„è¯´æ³•ï¼š è§‚å¯Ÿè€…æ¨¡å¼ï¼šåˆè¢«ç§°ä½œå‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼æˆ–æ¶ˆæ¯æœºåˆ¶ï¼Œå®šä¹‰äº†ä¸€ç§ä¾èµ–å…³ç³»ï¼Œè§£å†³äº†ä¸»ä½“å¯¹è±¡ä¸è§‚å¯Ÿè€…ä¹‹é—´åŠŸèƒ½çš„è€¦åˆã€‚ ç®€å•æ¥è¯´ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦å®ç°çš„æ˜¯ä¸€ç§å¯¹äºæœªæ¥å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…åšçš„ä¸€ç§æ¶ˆæ¯è®¢é˜…å¤„ç†ã€‚DOM2 çº§äº‹ä»¶ä¸­çš„ addEventListener æ–¹æ³•ä»¥åŠç”Ÿæ´»ä¸­çš„è®¢æŠ¥çº¸éƒ½åŸºæœ¬ä¸Šå°±æ˜¯è¿™ç§åŸç†ã€‚ é¦–å…ˆæˆ‘ä»¬å¾—æœ‰å‘å¸ƒè€…å’Œè®¢é˜…è€…ï¼Œä»–ä»¬ä¹‹é—´å¦‚ä½•è”ç³»èµ·æ¥é‚£å°±éœ€è¦ä¸€ä¸ªè§‚å¯Ÿè€…å¹³å°ã€‚è®¢é˜…è€…åœ¨è§‚å¯Ÿè€…å¹³å°ä¸Šå‘å‘å¸ƒè€…æ·»åŠ è®¢é˜…ï¼Œå¾…å‘å¸ƒè€…åœ¨å‘å¸ƒä¿¡æ¯åï¼Œè§‚å¯Ÿè€…å¹³å°è·å–åˆ°æ›´æ–°çš„ä¿¡æ¯åï¼Œç»™å„ä¸ªè®¢é˜…è€…å‘æé†’è¡¨ç¤ºâ€œä½ å…³æ³¨çš„å‘å¸ƒè€…æ›´æ–°äº†æ–‡æ¡£å“¦ï½â€ï¼Œè¿™æ ·è®¢é˜…è€…å°±èƒ½å¾—åˆ°æ›´æ–°åçš„æ¶ˆæ¯å†…å®¹äº†ã€‚ å…¶å®å‘å¸ƒè€…å’Œè®¢é˜…è€…éƒ½å¾ˆç®€å•ï¼Œå…³é”®ç‚¹è¿˜æ˜¯è§‚å¯Ÿè€…è¿™ä¸ªä¸­é—´å¹³å°çš„å®ç°ã€‚æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„ç»“æœå…¶å®å¯ç®€åŒ–ä¸ºå¦‚ä¸‹ä»£ç ï¼š 12345678910// è§‚å¯Ÿè€…ï¼ˆå¹³å°ï¼‰function observer() &#123; /***/ &#125;// å‘å¸ƒè€…ï¼ˆå¹³å°ä½œè€…ï¼‰const publisher = &#123; bookName: 'Hello World!', content: 'This is a book' &#125;// è®¢é˜…è€…ï¼ˆåœ¨å¹³å°ä¸Šè®¢é˜…æŸä½œè€…ï¼‰const subscriber = observer(publisher);// ä¹‹å publisher æ”¹å˜ä»€ä¹ˆä¸œè¥¿ï¼Œobserver è§¦å‘è®¢é˜…çš„æ¶ˆæ¯å³å¯ã€‚ ç®€å•çš„è§‚å¯Ÿè€…å‰é¢åˆ†æåˆ°ï¼Œè§‚å¯Ÿè€…å…¶å®å°±æ˜¯å¯¹äºå‘å¸ƒè€…å’Œè®¢é˜…è€…çš„ä¸€ä¸ªä¸­é—´å¹³å°ï¼Œå› æ­¤è§‚å¯Ÿè€…æ‰€éœ€è¦çš„èƒ½åŠ›åŒ…æ‹¬ï¼šæ·»åŠ è®¢é˜…è€…ã€æ¶ˆæ¯æ¨é€å’Œåˆ é™¤è®¢é˜…è€…ã€‚å…ˆä¸è€ƒè™‘æœ€ç»ˆè‡ªåŠ¨åŒ–å¤„ç†å‘å¸ƒè®¢é˜…çš„æµç¨‹ä»¥åŠåˆ é™¤æ“ä½œï¼Œæ‰‹åŠ¨å¤„ç†çš„å¤§è‡´æµç¨‹ä¸ºï¼š å¹³å°ä¸Šæ–°å¢äº†ä¸€ä¸ªè®¢é˜…è€…ï¼Œå¹¶è®¢é˜…äº†ä¸€ä¸ªå‘å¸ƒè€…ï¼› å‘å¸ƒè€…æ›´æ”¹äº†è‡ªèº«çš„æŸäº›å±æ€§ï¼› å¹³å°é€šçŸ¥è®¢é˜…è€…ï¼Œâ€œä½ è®¢é˜…çš„å‘å¸ƒè€…æ›´æ–°äº†æ–°å†…å®¹â€ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å‹ä¸ºï¼š 12345678910111213141516171819202122232425262728293031323334353637class Observer &#123; constructor() &#123; this.subscriberList = []; &#125; // æ·»åŠ è®¢é˜…æ–¹æ³• addSubscriber(subscribFunc) &#123; if (subscribFunc &amp;&amp; !this.subscriberList.includes(subscribFunc)) &#123; this.subscriberList.push(subscribFunc); &#125; &#125; // å‘å¸ƒè€…æ›´æ–°æ¶ˆæ¯ï¼Œè§¦å‘æ‰€æœ‰çš„è®¢é˜…æ–¹æ³• notify() &#123; this.subscriberList.forEach(subscribFunc =&gt; subscribFunc()); &#125;&#125;// è§‚å¯Ÿè€…const observer = new Observer();// å‘å¸ƒè€…const publisher = &#123; bookName: 'Hello' &#125;;// è®¢é˜…è€…const subscriber = function () &#123; console.log( `The publisher your followed update the book $&#123;publisher.bookName&#125;`, );&#125;;// è®¢é˜…è€…è®¢é˜…äº‹ä»¶éœ€è¦å¹³å°å®Œæˆobserver.addSubscriber(subscriber);// å‘å¸ƒè€…æ›´æ–°æ¶ˆæ¯publisher.bookName = 'Hello World';// å¹³å°æ ¹æ®è®¢é˜…è€…è®¾ç½®çš„äº‹ä»¶é€šçŸ¥è®¢é˜…è€…ï¼Œä½ æœ‰æ–°è®¢é˜…ä¿¡æ¯observer.notify(); ç¨å¤æ‚çš„è§‚å¯Ÿè€…å‰é¢åŸºæœ¬ä¸Šå‹¾å‹’å‡ºäº†åŸºæœ¬çš„è§‚å¯Ÿè€…æ¨¡å‹å¤§è‡´é€»è¾‘ï¼Œè™½ç„¶æ˜¯çº¯â€œæ‰‹åŠ¨â€æ“ä½œï¼Œä½†æ˜¯é¡ºç€è¿™ä¸ªæœºåˆ¶èµ°ä¸‹å»å°±æ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦çš„æ˜¯æ…¢æ…¢å°†â€œæ‰‹åŠ¨â€è½¬å˜ä¸ºâ€œè‡ªåŠ¨â€ï¼Œè€Œè¦å®ç°è¿™ç§è½¬å˜åˆ™éœ€è¦ä¸€äº›ä¸­é—´çš„å°è£…ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´çš„ä¾èµ–ç±»ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼š ä¸ºæ¯ä¸ªå‘å¸ƒè€…ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ä¾èµ–æ”¶é›†å¯¹è±¡ï¼ˆç±»æ¯” Vue ä¸­ data è¿”å›çš„å¯¹è±¡ï¼‰ ä¸ºè´Ÿè´£ä¾èµ–æ”¶é›†çš„å¯¹è±¡æ·»åŠ è®¢é˜…è€…äº‹ä»¶ï¼ˆç±»æ¯” Vue ä¸­çš„ methods å’Œ computed å†…å®¹ï¼‰ å‘å¸ƒè€…æ›´æ–°å†…å®¹ï¼Œè®¢é˜…è€…äº‹ä»¶è§¦å‘ å› ä¸ºå¾…ä¾èµ–æ”¶é›†çš„å¯¹è±¡æ€»æ˜¯åŠ¨æ€å˜åŠ¨çš„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å¾—ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ target å¯¹è±¡æ¥åŠ¨æ€ç»‘å®šå½“å‰å˜åŠ¨çš„å‘å¸ƒè€…ï¼Œæ­¤æ—¶çš„ä»£ç å¯ä»¥æŠ½è±¡ä¸ºï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748let target = null;class Dep &#123; constructor() &#123; this.subscriberList = []; &#125; // æ·»åŠ è®¢é˜…æ–¹æ³• depend() &#123; if (target &amp;&amp; !this.subscriberList.includes(target)) &#123; this.subscriberList.push(target); &#125; &#125; // å‘å¸ƒè€…æ›´æ–°æ¶ˆæ¯ï¼Œè§¦å‘æ‰€æœ‰çš„è®¢é˜…æ–¹æ³• notify() &#123; this.subscriberList.forEach(sub =&gt; sub()); &#125;&#125;// ä¸­é—´ä¾èµ–çš„å¹³å°const dep = new Dep();// å‘å¸ƒè€…ï¼ˆdata å¯¹è±¡ä¸­çš„å±æ€§ï¼Œä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œç›´æ¥æ‰©å‡ºæ¥äº†ï¼Œå†™æˆå¯¹è±¡ä¹Ÿè¡Œï¼‰let bookName = \"Hello World\";let bookContent = \"This is a book\";let publishInfo = ''; // æ¶ˆæ¯æç¤º// ç»‘å®šå½“å‰çš„è®¢é˜…è€…ï¼ˆmethod æ–¹æ³•ï¼‰const target = function () &#123; publishInfo = `The book $&#123;bookName&#125;â€˜s content is $&#123;bookContent&#125;`;&#125;// è®¢é˜…è€…è¿˜æœªè®¢é˜…ä¿¡æ¯console.log(publishInfo); // â€˜â€™// è®¢é˜…è€…åœ¨å¹³å°ä¸Šæ·»åŠ è®¢é˜…äº‹ä»¶ï¼Œå¹¶æ¨é€ç”¨æˆ·ç›®å‰çš„æœ€æ–°ä¿¡æ¯dep.depend();target();console.log(publishInfo) // The book Hello Worldâ€˜s content is This is a book// publisher æ›´æ–°æ¶ˆæ¯bookContent = 'The content is \"Hello World\"';// å¹³å°è¿˜æœªå¤„ç†å‰ï¼ŒåŸä¿¡æ¯æ²¡æœ‰æ”¹å˜console.log(publishInfo) // The book Hello Worldâ€˜s content is This is a book// å¹³å°è§‚å¯Ÿåˆ° publisher æ›´æ–°å†…å®¹äº†ï¼Œæ›´æ–°äº†ç”¨æˆ·çš„é€šçŸ¥ä¿¡æ¯dep.notify();// å‘ˆç°æ›´æ–°åçš„ä¿¡æ¯console.log(publishInfo) // The book Hello Worldâ€˜s content is The content is \"Hello World\" ä¸å‰é¢çš„ç›¸æ¯”ï¼Œç›®å‰è¿™ä¸€ç‰ˆçš„ä¼˜ç‚¹åœ¨äºï¼š æ¯ä¸ªå‘å¸ƒè€…éƒ½æœ‰å±äºè‡ªå·±çš„å°ç®¡å®¶ï¼Œè€Œä¸æ˜¯ä¸å„è®¢é˜…è€…ä¸€ä¸€ç»‘å®šï¼ˆåŸç»‘å®šæ–¹å¼ï¼šå‘å¸ƒè€… -&gt; å¹³å° -&gt; è®¢é˜…è€…ï¼‰ï¼Œæ–¹ä¾¿æ¶ˆæ¯æ¨é€ç®¡ç†ï¼› å¹³å°èƒ½åŠ¨æ€ç»‘å®šå‘å¸ƒè€…ï¼ˆåŸæ¥æ˜¯é€šè¿‡è®¢é˜…è€…æ˜¾ç¤ºç»‘å®šå‘å¸ƒè€…ï¼‰ï¼› ä½†æ˜¯ç›®å‰è¿˜æœ‰ä¸€äº›ç¼ºé™·ï¼Œé‚£å°±æ˜¯ï¼šè¿˜æ²¡æœ‰å®ç°åŠ¨æ€çš„è§‚å¯Ÿå˜åŒ– å‚è€ƒæ–‡ç«  ä»¥ Vue ä¸ºä¾‹ï¼Œè§£é‡Š JavaScript çš„ååº”æ€§","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"JS æ¨¡å‹","slug":"JS-æ¨¡å‹","permalink":"https://monocy.gitee.io/tags/JS-æ¨¡å‹/"}]},{"title":"è®° JS å¯¹è±¡å±æ€§é¡ºåº","slug":"è®°-JS-å¯¹è±¡å±æ€§é¡ºåº","date":"2019-10-09T07:28:46.000Z","updated":"2022-07-26T13:15:10.891Z","comments":true,"path":"2019/10/09/è®°-JS-å¯¹è±¡å±æ€§é¡ºåº/","link":"","permalink":"https://monocy.gitee.io/2019/10/09/è®°-JS-å¯¹è±¡å±æ€§é¡ºåº/","excerpt":"å‰è¨€æ—©æœŸä¸åå°å¯¹æ¥æ¥å£æ—¶ï¼Œè®©åå°åŒºåˆ†å¼€æ•°ç»„ä¸å¯¹è±¡çš„ä¼ é€’å‚æ•°ï¼Œå¯¹äºä¸ºä»€ä¹ˆä¹Ÿä»…ä»…åªæ˜¯çŸ¥é“å¯¹è±¡éå†é¡ºåºæ— æ³•åƒæ•°ç»„ä¸€æ ·å¾—åˆ°ä¿è¯ï¼Œå…·ä½“æ˜¯æ€ä¹ˆä¸ªè§„åˆ™è¿˜æ˜¯ä¸å¤ªäº†è§£ã€‚æœ€è¿‘åœ¨å­¦ä¹ äº†è§£ Reflect éƒ¨åˆ†çŸ¥è¯†æ—¶ï¼Œæ­£å¥½åˆçœ‹åˆ°äº†å¯¹è±¡å±æ€§æ’åºéƒ¨åˆ†çš„å†…å®¹ï¼Œå› æ­¤åšä¸ªç¬”è®°è®°å½•ä¸‹æ¥ï¼Œç”¨ä½œå¤‡å¿˜ã€‚ è¯¥éƒ¨åˆ†åŸºæœ¬ä¸Šæ¥è‡ªä¹¦æœ¬å†…å®¹ï¼Œå¤¹å¸¦ä¸€äº›ä¸ªäººç†è§£","text":"å‰è¨€æ—©æœŸä¸åå°å¯¹æ¥æ¥å£æ—¶ï¼Œè®©åå°åŒºåˆ†å¼€æ•°ç»„ä¸å¯¹è±¡çš„ä¼ é€’å‚æ•°ï¼Œå¯¹äºä¸ºä»€ä¹ˆä¹Ÿä»…ä»…åªæ˜¯çŸ¥é“å¯¹è±¡éå†é¡ºåºæ— æ³•åƒæ•°ç»„ä¸€æ ·å¾—åˆ°ä¿è¯ï¼Œå…·ä½“æ˜¯æ€ä¹ˆä¸ªè§„åˆ™è¿˜æ˜¯ä¸å¤ªäº†è§£ã€‚æœ€è¿‘åœ¨å­¦ä¹ äº†è§£ Reflect éƒ¨åˆ†çŸ¥è¯†æ—¶ï¼Œæ­£å¥½åˆçœ‹åˆ°äº†å¯¹è±¡å±æ€§æ’åºéƒ¨åˆ†çš„å†…å®¹ï¼Œå› æ­¤åšä¸ªç¬”è®°è®°å½•ä¸‹æ¥ï¼Œç”¨ä½œå¤‡å¿˜ã€‚ è¯¥éƒ¨åˆ†åŸºæœ¬ä¸Šæ¥è‡ªä¹¦æœ¬å†…å®¹ï¼Œå¤¹å¸¦ä¸€äº›ä¸ªäººç†è§£ ES6 å±æ€§é¡ºåºå¯¹äº ES6 ä¹‹å‰ï¼Œä¸€ä¸ªå¯¹è±¡çš„å±æ€§åˆ—å‡ºçš„é¡ºåºæ˜¯ä¾èµ–äºå…·ä½“å®ç°ï¼Œå¹¶æœªåœ¨è§„èŒƒä¸­å®šä¹‰ã€‚è™½ç„¶å¤šæ•°å¼•æ“æŒ‰ç…§åˆ›å»ºçš„é¡ºåºè¿›è¡Œæšä¸¾ï¼Œä½†æ˜¯å¼€å‘è€…ä»¬ä¸€ç›´å¼ºçƒˆå»ºè®®ä¸è¦ä¾èµ–è¿™ä¸ªé¡ºåºã€‚ è€Œå¯¹äº ES6 æ¥è¯´ï¼Œæ‹¥æœ‰å±æ€§çš„åˆ—å‡ºé¡ºåºåˆ™æ˜¯åˆ [[OwnPropertyKeys]] ç®—æ³•å®šä¹‰çš„ï¼ˆES6 è§„èŒƒ 9.1.12 èŠ‚ï¼‰ï¼Œå…¶é¡ºåºä¸ºï¼š é¦–å…ˆï¼ŒæŒ‰ç…§æ•°å­—ä¸Šå‡æ’åºï¼Œæšä¸¾æ‰€æœ‰çš„æ•´æ•°ç´¢å¼•æ‹¥æœ‰çš„å±æ€§ï¼› ç„¶åï¼ŒæŒ‰ç…§åˆ›å»ºé¡ºåºæšä¸¾å…¶ä½™çš„æ‹¥æœ‰çš„å­—ç¬¦ä¸²å±æ€§åï¼› æœ€åï¼ŒæŒ‰ç…§åˆ›å»ºé¡ºåºæšä¸¾æ‹¥æœ‰çš„ç¬¦å·å±æ€§ã€‚ æ­¤é¡ºåºåªå¯¹ Reflect.ownKeys(...) ï¼ˆä»¥åŠæ‰©å±•çš„ Object.getWonPropertyNames(...) å’Œ Object.getOwnPropertySymbols(...) ï¼‰æœ‰ä¿è¯ï¼Œä¸º [[OwnPropertyKeys]] ç®—æ³•ã€‚ æ­¤ç®—æ³•ä¸ä¼šéå†åŸå‹é“¾ä¸Šçš„å±æ€§ 123456789const obj = &#123;&#125;;obj[Symbol('a')] = 'symbol property';obj[1] = 'number property';obj.str = 'string property';Reflect.ownKeys(obj); // [\"1\", \"str\", Symbol(a)]Object.getOwnPropertyNames(obj); // [\"1\", \"str\"]Object.getOwnPropertySymbols(obj); // [Symbol(a)] æšä¸¾ç®—æ³•ES6 è§„èŒƒä¸­è¿˜æœ‰å¦å¤–ä¸€ç§ [[Enumerate]] ç®—æ³•ï¼ˆES6 è§„èŒƒ 9.1.11 èŠ‚ï¼‰ï¼Œå…¶åªä»ç›®æ ‡å¯¹è±¡å’Œ prototype åŸå‹é“¾äº§ç”Ÿå¯æšä¸¾å±æ€§ã€‚å…¶å¯ä»¥è§‚å¯Ÿåˆ°çš„é¡ºåºä¸å…·ä½“å®ç°æœ‰å…³ï¼Œä¸ç”±è§„èŒƒæ§åˆ¶ã€‚ å¯¹äºæ—¥å¸¸å·¥ä½œä¸­å¸¸ç”¨çš„ Object.keys(...)ã€for ... in å’Œ JSON.stringify(...)ï¼ˆè¿˜æœ‰ Reflect.enumerate(...)ï¼‰åŸºæœ¬ä¸Šå±äº [[Enumerate]] ç®—æ³•ã€‚æ­¤å››ç§æ–¹æ³•è™½ç„¶ä¸¥æ ¼ä¸Šæ˜¯é€šè¿‡ä¸åŒè·¯å¾„å®ç°æ’åºçš„ï¼Œä½†å°†å…¶ä¸ [[OwnPropertyKeys]] çš„æ’åºç›¸åŒ¹é…çš„å…·ä½“å®ç°è¿˜æ˜¯å…è®¸çš„ï¼Œä½†äº›è®¸åˆäº›å·®åˆ«ï¼š é™„ï¼šæœ¬è´¨ä¸Š Reflect.enumerate(...) å’Œ for ... in çš„å®ç°æ–¹å¼æ˜¯ä¸€æ ·çš„ 123456789101112131415161718192021function Parent() &#123;&#125;Parent.prototype = &#123; age: 123, 2: 234, [Symbol('b')]: 345&#125;const obj = new Parent();obj[Symbol('a')] = 'symbol property';obj[1] = 'number property';obj.str = 'string property';console.log(Object.keys(obj)); // ['1', 'str']console.log(JSON.stringify(obj)); // &#123;\"1\":\"number property\",\"str\":\"string property\"&#125;// å¯¹è±¡ -&gt; åŸå‹é“¾ï¼Œæ¯ä¸€å±‚çš„æ˜¾ç¤ºæ–¹å¼åŒä¸Šé¢çš„è§„èŒƒï¼Œæ•´ä½“ä¸Šçš„æ’åºåˆ™æ˜¯å’Œå…·ä½“å®ç°ç›¸å…³// æ­¤å¤„çš„å…·ä½“å®ç°åˆ™æ˜¯å…ˆå¯¹è±¡è¿™ä¸€å±‚ï¼Œç„¶ååŸå‹é“¾å±‚for (const prop in obj) &#123; console.log(prop); // 1 str 2 age&#125; æ€»ç»“å¯¹äº ES6 æ¥è¯´ï¼ŒReflect.ownKeys(...)ã€Object.getWonPropertyNames(...) å’Œ Object.getOwnPropertySymbols(...) çš„é¡ºåºéƒ½æ˜¯å¯é¢„æµ‹ä¸”å¯é çš„ï¼Œè¿™ç”±è§„èŒƒä¿è¯ã€‚æ‰€ä»¥ä¾èµ–è¿™ä¸ªé¡ºåºçš„ä»£ç æ˜¯å®‰å…¨çš„ã€‚ Reflect.enumerate(...)ã€Object.keys(â€¦)å’Œfor â€¦ inï¼ˆä»¥åŠæ‰©å±•çš„JSON.stringify(â€¦)ï¼‰è¿˜åƒè¿‡å»ä¸€æ ·ï¼Œå¯è§‚å¯Ÿåˆ°é¡ºåºæ˜¯ç›¸åŒçš„ã€‚ä½†æ˜¯è¿™ä¸ªé¡ºåºä¸å†å¿…é¡»ä¸Reflect.ownKeys(â€¦)` ç›¸åŒã€‚åœ¨ä½¿ç”¨å®ƒä»¬ä¾èµ–äºå…·ä½“å®ç°çš„é¡ºåºæ—¶è¦å°å¿ƒã€‚ æ‰©å±•é˜…è¯» Chrome Opera ä¸­ for-in è¯­å¥éå†å‡ºå¯¹è±¡å±æ€§çš„é¡ºåºä¸å®šä¹‰çš„ä¸åŒ","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"æµ…è°ˆ Proxy","slug":"æµ…è°ˆ-proxy","date":"2019-09-21T11:39:49.000Z","updated":"2022-07-26T13:14:19.680Z","comments":true,"path":"2019/09/21/æµ…è°ˆ-proxy/","link":"","permalink":"https://monocy.gitee.io/2019/09/21/æµ…è°ˆ-proxy/","excerpt":"å‰è¨€æœ€è¿‘é˜…è¯»çš„ ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸‹ç¯‡ã€‹ åŸºæœ¬ä¸Šè®²çš„éƒ½æ˜¯ ES6 çš„ä¸€äº›çŸ¥è¯†ï¼Œå…ˆå‰è·Ÿç€é˜®ä¸€å³°è€å¸ˆçš„ ã€ŠES6 å…¥é—¨ã€‹ ä¸€ä¹¦ï¼Œå°†å¤§å¤šæ•°å·¥ä½œä¸­å¸¸ç”¨çš„çŸ¥è¯†éƒ½è¿‡äº†ä¸€éï¼Œä½†æ˜¯å°‘æ•°ç¨å¾®å¤æ‚çš„å´éƒ½æ˜¯â€œç‚¹åˆ°ä¸ºæ­¢â€ï¼ŒProxy ä»£ç†æ­£å±äºè¿™ä¸€ç±»ã€‚ç°åœ¨æ­£å¥½åˆå­¦åˆ°äº†è¿™ä¸€å—ï¼Œä¸ºäº†åŠ æ·±å°è±¡ï¼Œè¿˜æ˜¯å†™ä¸€ç¯‡åšæ–‡ä»¥ä½œè®°å½•ã€‚ æ­¤ç¯‡ä»…è®°å½•ä¸€äº›åŸºç¡€å†…å®¹ï¼Œæ–¹ä¾¿ç†è§£ï¼Œæ›´ä¸ºæ·±å±‚æ¬¡çš„å†…å®¹ä¹‹åæœ‰æ—¶é—´è¿›è¡Œè¡¥å……ã€‚","text":"å‰è¨€æœ€è¿‘é˜…è¯»çš„ ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸‹ç¯‡ã€‹ åŸºæœ¬ä¸Šè®²çš„éƒ½æ˜¯ ES6 çš„ä¸€äº›çŸ¥è¯†ï¼Œå…ˆå‰è·Ÿç€é˜®ä¸€å³°è€å¸ˆçš„ ã€ŠES6 å…¥é—¨ã€‹ ä¸€ä¹¦ï¼Œå°†å¤§å¤šæ•°å·¥ä½œä¸­å¸¸ç”¨çš„çŸ¥è¯†éƒ½è¿‡äº†ä¸€éï¼Œä½†æ˜¯å°‘æ•°ç¨å¾®å¤æ‚çš„å´éƒ½æ˜¯â€œç‚¹åˆ°ä¸ºæ­¢â€ï¼ŒProxy ä»£ç†æ­£å±äºè¿™ä¸€ç±»ã€‚ç°åœ¨æ­£å¥½åˆå­¦åˆ°äº†è¿™ä¸€å—ï¼Œä¸ºäº†åŠ æ·±å°è±¡ï¼Œè¿˜æ˜¯å†™ä¸€ç¯‡åšæ–‡ä»¥ä½œè®°å½•ã€‚ æ­¤ç¯‡ä»…è®°å½•ä¸€äº›åŸºç¡€å†…å®¹ï¼Œæ–¹ä¾¿ç†è§£ï¼Œæ›´ä¸ºæ·±å±‚æ¬¡çš„å†…å®¹ä¹‹åæœ‰æ—¶é—´è¿›è¡Œè¡¥å……ã€‚ ç®€ä»‹Proxy æ˜¯ä»€ä¹ˆï¼Œå…¶æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿç®€å•æ¥è¯´ï¼Œå…¶ä¸»è¦æ˜¯æ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œçš„ä¸€äº›æ“ä½œï¼Œæ–¹ä¾¿å®šä¹‰ä¸€äº›åŸºæœ¬çš„æ“ä½œä»¥åŠé…ç½®è‡ªå®šä¹‰çš„ç”¨æˆ·è¡Œä¸ºã€‚ Proxy çš„è¯­æ³•å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š 1const proxyObject = new Proxy(target, handler); å…¶ä¸­ target ä¸ºéœ€è¦è¿›è¡Œâ€œä»£ç†â€çš„å¯¹è±¡ï¼Œhandler åˆ™æ˜¯å¯¹è¯¥å¯¹è±¡è¿›è¡Œæ‹¦æˆªçš„ä¸€äº›é…ç½®äº†ã€‚ å¼•ï¼š Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programmingï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚ handler æ–¹æ³•handler æ€»å…±æœ‰ 13 ç§å¯ä»£ç†çš„æ–¹æ³•ï¼Œæ¯ä¸€ç§æ–¹æ³•éƒ½æœ‰ä¸ä¹‹å¯¹åº”çš„ Reflect å‡½æ•°ï¼Œå…·ä½“çš„æˆ‘å°±ä¸å…¨éƒ¨åˆ—ä¸¾å‡ºæ¥äº†ï¼Œè¿™é‡Œä»Šä»‹ç»ä¸€äº›å¯èƒ½ä¼šå¸¸ç”¨çš„ï¼š getOwnPropertyDescriptor ä¸ definePropertyæ­¤ä¸¤æ“ä½œå¯ä»¥ç®—æ˜¯ä¸€ç§é…å¥—çš„æ“ä½œï¼Œä¸€ä¸ªè¯»å–å¯¹è±¡çš„å±æ€§æè¿°ç¬¦ï¼Œå¦ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617var target = &#123;&#125;;var p = new Proxy(target,&#123; getOwnPropertyDescriptor(target, prop) &#123; console.log('called' + prop); return Reflect.getOwnPropertyDescriptor(target, prop); &#125;, defineProperty(target, prop, descriptor) &#123; console.log('defined', prop); return Reflect.defineProperty(target, prop, descriptor); &#125;&#125;);p.age = 123;// called age// defined age æ³¨æ„ï¼š å½“ handler ä¸­æœ‰è®¾ç½® get/set æ–¹æ³•æ—¶ï¼Œæ­¤ä¸¤ trap ä¼šè¢«è¦†ç›–æ‰ã€‚ get ä¸ setæ­¤ä¸¤æ–¹æ³•ä¸€çœ¼ä¾¿çŸ¥æ˜¯æ‹¦æˆªå¯¹è±¡çš„è¯»å†™æ“ä½œï¼Œä¸ä¸Šé¢çš„ä¸åŒçš„æ˜¯ï¼Œæ­¤ä»…ä»…æ¶‰åŠåˆ°è¯»ä¸å†™çš„é…ç½®ï¼Œæ›´ä¸ºè¯¦ç»†çš„é…ç½®è¿˜æ˜¯å¾—ä¾é  defineProperty æ–¹æ³•ã€‚ 12345678910111213141516171819202122var target = &#123;&#125;var p = new Proxy(target,&#123; get(target, prop)&#123; console.log('get', prop) return Reflect.get(target, prop) || '-'; // ç›´æ¥ target[prop] ç»“æœä¹Ÿä¸€è‡´ &#125;, set(target, prop, value, receiver) &#123; console.log('set', prop, value); return Reflect.set(target, prop, value, receiver); &#125;&#125;);p.a = 123;console.log(p.a);// set a 123// get a// 123 apply ä¸ constructæ­¤ä¸¤æ–¹æ³•ä¸»è¦ç”¨äºæ‰©å±•æ„é€ å‡½æ•°ï¼Œä¾‹å¦‚ MDN ä¸Šçš„ extend çš„æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556function extend(sup, base) &#123; // è·å– base çš„ constructor æè¿°ï¼ˆä¸æ˜¯åŸå‹é“¾æè¿°ï¼Œè€Œæ˜¯æ„é€ å‡½æ•°æè¿°ï¼‰ // base === base.prototype.constructor var descriptor = Object.getOwnPropertyDescriptor( base.prototype, \"constructor\" ); // base çš„ prototype ç»§æ‰¿ sup çš„ prototype base.prototype = Object.create(sup.prototype); // æ·»åŠ  base æ„é€ å‡½æ•°çš„ä»£ç† var handler = &#123; // new å¯¹è±¡æ—¶ä¸ºç›®æ ‡å¯¹è±¡ç»‘å®š __proto__ é“¾ï¼ˆå°±æ˜¯æ‰‹åŠ¨å®ç° new çš„è¿‡ç¨‹ï¼‰ construct: function(target, args) &#123; // åˆ›å»ºç›®æ ‡å‡½æ•° var obj = Object.create(base.prototype); // æ³¨ï¼šthis ä¸º handler å¯¹è±¡ï¼Œè§¦å‘ apply æ–¹æ³•ï¼Œç»‘å®šç¤ºä¾‹å±æ€§ this.apply(target, obj, args); // è¿”å›ç›®æ ‡å‡½æ•° return obj; &#125;, // è°ƒç”¨ç›®æ ‡å‡½æ•°æ—¶ï¼Œå°† sup çš„ base çš„ä½œç”¨åŸŸç»‘å®šè‡³å®ä¾‹å¯¹è±¡ // ä¹Ÿå°±æ˜¯åŸæ¥æ„é€ å‡½æ•°çš„é‚£ç§ apply/call å†™æ³• apply: function(target, that, args) &#123; sup.apply(that, args); base.apply(that, args); &#125; &#125;; var proxy = new Proxy(base, handler); // æ„é€ å‡½æ•°æ·»åŠ ä»£ç†æ‹¦æˆª descriptor.value = proxy; Object.defineProperty(base.prototype, \"constructor\", descriptor); // è¿”å›é…ç½®åçš„ä»£ç† return proxy;&#125;var Person = function(name)&#123; this.name = name&#125;;// æ³¨æ„ name éœ€å†™åœ¨ age å‰é¢ï¼Œä¸çˆ¶ç±»ä¿æŒä¸€è‡´// å†…éƒ¨ä¸åœ¨éœ€è¦ apply/call æ–¹æ³•ï¼Œå·²ç»é€šè¿‡ä»£ç†å¤„ç†äº†var Boy = extend(Person, function(name, age) &#123; this.age = age;&#125;);Boy.prototype.sex = \"M\";// æ­¤æ‰ä¼šå‡ºå‘ handlervar Peter = new Boy(\"Peter\", 13);console.log(Peter.sex); // \"M\"console.log(Peter.name); // \"Peter\"console.log(Peter.age); // 13 å‚è€ƒæ–‡ç«  Proxy ES6 Proxy MDN handler MDN","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"Proxy","slug":"Proxy","permalink":"https://monocy.gitee.io/tags/Proxy/"}]},{"title":"IntersectionObserver ä¸å»¶è¿ŸåŠ è½½","slug":"IntersectionObserver-ä¸å»¶è¿ŸåŠ è½½","date":"2019-09-10T11:18:42.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/09/10/IntersectionObserver-ä¸å»¶è¿ŸåŠ è½½/","link":"","permalink":"https://monocy.gitee.io/2019/09/10/IntersectionObserver-ä¸å»¶è¿ŸåŠ è½½/","excerpt":"å‰è¨€éšç€é¡¹ç›®å›¾è¡¨ä½¿ç”¨çš„å¤æ‚ç¨‹åº¦çš„æå‡ï¼Œâ€œå¤§æ•°æ®â€ä¸å¤šå›¾è¡¨æ¸²æŸ“å¸¦æ¥çš„å½±å“æ˜¯é¡µé¢å“åº”æ…¢ã€ç”¨æˆ·ä½“éªŒéšæ—¶é—´è¶Šæ¥è¶Šç³Ÿã€‚é€šè¿‡ chrome çš„ performance åˆ†æå‡ºçš„åŸå› æ˜¯ï¼šæ¥å£è€—æ—¶åŸºæœ¬å¯å¿½ç•¥ä¸è®¡ï¼Œé¡µé¢æ¸²æŸ“è€—æ—¶æ‰æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„çœŸæ­£å½±å“ã€‚å› æ­¤å¦‚ä½•æ›´â€œæ™ºèƒ½â€çš„åŠ è½½æ¸²æŸ“çš„å›¾è¡¨æ‰æ˜¯é—®é¢˜è§£å†³çš„å…³é”®ï¼Œè€Œè¿™å°±è¦èŠåˆ°â€œå»¶è¿ŸåŠ è½½â€äº†ã€‚","text":"å‰è¨€éšç€é¡¹ç›®å›¾è¡¨ä½¿ç”¨çš„å¤æ‚ç¨‹åº¦çš„æå‡ï¼Œâ€œå¤§æ•°æ®â€ä¸å¤šå›¾è¡¨æ¸²æŸ“å¸¦æ¥çš„å½±å“æ˜¯é¡µé¢å“åº”æ…¢ã€ç”¨æˆ·ä½“éªŒéšæ—¶é—´è¶Šæ¥è¶Šç³Ÿã€‚é€šè¿‡ chrome çš„ performance åˆ†æå‡ºçš„åŸå› æ˜¯ï¼šæ¥å£è€—æ—¶åŸºæœ¬å¯å¿½ç•¥ä¸è®¡ï¼Œé¡µé¢æ¸²æŸ“è€—æ—¶æ‰æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„çœŸæ­£å½±å“ã€‚å› æ­¤å¦‚ä½•æ›´â€œæ™ºèƒ½â€çš„åŠ è½½æ¸²æŸ“çš„å›¾è¡¨æ‰æ˜¯é—®é¢˜è§£å†³çš„å…³é”®ï¼Œè€Œè¿™å°±è¦èŠåˆ°â€œå»¶è¿ŸåŠ è½½â€äº†ã€‚ å»¶è¿ŸåŠ è½½å»¶è¿ŸåŠ è½½æ¯”è¾ƒé€šä¿—çš„è¯´æ³•ä¸ºâ€œæ‡’åŠ è½½â€ï¼Œå…¶ä½¿ç”¨çš„åœºæ™¯éƒ½æ˜¯åœ¨é¡µé¢åŠ è½½æ—¶ä¼˜å…ˆåŠ è½½å…³é”®èµ„æºï¼ˆæ¯”å¦‚æ•´ä½“çš„é¡µé¢è½®å»“ç­‰ï¼‰ï¼Œéå…³é”®èµ„æºåˆ™åœ¨éœ€è¦æ—¶æ‰è¿›è¡ŒåŠ è½½ã€‚ é‚£ä¸ºä»€ä¹ˆéœ€è¦å»¶è¿ŸåŠ è½½å‘¢ï¼Ÿæœ‰éœ€å¿…æœ‰æ±‚ï¼Œé¦–å…ˆçœ‹çœ‹ç›´æ¥åŠ è½½æ‰€å¯¼è‡´çš„ä¸€äº›é—®é¢˜ï¼š åŠ è½½è¿‡å¤šæ— ç”¨å†…å®¹ï¼Œé€ æˆæ•°æ®æµé‡çš„æµªè´¹ï¼Œå¢åŠ æµè§ˆå™¨å‹åŠ›ã€‚ æ¸²æŸ“æ—¶é—´å¢é•¿ï¼Œç”¨æˆ·ç­‰å¾…æ—¶é—´å¢é•¿ï¼Œä¼šé€ æˆéƒ¨åˆ†ç”¨æˆ·æµå¤±ã€‚ æµªè´¹å¤„ç†æ—¶é—´ã€ç”µæ± ç”µé‡å’Œå…¶å®ƒç³»ç»Ÿèµ„æº ä¸ºäº†å¢å¼ºç”¨æˆ·ä½“éªŒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œå»¶è¿ŸåŠ è½½ã€‚ getBoundingClientRectæ—©æœŸè¿˜æ²¡æœ‰ IntersectionObserver æ—¶ï¼Œä¸ºäº†æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯ Element.getBoundingClientRect()ã€‚é€šè¿‡è¯¥æ–¹æ³•æ¥è·å–ç›®æ ‡å…ƒç´ çš„å¤§å°ä»¥åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ï¼Œä»è€Œæ¥åˆ¤æ–­æ˜¯å¦åŠ è½½éœ€è¦æ¸²æŸ“çš„å†…å®¹ã€‚ å…¶è¯­æ³•ä¸ºï¼š 123456789const targetElement = document.getElementById('id');const rectObject = targetElement.getBoundingClientRect();rectObject.top // å…ƒç´ ä¸Šè¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;rectObject.right // å…ƒç´ å³è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;rectObject.bottom // å…ƒç´ ä¸‹è¾¹åˆ°è§†çª—ä¸Šè¾¹çš„è·ç¦»;rectObject.left // å…ƒç´ å·¦è¾¹åˆ°è§†çª—å·¦è¾¹çš„è·ç¦»;rectObject.width // æ˜¯å…ƒç´ è‡ªèº«çš„å®½rectObject.height // æ˜¯å…ƒç´ è‡ªèº«çš„é«˜ ä¾‹å­ï¼š æ—¢ç„¶æœ‰äº† getBoundingClientRect æ–¹æ³•ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦ IntersectionObserver æ–¹æ³•å‘¢ï¼Ÿè¿™é‡Œå¼•ç”¨ MDN ä¸Šçš„ä¸€æ®µè¯ï¼š è¿‡å»ï¼Œäº¤é›†æ£€æµ‹é€šå¸¸éœ€è¦æ¶‰åŠåˆ°äº‹ä»¶ç›‘å¬ï¼Œä»¥åŠå¯¹æ¯ä¸ªç›®æ ‡å…ƒç´ æ‰§è¡Œ Element.getBoundingClientRect() æ–¹æ³•ä»¥è·å–æ‰€éœ€ä¿¡æ¯ã€‚å¯æ˜¯è¿™äº›ä»£ç éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œæ‰€ä»¥ä»»ä½•ä¸€ç‚¹éƒ½å¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜ã€‚å½“ç½‘é¡µéå¸ƒè¿™äº›ä»£ç æ—¶å°±æ˜¾å¾—æ¯”è¾ƒä¸‘é™‹äº†ã€‚ ç®€è€Œè¨€ä¹‹ï¼ŒgetBoundingClientRect æ–¹æ³•å¯¹äºéœ€è¦ç›‘å¬å¤§é‡å¯¹è±¡çš„æƒ…å†µï¼Œå…¶å¤„ç†å¹¶ä¸æ˜¯ç‰¹åˆ«å®Œç¾ï¼ˆæ¯”å¦‚æ— é™æ»šåŠ¨ï¼Œscroll äº‹ä»¶å‘ç”Ÿè¿‡äºå¯†é›†ï¼Œå®¹æ˜“é€ æˆæ€§èƒ½é—®é¢˜ï¼‰ï¼Œè€Œè¿™ç§æƒ…å†µä¸‹ IntersectionObserver å¯ä»¥æ¯”è¾ƒå®Œç¾çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ IntersectionObserveré¦–å…ˆ IntersectionObserver API æ˜¯å¼‚æ­¥çš„ï¼Œä¸éšç€ç›®æ ‡å…ƒç´ çš„æ»šåŠ¨åŒæ­¥è§¦å‘ï¼ˆå³æˆ‘ä»¬ä¸ç”¨ç›‘å¬ scroll äº‹ä»¶äº†ï¼‰ã€‚æ­¤å¤–ï¼Œè¯¥è§‚å¯Ÿå™¨çš„ä¼˜å…ˆçº§éå¸¸ä½ï¼Œåªåœ¨å…¶ä»–ä»»åŠ¡æ‰§è¡Œå®Œï¼Œæµè§ˆå™¨æœ‰äº†ç©ºé—²æ‰ä¼šæ‰§è¡Œã€‚ è¿™é‡Œå†ä¸€æ¬¡å¼•ç”¨ MDN ä¸Šçš„è§£é‡Šï¼š Intersection Observer API ä¼šæ³¨å†Œä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œæ¯å½“æœŸæœ›è¢«ç›‘è§†çš„å…ƒç´ è¿›å…¥æˆ–è€…é€€å‡ºå¦å¤–ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™(æˆ–è€…æµè§ˆå™¨çš„è§†å£)è¯¥å›è°ƒæ–¹æ³•å°†ä¼šè¢«æ‰§è¡Œï¼Œæˆ–è€…ä¸¤ä¸ªå…ƒç´ çš„äº¤é›†éƒ¨åˆ†å¤§å°å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å›è°ƒæ–¹æ³•ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç½‘ç«™å°†ä¸éœ€è¦ä¸ºäº†ç›‘å¬ä¸¤ä¸ªå…ƒç´ çš„äº¤é›†å˜åŒ–è€Œåœ¨ä¸»çº¿ç¨‹é‡Œé¢åšä»»ä½•æ“ä½œï¼Œå¹¶ä¸”æµè§ˆå™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å’Œç®¡ç†ä¸¤ä¸ªå…ƒç´ çš„äº¤é›†å˜åŒ–ã€‚ å°‘äº†å¯¹æ»šåŠ¨äº‹ä»¶çš„å¤„ç†ï¼Œåœ¨ä¸è€ƒè™‘å…¼å®¹æ€§çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½æ–¹é¢è‚¯å®šä¼˜äº getBoundingClientRectã€‚é‚£ä¹ˆå®ƒå…·ä½“è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼ŸDemo å¦‚ä¸‹ï¼š 12345678910// åˆ›å»ºä¸€ä¸ª observerconst io = new IntersectionObserver(callback, options);// ç›‘å¬ç›®æ ‡å…ƒç´ io.observe(element);// åœæ­¢ç›®æ ‡å…ƒç´ çš„ç›‘å¬io.unobserve(element);// ç»ˆæ­¢å¯¹æ‰€æœ‰ç›®æ ‡å…ƒç´ å¯è§æ€§å˜åŒ–çš„è§‚å¯Ÿio.disconnect(); ä¸Šé¢ä»£ç ä¸­ï¼Œcallback æ˜¯è§¦å‘å¯è§è¡Œå˜åŒ–æ—¶çš„å›è°ƒå‡½æ•°ï¼Œoptions æ˜¯é…ç½®å¯¹è±¡ã€‚ optionsé¦–å…ˆçœ‹çœ‹ options é…ç½®ï¼Œå…¶æ€»å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼šrootã€rootMargin å’Œ thresholdã€‚ root æŒ‡é€‰å®šçš„ç›®æ ‡å®¹å™¨ï¼Œé»˜è®¤ä¸ºæµè§ˆå™¨çš„è§†çª—ã€‚ rootMargin å®šä¹‰å…ƒç´ çš„ marginï¼Œviewport + rootMargin ä¸ºæœ€ç»ˆè®¡ç®—çš„è§†çª—å¤§å°ï¼Œè¿™é‡Œå¼•ç”¨ä¸€å¼ å›¾ threshold å±æ€§å†³å®šäº†ä»€ä¹ˆæ—¶å€™è§¦å‘å›è°ƒå‡½æ•°ã€‚å®ƒæ˜¯æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå•ä¸€çš„ number ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª number æ•°ç»„ï¼Œå…¶è¡¨ç¤ºç›®æ ‡å…ƒç´ å’Œ root å…ƒç´ ç›¸äº¤ç¨‹åº¦è¾¾åˆ°è¯¥å€¼çš„æ—¶å€™ï¼Œcallback å›è°ƒå‡½æ•°å°†ä¼šè¢«æ‰§è¡Œã€‚ 1234567new IntersectionObserver( (entries, observer) =&gt; &#123; /* ... */ &#125;, &#123; // åœ¨ç›¸äº¤ç¨‹åº¦ä¸º 0ã€25%ã€50%ã€75%ã€100% æ—¶è§¦å‘å›è°ƒ threshold: [0, 0.25, 0.5, 0.75, 1] &#125;); callbackå½“ç›®æ ‡å…ƒç´ å¯è§è¡Œå˜åŒ–æ—¶ï¼Œå…¶ä¼šè§¦å‘ callback å‡½æ•°ï¼Œä¸€èˆ¬æƒ…å†µè¯¥å‡½æ•°ä¼šè§¦å‘2æ¬¡ï¼ˆè¿›å…¥å’Œç¦»å¼€ï¼‰ã€‚è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š IntersectionObserverEntry å¯¹è±¡ å’Œ è§‚å¯Ÿè€… çš„åˆ—è¡¨ã€‚ 123456789101112131415161718192021222324252627282930const callback = function(entries, observers) &#123; entries.forEach(entry =&gt; &#123; // Each entry describes an intersection change for one observed // target element: // entry.rootBounds // entry.boundingClientRect // entry.intersectionRect // entry.intersectionRatio // entry.isIntersecting // entry.target // entry.time &#125;);&#125;;ğŸ”½[IntersectionObserverEntry] time: 3893.92 ğŸ”½rootBounds: ClientRect bottom: 920 height: 1024 left: 0 right: 1024 top: 0 width: 920 ğŸ”½boundingClientRect: ClientRect // ... ğŸ”½intersectionRect: ClientRect // ... intersectionRatio: 0.54 ğŸ”½target: div#observee // ... rootBoundsï¼š root å…ƒç´ è°ƒç”¨ getBoundingClientRect() å‡½æ•°çš„è¿”å›å€¼ï¼ˆé»˜è®¤æ˜¯ viewport è§†å£ï¼‰ boundingClientRectï¼š ç›®æ ‡ observer è°ƒç”¨ getBoundingClientRect() å‡½æ•°çš„è¿”å›å€¼ intersectionRectï¼š ä¸Šè¿°ä¸¤çŸ©å½¢çš„äº¤é›†ï¼Œå¹¶ä¸”æœ‰æ•ˆçš„å‘Šè¯‰ä½ è§‚æµ‹åˆ°çš„å…ƒç´ çš„å“ªä¸€éƒ¨åˆ†æ˜¯å¯è§çš„ intersectionRectï¼š è¯¥å±æ€§å‘Šè¯‰ä½ å…ƒç´ ç›®å‰æœ‰å¤šå°‘æ˜¯å¯è§çš„ï¼Œæ¯”ç‡æ˜¯å¤šå°‘ isIntersectingï¼š ç›®æ ‡å…ƒç´ åœ¨ root å…ƒç´ ä¸­å¯è§æ€§æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼ˆè‡³å°‘å¾—è¾¾åˆ° thresholds æ•°ç»„ä¸­çš„ä¸€ä¸ªé˜ˆå€¼ï¼‰ targetï¼š è¢«è§‚æµ‹çš„ç›®æ ‡ DOM å…ƒç´  timeï¼š å¯è§è¡Œå‘ç”Ÿå˜åŒ–çš„æ—¶é—´ï¼ˆå•ä½ï¼š msï¼‰ å†æ¬¡å¼•ç”¨ä¸€å¼ å›¾ç‰‡æ¥è§£é‡Šä¸Šè¿°éƒ¨åˆ†å‚æ•°ï¼š è¯·ç•™æ„ï¼Œä½ æ³¨å†Œçš„å›è°ƒå‡½æ•°å°†ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¢«æ‰§è¡Œã€‚æ‰€ä»¥è¯¥å‡½æ•°æ‰§è¡Œé€Ÿåº¦è¦å°½å¯èƒ½çš„å¿«ã€‚å¦‚æœæœ‰ä¸€äº›è€—æ—¶çš„æ“ä½œéœ€è¦æ‰§è¡Œï¼Œå»ºè®®ä½¿ç”¨ Window.requestIdleCallback() æ–¹æ³•ã€‚ å®æˆ˜ï¼šæ— é™æ»šåŠ¨ æ–‡ç« æ¨è Trust is Good, Observation is Betterâ€”Intersection Observer v2 å»¶è¿ŸåŠ è½½å›¾åƒå’Œè§†é¢‘ å‚è€ƒæ–‡ç«  IntersectionObserverâ€™s Coming into View Intersection Observer API getBoundingClientRect IntersectionObserver API ä½¿ç”¨æ•™ç¨‹ è°ˆè°ˆ IntersectionObserver æ‡’åŠ è½½","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"JSX è¯­æ³•æ€»ç»“","slug":"JSX-è¯­æ³•æ€»ç»“","date":"2019-09-01T08:12:23.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/09/01/JSX-è¯­æ³•æ€»ç»“/","link":"","permalink":"https://monocy.gitee.io/2019/09/01/JSX-è¯­æ³•æ€»ç»“/","excerpt":"å‰è¨€æœ€è¿‘ç€æ‰‹ç¼–å†™ JSON å¯è§†åŒ–éƒ¨åˆ†çš„å†…å®¹ï¼Œç”±äºæ­¤éƒ¨åˆ†éœ€è¦åŸºäºåŸºç¡€ç»„ä»¶è¿›è¡Œå°è£…ï¼ŒVue çš„ JSX çš„å†™æ³•ç”¨çš„æ¯”è¾ƒé¢‘ç¹ï¼Œæ­¤å¤„å°±è®°å½•æˆ‘ç›®å‰æ‰€èƒ½æ€»ç»“å‡ºçš„ JSX çš„å†™æ³•ï¼Œä»¥åšå¤‡å¿˜ã€‚","text":"å‰è¨€æœ€è¿‘ç€æ‰‹ç¼–å†™ JSON å¯è§†åŒ–éƒ¨åˆ†çš„å†…å®¹ï¼Œç”±äºæ­¤éƒ¨åˆ†éœ€è¦åŸºäºåŸºç¡€ç»„ä»¶è¿›è¡Œå°è£…ï¼ŒVue çš„ JSX çš„å†™æ³•ç”¨çš„æ¯”è¾ƒé¢‘ç¹ï¼Œæ­¤å¤„å°±è®°å½•æˆ‘ç›®å‰æ‰€èƒ½æ€»ç»“å‡ºçš„ JSX çš„å†™æ³•ï¼Œä»¥åšå¤‡å¿˜ã€‚ åŸºç¡€å†™æ³•Vue å®˜ç½‘å¯¹äº JSX è¯­æ³•å’Œ Template è¯­æ³•å·²ç»åšäº†å¾ˆè¯¦ç»†çš„å¯¹æ¯”äº†ï¼Œåœ¨æ­¤æˆ‘å°±ä¸åšèµ˜è¿°ï¼Œæ­¤å¤„å°±ä»…ä»…å¼•ç”¨ä¸€ä¸‹ JSX çš„å†™æ³•ã€‚ åˆ›å»ºä¸€ä¸ª VNode çš„å†™æ³•1234567891011121314151617181920212223242526// @returns &#123;VNode&#125;createElement( // &#123;String | Object | Function&#125; // ä¸€ä¸ª HTML æ ‡ç­¾åã€ç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œæˆ–è€… // resolve äº†ä¸Šè¿°ä»»ä½•ä¸€ç§çš„ä¸€ä¸ª async å‡½æ•°ã€‚å¿…å¡«é¡¹ã€‚ 'div', // &#123;Object&#125; // ä¸€ä¸ªä¸æ¨¡æ¿ä¸­å±æ€§å¯¹åº”çš„æ•°æ®å¯¹è±¡ã€‚å¯é€‰ã€‚ &#123; // (è¯¦æƒ…è§ä¸‹ä¸€ä»£ç å—) &#125;, // &#123;String | Array&#125; // å­çº§è™šæ‹ŸèŠ‚ç‚¹ (VNodes)ï¼Œç”± `createElement()` æ„å»ºè€Œæˆï¼Œ // ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ¥ç”Ÿæˆâ€œæ–‡æœ¬è™šæ‹ŸèŠ‚ç‚¹â€ã€‚å¯é€‰ã€‚ [ 'å…ˆå†™ä¸€äº›æ–‡å­—', createElement('h1', 'ä¸€åˆ™å¤´æ¡'), createElement(MyComponent, &#123; props: &#123; someProp: 'foobar' &#125; &#125;) ]) VNode ä¸­çš„æ•°æ®å¯¹è±¡çš„å†™æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&#123; // @params &#123; String, Object &#125; // ä¸ `v-bind:class` çš„ API ç›¸åŒï¼Œ // æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ã€å¯¹è±¡æˆ–å­—ç¬¦ä¸²å’Œå¯¹è±¡ç»„æˆçš„æ•°ç»„ 'class': &#123; foo: true, bar: false &#125;, // @params &#123; String, Object &#125; // ä¸ `v-bind:style` çš„ API ç›¸åŒï¼Œ // æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ã€å¯¹è±¡ï¼Œæˆ–å¯¹è±¡ç»„æˆçš„æ•°ç»„ style: &#123; color: 'red', fontSize: '14px' &#125;, // æ™®é€šçš„ HTML ç‰¹æ€§ attrs: &#123; id: 'foo' &#125;, // ç»„ä»¶ prop props: &#123; myProp: 'bar' &#125;, // DOM å±æ€§ domProps: &#123; innerHTML: 'baz' &#125;, // äº‹ä»¶ç›‘å¬å™¨åœ¨ `on` å±æ€§å†…ï¼Œ // ä½†ä¸å†æ”¯æŒå¦‚ `v-on:keyup.enter` è¿™æ ·çš„ä¿®é¥°å™¨ã€‚ // éœ€è¦åœ¨å¤„ç†å‡½æ•°ä¸­æ‰‹åŠ¨æ£€æŸ¥ keyCodeã€‚ on: &#123; click: this.clickHandler &#125;, // ä»…ç”¨äºç»„ä»¶ï¼Œç”¨äºç›‘å¬åŸç”Ÿäº‹ä»¶ï¼Œè€Œä¸æ˜¯ç»„ä»¶å†…éƒ¨ä½¿ç”¨ // `vm.$emit` è§¦å‘çš„äº‹ä»¶ã€‚ nativeOn: &#123; click: this.nativeClickHandler &#125;, // è‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œä½ æ— æ³•å¯¹ `binding` ä¸­çš„ `oldValue` // èµ‹å€¼ï¼Œå› ä¸º Vue å·²ç»è‡ªåŠ¨ä¸ºä½ è¿›è¡Œäº†åŒæ­¥ã€‚ directives: [ &#123; name: 'my-custom-directive', value: '2', expression: '1 + 1', arg: 'foo', modifiers: &#123; bar: true &#125; &#125; ], // ä½œç”¨åŸŸæ’æ§½çš„æ ¼å¼ä¸º // &#123; name: props =&gt; VNode | Array&lt;VNode&gt; &#125; scopedSlots: &#123; default: props =&gt; createElement('span', props.text) &#125;, // å¦‚æœç»„ä»¶æ˜¯å…¶å®ƒç»„ä»¶çš„å­ç»„ä»¶ï¼Œéœ€ä¸ºæ’æ§½æŒ‡å®šåç§° slot: 'name-of-slot', // å…¶å®ƒç‰¹æ®Šé¡¶å±‚å±æ€§ key: 'myKey', ref: 'myRef', // å¦‚æœä½ åœ¨æ¸²æŸ“å‡½æ•°ä¸­ç»™å¤šä¸ªå…ƒç´ éƒ½åº”ç”¨äº†ç›¸åŒçš„ ref åï¼Œ // é‚£ä¹ˆ `$refs.myRef` ä¼šå˜æˆä¸€ä¸ªæ•°ç»„ã€‚ refInFor: true&#125; æ¨¡æ¿ä¿®é¥°ç¬¦çš„ä¸€äº›å…¼å®¹å†™æ³• å‡è®¾æ­¤å¤„å·²ç»é…ç½®äº† Babel æ’ä»¶ v-if å’Œ v-for çš„å®ç°1234567// v-if çš„å®ç°props: &#123; isSection: &#123; type: Boolean, default: false &#125;&#125;,render() &#123; return this.isSection ? &lt;div&gt;&lt;/div&gt; : &lt;section&gt;&lt;/section&gt;&#125; 12345678910111213141516// v-for çš„å®ç°props: &#123; pList: &#123; type: Array, default: () =&gt; [] &#125;&#125;,render() &#123; return ( &lt;div&gt; &#123; this.pList.map(config =&gt; &#123; const methods = &#123; props: config &#125; return &lt;p &#123;...methods&#125;&gt;&lt;/p&gt; &#125;) &#125; &lt;/div&gt; )&#125; v-model çš„å®ç°1234567891011121314151617props: &#123; value: &#123; type: String, default: '' &#125;&#125;,render() &#123; const methods = &#123; domProps: &#123; value: this.value &#125;, on: &#123; input: function (e) &#123; this.$emit('input', e.target.value) &#125; &#125; &#125; return &lt;input &#123;...methods&#125;&gt;&lt;/input&gt;&#125; ä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦ å‰ç¼€ .passive &amp; .capture ! .once ~ .capture.once æˆ– .once.capture ~! ä¾‹å¦‚ï¼š 12345on: &#123; '!click': this.doThisInCapturingMode, '~keyup': this.doThisOnce, '~!mouseover': this.doThisOnceInCapturingMode&#125; å…¶ä½™çš„ä¿®é¥°ç¬¦å¦‚ä¸‹ï¼š ä¿®é¥°ç¬¦ å¤„ç†å‡½æ•°ä¸­çš„ç­‰ä»·æ“ä½œ .stop event.stopPropagation() .prevent event.preventDefault() .self if (event.target !== event.currentTarget) return æŒ‰é”®ï¼š .enter, .13 if (event.keyCode !== 13) return (å¯¹äºåˆ«çš„æŒ‰é”®ä¿®é¥°ç¬¦æ¥è¯´ï¼Œå¯å°† 13 æ”¹ä¸ºå¦ä¸€ä¸ªæŒ‰é”®ç ) ä¿®é¥°é”®ï¼š .ctrl, .alt, .shift, .meta if (!event.ctrlKey) return (å°† ctrlKey åˆ†åˆ«ä¿®æ”¹ä¸º altKeyã€shiftKey æˆ–è€… metaKey) ä¾‹å¦‚ï¼š 12345678910111213141516on: &#123; keyup (event) &#123; // å¦‚æœè§¦å‘äº‹ä»¶çš„å…ƒç´ ä¸æ˜¯äº‹ä»¶ç»‘å®šçš„å…ƒç´  // åˆ™è¿”å› if (event.target !== event.currentTarget) return // å¦‚æœæŒ‰ä¸‹å»çš„ä¸æ˜¯ enter é”®æˆ–è€… // æ²¡æœ‰åŒæ—¶æŒ‰ä¸‹ shift é”® // åˆ™è¿”å› if (!event.shiftKey || event.keyCode !== 13) return // é˜»æ­¢ äº‹ä»¶å†’æ³¡ event.stopPropagation() // é˜»æ­¢è¯¥å…ƒç´ é»˜è®¤çš„ keyup äº‹ä»¶ event.preventDefault() // ... &#125;&#125; ç®€åŒ–å†™æ³•ç®€åŒ–å†™æ³•éœ€è¦é¡¹ç›®å¼•å…¥å¯¹åº”çš„ Babel æ”¯æŒï¼Œç®€åŒ–åæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›å¯¹åº”çš„ html å†™æ³•ï¼Œå…¶åˆæœ‰ä¸¤ç§ç¼–å†™æ–¹æ³•ï¼š 123456&lt;!-- è¡Œå†…å±æ€§ --&gt;&lt;div props=&#123;&#123; propName: 123 &#125;&#125;&gt;&lt;/div&gt;&lt;!-- è§£æ„å±æ€§ --&gt;const methods = &#123; propName: 123 &#125;&lt;div &#123;...methods&#125;&gt;&lt;/div&gt; ç”±äºç¬¬äºŒç§å†™æ³•æ›´åŠ©äºé€»è¾‘ä¸ç»“æ„åˆ†ç¦»ï¼Œä¸ªäººæ›´åå‘äºç¬¬äºŒç§å†™æ³•é£æ ¼ã€‚ å‚è€ƒæ–‡ç«  æ¸²æŸ“å‡½æ•° &amp; JSX Scoped Slots in JSX Babel Preset JSX","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"Vue ä»£ç è§„èŒƒé…ç½®","slug":"Vue-ä»£ç è§„èŒƒé…ç½®","date":"2019-08-23T05:10:27.000Z","updated":"2022-07-26T13:18:18.470Z","comments":true,"path":"2019/08/23/Vue-ä»£ç è§„èŒƒé…ç½®/","link":"","permalink":"https://monocy.gitee.io/2019/08/23/Vue-ä»£ç è§„èŒƒé…ç½®/","excerpt":"å‰è¨€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ä¸€ä¸ªå¥½çš„è§„èŒƒèƒ½ä½¿çš„å›¢é˜Ÿå¼€å‘çš„æ•ˆç‡æå‡ä¸€å€ï¼Œå› æ­¤ï¼Œä¸€ä¸ªå¥½çš„è§„èŒƒå¯¹äºä¸€ä¸ªå›¢é˜Ÿæ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ­¤å¤„è®°å½•æˆ‘ä¸ºæ‰€åœ¨å›¢é˜Ÿç»´æŠ¤çš„ä¸€å¥—å‰ç«¯è§„èŒƒç›¸å…³çš„é…ç½®ã€‚ æ¨èé˜…è¯»ï¼šMac ç¯å¢ƒé…ç½® çš„ â€œé…ç½® VScodeâ€ éƒ¨åˆ†ï¼Œé€šè¿‡ Sync å®‰è£…æˆ‘æ€»ç»“çš„æ’ä»¶å¯ä¸ç”¨å…³å¿ƒä»¥ä¸‹çš„é…ç½®ï¼Œé»˜è®¤é…ç½®å¥½ã€‚","text":"å‰è¨€å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ä¸€ä¸ªå¥½çš„è§„èŒƒèƒ½ä½¿çš„å›¢é˜Ÿå¼€å‘çš„æ•ˆç‡æå‡ä¸€å€ï¼Œå› æ­¤ï¼Œä¸€ä¸ªå¥½çš„è§„èŒƒå¯¹äºä¸€ä¸ªå›¢é˜Ÿæ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ­¤å¤„è®°å½•æˆ‘ä¸ºæ‰€åœ¨å›¢é˜Ÿç»´æŠ¤çš„ä¸€å¥—å‰ç«¯è§„èŒƒç›¸å…³çš„é…ç½®ã€‚ æ¨èé˜…è¯»ï¼šMac ç¯å¢ƒé…ç½® çš„ â€œé…ç½® VScodeâ€ éƒ¨åˆ†ï¼Œé€šè¿‡ Sync å®‰è£…æˆ‘æ€»ç»“çš„æ’ä»¶å¯ä¸ç”¨å…³å¿ƒä»¥ä¸‹çš„é…ç½®ï¼Œé»˜è®¤é…ç½®å¥½ã€‚ VSCode é…ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª .vscode æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶å†…åˆ›å»ºä¸€ä¸ª settings.json æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹å³å¯ï¼š æ³¨æ„ï¼šè¯¥éƒ¨åˆ†é…ç½®éœ€è¦å®‰è£…ä¸¤ä¸ªå¿…é¡»çš„ VSCode æ’ä»¶ï¼š Vetur å’Œ ESLintã€‚ 1234567891011121314151617181920212223242526272829303132&#123; // ç¼–è¾‘å™¨éƒ¨åˆ† \"editor.tabSize\": 2, \"editor.fontSize\": 15, \"editor.wordWrap\": \"on\", \"editor.formatOnSave\": true, \"editor.renderWhitespace\": \"none\", \"editor.multiCursorModifier\": \"ctrlCmd\", \"editor.defaultFormatter\": \"octref.vetur\", \"editor.codeActionsOnSave\": &#123; \"source.fixAll\": true &#125;, \"files.insertFinalNewline\": true, /** * ä»£ç é…ç½® */ // eslint éƒ¨åˆ† \"eslint.run\": \"onSave\", \"eslint.validate\": [\"typescriptreact\", \"typescript\"], // vetur éƒ¨åˆ† \"vetur.format.defaultFormatter.css\": \"prettier\", \"vetur.format.defaultFormatter.less\": \"prettier\", \"vetur.format.defaultFormatter.js\": \"vscode-typescript\", \"vetur.format.defaultFormatter.ts\": \"vscode-typescript\", \"vetur.format.defaultFormatter.html\": \"prettyhtml\", \"vetur.format.defaultFormatterOptions\": &#123; \"prettyhtml\": &#123; \"printWidth\": 75, \"singleQuote\": false &#125; &#125;&#125; ESlint é…ç½®æ­¤å¤„é…ç½®çš„ ESlint ä¸º TS ç¯å¢ƒä¸‹çš„ typescript-eslint çš„é…ç½®ã€‚é…ç½®æ–‡ä»¶ä¸ºï¼š.eslintrc.jsã€‚ 123456789101112131415161718192021222324252627282930313233343536module.exports = &#123; root: true, env: &#123; browser: true, commonjs: true, es6: true, &#125;, parserOptions: &#123; parser: '@typescript-eslint/parser', sourceType: 'module', &#125;, extends: ['plugin:vue/essential', '@vue/standard', '@vue/typescript'], rules: &#123; 'no-var': 'error', 'arrow-parens': 'off', semi: 'off', '@typescript-eslint/semi': ['error'], 'eol-last': 'off', '@typescript-eslint/no-unused-vars': [ 'error', &#123; vars: 'local', args: 'none', ignoreRestSiblings: true, &#125;, ], 'generator-star-spacing': 'off', camelcase: ['error', &#123; properties: 'never' &#125;], 'space-before-function-paren': [ 'error', &#123; anonymous: 'always', named: 'never' &#125;, ], 'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'off', 'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off', &#125;,&#125;; tsconfig.json é…ç½®12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; \"compilerOptions\": &#123; \"allowSyntheticDefaultImports\": true, \"baseUrl\": \".\", \"checkJs\": false, \"esModuleInterop\": true, \"importHelpers\": true, \"experimentalDecorators\": true, \"jsx\": \"preserve\", \"jsxFactory\": \"h\", \"lib\": [ \"esnext\", \"dom\", \"dom.iterable\", \"scripthost\" ], \"module\": \"esnext\", \"moduleResolution\": \"node\", \"paths\": &#123; \"@/*\": [ \"src/*\" ] &#125;, \"pretty\": true, \"sourceMap\": true, \"strict\": true, \"target\": \"esnext\", \"types\": [ \"webpack-env\" ] &#125;, \"include\": [ \"src/**/*.ts\", \"src/**/*.tsx\", \"src/**/*.vue\", \"tests/**/*.ts\", \"tests/**/*.tsx\" ], \"exclude\": [ \"node_modules\", \"public\" ]&#125; ç›¸å…³ä¾èµ–ï¼ˆé¡¹ç›®ç”±é TS -&gt; TSï¼‰ï¼š 12345678910111213141516&#123; \"devDependencies\": &#123; \"@babel/core\": \"^7.0.0-0\", \"@babel/plugin-syntax-jsx\": \"^7.2.0\", \"@vue/cli-plugin-babel\": \"^3.7.0\", \"@vue/cli-plugin-eslint\": \"^3.0.5\", \"@vue/cli-plugin-typescript\": \"^3.8.1\", \"@vue/cli-service\": \"^3.0.5\", \"@vue/eslint-config-standard\": \"^4.0.0\", \"@vue/eslint-config-typescript\": \"^4.0.0\", \"babel-eslint\": \"^10.0.1\", \"eslint\": \"^5.8.0\", \"eslint-plugin-vue\": \"^5.0.0-0\", \"typescript\": \"^3.4.3\" &#125;&#125; Stylelint é…ç½®æ­¤éƒ¨åˆ†è§„èŒƒ css å’Œ less è¯­æ³•ï¼Œé…ç½®æ–‡ä»¶ä¸ºï¼š stylelint.config.jsã€‚ 12345678910111213141516module.exports = &#123; extends: 'stylelint-config-standard', ignoreFiles: ['**/*.js', '**/*.md', '**/*.png', '**/*.json'], rules: &#123; indentation: 2, 'color-hex-case': 'lower', 'string-quotes': 'single', 'color-hex-length': 'long', 'number-leading-zero': 'never', 'rule-empty-line-before': null, 'no-descending-specificity': null, 'no-missing-end-of-source-newline': false, 'selector-pseudo-element-colon-notation': null, 'selector-list-comma-newline-after': 'always-multi-line', &#125;,&#125;; ç›¸å…³ä¾èµ–ï¼š 123456&#123; \"devDependencies\": &#123; \"stylelint\": \"^10.1.0\", \"stylelint-config-standard\": \"^18.3.0\" &#125;&#125; è§„èŒƒå‚è€ƒ Code Guide é£æ ¼æŒ‡å—","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ä»£ç é…ç½®","slug":"ä»£ç é…ç½®","permalink":"https://monocy.gitee.io/tags/ä»£ç é…ç½®/"}]},{"title":"å‰ç«¯ç¼“å­˜æŸ¥è¯¢çŠ¶æ€","slug":"å‰ç«¯ç¼“å­˜æŸ¥è¯¢çŠ¶æ€","date":"2019-08-15T08:38:59.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/08/15/å‰ç«¯ç¼“å­˜æŸ¥è¯¢çŠ¶æ€/","link":"","permalink":"https://monocy.gitee.io/2019/08/15/å‰ç«¯ç¼“å­˜æŸ¥è¯¢çŠ¶æ€/","excerpt":"å‰è¨€ä¸ºäº†æå‡ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œå¤šæ•°åœºåˆæˆ‘ä»¬éƒ½ä¼šå¯¹è¡¨å•åœºæ™¯åšä¸€äº›ç¼“å­˜ã€‚å½“ç„¶æœ€ç®€å•çš„æƒ…å†µæ˜¯å¼¹æ¡†å¤„ç†ä¸‹é’»é¡µé¢ï¼Œè¿™æ ·åŸºæœ¬ä¸Šä¸ç”¨è€ƒè™‘æ¢é¡µè¿”å›æ—¶çš„çŠ¶æ€ç¼“å­˜é—®é¢˜äº†ï¼Œç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„éœ€æ±‚éƒ½æ»¡è¶³è¿™ç§åœºæ™¯ï¼Œæ­¤å¤„æˆ‘å°±è®°å½•ä¸€ä¸‹è¿™æ¬¡åšç¼“å­˜æ—¶çš„ä¸€äº›ç­–ç•¥é€‰æ‹©å’Œé‡åˆ°çš„é—®é¢˜ã€‚","text":"å‰è¨€ä¸ºäº†æå‡ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œå¤šæ•°åœºåˆæˆ‘ä»¬éƒ½ä¼šå¯¹è¡¨å•åœºæ™¯åšä¸€äº›ç¼“å­˜ã€‚å½“ç„¶æœ€ç®€å•çš„æƒ…å†µæ˜¯å¼¹æ¡†å¤„ç†ä¸‹é’»é¡µé¢ï¼Œè¿™æ ·åŸºæœ¬ä¸Šä¸ç”¨è€ƒè™‘æ¢é¡µè¿”å›æ—¶çš„çŠ¶æ€ç¼“å­˜é—®é¢˜äº†ï¼Œç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„éœ€æ±‚éƒ½æ»¡è¶³è¿™ç§åœºæ™¯ï¼Œæ­¤å¤„æˆ‘å°±è®°å½•ä¸€ä¸‹è¿™æ¬¡åšç¼“å­˜æ—¶çš„ä¸€äº›ç­–ç•¥é€‰æ‹©å’Œé‡åˆ°çš„é—®é¢˜ã€‚ èƒŒæ™¯åœ¨åšé¡¹ç›®è¿­ä»£æ—¶ï¼Œç¬¬ä¸€æœŸå› ä¸ºæ—¶é—´çš„åŸå› ï¼Œåœ¨ä¿è¯åŸæœ‰åŠŸèƒ½çš„æƒ…å†µä¸‹ï¼Œå¹¶æ²¡æœ‰åšç¼“å­˜å¤„ç†ã€‚åœ¨è¿™ä¸€æœŸçš„é¡¹ç›®è¿­ä»£æ—¶ï¼Œåº”ç”¨æˆ·å’Œäº§å“çš„éœ€æ±‚ï¼Œåœ¨åŸæœ‰çš„é€»è¾‘åŸºç¡€ä¸Šæ·»åŠ äº†ç¼“å­˜å¤„ç†ã€‚è¦æ±‚ä»…ä»ä¸‹é’»é¡µé¢è¿”å›æ—¶ä¿ç•™ç¦»å¼€çš„çŠ¶æ€ï¼Œå¦åˆ™å‘ˆç°é»˜è®¤çš„çŠ¶æ€ã€‚ é¡¹ç›®ç»“æ„é¡¹ç›®æ€»ä½“æœ‰ä¸‰å±‚ï¼š ç™»é™†ä¸æƒé™åˆ¤æ–­å±‚ å…¬å…±è·¯ç”±å±‚ ä¸šåŠ¡é¡µé¢å±‚ ç™»é™†ä¸æƒé™åˆ¤æ–­å±‚ä¸»è¦å¤„ç†ç”¨æˆ·çš„ç™»é™†ä¿¡æ¯å’Œå¯¹åº”é¡µé¢çš„æƒé™æ‹¦æˆªï¼Œå¯¹äºæ— é¡µé¢æƒé™çš„è·³è½¬å’Œæœªç™»å½•çŠ¶æ€åšé‡å®šå‘å¤„ç†ï¼Œæ­¤å¤–å…¨å±€ vuex å­˜å‚¨è·å¾—çš„é¡µé¢ä¿¡æ¯ã€‚ å…¬å…±è·¯ç”±å±‚ä¸»è¦å¤„ç†è·å–çš„é¡µé¢è·¯ç”±ç»“æ„ï¼ŒåŒæ—¶ä¸æƒé™è·¯ç”±çš„èœå•é…ç½®ç»‘å®šï¼Œä¸ºå„é¡µé¢å…·ä½“çš„æƒé™çº¦æŸæä¾›å¯¹åº”çš„é…ç½®æ–¹æ³•ï¼Œæ–¹ä¾¿äº§å“å°†å…¶ä¸ç”¨æˆ·è§’è‰²åšç›¸å…³ç»‘å®šã€‚ ä¸šåŠ¡é¡µé¢å±‚ä»…å…³æ³¨å¯¹åº”ä¸šåŠ¡é€»è¾‘çš„å¼€å‘ä»¥åŠç›¸å…³æƒé™æ§åˆ¶ï¼Œç»Ÿä¸€æ¥å£å’Œæ–¹æ³•å¤„ç†æƒé™ã€‚ ç¼“å­˜æ–¹æ¡ˆå®ç°ç¼“å­˜çš„æ–¹æ³•æœ‰å¤šä¸ªï¼Œå½“å‰è€ƒè™‘çš„å¯è¡Œçš„æ–¹æ¡ˆæœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š vuex åšæŸ¥è¯¢ç¼“å­˜ keep-alive åšé¡µé¢ç¼“å­˜ webStorage åšæ¡ä»¶ç¼“å­˜ é¦–å…ˆè¯´ä¸€ä¸‹æœ€åé€‰æ‹©çš„æ–¹æ¡ˆæ˜¯ï¼šsessionStorage åšæ¡ä»¶ç¼“å­˜ã€‚è¿™é‡Œåˆ†åˆ«æ¥åˆ†æä¸€ä¸‹å„æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚ vuex æ–¹æ¡ˆvuex æ–¹æ¡ˆæ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œæ¯•ç«Ÿå¯¹äºè·¨é¡µé¢çš„å•é¡µåº”ç”¨æ¥è¯´ï¼Œåœ¨æ•°æ®çš„ä¼ é€’ä¸Šå¯è°“æ˜¯éå¸¸ä¾¿æ·çš„ï¼Œå¯¹äºæŸ¥è¯¢ç¼“å­˜æ¥è¯´ï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹ï¼š è·å–æ•°æ®å’Œä¼ é€’æ•°æ®å®¹æ˜“ å­˜å‚¨æ•°æ®çš„æ“ä½œç®€å•ï¼Œä»£ç é‡ä¸å¤§ ä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š å­é¡µé¢åˆ·æ–°å†è¿”å›ä¼šå¯¼è‡´ç¼“å­˜çš„æ•°æ®æ¸…ç©º æ— è®ºæ˜¯ä»å­é¡µé¢è¿˜æ˜¯ä»åˆ«çš„é¡µé¢åˆ‡æ¢å›æ¥ï¼Œæ­¤éƒ½ä¼šç¼“å­˜æŸ¥è¯¢æ¡ä»¶ ç¼ºç‚¹çš„è§£å†³æ€è·¯ï¼š å¯¹äºæ•°æ®ä¼šæ¸…ç©ºçš„é—®é¢˜ï¼Œvuex éœ€è¦é…åˆ webStorage å¯¹åˆ·æ–°æƒ…å†µåšå¤„ç†ï¼› å¯¹äºä»»æ„é¡µé¢éƒ½ä¼šç¼“å­˜æŸ¥è¯¢æ¡ä»¶é—®é¢˜ï¼Œåˆéœ€è¦é…åˆè·¯ç”±æ¥åšå¤„ç†ã€‚ keep-alive æ–¹æ¡ˆkeep-alive æ–¹æ¡ˆä¸ vuex æ–¹æ¡ˆåŸºæœ¬å·®åˆ«ä¸å¸¦ï¼Œå…¶ç¼“å­˜æ•´ä¸ªç»„ä»¶çš„çŠ¶æ€ï¼Œæ¥ä¿è¯è·³è½¬è‡³å…¶å®ƒç»„ä»¶åï¼Œå½“å‰ç»„ä»¶çš„çŠ¶æ€ä¸æ”¹å˜ã€‚ä¸ vuex å†™æ³•ç›¸æ¯”ï¼Œå…¶ä¼˜ç‚¹è¿˜åŒ…æ‹¬ï¼š æ•´ä½“çš„çŠ¶æ€èƒ½å¾—ä»¥ä¿å­˜ï¼Œæ— éœ€è¿‡å¤šçš„æ•°æ®ç¼“å­˜å¤„ç† ä½†æ˜¯å…¶ç¼ºç‚¹ç›¸å¯¹ vuex æ¥è¯´ï¼Œä¹Ÿæœ‰ä¸€äº›ï¼š é¡µé¢å‚æ•°å…±äº«ä¸æ˜¯å¾ˆæ–¹ä¾¿ æ¯æ–°å¢ä¸€ä¸ªç¼“å­˜é¡µé¢éƒ½éœ€è¦æ›´æ–°ä¸€ä¸‹ include æ•°ç»„ ç¼ºç‚¹çš„è§£å†³æ€è·¯ï¼šä¸ vuex çš„è§£å†³æ€è·¯åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯æ­¤è¿˜æœ‰å¦å¤–ä¸€ç§æ“ä½œæ–¹æ³• keep-alive è¿˜æœ‰ä¸€ç§é…åˆè·¯ç”± meta çš„æ“ä½œå†™æ³•ã€‚ä½†æ˜¯ç”±äºé¡¹ç›®è·¯ç”±åŸºæœ¬ä¸Šæ˜¯åŠ¨æ€çš„ï¼Œæœ‰åå°æä¾›ç›¸åº”çš„è·¯ç”±ç»“æ„ï¼Œé…ç½®ç›¸åº”çš„å­—æ®µè¿˜éœ€è¦ä¸åå°æ²Ÿé€šï¼Œå¦‚æœè€ƒè™‘ä¸æ˜¯å¾ˆå……è¶³å¯¹äºä¹‹åçš„å¼€å‘ä¹Ÿä¸æ˜¯å¾ˆå‹å¥½ï¼›æ­¤å¤–ï¼Œè¯¥æ–¹æ³•å¯¹äºé¡µé¢å›é€€æƒ…å†µæœ‰ç›¸åº”é—®é¢˜ï¼ˆåˆ·æ–°åŒæ ·æ— æ³•å¤„ç†ï¼‰ã€‚å› æ­¤æ­¤æ–¹æ¡ˆ pass äº†ã€‚ webStorage æ–¹æ¡ˆé‰´äºä¹‹å‰çš„ä¸¤ç§æ–¹æ¡ˆéƒ½åŒ…å«è·¯ç”±çš„å¤„ç†ä»¥åŠ webStorage çš„ä½¿ç”¨ï¼Œä»ä»£ç å¤æ‚åº¦æ¥è¡¡é‡ï¼Œæœ€ç»ˆè¿˜æ˜¯é€‰ç”¨äº†æ­¤æ–¹æ³•ã€‚å…·ä½“çš„æ€è·¯ä¸ºï¼š è·¯ç”±å±‚æ·»åŠ  $route çš„ç›‘å¬ï¼Œå¹¶å°†å…¶å­˜å…¥è·¯ç”±çš„ vuex å†…ï¼Œå­˜å‚¨é¡µé¢çš„ to ä¸ fromã€‚ å­é¡µé¢åˆ é™¤ mount é’©å­ï¼Œç›‘å¬å¯¹åº”çš„ from çš„è·¯ç”±ï¼Œå¹¶è®¾ç½® immediate: trueï¼Œä¸ºéœ€è¦èµ‹å€¼ç¼“å­˜çš„é¡µé¢åšå•ç‹¬èµ‹å€¼å¤„ç†ï¼Œå¦åˆ™ä¸åšæ“ä½œï¼ˆå¦‚æœ‰é»˜è®¤æŸ¥è¯¢åˆ™è®¾ç½®é»˜è®¤æŸ¥è¯¢ï¼‰ åœ¨è§¦å‘æŸ¥è¯¢æ“ä½œä¹‹å‰ï¼Œç¼“å­˜æŸ¥è¯¢æ¡ä»¶è‡³å¯¹åº”çš„ sessionStorage å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯è¯´ç¼ºç‚¹å¾ˆå°‘ï¼Œå…¶å®å®ƒä¹Ÿæœ‰ä¸€äº›ç—›ç‚¹æ²¡æœ‰è§£å†³ï¼š éš¾ä»¥æŠ½è±¡å‡ºé€šç”¨çš„å¤„ç†é€»è¾‘ï¼Œä»…èƒ½å¯¹è·¯ç”±å±‚çº§åšä¸€å±‚ç®€å•çš„æŠ½è±¡å’Œå­˜å‚¨ é»˜è®¤å€¼èµ‹å€¼æ“ä½œæ¯”è¾ƒéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯ç»„ä»¶æ‹†åˆ†æ¯”è¾ƒç»†çš„æƒ…å†µ éœ€è¦æ§åˆ¶å¥½ nextTick é—®é¢˜æ€»ç»“inject å’Œ provideåœ¨ä½¿ç”¨ vuex å¯¹ç›‘å¬çš„è·¯ç”±å‚æ•°åšç¼“å­˜ä¹‹å‰ï¼Œé¦–å…ˆè€ƒè™‘çš„æ˜¯ inject å’Œ provide æ¥åšåŠ¨æ€ä¼ é€’ï¼Œæ¯•ç«Ÿä¸šåŠ¡ç»„ä»¶éƒ½åœ¨åŒä¸€ä¸ª router-view ä¹‹ä¸‹ï¼Œè¿™æ ·åšå‚æ•°é€ä¼ åŸåˆ™ä¸Šæ˜¯å¯è¡Œçš„ã€‚ ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œä¸çŸ¥é“ä¸ºä½•ï¼Œå¯¹äº from çš„è·¯ç”±æ€»æ˜¯ç›‘å¬ä¸åˆ°ï¼Œinject è·å–çš„å€¼ä¸€ç›´ä¸º undefinedï¼ˆå³ä½¿èƒ½æ‰“å°å‡ºæ¥ç»“æœï¼‰ã€‚ç”±äºä½¿ç”¨ JSON.stringfy åˆ†æ from æ—¶ä¼šæŠ¥é”™ï¼Œæš‚æ—¶ä¹Ÿæ²¡æ³•å¤„ç†è¯¥é—®é¢˜ï¼Œå› æ­¤é‡‡ç”¨äº† vuex çš„å¤‡é€‰æ–¹æ¡ˆã€‚ class é£æ ¼çš„ ProvideReactive è¿˜æ²¡æœ‰åšè¿‡å°è¯•ï¼Œä¹‹åçœ‹èƒ½å¦å¯è¡Œ åˆ†é¡µé—®é¢˜åœ¨èµ‹å€¼é»˜è®¤å€¼æ—¶ï¼Œç”±äºåˆ†é¡µå‚æ•°ä¼šå­˜å‚¨åœ¨ä¼ å‚ä¹‹ä¸­ï¼Œä½†æ˜¯æ€»æ•°å€¼ä¸ä¼šã€‚è™½ç„¶åšåˆå§‹åŒ–èµ‹å€¼ä¹‹åæŸ¥è¯¢å†…å®¹ä¸é¢„æœŸçš„ç»“æœä¸€è‡´ï¼Œä½†æ˜¯å”¯ç‹¬åˆ†é¡µç»„ä»¶çš„å½“å‰é¡µæ•°ä¸æ­£ç¡®ï¼ˆelement UI çš„ el-paginationï¼‰ï¼Œæ— è®º currentPage å€¼ä¸ºå¤šå°‘ï¼Œå…¶æœ€ç»ˆæ˜¾ç¤ºçš„ç»“æœä»ç„¶ä¸º 1ã€‚ åŸå› ï¼š el-pagination å¤„ç†åˆ†é¡µé€»è¾‘æ—¶ï¼Œåœ¨ total / pageSize &lt; currentPage çš„æƒ…å†µï¼Œå…¶ä¼šä½¿ç”¨é»˜è®¤çš„ internalCurrentPage å€¼ï¼Œè€Œæ­¤å±æ€§çš„é»˜è®¤å€¼ä¸º 1ã€‚åœ¨æŸ¥è¯¢å®Œç»“æœååœ¨ä¸ºå¯¹åº”çš„ total å’Œ currentPage èµ‹å€¼æ—¶ï¼Œå› ä¸º currentPage å’ŒæŸ¥è¯¢è¿”å›å€¼æ˜¯ä¸€è‡´çš„ï¼Œå¯¹äºç›¸åŒå€¼çš„æƒ…å†µï¼Œå…¶ internalPageCount çš„æ–°æ—§å€¼å°±åˆ¤æ–­ä¸€è‡´äº†ï¼Œå› æ­¤ pager çš„æ˜¾ç¤ºå°±ä¼šä¸€ç›´ä¸º 1ã€‚ è§£å†³ï¼šè§£å†³æ€è·¯æ˜¯åœ¨åˆå§‹åŒ–æ—¶å°† count å€¼è®¾ç½®å¤§ä¸€äº›ï¼Œæˆ–è€…ç¼“å­˜ä¸Šä¸€æ¬¡çš„ count å€¼ï¼Œç„¶ååˆå§‹åŒ–èµ‹å€¼ã€‚","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"}]},{"title":"ES6 æ¨¡å—","slug":"ES6-æ¨¡å—","date":"2019-08-11T11:57:03.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/08/11/ES6-æ¨¡å—/","link":"","permalink":"https://monocy.gitee.io/2019/08/11/ES6-æ¨¡å—/","excerpt":"å‰è¨€ä½œä¸º JS ä¸­æœ€é‡è¦çš„ä»£ç ç»„ç»‡æ¨¡å¼ï¼Œäº†è§£ ES6 æ¨¡å—ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚åœ¨æœ€è¿‘çš„é˜…è¯»å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¨¡å—è¿™éƒ¨åˆ†ä¹Ÿç•¥æœ‰å¿ƒå¾—ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ä¹ å¾—çš„çŸ¥è¯†ã€‚ çŸ¥è¯†ç‚¹æ¥è‡ªã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸‹å·ã€‹","text":"å‰è¨€ä½œä¸º JS ä¸­æœ€é‡è¦çš„ä»£ç ç»„ç»‡æ¨¡å¼ï¼Œäº†è§£ ES6 æ¨¡å—ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚åœ¨æœ€è¿‘çš„é˜…è¯»å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¨¡å—è¿™éƒ¨åˆ†ä¹Ÿç•¥æœ‰å¿ƒå¾—ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ä¹ å¾—çš„çŸ¥è¯†ã€‚ çŸ¥è¯†ç‚¹æ¥è‡ªã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸‹å·ã€‹ æ—§æ–¹æ³•åœ¨ç¨‹åºç¼–å†™è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦ä¸€ä¸ªåŒ…å«å†…éƒ¨å˜é‡å’Œå‡½æ•°çš„å¤–å±‚å‡½æ•°ï¼Œæ¥å®ç°é¢å‘æ¥å£å¼çš„ç¼–ç¨‹ã€‚ä¾‹å¦‚ï¼š 1234567891011// ç›®æ ‡åŠŸèƒ½function Hello(name) &#123; function greeting() &#123; console.log('hello' + name + '!'); &#125; // å…¬å…± API return &#123; greeting: greeting &#125;&#125; æ¯ä¸€æ¬¡è°ƒç”¨ Hello æˆ‘ä»¬éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå¦‚æœæˆ‘ä»¬ä»…éœ€è¦å•ä¾‹çš„è¯ï¼Œæ­¤å¸¸è§çš„å˜å½¢ä¾¿æ˜¯é—­åŒ…ï¼ˆIIFEï¼‰äº†ï¼Œå¦‚ï¼š 123456789101112var hello = (function(name) &#123; function greeting() &#123; console.log('hello' + name + '!'); &#125; // å…¬å…± API return &#123; greeting: greeting &#125;&#125;)('katty');hello.greeting(); // hello katty ! æ–°æ–¹æ³•â€œæ–°æ–¹æ³•â€å…¶å®æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ UMDã€AMDå’ŒCommonJSç­‰ï¼Œä½†æ˜¯æ­¤å¤„ä»…ä»…ä»‹ç» ES6 çš„æ¨¡å—æ–¹æ³•ï¼Œæ¯•ç«ŸåŸºäºè¯­è¨€å®˜æ–¹æ¨èçš„æ¨¡å—å¯¼å‡ºå¼•å…¥ï¼Œå¿…å°†æˆä¸ºæœªæ¥çš„ä¸»æµæ–¹æ³•ã€‚ æ”¯æ’‘èµ· ES6 æ¨¡å—çš„ä¸¤ä¸ªä¸»è¦å…³é”®å­—æ˜¯ export å’Œ importï¼Œæ­¤ä¸¤æ–¹æ³•å¿…é¡»å‡ºç°åœ¨æ‰€æœ‰ä»£ç å—å’Œå‡½æ•°çš„å¤–é¢ï¼ˆå¦‚ï¼šä¸èƒ½æ”¾åœ¨ if æ–¹æ³•å†…ï¼‰ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚ å¯¼å‡ºæ–¹æ³•export å…³é”®å­—å³è¡¨ç¤ºæ¨¡å—çš„å¯¼å‡ºã€‚å¯¼å‡ºçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š 12345// å‘½åå¯¼å‡ºexport const arrPos = 1;// é»˜è®¤å¯¼å‡ºexport default function bar() &#123;&#125; å¯¹äºä¸€ä¸ª ES6 æ¨¡å—æ¥è¯´ï¼Œæ²¡æœ‰ export è¡¨ç¤ºçš„ä»»ä½•å˜é‡æˆ–è€…å‡½æ•°ï¼Œå…¶éƒ½æ˜¯ä½œç”¨åŸŸå†…éƒ¨ç§æœ‰çš„ã€‚ æ­¤å¤–ï¼Œä¸€ä¸ªæ¨¡å—å†…ï¼ˆå³ä¸€ä¸ª js æ–‡ä»¶å†…ï¼‰åªæœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºæ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªå‘½åå¯¼å‡ºçš„æ–¹æ³•ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹â€œå‘½åå¯¼å‡ºâ€ã€‚ å‘½åå¯¼å‡ºé¦–å…ˆæˆ‘ä»¬å¾—æ³¨æ„çš„æ˜¯ï¼Œå‘½åå¯¼å‡ºå¯¼å‡ºçš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œè€Œéå€¼çš„æ‹·è´ã€‚ä¾‹å¦‚ï¼š 123// bar.jsexport let num = 2;num = 3; å¯¹äºä¹‹åå¼•ç”¨ bar.js æ–‡ä»¶çš„ num å±æ€§æ—¶ï¼Œæˆ‘ä»¬è·å¾—çš„ num å€¼ä¸º 3ã€‚ æ­¤å¤–ï¼Œå‘½åå¯¼å‡ºè¿˜æœ‰è®¸å¤šå˜ä½“ï¼Œä¾‹å¦‚ï¼š 12345678function foo() &#123;&#125;function baz() &#123;&#125;// ES6 çš„ç®€ç•¥å†™æ³•export &#123; foo, baz &#125;// æ›´æ”¹å¯¼å‡ºåç§°export &#123; foo as bar, baz &#125; æ—¢ç„¶æœ‰æ›´æ”¹å¯¼å‡ºçš„åç§°çš„å†™æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½æ›´æ”¹é»˜è®¤å¯¼å‡ºçš„ç»‘å®šå†…å®¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚æˆ‘å°†å…¶ç§°ä¹‹ä¸ºâ€œåŠ¨æ€é»˜è®¤å¯¼å‡ºâ€ã€‚ åŠ¨æ€é»˜è®¤å¯¼å‡ºæ‰€è°“åŠ¨æ€é»˜è®¤å¯¼å‡ºï¼Œå³å®ƒèƒ½å¤ŸåŠ¨æ€çš„æ”¹å˜é»˜è®¤å¯¼å‡ºçš„å†…å®¹è€Œä¸å½±å“å…¶ä½™ä»£ç çš„æ›´æ”¹ã€‚ä¾‹å¦‚ï¼š 1234567let foo = 42;export &#123; foo as default &#125;;export let bar = \"hello world\";foo = 10;bar = \"cool\"; å½“å€’å…¥è¿™ä¸ªæ¨¡å—æ—¶ï¼Œ default å’Œ bar ä¼šé»˜è®¤ç»‘å®šåˆ°å±€éƒ¨å˜é‡ foo å’Œ barï¼Œå³å®ƒä»¬ä¼šæš´éœ²æ›´æ–°åçš„å€¼ 10 å’Œ â€œcoolâ€ã€‚ æ³¨ï¼šå¯¼å‡ºæ—¶åˆ»çš„å€¼æ˜¯æ— å…³ç´§è¦çš„ï¼Œå¯¼å…¥æ—¶å€™çš„å€¼ä¹Ÿæ˜¯ï¼Œç»‘å®šæ˜¯æ´»è¿æ¥ï¼Œæ‰€ä»¥é‡è¦çš„æ˜¯è®¿é—®è¿™ä¸ªç»‘å®šæ—¶åˆ»çš„å½“å‰å€¼ã€‚ å¯¼å‡ºå†…å®¹èƒ½å¤ŸåŠ¨æ€æ”¹å˜ï¼Œé‚£ä¹ˆè¿™æ ·èƒ½å¦å‡å°‘æˆ‘ä»¬å¯¹æ¨¡å—å¯¼å…¥æ—¶çš„ä»£ç é‡å‘¢ï¼Ÿé‚£ä¹ˆçœ‹çœ‹â€œåŠ¨æ€æ¨¡å—å¯¼å‡ºâ€å§ã€‚ åŠ¨æ€æ¨¡å—å¯¼å‡ºå¯¹äºå…¬å…±æ–‡ä»¶å¤¹å†…æ–‡ä»¶æ¥è¯´ï¼ŒåˆæœŸæ–‡ä»¶ä¸å¤šçš„æƒ…å†µæˆ‘ä»¬ç»å¸¸ä¼šè¿™ä¹ˆå¼•ç”¨ï¼š 1import ModuleA from './common/module-a'; ç„¶è€Œï¼Œå½“æ–‡ä»¶è¶Šæ¥è¶Šå¤šæ—¶ï¼Œè¿™ç§å†™æ³•å°±æ¯”è¾ƒç¬¨æ‹™äº†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå…¬å…± index.ts æ–‡ä»¶æ¥ä¸­å¿ƒåŒ–æ–‡ä»¶å¯¼å‡ºï¼š 12345678910111213// index.tsimport ModuleA from './module-a';import ModuleB from './module-b';export &#123; ModuleA, ModuleB&#125;export default &#123; ModuleA, ModuleB&#125; å½“ç„¶ï¼Œè¿™ç§å†™æ³•åŸºæœ¬èƒ½è§£å†³æ¨¡å—å¼•å…¥é—®é¢˜ï¼Œç„¶è€Œç¼ºç‚¹æ˜¯æ¯æ¬¡æ–°å¢æ–‡ä»¶åï¼Œéƒ½éœ€è¦æ”¹ 3 å¤„ï¼Œå˜åŠ¨çš„ç‚¹ç›¸å¯¹å¤ªå¤šäº†ã€‚å› æ­¤ä¸ºäº†å‡å°‘æ”¹å˜çš„ä»£ç é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨â€œåŠ¨æ€æ¨¡å—å¯¼å‡ºâ€æ³•ï¼š 123// åŠ¨æ€æ¨¡å—å¯¼å‡ºexport &#123; default as ModuleA &#125; from './module-a';export &#123; default as ModuleB &#125; from './module-b'; è¿™æ ·æ¯æ¬¡å˜åŠ¨åï¼Œæˆ‘ä»¬åªéœ€è¦æ–°å¢ä¸€è¡Œå³å¯ï¼Œä»£ç çš„æ”¹å˜é‡å°±å¾ˆå°‘äº†ã€‚ å¯¼å…¥æ–¹æ³•ä¸ export ç›¸åŒï¼Œimport å¯¼å…¥åŒæ ·ä¹Ÿæœ‰ç›¸åº”çš„å˜ä½“ï¼Œæ¯”å¦‚ï¼š 123456789// å…¨é‡å¯¼å…¥import ModuleA from './module-a';import &#123; default as ModuleA &#125; from './module-a';// éƒ¨åˆ†å¯¼å…¥import &#123; foo &#125; from './module-a';// å˜åå¯¼å…¥import &#123; bar as foo &#125; from './module-a'; å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†é»˜è®¤å¯¼å…¥å’Œå…¶ä»–å‘½åå¯¼å…¥ä¸€èµ·å¯¼å…¥ã€‚åŠ å…¥æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªå¯¼å‡ºçš„æ¨¡å—ï¼Œä¾‹å¦‚ï¼š 123export default function foo() &#123;&#125;export function bar() &#123;&#125; é‚£ä¹ˆå¯¼å…¥è¿™ä¸ªæ¨¡å—çš„é»˜è®¤å¯¼å‡ºå’Œå®ƒçš„å‘½åå¯¼å‡ºçš„å†™æ³•ä¸ºï¼š 1import Foo, &#123; bar &#125; from './module-a'; ES6 æ¨¡å—è¿™äº›å¼ºçƒˆå»ºè®®çš„æ–¹æ³•æ˜¯ï¼Œåªä»æ¨¡å—å¯¼å…¥éœ€è¦çš„å…·ä½“ç»‘å®šã€‚å¦‚æœä¸€ä¸ªæ¨¡å—æä¾›äº† 10 ä¸ª API æ–¹æ³•ï¼Œä½†æ˜¯ä½ åªéœ€è¦å…¶ä¸­çš„ 2 ä¸ªï¼Œæœ‰äº›äººåšä¿¡å°†æ‰€æœ‰çš„ API ç»‘å®šéƒ½å¯¼å…¥è¿›äº†æ˜¯ä¸€ç§æµªè´¹ã€‚ å› æ­¤ä»–ä»¬æå€¡çš„æ˜¯â€œçª„å¯¼å…¥â€ï¼ˆæ²¡æœ‰ export defaultï¼‰ï¼Œè¿™æ ·é™¤äº†ä»£ç æ›´åŠ æ¸…æ™°å¤–ï¼Œå…¶å¦ä¸€ä¸ªå¥½å¤„æ˜¯ä½¿å¾—é™æ€åˆ†æå’Œé”™è¯¯æ£€æµ‹ï¼ˆæ¯”å¦‚æ„å¤–ä½¿ç”¨äº†é”™è¯¯çš„ç»‘å®šåç§°ï¼‰æ›´åŠ å¥å£®ã€‚ ç„¶è€Œè¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯æ¯”è¾ƒç¹å¤ã€æ¯æ¬¡æ–°å¢ä¸œè¥¿æ—¶éƒ½å¾—æ›´æ–° import æ–¹æ³•ï¼ˆç‰¹åˆ«æ˜¯éœ€è¦å…¨é‡å¯¼å…¥çš„æƒ…å†µï¼‰ï¼Œå› æ­¤ import åˆæœ‰ä¸€ç§è¯­æ³•å˜ä½“å¯ä»¥æ”¯æŒè¿™ç§æ¨¡å—çš„å¯¼å…¥ï¼Œç§°ä¸ºâ€œå‘½åç©ºé—´å¯¼å…¥â€ å‘½åç©ºé—´å¯¼å…¥å‘½åç©ºé—´å¯¼å…¥å°±æ˜¯å°†æ¨¡å—å†…æ‰€æœ‰çš„å¯¼å‡ºå†…å®¹ï¼ˆåŒ…æ‹¬é»˜è®¤å¯¼å‡ºçš„å†…å®¹ï¼‰éƒ½å½’çº³åœ¨ä¸€ä¸ªå‘½åç©ºé—´å†…ï¼Œå¦‚ï¼š 12345678// å¯¼å‡ºæ¨¡å—// foo.tsexport function bar() &#123;&#125;export let name = \"myName\";export function baz() &#123;&#125;// å¯¼å…¥æ¨¡å—import * as foo from \"foo\" æ³¨æ„ï¼Œå¦‚æœå¯¹åº”çš„å¯¼å‡ºæ¨¡å—æœ‰ default å¯¼å‡ºæ—¶ï¼Œä½¿ç”¨ * as xxx å…¨é‡å¼•å…¥æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ xxx.default æ¥è·å–/ä½¿ç”¨é»˜è®¤å¯¼å‡ºçš„å†…å®¹ã€‚ æ¨¡å—ä¾èµ–ç¯æ¨¡å—éƒ¨åˆ†æœ€ä»¤äººç–‘æƒ‘çš„æ˜¯ A å¯¼å…¥ Bï¼Œç„¶å B å¯¼å…¥ Aï¼Œè¿™ç§æƒ…å†µæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ é¦–å…ˆâ€œæ¨¡å—Aâ€ï¼š 1234567// A æ¨¡å—import bar from \"B\";export default function foo(x) &#123; if (x &gt; 10) return bar(x - 1); return x * 2;&#125; ç„¶åæ˜¯â€œæ¨¡å—Bâ€ï¼š 1234567// B æ¨¡å—import foo from \"A\";export default function bar(y) &#123; if (y &gt; 5) return foo(y / 2); return y * 3;&#125; åœ¨ ES6 çš„æ¨¡å—ä¸‹ï¼Œæ”¹ä¸¤å£°æ˜å¤„äºä¸åŒçš„ä½œç”¨åŸŸå†…ï¼Œå› æ­¤å…¶éœ€è¦é¢å¤–çš„å·¥ä½œæ¥æ”¯æŒè¿™æ ·çš„å¾ªç¯å¼•ç”¨ã€‚ä¸‹é¢æ˜¯ç²—ç•¥æ¦‚å¿µçš„æ„ä¹‰ä¸Šå¾ªç¯çš„ import ä¾èµ–å¦‚ä½•ç”Ÿæ•ˆå’Œè§£æçš„è¿‡ç¨‹ï¼š å¦‚æœå…ˆåŠ è½½â€œæ¨¡å—Aâ€ï¼Œç¬¬ä¸€æ­¥æ˜¯æ‰«æè¿™ä¸ªæ–‡ä»¶åˆ†ææ‰€æœ‰çš„å¯¼å‡ºï¼Œè¿™æ ·å°±å¯ä»¥æ³¨å†Œæ‰€æœ‰å¯ä»¥å¯¼å…¥çš„ç»‘å®šã€‚ç„¶åå¤„ç† import â€¦ from â€œBâ€ã€‚ å¼•æ“åŠ è½½â€œæ¨¡å—Bâ€ä¹‹åï¼Œä¼šå¯¹å®ƒçš„å¯¼å‡ºç»‘å®šè¿›è¡ŒåŒæ ·çš„åˆ†æã€‚å½“çœ‹åˆ° import â€¦ from â€œAâ€ï¼Œå®ƒå·²ç»äº†è§£ â€œAâ€ çš„ APIï¼Œæ‰€ä»¥å¯ä»¥éªŒè¯ import æ˜¯å¦æœ‰æ•ˆã€‚ç°åœ¨å®ƒäº†è§£ â€œBâ€ çš„ APIï¼Œå°±å¯ä»¥éªŒè¯ç­‰å¾…çš„ â€œAâ€ æ¨¡å—ä¸­ import â€¦ from â€œBâ€ çš„æœ‰æ•ˆæ€§ã€‚ ç°åœ¨è®©æˆ‘ä»¬éªŒè¯ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¨¡å—ï¼š 1234567// å¼•ç”¨ fooimport foo from \"A\";foo(25); // 11// å¼•ç”¨ barimport bar from \"bar\";bar(25); // 11.5","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"æ­å»ºç§äºº git ä»“åº“","slug":"æ­å»ºç§äºº-git-ä»“åº“","date":"2019-08-04T09:57:18.000Z","updated":"2022-07-26T13:16:34.308Z","comments":true,"path":"2019/08/04/æ­å»ºç§äºº-git-ä»“åº“/","link":"","permalink":"https://monocy.gitee.io/2019/08/04/æ­å»ºç§äºº-git-ä»“åº“/","excerpt":"å‰è¨€æœ¬æ–‡åŸæ¥ç»´æŠ¤åœ¨ segmentfault ä¸Šï¼Œç”±äºæœ¬å‘¨æ—¶é—´ä¸æ˜¯å¾ˆå……è¶³ï¼Œå› æ­¤å°†åŸæ¥çš„æ–‡ç« ç»´æŠ¤è‡³æœ¬åšå®¢ï¼Œä¹‹åæ—¶é—´å……è£•çš„æ—¶å€™å†è¡¥å……ä¸€ç¯‡ã€‚æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šæ­å»ºæ­»äººçš„ git ä»“åº“ï¼Œæ¯•ç«Ÿè¿‘æœŸçš„ github ä¹Ÿä¸ç®—æ˜¯ååˆ†å®‰å…¨~è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ç§äºº git ä»“åº“çš„æ­å»ºä¹‹æ³•çš„ã€‚","text":"å‰è¨€æœ¬æ–‡åŸæ¥ç»´æŠ¤åœ¨ segmentfault ä¸Šï¼Œç”±äºæœ¬å‘¨æ—¶é—´ä¸æ˜¯å¾ˆå……è¶³ï¼Œå› æ­¤å°†åŸæ¥çš„æ–‡ç« ç»´æŠ¤è‡³æœ¬åšå®¢ï¼Œä¹‹åæ—¶é—´å……è£•çš„æ—¶å€™å†è¡¥å……ä¸€ç¯‡ã€‚æœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šæ­å»ºæ­»äººçš„ git ä»“åº“ï¼Œæ¯•ç«Ÿè¿‘æœŸçš„ github ä¹Ÿä¸ç®—æ˜¯ååˆ†å®‰å…¨~è¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ç§äºº git ä»“åº“çš„æ­å»ºä¹‹æ³•çš„ã€‚ å®¢æˆ·ç«¯é…ç½®å®‰è£… gitå®˜æ–¹ä¸‹è½½ git å®‰è£…åŒ…ï¼Œæ ¹æ®æç¤ºå®‰è£…å³å¯ï¼ŒGit å®˜ç½‘ã€‚ å®‰è£…å®Œæˆåé…ç½®ä¸ªäººçš„ git ä¿¡æ¯ï¼Œåœ¨ git bash ä¸­è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ã€‚ 12git config --global user.name \"your name\"git config --global user.email \"your email\" åˆ›å»º sshkeyåœ¨ bash ä¸­è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼Œçœ‹æœ‰æ²¡æœ‰é…ç½® ssh 123cd ~/.ssh# å¦‚æœæ²¡æœ‰æŠ¥é”™åˆ™æ‰“å°ä¸‹ pub ä¿¡æ¯ï¼Œä¹‹åä¼šç”¨åˆ°ã€‚cat .\\id_rsa.pub ä¸‹é¢ä¸ºåˆ›å»º ssh-key çš„æ–¹æ³• 12# é»˜è®¤ç”Ÿæˆ SSH-2 çš„ RSA å¯†é’¥ï¼Œå¯†ç éƒ¨åˆ†ç›´æ¥å›è½¦å³å¯ssh-keygen -t rsa -C \"mailaddress@example.com\" è¿œç¨‹é…ç½®ï¼ˆubuntu 16ï¼‰åˆ›å»º git ç”¨æˆ·123456# æ£€éªŒç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨id git# ä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ª git ç”¨æˆ·(ä¼šæœ‰æç¤ºåˆ›å¯†ç )adduser git# ç»™ git é…ç½® sudo æƒé™usermod -aG sudo git æ³¨ï¼š é root æƒé™éœ€è¦åŠ  sudo é…ç½® Gitå®‰è£…/æ›´æ–° git 1234apt-get install git# åˆå§‹åŒ–ä¸ªäººä¿¡æ¯git config --global user.name \"your name\"git config --global user.email \"your email\" é…ç½®ä»“åº“12345678# é€‰å–åˆé€‚çš„ä½ç½®ï¼Œåˆ›å»º xxx.git æ–‡ä»¶å¤¹ï¼ˆå¿…é¡» .git ç»“å°¾ï¼‰mkdir /data/git/yourname.git# åˆ›å»ºç©ºè¿œç¨‹ä»“åº“git init --bare data/git/yourname.git# å°†ä»“åº“æ‹¥æœ‰ç€æ”¹ä¸º git ç”¨æˆ·chown -R git:git yourname.git# åˆ‡æ¢ç”¨æˆ·(åˆ‡ä¸åˆ‡éƒ½æ— æ‰€è°“ï¼Œä¸åˆ‡æ³¨æ„åé¢å¾—æ”¹æ‹¥æœ‰è€…)su git æ³¨ï¼š æ›´æ”¹ç”¨æˆ·æ‹¥æœ‰è€…è¿™ä¸€æ­¥ï¼Œå¦‚æœä½ æ˜¯åœ¨ root ç”¨æˆ·ä¸‹å»ºç«‹æ–‡ä»¶çš„è¯éœ€è¦æ›´æ”¹ï¼Œå¦‚æœå…ˆåˆ‡æ¢æˆ git ç”¨æˆ·äº†ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ”¹ï¼Œå¯ç”¨ ll æˆ– ll -a å‘½ä»¤æŸ¥çœ‹ é…ç½®è®¤è¯ç”¨æˆ·ä¿¡æ¯123456789101112131415161718192021# é…ç½® ssh_configcd /etc/sshsudo vi sshd_config# è§£å¼€æ³¨é‡Šï¼Œå¦‚æœæ³¨é‡Šäº†çš„è¯RSAAuthentication yesPubkeyAuthentication yesAuthorizedKeysFile %h/.ssh/authorized_keys# é‡å¯æœåŠ¡ï¼ˆubuntu çš„ sshd ä½ç½®å’Œå…¶ä»–åšå®¢å†™çš„ä¸ä¸€æ ·â€¦â€¦ï¼‰ï¼Œcd /etc/init.dï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ° sshsudo service ssh restart# è¿›å…¥ git ç”¨æˆ·ç›®å½•ä¸‹ï¼Œåˆ›å»ºè®¤è¯æ–‡ä»¶ã€‚æ³¨ï¼šæ­¤ .ssh æ–‡ä»¶å¤¹æƒé™å¿…é¡»ä¸º gitcd home/gitsudo mkdir .sshcd .sshsudo vi authorized_keys# ç„¶åæ­¤å¤„ç²˜è´´å®¢æˆ·ç«¯å…ˆå‰æ‰“å°çš„çš„ rsa çš„ pub æ–‡ä»¶å†…å®¹# ä¿®æ”¹ä»“åº“æƒé™cd /home/gitsudo chmod 700 .sshsudo chmod 600 .ssh/authorized_keys åœ¨æ­¤ä»“åº“å°±é…å®Œäº†ã€‚ æ³¨ï¼š å¾ˆå¤šåšå®¢æ²¡æœ‰ %h è¿™ä¸ªä¸œè¥¿ï¼ŒæŸ¥äº†ä¸‹ askubuntu ï¼Œè¿™ä¸ªè²Œä¼¼å°±æ˜¯æŒ‡ home æœåŠ¡å™¨è‡ªåŠ¨éƒ¨ç½²é…ç½®æ·»åŠ  hook12345678// è¿›å…¥æ‰€åˆ›ä»“åº“çš„ hooks æ–‡ä»¶ç›®å½•cd /data/git/server.git/hooks/sudo vi post-receive// å†™å…¥å¦‚ä¸‹å†…å®¹#/bin/shGIT_WORK_TREE=yourFileAddress git checkout -f// ä¿å­˜åæ”¹ä¸‹æƒé™å³å¯chmod +x post-receive æ³¨ï¼š yourFileAddress çš„æ‹¥æœ‰è€…åº”è¯¥æ˜¯ git ç”¨æˆ· æ‰©å±•çŸ¥è¯†å¦‚ä½•æµ‹è¯•è´¦æˆ·çš„è¿æ¥æƒ…å†µ1ssh -T user@host å…¶ä¸­ï¼š userï¼šè¿œç¨‹åˆ†æ”¯çš„é€šè¿‡ adduser åˆ›å»ºçš„ç”¨æˆ·ï¼Œä¸€èˆ¬åˆ›å»º git ç”¨æˆ·ç®¡ç† git ç›¸å…³å†…å®¹ hostï¼šæœåŠ¡å™¨åœ°å€ï¼Œå¯ä»¥ç›´æ¥ç”¨ ip åœ°å€ï¼Œæœ‰åŸŸåçš„å¯ä»¥å†™åŸŸå ä¾‹ï¼šssh -T git@github.com å…³äºå…³é—­ bash ç™»é™†ç³»ç»Ÿé—®é¢˜ã€‚æ­¤ä¸»è¦é…ç½®ç¦æ­¢é€šè¿‡ git æ¥ç™»é™†æœåŠ¡å™¨ï¼Œä¸ºäº†æœåŠ¡å™¨å®‰å…¨æ€§å»ºè®®é…ç½®ä¸€ä¸‹ï¼š 12sudo vi /etc/passwd# ç„¶åå°† git ç”¨æˆ·çš„é‚£è¡Œçš„ /bin/bash æ”¹æˆ /usr/bin/git-shell æ³¨ï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œè¯·è‡ªè¡ŒæŸ¥æ‰¾è¯¥ç³»ç»Ÿä¸‹çš„ git-shell åœ¨å“ªä¸ªæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤åº”è¯¥æ˜¯ /usr/bin å†… å…³äº 600 å’Œ 700 æƒé™é—®é¢˜ã€‚è¯­æ³•ï¼š 1chmod abc file å…¶ä¸­ a, b, c å„ä¸ºä¸€ä¸ªæ•°å­—ï¼Œåˆ†åˆ«è¡¨ç¤º Userï¼Œ Group åŠ Other çš„æƒé™ã€‚å› ä¸ºï¼š è¯»å– å†™å…¥ æ‰§è¡Œr = 4, w = 2, x = 1 æ•…è€Œï¼š rwx : 4 + 2 + 1 =&gt; 7 rw : 4 + 2 =&gt; 6 æˆ‘ä»¬è¿™è¾¹ä»…å¼„ User æƒé™ï¼Œå› æ­¤ç•¥ã€‚ å‚è€ƒubuntu æƒé™é…ç½®ä»“åº“æƒé™%h meanhooks é…ç½®","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/tags/Git/"}]},{"title":"è®° JS çš„ç±»å‹è½¬æ¢","slug":"è®°-JS-çš„ç±»å‹è½¬æ¢","date":"2019-07-16T02:50:54.000Z","updated":"2022-07-26T13:15:27.289Z","comments":true,"path":"2019/07/16/è®°-JS-çš„ç±»å‹è½¬æ¢/","link":"","permalink":"https://monocy.gitee.io/2019/07/16/è®°-JS-çš„ç±»å‹è½¬æ¢/","excerpt":"å‰è¨€JS å†…æœ€ä¸ºè¯Ÿç—…çš„ä¾¿æ˜¯å…¶éšå¼ç±»å‹è½¬æ¢é—®é¢˜ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå…¶å¤æ‚çš„è§„åˆ™ä»¥åŠè¯¡å¼‚çš„ç»“æœå¾ˆå®¹æ˜“ä¸€å¤´é›¾æ°´ã€‚è¿™éš¾é“è¡¨æ˜ JS ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿå…¶å®ä¸ç„¶ï¼Œéšå¼çš„è½¬æ¢å¸¦ç»™æˆ‘ä»¬çš„æ˜¯ä»£ç çš„ç®€ä»‹åº¦ï¼Œåœ¨åˆé€‚çš„æ—¶æœºä½¿ç”¨ï¼ŒåŒæ ·ä¼šå¸¦æ¥ä¼˜è´¨çš„ coding ä½“éªŒã€‚æœ¬æ–‡å°±æ¥æ¢³ç†ä¸€ä¸‹ JS ç±»å‹è½¬åŒ–è§„åˆ™ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚ æœ¬ç¯‡å‚è€ƒæ–‡ç«  ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸­ç¯‡ã€‹ ç¬¬å››ç« ","text":"å‰è¨€JS å†…æœ€ä¸ºè¯Ÿç—…çš„ä¾¿æ˜¯å…¶éšå¼ç±»å‹è½¬æ¢é—®é¢˜ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå…¶å¤æ‚çš„è§„åˆ™ä»¥åŠè¯¡å¼‚çš„ç»“æœå¾ˆå®¹æ˜“ä¸€å¤´é›¾æ°´ã€‚è¿™éš¾é“è¡¨æ˜ JS ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿå…¶å®ä¸ç„¶ï¼Œéšå¼çš„è½¬æ¢å¸¦ç»™æˆ‘ä»¬çš„æ˜¯ä»£ç çš„ç®€ä»‹åº¦ï¼Œåœ¨åˆé€‚çš„æ—¶æœºä½¿ç”¨ï¼ŒåŒæ ·ä¼šå¸¦æ¥ä¼˜è´¨çš„ coding ä½“éªŒã€‚æœ¬æ–‡å°±æ¥æ¢³ç†ä¸€ä¸‹ JS ç±»å‹è½¬åŒ–è§„åˆ™ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ã€‚ æœ¬ç¯‡å‚è€ƒæ–‡ç«  ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScript ä¸­ç¯‡ã€‹ ç¬¬å››ç«  æ€»ä½“è½¬æ¢è§„åˆ™æ–‡æ¡£å†…ä»‹ç»çš„æ¯”è¾ƒæ¸…é™¤ï¼Œæ­¤å¤„ä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ•ˆæœï¼Œä»…å¼•ç”¨ä¸€ä¸‹æˆªå–è‡ª Alex Dorey çš„ GithubIO çš„ä¸€å¼ å›¾ï¼š ä»”ç»†ç†è§£ä¸€ä¸‹ï¼Œå¯¹äº JS ä¸­å¾ˆå¤šç›¸ç­‰æ¯”è¾ƒçš„å¥‡å¦™ç»“æœä¾¿éƒ½èƒ½è§£é‡Šäº†ã€‚æ¯”å¦‚ï¼š 1'0' == false; // true å½“ string ä¸ boolean ç±»å‹æ¯”è¾ƒæ—¶ï¼Œä¼šä¼˜å…ˆå°† boolean è½¬åŒ–ä¸º numberï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°ä¸­é—´æ­¥éª¤ä¸ºï¼š 12// Step 1'0' == 0; ç„¶å string æ¯”è¾ƒ number æ—¶ï¼Œæ­¤æ—¶ä¼šä¼˜å…ˆå°† string è½¬åŒ–ä¸º numberï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ° 12// Step 20 == 0; æœ€ç»ˆçš„ç»“æœæ˜¾è€Œæ˜“è§ï¼Œé‚£å°±æ˜¯ true äº†ã€‚ æç«¯æƒ…å†µå½“ç„¶æˆ‘ä»¬ä¸æ’é™¤æœ‰äº›éš¾ä»¥ç†è§£çš„æç«¯æƒ…å†µï¼Œä»¥ä¸‹åˆ—ä¸¾ä¸€ä¸ª Caseï¼š 1[] == ![]; // true åˆ†æä¸€ä¸‹ï¼Œç”±äº ! çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ä¼˜å…ˆè¿›è¡Œæ˜¾ç¤ºè½¬æ¢ï¼Œäºæ˜¯æœ‰ï¼š 123456// Step 1[] == !Boolean([])// Step 2[] == !true// Step 3[] == false ç„¶åå¯¹è±¡ä¸ boolean ç±»å‹æ¯”è¾ƒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å¯¹è±¡çš„ [[DefaultValue]] æ–¹æ³•ï¼ˆtoString/valueOfï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ° 1234// Step 4[].toString() == false// Step 5&apos;&apos; == false è¿™ä¸€æ­¥åˆå›åˆ°äº† string ä¸ boolean çš„æ¯”è¾ƒäº†ï¼Œå¾ˆæ˜æ˜¾æœ€ç»ˆçš„ç»“æœä¸º trueã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰éƒ¨åˆ†æ¯”è¾ƒéš¾ä»¥ç†è§£çš„ï¼Œè¿™é‡Œå°±ç¨å¾®åˆ—ä¸¾ä¸€ä¸‹ï¼š 1234// æ•°ç»„å•ä¸ªå€¼çš„è§£æ'' == [null];'' == [null].toString();'' == ''; // true 1234// å¯¹è±¡çš„è§£æ0 == &#123;&#125;;0 == ToString(&#123;&#125;); // è°ƒç”¨è‡ªèº« __proto__ ä¸Šçš„ toString æ–¹æ³•0 == '[Object object]'; // false é€»è¾‘è¿ç®—ç¬¦éšå¼ç±»å‹è½¬æ¢ç›¸å…³çš„è¿˜æœ‰é€»è¾‘è¿ç®—ç¬¦ï¼Œä½†æ˜¯ JS ä¸­çš„é€»è¾‘è¿ç®—ç¬¦åˆå’Œå…¶å®ƒå¼ºç±»å‹è¯­è¨€ï¼ˆå¦‚ Cï¼‰çš„é€»è¾‘è¿ç®—ç¬¦ä¸åŒï¼Œå…¶è¿”å›å€¼å¹¶é boolean ç±»å‹ã€‚æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š 123456789const a = 4;const b = 'a';const c = null;a || b; // 4a &amp;&amp; b; // \"a\"c || b; // \"a\"c &amp;&amp; b; // null å¯è§ï¼Œ|| å’Œ &amp;&amp; é¦–å…ˆä¼šå¯¹ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼ˆa å’Œ cï¼‰æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æœå…¶ä¸æ˜¯å¸ƒå°”å€¼å°±è¿›è¡Œ toBoolean å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç„¶åå†æ‰§è¡Œæ¡ä»¶åˆ¤æ–­ã€‚ å…¶è§„å¾‹ä¸ºï¼š å¯¹äº || æ¥è¯´ï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­çš„ç»“æœä¸º true å°±è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼ˆa å’Œ cï¼‰çš„å€¼ï¼Œå¦åˆ™è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼ˆbï¼‰çš„å€¼ã€‚ å¯¹äº &amp;&amp; æ¥è¯´ï¼Œå¦‚æœæ¡ä»¶åˆ¤æ–­çš„ç»“æœä¸º true å°±è¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼ˆbï¼‰çš„å€¼ï¼Œå¦åˆ™è¿”å›ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼ˆa å’Œ cï¼‰çš„å€¼ã€‚ æ¢ä¸ªè§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬å¾ˆåƒä¸‰å…ƒè¿ç®—ç¬¦ï¼Œä½†æ˜¯å®ƒä¸ä¼šæœ‰å‰¯ä½œç”¨å³ï¼šå…¶ä¸ä¼šæ‰§è¡Œä¸¤æ¬¡ã€‚å¦‚ a ? a : cï¼Œå¦‚æœ a ä¸ºæ¯”è¾ƒå¤æ‚çš„è¿ç®—ï¼Œé‚£ä¹ˆ a ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œä½†æ˜¯ a || cï¼Œå…¶ a åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ æ­¤â€œé€»è¾‘è¿ç®—ç¬¦â€åœ¨ JavaScript ä¸­å¯èƒ½æ›´ä¸ºè´´åˆ‡çš„å«æ³•ä¸ºâ€œæ“ä½œæ•°é€‰æ‹©å™¨â€å§ï¼Œåœ¨å¤§å¤šæ•°çš„ä»£ç å‹ç¼©åçš„å†…å®¹ä¸­æˆ‘ä»¬å¸¸å¸¸èƒ½è§åˆ°å…¶å½±å­ï¼Œå·¥ä½œä¸­ä¸å¦¨ä¹Ÿå¯ä»¥ä¸€è¯• â˜†*:.ï½¡. o(â‰§â–½â‰¦)o .ï½¡.:*â˜† &amp;&amp; å’Œ || è¿ç®—ç¬¦çš„è¿”å›å€¼å¹¶ä¸ä¸€å®šæ˜¯å¸ƒå°”ç±»å‹ï¼Œè€Œæ˜¯ä¸¤ä¸ªæ“ä½œæ•°å…¶ä¸­ä¸€ä¸ªçš„å€¼ã€‚ â€”â€” ES5 è§„èŒƒ 11.11 èŠ‚ ä»£ç å—æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JS ä¸­ { /_ â€¦ _/ } è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¸¸å¸¸å¿˜äº†å®ƒè¿˜èƒ½è¡¨ç¤ºä¸ºä»£ç å—ï¼Œæ¯”å¦‚ while / if åé¢çš„å¤§æ‹¬å·ã€‚ç„¶è€Œè¿™å’Œ JS ç±»å‹è½¬æ¢æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Œæˆ‘ä»¬çœ‹çœ‹ä¸‹ä¾‹ï¼š 1234[] + &#123;&#125;; // [object Object]&#123;&#125;+[]; // 0 é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»…ä»…è°ƒæ¢äº†ä¸€ä¸ªä½ç½®ï¼Œä¸ºä»€ä¹ˆç»“æœä¼šç›¸å·®è¿™ä¹ˆå¤šï¼Ÿ åˆ†æä¸€ä¸‹ï¼Œåœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ{} æ˜¯åœ¨ + è¿ç®—ç¬¦è¡¨è¾¾å¼ä¸­ï¼Œè¯æ³•åˆ†æå°† {} è§£æä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå› æ­¤ç»è¿‡éšå¼è½¬æ¢ï¼Œ{} ä¼šè¢«è½¬æ¢æˆ â€˜[object Object]â€™ï¼Œç©ºæ•°ç»„å°±ä¸ç”¨å¤šè§£é‡Šäº†ï¼Œæ‰€å¯¹åº”çš„ç»“æœä¹Ÿå°±å¦‚ä¸Šäº†ã€‚ ç„¶è€Œç¬¬äºŒä¸ªå´æœ‰äº›ä¸åŒã€‚æˆ‘ä»¬çŸ¥é“ {} ä½œä¸ºç©ºä»£ç å—æ˜¯ä¸æ‰§è¡Œä»»ä½•æ“ä½œçš„ï¼Œä¸”ä¸ç”¨å¸¦ ; ç»“å°¾ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„æ˜¯ä¸å­˜åœ¨è¯­æ³•é—®é¢˜çš„ã€‚å› æ­¤è‡ªå·¦å‘å³æ¥çœ‹ï¼Œè¯æ³•åˆ†æå°†æ­¤åˆ†è§£ä¸º {} ä¸ +[] ä¸¤éƒ¨åˆ†ï¼Œå‰è€…ä½œä¸ºç©ºä»£ç å—æ‰§è¡Œï¼Œæ— ä»»ä½•å‰¯ä½œç”¨ï¼Œåè€…å¼ºåˆ¶è½¬æ¢ç»“æœå°±æ˜¯ 0 äº†ã€‚ å‚è€ƒæ–‡ç«  æ¯”è¾ƒæ“ä½œç¬¦ The Abstract Equality Comparison Algorithm JavaScript ä¸­çš„ç›¸ç­‰æ¯”è¾ƒ ES5 è§„èŒƒä¸­æ–‡æ–‡æ¡£","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"é¡¹ç›® ts è¿ç§»çš„è¸©å‘è®°å½•","slug":"é¡¹ç›®-ts-è¿ç§»çš„è¸©å‘è®°å½•","date":"2019-07-14T05:43:13.000Z","updated":"2022-07-26T13:13:19.053Z","comments":true,"path":"2019/07/14/é¡¹ç›®-ts-è¿ç§»çš„è¸©å‘è®°å½•/","link":"","permalink":"https://monocy.gitee.io/2019/07/14/é¡¹ç›®-ts-è¿ç§»çš„è¸©å‘è®°å½•/","excerpt":"å‰è¨€å…ˆå‰å‘è¿‡ä¸€ç¯‡å¯¹äº shimes-vue-ts æ–‡ä»¶çš„æ€è€ƒï¼Œå…¶ä¸­æœ‰ä¸€èŠ‚å†™åˆ°é¡¹ç›® ts è¿ç§»æ‰€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚å› ä¸ºé¡¹ç›®æ‰åˆšè¿ç§»å®Œä¸€éƒ¨åˆ† tsï¼ˆç”¨å¾—åˆ°çš„éƒ¨åˆ†ï¼‰ï¼Œè¸©å‘çš„è¿‡ç¨‹è¿˜åœ¨è¿›è¡Œä¸­ï¼Œä¸ºäº†æ›´å¥½çš„è®°å½• ts è¿ç§»è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œè¿˜æ˜¯å•ç‹¬å†™ä¸€ç¯‡æ¥åšè®°å½•å§ã€‚æ­¤ç¯‡ä¾¿æ˜¯æ”¹è¿›åçš„é—®é¢˜è®°å½•ï¼Œä»¥åŠç›¸å¯¹è¯¦ç»†çš„è§£å†³æ–¹æ³•ã€‚è¯¥ç¯‡ä¼šæŒç»­è·Ÿæ–°å“¦~","text":"å‰è¨€å…ˆå‰å‘è¿‡ä¸€ç¯‡å¯¹äº shimes-vue-ts æ–‡ä»¶çš„æ€è€ƒï¼Œå…¶ä¸­æœ‰ä¸€èŠ‚å†™åˆ°é¡¹ç›® ts è¿ç§»æ‰€é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚å› ä¸ºé¡¹ç›®æ‰åˆšè¿ç§»å®Œä¸€éƒ¨åˆ† tsï¼ˆç”¨å¾—åˆ°çš„éƒ¨åˆ†ï¼‰ï¼Œè¸©å‘çš„è¿‡ç¨‹è¿˜åœ¨è¿›è¡Œä¸­ï¼Œä¸ºäº†æ›´å¥½çš„è®°å½• ts è¿ç§»è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œè¿˜æ˜¯å•ç‹¬å†™ä¸€ç¯‡æ¥åšè®°å½•å§ã€‚æ­¤ç¯‡ä¾¿æ˜¯æ”¹è¿›åçš„é—®é¢˜è®°å½•ï¼Œä»¥åŠç›¸å¯¹è¯¦ç»†çš„è§£å†³æ–¹æ³•ã€‚è¯¥ç¯‡ä¼šæŒç»­è·Ÿæ–°å“¦~ é—®é¢˜é›†é”¦åŠ¨æ€å¼•å…¥æ—  ts å£°æ˜çš„æ–‡ä»¶é¡¹ç›®å†…æœ‰åŠ¨æ€è®¾ç½® cookie çš„æ–‡ä»¶ï¼Œå› ä¸ºä¸åŒæµ‹è¯•ç¯å¢ƒéœ€è¦é…ç½®ä¸åŒçš„ cookieï¼Œæ¯å¤©éƒ½éœ€è¦ä»æœåŠ¡å™¨æ‹¿å–ä¸€æ¬¡ cookieï¼Œç›®å‰çš„åšæ³•ä¸ºï¼š 1234// cookie-set æ–‡ä»¶å¤¹å·²ç»ç§»é™¤ git ç¼“å­˜è·Ÿè¸ªif (process.env.NODE_ENV === 'development') &#123; import('@/cookie-set');&#125; ç”±äºéœ€è¦è¿ç§» tsï¼Œå¯¹äºåŸæœ‰çš„ cookie-set.js éœ€è¦è¿›è¡Œç±»å‹å£°æ˜ï¼ˆæˆ–è€…éƒ½æ”¹æˆ cookie-set.tsï¼‰ï¼Œä¸ºäº†å…¼å®¹ä¸¤ç§æƒ…å†µï¼Œè¿™é‡Œè¿˜æ˜¯åšäº†å¯¹åº”ç±»å‹å£°æ˜ï¼Œå¦‚ï¼š 12// åœ¨ declarations.d.ts æ–‡ä»¶å†…æ·»åŠ declare module '@/cookie-set'; å‚è€ƒæ–‡ç« ï¼š æ¨¡å—ã€‘ã€typescript-declare-third-party-modules å¼•å…¥æ—  typings çš„ npm åŒ…æ¯”è¾ƒå…¨çš„ npm åŒ…ä¼šåŒ…å«å¯¹åº”çš„ typings æ–‡ä»¶æ¥æ”¯æŒ ts é¡¹ç›®ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰ typings æ–‡ä»¶çš„åŒ…æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å¯¹é½è¿›è¡Œå¤–éƒ¨æ–‡ä»¶å£°æ˜ã€‚é‚£ä¹ˆä¸ºäº†æ”¯æŒ vue.use æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™å¯¹åº”çš„å£°æ˜ï¼š é’ˆå¯¹é»˜è®¤å¯¼å‡ºçš„å£°æ˜å†™æ³•ï¼š 123456// æ­¤é€‚ç”¨äº import vueClipboard from 'vue-clipboard2';declare module 'vue-clipboard2' &#123; import &#123; PluginFunction &#125; from 'vue'; const clipboard: PluginFunction&lt;any&gt;; export default clipboard;&#125; é’ˆå¯¹è§£æ„çš„å†™æ³•ï¼š 12345// æ­¤é€‚ç”¨äº import &#123; monitorVue &#125; from 'fe-monitor-sdk';declare module 'fe-monitor-sdk' &#123; import &#123; PluginObject &#125; from 'vue'; export const monitorVue: PluginObject&lt;any&gt;;&#125; export å’Œ export default å¯å‚è€ƒæ¨¡å—éƒ¨åˆ†å†…å®¹ å‚è€ƒæ–‡ç« ï¼š æ¨¡å—ã€TypeScript æ”¯æŒ vue-router çš„ç»„å»ºå¼•ç”¨æŠ¥é”™è™½ç„¶åœ¨ webpack å†…æˆ‘ä»¬é…ç½®äº† aliasï¼Œä½†é‚£ä»…ä»…åªæ˜¯ webpack æ‰“åŒ…æ—¶ç”¨çš„ï¼Œts å¹¶ä¸è®¤è´¦ï¼Œå®ƒæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚å› æ­¤ï¼Œåœ¨å‡çº§è‡³ ts é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¿˜å¾—ä¸º ts é…ç½®ä¸€ä»½æ¨¡å—è·¯å¾„ï¼Œå¦‚ï¼š 1234567// tsconfig.jsonpath: [ \"@/*\": [ \"src/*\" ], // ...] æ­¤å¤–ï¼Œå› ä¸ºç¼–è¾‘å™¨çš„åŸå› ä½¿å¾—æ— æ³•è¯†åˆ« .vue åç¼€ï¼Œæ‰€ä»¥å¯¹äº vue æ–‡ä»¶çš„å¼•ç”¨å¿…é¡»æ·»åŠ  .vue åç¼€ï¼Œå¦‚ï¼š 1import myComponent from './my-component.vue'; å‚è€ƒæ–‡ç« ï¼š Typescript: IDE reports TS2307ã€æ¨¡å—è§£æ vue çš„ data éƒ¨åˆ†çˆ†çº¢è¿™ä¸ªé—®é¢˜æ¯”è¾ƒéšè”½ï¼ŒæŠ˜è…¾äº†å¾ˆä¹…æ‰å‘ç°å› ä¸º data ä¸ºå‡½æ•°(ä¸»è¦æ˜¯å†™æƒ¯äº†æ‰éš¾ä»¥å¯Ÿè§‰ï¼Œå®˜ç½‘æ–‡æ¡£å› ä¸ºç±»å‹æ¨æ–­æ‰€ä»¥æ²¡æœ‰å†™)ï¼Œå…¶å†…çš„å¯¹è±¡ä¸ºè¿”å›å€¼ï¼Œå› æ­¤æ­¤éƒ¨åˆ†çš„å£°æ˜å¯ä»¥å†™ï¼ˆä¸ªäººæ¨èä¸è¦ç”¨æ–­è¨€ï¼‰ï¼š 123456789// è¿”å›å€¼å£°æ˜å†™æ³•data(): Your Interface here &#123; return &#123;&#125;;&#125;// æ–­è¨€å†™æ³•data() &#123; return &lt;Your assertions here&gt; &#123;&#125;;&#125; æ³¨: ä¸»è¦æ˜¯ä¸º data å†…çš„æ•°ç»„ã€å¯¹è±¡å£°æ˜å¯¹åº”ç±»å‹ï¼Œéƒ½ä¸ºåŸºç¡€ç±»å‹æ—¶ä¸å†™åé¢ä½¿ç”¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ vue çš„ mixins æ–‡ä»¶å†™æ³•Vue çš„ mixins å†™æ³•æœ‰ä¸¤ç§ï¼Œä¸€ç§ä¸ºæ™®é€šçš„ ts å†™æ³•ï¼Œå¦ä¸€ç§ä¸ºè£…é¥°å™¨çš„å†™æ³• 123456789101112// åŸæ¥çš„å†™æ³•export default &#123;/**/&#125;// æ™®é€š ts å†™æ³•import Vue form 'vue';export default Vue.extend(&#123;/**/&#125;)// è£…é¥°å™¨å†™æ³•import &#123; Vue, Component, Prop &#125; from \"vue-property-decorator\";@Componentexport default class ComponentName extends Vue &#123; &#125; æ³¨: æ™®é€š ts å†™æ³•çš„ computed éƒ¨åˆ†éœ€è¦æ·»åŠ èŒƒå›´å€¼ï¼Œå¯å‚è€ƒ vue æ–‡æ¡£ TypeScript æ”¯æŒéƒ¨åˆ†ã€‚ å‚è€ƒæ–‡ç« ï¼š TypeScript-Vue-Starterã€TypeScript æ”¯æŒ VS Code experimentalDecorators é—®é¢˜å› ä¸º vue è£…é¥°å™¨å†™æ³•ä¸ºå®éªŒæ€§ç‰¹æ€§ï¼Œå¯èƒ½åœ¨æœªæ¥çš„å‘è¡Œç‰ˆä¸­å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤éœ€è¦é…ç½®æ­¤å‚æ•°æ¥åˆ é™¤è­¦å‘Šã€‚ç›´æ¥æ ¹æ®è­¦å‘Šæ¥åšç›¸åº”é…ç½®ï¼Œå³åœ¨ tsconfig.json å†…æ·»åŠ å±æ€§ï¼š 1\"experimentalDecorators\": true ç±»çš„é™æ€æ–¹æ³•å…³äºç±»ä¸€èˆ¬ä¼šé‡‡ç”¨ abstruct æŠ½è±¡ç±»æ¥è§„èŒƒæ–¹æ³•å’Œå±æ€§ç­‰ç±»çš„ç»†èŠ‚ï¼Œä½†æ˜¯å¯¹äºâ€œç±»â€ä¸­ static éƒ¨åˆ†æ— æ³•è¿›è¡ŒæŠ½è±¡è§„èŒƒï¼Œéœ€è¦åœ¨å¯¹åº”é™æ€æ–¹æ³•éƒ¨åˆ†è¿›è¡Œå•ç‹¬å¤„ç†ï¼Œå¯¹äºæ­¤éƒ¨åˆ†æ˜¯å¦æœ‰æ›´å¥½çš„å¤„ç†æ–¹æ³•å­˜åœ¨ç–‘é—® ğŸ¤”ï¼ˆå¦‚ï¼šæå–ä¸€ä¸ª interface ä¹‹ç±»çš„å£°æ˜ï¼‰ã€‚ç›®å‰æƒ³åˆ°çš„æ¯”è¾ƒé è°±çš„å†™æ³•æœ‰ä¸¤ä¸ªï¼š namespace å†™æ³•å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿæœ‰è¯´è¿‡ï¼Œå¯¹äºä¸šåŠ¡å†…çš„æ¨¡å—æ¥è¯´ï¼Œæ¨èä½¿ç”¨ namespace æ¥åšå…¨å±€å‘½åï¼Œå› æ­¤å¯¹äºä¸šåŠ¡å†…æ¯”è¾ƒé€šç”¨çš„å…¬å…±æ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨ namespace æ¥å¤„ç†ã€‚ å¯¹äºå¤šå±‚å‘½åç©ºé—´çš„å†™æ³•ï¼Œå¯ç”¨åˆ«åå†™æ³• import NS = FirstNameSpace.SecondNameSpaceï¼Œç„¶åç›´æ¥é€šè¿‡ NS.xxx æ¥ç›´æ¥å–å¯¹åº”å±æ€§å³å¯ã€‚åŒæ—¶åŒºåˆ«åŠ è½½æ¨¡å—æ—¶ä½¿ç”¨çš„ import someModule = require(&#39;moduleName&#39;)ï¼Œæ­¤å¤„çš„åˆ«åä»…ä»…åªæ˜¯åˆ›å»ºä¸€ä¸ªåˆ«åè€Œå·²ï¼Œç®€åŒ–ä»£ç é‡ã€‚ module æ–‡ä»¶å¦ä¸€ç§å¯ç”¨ ES6 çš„æ€æƒ³ï¼Œimport + export ï¼Œå› ä¸ºç±»ä¸­åªæœ‰ static æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºè¯¥ç±»ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œè€Œä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œå› æ­¤ä½œä¸ºä¸€ä¸ª ts æ–‡ä»¶æ¥å­˜å‚¨å¯¹åº”æ–¹æ³•ï¼Œéœ€è¦æ—¶åœ¨ import å¼•å…¥å³å¯ã€‚ eslint è¿ç§»è‡³ tslint æ—¶éƒ¨åˆ†æ ¡éªŒä¿®å¤å¤±æ•ˆé—®é¢˜semi æ— è‡ªåŠ¨è¡¥å…¨å°†åŸæ¥é…ç½®çš„ eslint çš„ semi æ ¡éªŒæ›¿æ¢ï¼š 123456// åŸæ¥çš„é…ç½®semi: [&apos;error&apos;, &apos;always&apos;]// ç°åœ¨çš„é…ç½®&quot;semi&quot;: &quot;off&quot;,&quot;@typescript-eslint/semi&quot;: [&quot;error&quot;], import å¼•å…¥æ²¡æœ‰ä½¿ç”¨çš„å†…å®¹ä¸æŠ¥é”™å› ä¸º @vue/eslint-config-typescript çš„æ–‡ä»¶å†…å°† @typescript-eslint/no-unused-vars ç»™æ³¨é‡Šæ‰äº†ï¼ŒåŒæ—¶ no-unused-vars è®¾ç½®ä¸º â€˜offâ€™ï¼Œä½¿å¾—å¯¹æ²¡æœ‰ä½¿ç”¨çš„å˜é‡éƒ½ä¸æ ¡éªŒã€‚å…¶å¯¹åº”è®¾ç½®çš„è§£é‡Šä¸ºï¼šä¼ é€é—¨ è§£å†³æ–¹æ³•ï¼ˆè·Ÿé¡¹ç›® eslint å’Œ typescript ç‰ˆæœ¬ä¸åŒè€Œä¸åŒï¼‰ï¼š 12345678'@typescript-eslint/no-unused-vars': [ 'error', &#123; vars: 'local', args: 'none', ignoreRestSiblings: true &#125;] å‚è€ƒæ–‡æ¡£ï¼š@typescript-eslint/eslint-pluginã€TypeScript æ”¯æŒã€typescript/no-unused-vars $refs å¼•ç”¨æŠ¥é”™é—®é¢˜ç”±äº Vue å¯¹ refs çš„å£°æ˜ä¸º type Vue | Element | Vue[] | Element[]ï¼Œåœ¨é€šè¿‡ $refs è°ƒç”¨å¯¹åº”ç»„ä»¶æ–¹æ³•æ—¶ï¼Œå› ä¸º Vue å’Œ Element ä¸Šæ²¡æœ‰å¯¹åº”æ–¹æ³•å£°æ˜ï¼Œå› æ­¤æˆ‘ä¹ˆéœ€è¦å¯¹å…¶è¿›è¡Œæ–­è¨€å¤„ç†ï¼Œå¦‚ï¼š 1234567891011121314interface MyComponent extends Vue &#123; someMethod(): void&#125;// æ™®é€š ts å†™æ³•(this.$refs.myComp as MyComponent).someMethod()// è£…é¥°å™¨å†™æ³•@Componentexport default class A extends Vue &#123; $refs: &#123; myComp: MyComponent &#125; this.$refs.myComp.someMethod()&#125; @Prop çš„ç±»å‹é—®é¢˜å®˜æ–¹å¯¹äº @Prop è£…é¥°å™¨çš„å†™æ³•æä¾›äº†ä¸¤ç§æ€è·¯ï¼Œåˆ†åˆ«ä¸ºï¼š 1234// ä¸å¸¦ type@Prop(&#123; default: '' &#125;) readonly propB!: string// å¸¦ type@Prop(&#123; type: String, default: '' &#125;) readonly propB!: string å¸¦ type çš„å’ŒåŸæ¥çš„å†™æ³•å¯ä»¥è¯´æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯ä¸å¸¦ type çš„ä¼šå‡ºç°ä¸¤ç§é—®é¢˜ï¼š é—®é¢˜ä¸€å½“ä¸º Boolean ç±»å‹æ—¶ï¼Œä¼šä½¿å¾—å±æ€§å®˜æ–¹ boolean çš„ç®€å†™æ–¹å¼æ— æ³•ç”Ÿæ•ˆï¼Œå¦‚ï¼š 12&lt;!-- ä¸å†™ type æ—¶æ­¤ä¸ç”Ÿæ•ˆï¼Œåªèƒ½æ˜¾ç¤ºç»‘å®š true å€¼ --&gt;&lt;blog-post is-published&gt;&lt;/blog-post&gt; å®˜æ–¹ä¾‹å­ é—®é¢˜äºŒæ­¤ä¸ä¼šè§¦å‘éƒ¨åˆ†çš„ç›¸åº”çš„ ts ç±»å‹æ ¡éªŒï¼Œä¾‹å¦‚ï¼š 123&lt;!-- å‡å¦‚å¯¹åº” props ä¸ºï¼š @Prop() likes!: number; --&gt;&lt;!-- æ­¤æ—¶ likes ä¼ å…¥ç±»å‹ä¸º stringï¼Œä½†æ˜¯ä¸æŠ¥é”™ --&gt;&lt;blog-post likes=\"42\"&gt;&lt;/blog-post&gt; ä¸ªäººå»ºè®®ï¼š é™¤ééå¸¸ç¡®å®šä¼ å…¥çš„ Prop çš„ç±»å‹ï¼Œå¦åˆ™å°½é‡éƒ½åŠ ä¸Šå¯¹åº”çš„ type å£°æ˜ exceljs å¼•å…¥æŠ¥é”™é—®é¢˜å¼•å…¥ exceljs åï¼Œts ä¸€ç›´æŠ¥é”™ import(&quot;stream&quot;) è¡Œå› ä¸ºæ²¡æœ‰æ‰¾åˆ° stream åŒ…ï¼Œå› æ­¤æŠ¥é”™ã€‚ é—®é¢˜å®šä½äº†å¾ˆä¹…ï¼Œæ‰å‘ç° stream æ˜¯ Node è‡ªå¸¦çš„åŒ…ï¼Œè€Œæˆ‘ä»¬çš„ tsconfig.json å†…å´å¹¶æ²¡æœ‰å°†å¯¹åº”çš„ node ç±»å‹å¼•å…¥ï¼Œå› æ­¤ä¼šæŠ¥é”™ï¼Œè§£å†³æ–¹æ³•ï¼š 123456789&#123; \"compilerOptions\": &#123; // ... \"types\": [ \"webpack-env\", \"node\" // å°† node ç±»å‹åŠ å…¥å³å¯ ] &#125;&#125; æ³¨æ„ï¼Œå¼•å…¥ node åï¼Œå¯èƒ½ä¼šå¼•å‘æ–°çš„ ts é—®é¢˜ï¼Œæ¯”å¦‚è‡ªå®šä¹‰çš„ process.env.XXX å¯èƒ½ä¸º undefinedï¼Œè¿™ä¸ªéœ€è¦è‡ªå·±åšå…¼å®¹äº†ã€‚ å‚è€ƒ issue æ‹“å±•å†…å®¹namespaceTS é‡Œçš„ namespace ä¸»è¦æ˜¯è§£å†³å‘½åå†²çªçš„é—®é¢˜ï¼Œä¼šåœ¨å…¨å±€ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰åœ¨ namespace å†…éƒ¨çš„ç±»éƒ½è¦é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„å±æ€§è®¿é—®ã€‚å¯¹äºå†…éƒ¨æ¨¡å—æ¥è¯´ï¼Œå°½é‡ä½¿ç”¨ namespace æ›¿ä»£ moduleï¼Œå¯å‚è€ƒ namespace ä¸€èŠ‚ã€‚ä¾‹å¦‚ï¼š 123456789101112namespace Test &#123; export const USER_NAME = 'test name'; export namespace Polygons &#123; export class Triangle &#123;&#125; export class Square &#123;&#125; &#125;&#125;// å–åˆ«åimport polygons = Test.Polygons;const username = Test.username; æ³¨ï¼šimport xx = require(â€˜xxâ€™) ä¸ºåŠ è½½æ¨¡å—çš„å†™æ³•ï¼Œä¸è¦ä¸å–åˆ«åçš„å†™æ³•æ··æ·†ã€‚é»˜è®¤å…¨å±€ç¯å¢ƒçš„ namespace ä¸º global å‚è€ƒæ–‡æ¡£ï¼šnamespace moduleæ¨¡å—å¯ç†è§£æˆ Vue ä¸­çš„å•ä¸ª vue æ–‡ä»¶ï¼Œå®ƒæ˜¯ä»¥åŠŸèƒ½ä¸ºå•ä½è¿›è¡Œåˆ’åˆ†çš„ï¼Œä¸€ä¸ªæ¨¡å—è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ã€‚å…¶ä¸ namespace çš„æœ€å¤§åŒºåˆ«åœ¨äºï¼šnamespace æ˜¯è·¨æ–‡ä»¶çš„ï¼Œmodule æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½çš„ï¼Œä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª moduleã€‚ç±»æ¯” Javaï¼Œnamespace å°±å¥½æ¯” Java ä¸­çš„åŒ…ï¼Œè€Œ module åˆ™ç›¸å½“äºæ–‡ä»¶ã€‚ å¦‚æœä½ çš„æ¨¡å—éœ€è¦å°†æ–°çš„åç§°å¼•å…¥å…¨å±€å‘½åç©ºé—´ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨å…¨å±€å£°æ˜ã€‚å¦‚æœä½ çš„æ¨¡å—æ— éœ€å°†æ–°çš„åç§°å¼•å…¥å…¨å±€å‘½åç©ºé—´ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨æ¨¡å—å¯¼å‡ºå£°æ˜ã€‚ FromDefinitelyTyped","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/tags/TypeScript/"}]},{"title":"ä½¿ç”¨ vue-cli å‘å¸ƒä¸€ä¸ªå®Œå–„çš„åŒ…","slug":"ä½¿ç”¨-vue-cli-å‘å¸ƒä¸€ä¸ªå®Œå–„çš„åŒ…","date":"2019-07-11T03:41:56.000Z","updated":"2020-08-16T09:34:09.000Z","comments":true,"path":"2019/07/11/ä½¿ç”¨-vue-cli-å‘å¸ƒä¸€ä¸ªå®Œå–„çš„åŒ…/","link":"","permalink":"https://monocy.gitee.io/2019/07/11/ä½¿ç”¨-vue-cli-å‘å¸ƒä¸€ä¸ªå®Œå–„çš„åŒ…/","excerpt":"å‰è¨€å…¶å®å…ˆå‰æœ‰å†™è¿‡ä¸€ç¯‡ã€Šå‘å¸ƒä¸€ä¸ª vue åŒ…ã€‹ï¼Œä¸è¿‡å¯¹äºâ€œæç®€ä¸»ä¹‰è€…â€æ¥è¯´ï¼Œè¯¥æ–‡ç« è¿˜æ˜¯æ˜¾å¾—æœ‰äº›å¤æ‚ï¼Œæ¯•ç«Ÿéœ€è¦é…ç½®â€œå¤æ‚â€çš„ webpackã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•ä¸Šæ‰‹ã€å¼€ç®±å³ç”¨çš„æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œvue-cli å·²ç»å®Œç¾çš„è€ƒè™‘åˆ°äº†è¿™äº›é—®é¢˜ï¼Œæ­¤å¤„å°±ä»‹ç»å¦‚ä½•ä½¿ç”¨ vue-cli æ¥æ­å»ºä¸€ä¸ªå®Œæ•´çš„å‘åŒ…ç¯å¢ƒã€‚ æ³¨ï¼šæ­¤å¤„çš„ vue-cli æŒ‡çš„æ˜¯ @vue/cli ï¼Œä¸º 3.x ç‰ˆæœ¬ã€‚","text":"å‰è¨€å…¶å®å…ˆå‰æœ‰å†™è¿‡ä¸€ç¯‡ã€Šå‘å¸ƒä¸€ä¸ª vue åŒ…ã€‹ï¼Œä¸è¿‡å¯¹äºâ€œæç®€ä¸»ä¹‰è€…â€æ¥è¯´ï¼Œè¯¥æ–‡ç« è¿˜æ˜¯æ˜¾å¾—æœ‰äº›å¤æ‚ï¼Œæ¯•ç«Ÿéœ€è¦é…ç½®â€œå¤æ‚â€çš„ webpackã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®€å•ä¸Šæ‰‹ã€å¼€ç®±å³ç”¨çš„æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œvue-cli å·²ç»å®Œç¾çš„è€ƒè™‘åˆ°äº†è¿™äº›é—®é¢˜ï¼Œæ­¤å¤„å°±ä»‹ç»å¦‚ä½•ä½¿ç”¨ vue-cli æ¥æ­å»ºä¸€ä¸ªå®Œæ•´çš„å‘åŒ…ç¯å¢ƒã€‚ æ³¨ï¼šæ­¤å¤„çš„ vue-cli æŒ‡çš„æ˜¯ @vue/cli ï¼Œä¸º 3.x ç‰ˆæœ¬ã€‚ ç›®æ ‡æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡æ˜¯å‘å¸ƒçš„åŒ…ã€æµ‹è¯•ç¯å¢ƒå’ŒåŒ…çš„ä½¿ç”¨æ–‡æ¡£ï¼Œæ­¤å¯æ¦‚æ‹¬ä¸ºï¼šé¡¹ç›®æ„å»ºç¯å¢ƒå’Œé¡¹ç›®ä½¿ç”¨æ–‡æ¡£ã€‚ç”±äº vue-cli å¯ä»¥æ‰‹åŠ¨é…ç½®é¡¹ç›®éœ€è¦çš„ç¯å¢ƒï¼Œå› æ­¤åœ¨é¡¹ç›®æ„å»ºç¯å¢ƒéƒ¨åˆ†æ­¤å¤„ä»…è®°å½• vue-cli çš„éƒ¨åˆ†é…ç½®é€‰é¡¹å’Œç›¸å…³è§£é‡Šï¼Œæ•´ä½“çš„é¡¹ç›®ç»“æ„å’Œå…ˆå‰çš„åŸºæœ¬ä¸€è‡´ã€‚ ç„¶è€Œæ–‡æ¡£æ–¹é¢å› ä¸º vue-cli æ²¡æœ‰åšç›¸åº”çš„æ”¯æŒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªèƒ½è¯†åˆ« vue ç»„ä»¶çš„æ–‡æ¡£åº“ï¼Œä¸ªäººå»ºè®®é¦–é€‰ vuepressï¼Œå…¶æ¬¡å¯ä»¥å°è¯• docsify æˆ–è€…å…¶ä½™èƒ½å¤Ÿæ”¯æŒ vue çš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼ˆå½“ç„¶è‡ªå·±é€ å¯¹åº”è½®å­ä¹Ÿæ˜¯å¯ä»¥çš„ï¼‰ã€‚ é¡¹ç›®ç¯å¢ƒæ„å»ºä½¿ç”¨ vue-cli åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ­¤å¤„å°±ä»¥ vue-cli-plugin-demo åšä¸ºä¾‹å­ã€‚ç›´æ¥ä½¿ç”¨ vue create åˆ›å»ºé¡¹ç›®ï¼Œç„¶åé€‰æ‹© Manully select featuresï¼Œä¹‹åé€‰æ‹©çš„å†…å®¹å¦‚ä¸‹å›¾ï¼š è¿™é‡Œè§£é‡Šä¸€ä¸‹å…¶ä¸­éƒ¨åˆ†é€‰é¡¹çš„é€‰æ‹©çš„åŸå› ï¼š TS çš„ Class é£æ ¼æ”¯æŒå› ä¸º vue3 ç›¸å¯¹äº vue2 ç‰ˆæœ¬æœ‰æ¯”è¾ƒå¤§çš„å˜åŠ¨ï¼Œè‡³äº vue2 æ‰€æ”¯æŒçš„ class é£æ ¼çš„ TS å†™æ³•åœ¨ vue3 ä¸­å¯èƒ½ä¸æ€ä¹ˆæ”¯æŒï¼Œå› æ­¤ç°æœ‰é¡¹ç›®æ˜¯å¦ä½¿ç”¨ Class é£æ ¼å¯èƒ½ä¼šæœ‰äº›äº‰è®®ï¼ˆä¸»è¦æ˜¯æ‹…å¿ƒå†™ä¹ æƒ¯ååˆ°æ—¶å€™ä¸å¤ªå¥½åˆ‡æ¢å†™æ³•ï¼‰ã€‚ ä¸ªäººå»ºè®®ä½¿ç”¨ï¼Œæ¯•ç«Ÿå•çº¯çš„ TS å†™æ³•åœ¨ vue2 ä¸­çš„ä¼šç¨æ˜¾éš¾å—ï¼Œè£…é¥°å™¨çš„å†™æ³•è¦ç¨å¾®èˆ’æœä¸€äº›ã€‚æ­¤å¤–ï¼Œå¤šå­¦ä¹ ä¸€äº›æ–°çŸ¥è¯†æ€»å½’æ˜¯å¯¹è‡ªå·±æœ‰å¥½å¤„ã€‚ TS ä½¿ç”¨ eslint-standardæœ‰äººä¼šé—®ä¸ºä»€ä¹ˆåˆ›å»ºé¡¹ç›®æ—¶ä¸ç›´æ¥é€‰ TSlint ä½œä¸ºæ ¡éªŒè§„åˆ™å‘¢ï¼Ÿè¿™å…¶å®ä¹Ÿæ˜¯æœ‰åŸå› çš„ã€‚å¯ä»¥ä¸Šç½‘å¯¹æ¯”ä¸€ä¸‹ ESlint å’Œ TSlint ï¼Œä½ ä¼šå‘ç° ESlint çš„æ ¡éªŒè§„åˆ™ç›¸å¯¹æ¥è¯´æ›´ç»†è‡´ï¼Œä¸”æ›´å®Œå…¨ã€‚æ­¤å¤–ï¼ŒTypeScript å®˜æ–¹éƒ½å†³å®šè¿ç§» TSlint è‡³ typescript-eslintï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰ä»€ä¹ˆç†ç”±åšæŒ TSlint äº†å‘¢ï¼Ÿå˜¿å˜¿ï½ The TypeScript Team themselves also announced their plans to move the TypeScript codebase from TSLint to typescript-eslint, and they have been big supporters of this project. More details at https://github.com/microsoft/TypeScript/issues/30553 å…¶ä½™éƒ¨åˆ†å•å…ƒæµ‹è¯•éƒ¨åˆ†å› ä¸ºæˆ‘ä»…ä»…äº†è§£ Mocha çš„éƒ¨åˆ†å†…å®¹ï¼Œå› æ­¤é€‰æ‹©çš„æ˜¯ Mochaï¼Œç†Ÿæ‚‰ Jest çš„å¯ä»¥é€‰ Jestï¼›è‡³äºå‹¾é€‰ vue-router å’Œ vuexï¼Œè¿™ä¸ªæ˜¯å¯¹äºè¿è¡Œ devServer åšçš„ä¸€äº›é…ç½®ï¼›ç„¶åæ˜¯ vue-router ä¸é€‰æ‹© history æ¨¡å¼ï¼Œè¿™ä¸ªä»è€…è§ä»ï¼Œæ™ºè€…è§æ™ºå§ï¼Œæ¯•ç«Ÿ lib å‘åŒ…ä¸èµ°è¿™ä¸ªã€‚ é¡¹ç›®é…ç½®ç»“æ„é…ç½®è¿‡æ»¤æ‰é»˜è®¤ç”Ÿæˆçš„å¹¶ä¸”ä¸åšä¿®æ”¹çš„éƒ¨åˆ†ï¼Œæœ€ç»ˆé¡¹ç›®çš„ç»“æ„å¤§è‡´ä¸º 1234567891011121314151617181920vue-cli-plugin-demoâ”œâ”€â”€ components.jsonâ”œâ”€â”€ docsâ”œâ”€â”€ packagesâ”œâ”€â”€ src| â”œâ”€â”€ App.vue| â”œâ”€â”€ components| â”œâ”€â”€ entry.js| â”œâ”€â”€ main.js| â”œâ”€â”€ mixins| â”œâ”€â”€ router.js| â”œâ”€â”€ store.js| â”œâ”€â”€ views| â””â”€â”€ typesâ”œâ”€â”€ types| â””â”€â”€ index.d.tsâ”œâ”€â”€ vue.config.jsâ”œâ”€â”€ tsconfig.jsonâ”œâ”€â”€ webpack.component.jsâ””â”€â”€ yarn.lock å…¶ä¸­ docs ä¸ºæ–‡æ¡£çš„æ–‡ä»¶å¤¹ï¼Œç„¶å components.json ã€webpack.component.js å’Œ src/entry.js ä¸»è¦ä¸ºäº†æŒ‰éœ€å¼•å…¥è€Œåšçš„å•ç‹¬æ‰“åŒ…å¤„ç†ï¼Œå…¶æ¬¡åœ¨æ ¹ç›®å½•å’Œ src æ–‡ä»¶å¤¹å†…éƒ½æ·»åŠ äº†ä¸€ä¸ª types æ–‡ä»¶ï¼Œæœ€ååœ¨æ ¹ç›®å½•ä¸‹å»ºç«‹äº†ä¸€ä¸ª packages æ–‡ä»¶å¤¹ä½œä¸ºå‘åŒ…ç»„ä»¶çš„ç»“æ„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥æ­å»ºæˆ‘ä»¬è‡ªå·±çš„ vue åŒ…ã€‚ æ•´ä½“ç»“æ„å‚è€ƒ element-ui çš„é¡¹ç›®ç»“æ„ é…ç½® tsconfig.json å’Œ vue.config.jstsconfig.json å†…çš„é…ç½®å†…å®¹ä¸æ˜¯å¾ˆå¤šï¼Œä»…é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š 1234567891011121314\"jsxFactory\": \"h\", // ç®€å†™ jsx çš„ render å‡½æ•°\"paths\": [ // é…ç½® import å¼•å…¥çš„è·¯å¾„ç´¢å¼•ï¼Œè§†æƒ…å†µæ‰©å±• // ..., \"@views/*\": [ \"src/views/*\" ]],\"pretty\": true, // ä¸ºé”™è¯¯æ¶ˆæ¯è®¾ç½®æ ·å¼\"includes\": [ // æ·»åŠ éœ€è¦ ts æ ¡éªŒçš„æ–‡ä»¶ // ... \"packages/**/*.ts\", \"packages/**/*.tsx\", \"packages/**/*.vue\"] vue.config.js å†…çš„é…ç½®å¦‚ä¸‹ï¼š 12345678910111213141516171819202122const path = require('path')// é…ç½®å…¬å…±è¯·æ±‚è·¯å¾„function resolve (dir) &#123; return path.join(__dirname, dir)&#125;module.exports = &#123; lintOnSave: true, productionSourceMap: false, chainWebpack: config =&gt; &#123; // è®¾ç½® output çš„é»˜è®¤ export å€¼ config.output.libraryExport('default') // æ–°å¢éƒ¨åˆ†åˆ«åï¼Œè§†æƒ…å†µæ‰©å±• config.resolve.alias .set('@', resolve('src')) .set('@views', resolve('src/views')) // ... // æ–°å¢ js çš„ exclude å†…å®¹ config.module.rule('js').exclude.add([resolve('lib'), resolve('dist')]) &#125;&#125; æ³¨ï¼š ä¸¤æ–‡ä»¶å†…çš„åˆ«åæ‰©å±•éœ€è¦ä¿æŒä¸€è‡´ã€‚é™¤äº†é…ç½®åˆ«åå¤–ï¼Œå¦ä¸€ä¸ªéœ€è¦å…³æ³¨çš„éƒ¨åˆ†æ˜¯ä¿®æ”¹ rule(â€˜jsâ€™) éƒ¨åˆ†çš„é…ç½®ï¼Œå¦åˆ™åé¢æµ‹è¯•è‡ªå·±æ‰“åŒ…å¥½çš„ lib æ–‡ä»¶ä¼šæŠ¥é”™ã€‚ packages åŒ…å†™æ³•packages åŒ…ç”¨äºå­˜æ”¾æˆ‘ä»¬ç¼–å†™çš„åŒ…ç»„ä»¶ï¼Œæˆ‘ä»¬ç»Ÿä¸€å…¶æ¯ä¸€é¡¹çš„ç»“æ„ä¸ºï¼š 12345/*...*/vue-cli-project-demo/packagesâ””â”€â”€ button â”œâ”€â”€ index.ts â””â”€â”€ src â””â”€â”€ main.vue è¿™ä¹ˆå†™çš„åŸå› åœ¨äºæ–¹ä¾¿æŒ‰éœ€æ‰“åŒ…ï¼Œä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼åˆ©äºæˆ‘ä»¬æŠ½è±¡å¯¹åº”çš„å‡½æ•°æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿåˆ©äºé¡¹ç›®çš„ç»´æŠ¤ã€‚å…¶ä¸­ index.ts ç”¨äºæš´éœ² src ä¸­çš„ vue æ–‡ä»¶å’Œå…¶å¯¹åº”çš„ install æ‰©å±•æ–¹æ³•ã€‚ index.ts å†…æ²¡æœ‰å¿…è¦å¯¹å•æ–‡ä»¶è¿›è¡Œ install æ‰©å±•ï¼Œé™¤ééœ€è¦è§„èŒƒåŒ–å¯¹åº” component çš„æ ‡ç­¾å€¼ï¼Œæ¯”å¦‚ï¼šelement-ui å•æ–‡ä»¶å¼•å…¥çš„æ˜¯ Buttonï¼Œæ²¡æœ‰ el å‰ç¼€ï¼Œç”¨ Vue.use å°±æ˜¯ä¸ºäº†è¡¥å……ä¸Šå‰ç¼€ï¼Œå†…éƒ¨èµ° Vue.component æ–¹æ³•ã€‚ ä¸ªäººå»ºè®®ï¼šä¿è¯å¯¼å‡ºçš„ç»„ä»¶çš„ name å€¼ç¬¦åˆæ€»ä½“è§„èŒƒå³å¯ï¼Œå¹¶ä¸éœ€è¦ä¸€å®šèµ°æ­¤é…ç½®çš„æ ¼å¼ã€‚ æ‰“åŒ…é…ç½®è¿™é‡Œä½¿ç”¨çš„æ˜¯ vue-cli æä¾›çš„ lib æ‰“åŒ…æ–¹å¼ï¼ŒåŸºæœ¬ä¸ç”¨é¢å¤–çš„ webpack é…ç½®ï¼Œå‘½ä»¤ä¸ºï¼š 1vue-cli-service build --target lib --name myLib [entry] å› æ­¤æˆ‘ä»¬å¯ä»¥æ”¹é€  package.json å¦‚ä¸‹ï¼š 12345678\"scripts\": &#123; \"dev\": \"vue-cli-service serve --open\", \"build\": \"vue-cli-service build --target lib --dest lib ./src/entry.ts &amp;&amp; yarn removeHtml\", \"removeHtml\": \"rm ./lib/*.html\", \"lint:js\": \"vue-cli-service lint\", \"lint:css\": \"npx stylelint src packages --fix\", \"test:unit\": \"vue-cli-service test:unit\"&#125; å› ä¸ºæ„å»º lib åŒ…ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ï¼Œåœ¨æ­¤æˆ‘åšäº†åˆ é™¤ã€‚æ­¤å¤–æ·»åŠ äº† stylelint çš„ä¸€äº›é…ç½®ã€‚demo å†…è¿˜è§„èŒƒäº†å‘åŒ…ä¸Šä¼ çš„å†…å®¹ä»¥åŠ commit æ—¶çš„æ ¡éªŒé…ç½®ï¼Œå¯è§†æƒ…å†µæ·»åŠ ã€‚ æ­¤å¤–å¦‚æœæ›´è§„èŒƒä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸Šä½œè€…ï¼Œå†™ä½œè€…ç­‰é…ç½®ï¼ˆå¯å‚è€ƒ demoï¼‰ã€‚ dev ç¯å¢ƒé…ç½®å¼€å‘ç¯å¢ƒéœ€è¦é…ç½®çš„ä¸œè¥¿åŸºæœ¬æ²¡æœ‰ï¼Œè¿™é‡Œä»…ä»…ä»‹ç»ä¸€ä¸‹å¦‚ä½•å¼•ç”¨æ‰“åŒ…æ–‡ä»¶ã€‚æ­¤å¤„æœ‰ä¸¤ç§æƒ…å†µï¼š åœ¨å¼€å‘åŒ…çš„é˜¶æ®µï¼Œæˆ‘ä»¬ç›´æ¥å¼•ç”¨ entry.ts æ–‡ä»¶å³å¯ï¼Œå½“æµ‹è¯•ç”Ÿæˆçš„åŒ…æ—¶ï¼Œæˆ‘ä»¬å¼•ç”¨ lib å†…çš„ç”Ÿæˆçš„æ–‡ä»¶ã€‚å¦‚ï¼š 1234// å¼€å‘æ—¶æµ‹è¯•ç”¨import MyComponents from './entry';// æ„å»ºå®Œæµ‹è¯•ç”¨import MyComponents from '@lib/vue-cli-project-demo.umd'; æ­¤æ—¶æˆ‘ä»¬éœ€è¦é…ç½®å¯¹åº” js æ–‡ä»¶çš„ module æ‰©å±•ï¼Œå¦‚ demo å†…çš„ global.d.ts çš„å£°æ˜ï¼š 12345declare module \"@lib/*\" &#123; import Vue, &#123; PluginFunction &#125; from 'vue'; const _default: PluginFunction&lt;Vue&gt;; export default _default;&#125; é¡¹ç›®å¼€å‘ç›¸å…³çš„ ts é—®é¢˜å¯æŸ¥é˜…å…ˆå‰çš„ä¸€ç¯‡ ts é—®é¢˜æ€»ç»“ç¯‡ï¼Œé…ç½®å¼€å‘åŒ…çš„ ts é—®é¢˜çœ‹æœ¬æ–‡çš„é—®é¢˜æ±‡æ€»ã€‚ Test æµ‹è¯•é…ç½®demo å†…ä½¿ç”¨çš„æ˜¯ Mocha + chaiï¼ŒåŒæ—¶å¯¹ slot éƒ¨åˆ†åšäº†ä¸€ä¸‹æµ‹è¯•ï¼Œè¿™ä¸ªå¯¹ç€æ–‡æ¡£å°±èƒ½åšå‡ºä¸€äº›æµ‹è¯•å‡½æ•°ï¼Œå…¶ä½™çš„é…ç½® vue-cli éƒ½å°è£…å¥½äº†ã€‚æµ‹è¯•çš„è¯­æ³•å¹¶éæœ¬æ–‡çš„é‡ç‚¹ï¼Œæœ‰æœºä¼šå¯ä»¥è¡¥ä¸Šä¸€ç¯‡ã€‚ å•æ–‡ä»¶æ‰“åŒ…é…ç½®è¦å®ç°æŒ‰éœ€å¼•å…¥çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€é…ç½®å¤šå…¥å£æ‰“åŒ…ã€‚å…ˆå‰è§„èŒƒçš„ package æ–‡ä»¶å¤¹çš„ç»“æ„åˆšå¥½å°±æ”¯æŒæˆ‘ä»¬éå†éœ€è¦æ‰“åŒ…çš„æ–‡ä»¶ã€‚ ç”±äºæƒ³ç¨å¾®å·ç‚¹æ‡’ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ç”¨ json è®°å½•å„éœ€è¦çš„å…¥å£æ–‡ä»¶ï¼ŒåŒæ—¶é…ç½® webpack.components.js ä»…ç”¨äºå•ç‹¬æ‰“åŒ…ã€‚webpack çš„è¯¦ç»†é…ç½®å…¶å®å¯ä»¥å‚è€ƒ vue-cli çš„å†…éƒ¨é…ç½®ï¼ˆvue inspectï¼‰ï¼Œåœ¨æ­¤æˆ‘å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œå…¶å®ƒéœ€è¦æ³¨æ„çš„éƒ¨åˆ†å°±æ˜¯å¦‚æœ package åŒ…å†…çš„ç»„ä»¶å¦‚æœç”¨ TS å†™çš„ï¼Œé‚£ä¹ˆå°½é‡ä¸è¦å‹ç¼©ä»£ç ï¼Œå¯èƒ½ä¼šå‡ºç° name è¢«å‹ç¼©çš„é—®é¢˜äº†ã€‚ æ–‡æ¡£é…ç½®å¯¹äºæ•´ä¸ªé¡¹ç›®æ¥è¯´ï¼Œæ–‡æ¡£çš„é…ç½®å¯ä»¥ç®—æ˜¯ä¸€ä¸ªç‚¹ç¼€é¡¹ï¼Œèƒ½è®©æ•´ä½“æ›´åŠ å®Œå–„ã€‚vuepress æ–‡æ¡£å·²ç»ååˆ†è¯¦ç»†äº†ï¼Œè¿™é‡Œä»…ä»…è®°å½•ä¸€äº›æ¯”è¾ƒå›°éš¾çš„é…ç½®ç‚¹ã€‚docs æ–‡ä»¶çš„ç»“æ„å¤§è‡´ä¸ºï¼š 123456789101112131415vue-cli-project-demo/docsâ”œâ”€â”€ .vuepress| â”œâ”€â”€ config.js| â”œâ”€â”€ enhanceApp.js| â”œâ”€â”€ public| | â”œâ”€â”€ favicon.ico| | â””â”€â”€ logo.jpg| â”œâ”€â”€ router-config.js| â”œâ”€â”€ static-theme-config.js| â””â”€â”€ utils| â””â”€â”€ index.jsâ”œâ”€â”€ components| â”œâ”€â”€ button.md| â””â”€â”€ index.mdâ””â”€â”€ index.md æ³¨ï¼š docs æ‰æ˜¯æ–‡æ¡£é¡µé¢çš„æ ¹è·¯å¾„ã€‚ å›¾ç‰‡é…ç½®Vuepress å†…åˆ†ä¸ºæ–‡æ¡£å›¾ç‰‡èµ„æºå’Œé™æ€å›¾ç‰‡èµ„æºã€‚å…¬å…±å›¾ç‰‡èµ„æºå°±ä¸ç”¨ä»‹ç»äº†ï¼Œä¸€èˆ¬ç›¸å¯¹è·¯å¾„çš„ markdown å†™æ³•èƒ½å®Œå…¨æ»¡è¶³è¦æ±‚ã€‚ä½†æ˜¯å¯¹äºé¡µé¢çš„ favicon å’Œé¦–é¡µæ¨¡æ¿éƒ¨åˆ†çš„ logo ï¼Œè¿™ä¸ªéœ€è¦åœ¨ .vuepress ä¸‹çš„ public æ–‡ä»¶å†…åšå­˜å‚¨ã€‚ é¡¹ç›®åŒ…å¼•å…¥å¯¹äºæˆ‘ä»¬ç”Ÿæˆçš„ lib åŒ…çš„å¼•å…¥ï¼Œæ­¤éœ€è¦åœ¨ .vuepress æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª enhanceApp.js æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶å†…åšé¢å¤–åŒ…çš„å¼•å…¥ã€‚å†™æ³•ä¸ºï¼š 1234567891011// å®‰è£…å‘å¸ƒçš„åŒ…import MyComponents from '../../lib/vue-cli-project-demo.umd';export default (&#123; Vue, // VuePress æ­£åœ¨ä½¿ç”¨çš„ Vue æ„é€ å‡½æ•° options, // é™„åŠ åˆ°æ ¹å®ä¾‹çš„ä¸€äº›é€‰é¡¹ router, // å½“å‰åº”ç”¨çš„è·¯ç”±å®ä¾‹ siteData // ç«™ç‚¹å…ƒæ•°æ®&#125;) =&gt; &#123; Vue.use(MyComponents)&#125; æ•´ä½“é¡µé¢é…ç½®ä¸ .vuepress åŒçº§åˆ«çš„å…¶ä½™æ–‡ä»¶/æ–‡ä»¶å¤¹ä¸ºå¯¹åº”çš„é¡µé¢æ¨¡æ¿ï¼Œä¾‹å¦‚ï¼šé»˜è®¤è¿›å…¥æ˜¾ç¤ºçš„é¦–é¡µä¸º index.md æ–‡ä»¶ï¼Œå¯¹äºå„æ–‡ä»¶çš„è·¯å¾„é…ç½®éœ€è¦åœ¨ .vuepress/config.js æ–‡ä»¶å†…å¯¹åº”ç¼–å†™ã€‚ è¿™é‡Œå¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå°† config.js æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶æ—¶ï¼Œé¡µé¢ä¼šæ— æ³•ç›‘å¬åˆ°å…¶ä½™ js é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ã€‚æˆ‘ä»¬æ­¤æ—¶éœ€è¦é…ç½® extraWatchFiles å­—æ®µæ¥é¢å¤–ç›‘å¬éœ€è¦ç›‘å¬çš„æ–‡ä»¶ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ base å±æ€§ï¼Œå¦‚æœéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šçš„è·¯å¾„éæ ¹è·¯å¾„ï¼Œé‚£ä¹ˆæ­¤è¿˜éœ€è¦å¯¹åº”è®¾ç½®ä¸€ä¸‹ã€‚å‰©ä½™çš„é…ç½®éƒ½ä¸ºæ¯”è¾ƒåŸºç¡€çš„é…ç½®äº†ï¼Œdemo å†…éƒ½æœ‰è¾ƒä¸ºè¯¦ç»†çš„è¯´æ˜ï¼Œåœ¨æ­¤å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ éƒ¨ç½²å› ä¸ºæˆ‘çš„ github.io ä¸Šå·²ç»æœ‰æˆ‘çš„åšå®¢äº†ï¼Œæ­¤éƒ¨åˆ†å…·ä½“æœ‰ä»€ä¹ˆå‘æˆ‘ä¹Ÿæ²¡æœ‰è¸©è¿‡ï¼Œä»…èƒ½ç»™å¤§å®¶æŠ›ä¸ªé“¾æ¥äº†ã€‚ Demo åœ°å€ä¼ é€é—¨ é—®é¢˜æ±‡æ€»å¼•å…¥æ‰“åŒ…çš„ lib æ–‡ä»¶æŠ¥é”™åœ¨æµ‹è¯•ç”Ÿæˆçš„åŒ…æ—¶ï¼Œé€šè¿‡ import å¼•å…¥æŠ¥é”™ï¼Œå…¶åŸå› æ˜¯ webpack å¯¹äº import çš„æ–‡ä»¶ä¼šè¿›è¡Œæ­¤å¤„çš„ js è§£æï¼Œç„¶è€Œå¯¹äºå·²ç»æ‰“åŒ…å¥½çš„æ–‡ä»¶æˆ‘ä»¬é¢„æƒ³çš„æ˜¯ç›´æ¥å¼•å…¥å°±è¡Œäº†ï¼Œå› æ­¤éœ€è¦å°†å…¶ä»è§„åˆ™ä¸­å»é™¤æ‰ï¼Œå¦åˆ™é€šè¿‡è§„åˆ™å»è§£æå°±ä¼šæŠ¥é”™ã€‚ ä¸¤ä¸ª types æ–‡ä»¶çš„ç›®çš„é¡¹ç›®å†…çš„ types æ–‡ä»¶å…¶å®å¯ä»¥åˆå¹¶æˆä¸€ä¸ªï¼Œä½†æ˜¯ä¸ªäººå€¾å‘åˆ†æˆä¸¤éƒ¨åˆ†ã€‚ä¸ src åŒå±‚çš„ types æ–‡ä»¶ä»…ç”¨æ¥å£°æ˜ lib é»˜è®¤å¯¼å‡ºçš„æ–‡ä»¶ï¼Œè€Œ src/types æ–‡ä»¶åˆ™æ˜¯é¡¹ç›®å¼€å‘æ—¶éœ€è¦çš„æ–‡ä»¶å£°æ˜ã€‚å¦‚æœæœ€ç»ˆå‘å¸ƒè‡³ npm ä¸Šçš„åŒ…ä»…åŒ…å« lib æ–‡ä»¶ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨ demo çš„è¿™ç§å†™æ³•ï¼Œå±‚æ¬¡ä¼šæ›´æ¸…æ¥šä¸€ç‚¹ã€‚ ä½¿ç”¨ lib ä¸­çš„ umd.min.js æ–‡ä»¶æŠ¥é”™ç”±äº lib æ‰“åŒ…ç”Ÿæˆçš„ min æ–‡ä»¶å°†ç»„ä»¶çš„ Class åå‹ç¼©äº†ï¼Œå› æ­¤å¯¹åº”çš„ name å€¼å°±ä¸æ˜¯æˆ‘ä»¬è®¾ç½®çš„å€¼ï¼Œå³ä½¿å°† name æ˜¾ç¤ºè‡³äº Component å†…ä¹Ÿä¸è¡Œï¼Œå¯¹æ­¤æˆ‘å‘äº†ä¸€æ¡ issue è¡¥å……ï¼š æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹è§£å†³æ€è·¯ï¼š æ–¹æ³• 1: 12345678// å¯¹åº”åŒ…ç»„ä»¶@Component(&#123; name: 'MyButton'&#125;)export default class MyButton extends Vue &#123;&#125;;// install æ–¹æ³•å†…çš„ component æ³¨å†Œéƒ¨åˆ†Vue.component(MyButton.options.name, MyButton); æ–¹æ³• 2: é…ç½® terser çš„ä»£ç å‹ç¼©éƒ¨åˆ†ï¼Œä»¤å…¶ä¸å‹ç¼© classNameï¼Œè¯¥éƒ¨åˆ†åœ¨ vue.config.js å†…é…ç½®å¦‚ä¸‹å†…å®¹ã€‚ 12345configureWebpack: config =&gt; &#123; if (process.env.NODE_ENV === 'production') &#123; config.optimization.minimizer[0].options.terserOptions.keep_fnames = true &#125;&#125; æ³¨æ„ï¼š vue-cli ä½¿ç”¨çš„æ˜¯ terser è€Œä¸æ˜¯ uglifyï¼Œæ­¤å¤–è™½ç„¶ vue å†…æœ‰å¯¹åº” terser çš„å‘½åï¼Œä½†æ˜¯æ²¡æ³•è·å–å¾—åˆ°ï¼Œä½¿ç”¨ config.optimization.minimizer(â€˜terserâ€™) å‡½æ•°ä¼šä½¿å¾— minimizer éƒ¨åˆ†çš„å†…å®¹ä¸¢å¤±ï¼Œæš‚æœªæ‰¾åˆ°æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ³•ã€‚ä¸ªäººè¿˜æ˜¯å¸Œæœ›å®˜æ–¹è¡¥å……ä¸€ä¸‹è§£å†³è¯¥é—®é¢˜çš„æ€è·¯ã€‚ 12345678910// æºç ä¸­çš„ production ç¯å¢ƒçš„éƒ¨åˆ†é…ç½®if (process.env.VUE_CLI_TEST) &#123; webpackConfig.optimization.minimize(false)&#125; else &#123; const TerserPlugin = require('terser-webpack-plugin') const terserOptions = require('./terserOptions') webpackConfig.optimization .minimizer('terser') .use(TerserPlugin, [terserOptions(options)])&#125; æºç è¯·è§ prod.jså®˜æ–¹ terserOptions é…ç½® install æ–¹æ³•æŠ¥é”™åœ¨å¯¹åº”åŒ…çš„ index.ts å†…ä¸ºå¯¼å‡ºçš„åŒ…è®¾ç½® install æ–¹æ³•æ—¶æŠ¥é”™ï¼Œinstall æ–¹æ³•åœ¨ Vue ä¸­æ˜¯ä½œä¸º Plugins çš„ä¸€ä¸ªå†…ç½®å‡½æ•°è€Œè®¾ç½®çš„ï¼Œè€Œæˆ‘ä»¬å¯¼å‡ºçš„å®ä¾‹ç±»å‹ä¸º VueConstructor ï¼Œåœ¨ VueConstructor ä¸Šå¹¶æ²¡æœ‰ install å‡½æ•°ï¼Œå› æ­¤æŒ‰ç…§ plugins é‚£ç§å†™æ³•æ‰©å±•å£°æ˜ä¸€ä¸ªå³å¯ã€‚ å¼•å…¥åŒ…çš„é¡¹ç›®æ„å»ºé¡µé¢ä¸å‘ˆç°ä½¿ç”¨ Components è¯­æ³•ç¼–å†™çš„ç»„ä»¶åº“å¯èƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œé¡¹ç›®å°†ç»„ä»¶é€šè¿‡ Vue.use æ–¹æ³•å…¨é‡æ³¨å†Œåˆ°é¡¹ç›®ä¸­äº†ï¼Œå¼€å‘ç¯èŠ‚å¹¶æ²¡æœ‰é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯éšå¤„ä½¿ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦ build æ„å»ºåï¼Œé¡µé¢å´æ— æ³•å‘ˆç°å‡ºç»„ä»¶ã€‚ åŸå› ï¼š Class è¯­æ³•ç¼–å†™çš„ç»„ä»¶ç¼–è¯‘æ—¶ä¼šç»æœ‰ vue-cli çš„ webpack å¤„ç†ï¼Œé»˜è®¤çš„ terser å‹ç¼©é…ç½®ä¸­åŒæ ·ä¼šå°† ClassName ç»™å‹ç¼©æ‰ï¼Œè¿™å°±å¯¼è‡´å¼•å…¥çš„ç»„ä»¶åœ¨ç”Ÿäº§ç¯å¢ƒæ‰¾ä¸åˆ°äº†ã€‚ è§£å†³æ–¹æ³•ï¼šå‚è€ƒ ä½¿ç”¨ lib ä¸­çš„ umd.min.js æ–‡ä»¶æŠ¥é”™ çš„ æ–¹æ³• 2 å‚è€ƒæ–‡æ¡£ å‘å¸ƒä¸€ä¸ª vue åŒ… é¡¹ç›® ts è¿ç§»çš„è¸©å‘è®°å½• typescript-eslint/typescript-eslint vue-cli æ–‡æ¡£ vuepress æ–‡æ¡£ TS ç¼–è¯‘é€‰é¡¹æŸ¥è¯¢è¡¨ Chai.js æ–‡æ¡£ Element/Component name with vue-class-component","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"}]},{"title":"ç”± shims-vue.d.ts å¼•å‘çš„æ€è€ƒ","slug":"ç”±-shims-vue-d-ts-å¼•å‘çš„æ€è€ƒ","date":"2019-07-07T04:02:59.000Z","updated":"2022-07-26T13:13:01.893Z","comments":true,"path":"2019/07/07/ç”±-shims-vue-d-ts-å¼•å‘çš„æ€è€ƒ/","link":"","permalink":"https://monocy.gitee.io/2019/07/07/ç”±-shims-vue-d-ts-å¼•å‘çš„æ€è€ƒ/","excerpt":"å‰è¨€ç”±äºé¡¹ç›®è¿‘æœŸè¿›è¡Œ ts è¿ç§»ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªåƒèƒèŸ¹çš„äººï¼Œè¸©è¿‡äº†ä¸å°‘å‘ã€‚è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„å¤§å¤§å°å°çš„é—®é¢˜åŸºæœ¬ä¸Šéƒ½è§£å†³äº†ï¼Œä½†æ˜¯å¯¹äº shims-vue.d.ts æ–‡ä»¶çš„å‘½åä»¥åŠå…¶å†…çš„æ¨¡å—å£°æ˜å§‹ç»ˆæ‰¾ä¸åˆ°æ¯”è¾ƒè´´åˆ‡çš„è§£é‡Šã€‚æ²‰ä¸‹å¿ƒæ¥è¯»äº†äº›å¤–ç½‘èµ„æ–™ï¼Œæ€»ç®—æ˜¯æœ‰ç‚¹â€œè±å¼€äº‘é›¾è§é’å¤©â€çš„æ„Ÿè§‰äº†ã€‚æ­¤å¤„å°±è®°å½•æˆ‘å¯¹äº ts å…¨å±€æ¨¡å—å£°æ˜çš„ä¸€äº›æ€è€ƒä»¥åŠä¸€äº› ts é¡¹ç›®è¿ç§»é‡åˆ°çš„å‘ã€‚","text":"å‰è¨€ç”±äºé¡¹ç›®è¿‘æœŸè¿›è¡Œ ts è¿ç§»ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªåƒèƒèŸ¹çš„äººï¼Œè¸©è¿‡äº†ä¸å°‘å‘ã€‚è¿ç§»è¿‡ç¨‹ä¸­é‡åˆ°çš„å¤§å¤§å°å°çš„é—®é¢˜åŸºæœ¬ä¸Šéƒ½è§£å†³äº†ï¼Œä½†æ˜¯å¯¹äº shims-vue.d.ts æ–‡ä»¶çš„å‘½åä»¥åŠå…¶å†…çš„æ¨¡å—å£°æ˜å§‹ç»ˆæ‰¾ä¸åˆ°æ¯”è¾ƒè´´åˆ‡çš„è§£é‡Šã€‚æ²‰ä¸‹å¿ƒæ¥è¯»äº†äº›å¤–ç½‘èµ„æ–™ï¼Œæ€»ç®—æ˜¯æœ‰ç‚¹â€œè±å¼€äº‘é›¾è§é’å¤©â€çš„æ„Ÿè§‰äº†ã€‚æ­¤å¤„å°±è®°å½•æˆ‘å¯¹äº ts å…¨å±€æ¨¡å—å£°æ˜çš„ä¸€äº›æ€è€ƒä»¥åŠä¸€äº› ts é¡¹ç›®è¿ç§»é‡åˆ°çš„å‘ã€‚ Vue ts å£°æ˜æ–‡ä»¶åœ¨å®‰è£… @vue/typescript ä¹‹åï¼Œé¡¹ç›®ä¼šç”Ÿæˆä¸¤ä¸ªæ–°æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ shims-vue.d.ts å’Œ shims-jsx.d.tsï¼Œå…¶å†…å®¹åˆ†åˆ«æ˜¯ï¼š 123456// shims-vue.d.tsdeclare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125; å’Œ 12345678910111213import Vue, &#123; VNode &#125; from 'vue';declare global &#123; namespace JSX &#123; // tslint:disable no-empty-interface interface Element extends VNode &#123;&#125; // tslint:disable no-empty-interface interface ElementClass extends Vue &#123;&#125; interface IntrinsicElements &#123; [elem: string]: any; &#125; &#125;&#125; é‚£ä¹ˆè¿™ä¸¤ä¸ªæ–‡æ¡£æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ shims-vue.d.tså‰è€…ä¸º Ambient Declarations(é€šç§°ï¼šå¤–éƒ¨æ¨¡å—å®šä¹‰) ,ä¸»è¦ä¸ºé¡¹ç›®å†…æ‰€æœ‰çš„ vue æ–‡ä»¶åšæ¨¡å—å£°æ˜ï¼Œæ¯•ç«Ÿ ts é»˜è®¤åªè¯†åˆ« .d.tsã€.tsã€.tsx åç¼€çš„æ–‡ä»¶ï¼›ï¼ˆå³ä½¿è¡¥å……äº† Vue å¾—æ¨¡å—å£°æ˜ï¼ŒIDE è¿˜æ˜¯æ²¡æ³•è¯†åˆ« .vue ç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¼•å…¥ vue æ–‡ä»¶æ—¶å¿…é¡»æ·»åŠ åç¼€çš„åŸå› ï¼Œä¸æ·»åŠ ç¼–è¯‘ä¹Ÿä¸ä¼šæŠ¥é”™ï¼‰ shims-jsx.d.tsåè€…ä¸º JSX è¯­æ³•çš„å…¨å±€å‘½åç©ºé—´ï¼Œè¿™æ˜¯å› ä¸ºåŸºäºå€¼çš„å…ƒç´ ä¼šç®€å•çš„åœ¨å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸé‡ŒæŒ‰æ ‡è¯†ç¬¦æŸ¥æ‰¾ï¼ˆæ­¤å¤„ä½¿ç”¨çš„æ˜¯æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ (SFC)çš„æ–¹æ³•æ¥å®šä¹‰ï¼‰ï¼Œå½“åœ¨ tsconfig å†…å¼€å¯äº† jsx è¯­æ³•æ”¯æŒåï¼Œå…¶ä¼šè‡ªåŠ¨è¯†åˆ«å¯¹åº”çš„ .tsx ç»“å°¾çš„æ–‡ä»¶ï¼Œå¯å‚è€ƒå®˜ç½‘ jsxã€‚ äº§ç”Ÿçš„é—®é¢˜é¦–å…ˆï¼Œå®˜æ–¹æ–‡æ¡£çš„ä¸Šå¹¶æ²¡æœ‰å°† shims-xxx.d.ts åšä¸ºé€šç”¨çš„æ¨¡æ¿ï¼Œå…¶ä»…ä»…ç»™æˆ‘ä»¬åˆ—ä¸¾äº†ä»¥ä¸‹æ¨¡æ¿æ ·ä¾‹ï¼š global-modifying-module.d.ts global-plugin.d.ts global.d.ts module-class.d.ts module-function.d.ts module-plugin.d.ts module.d.ts é‚£ä¹ˆè¯¥å¦‚ä½•ç†è§£è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Ÿ æ˜¯å¦èƒ½å¤Ÿæ›´æ”¹åœ¨ç»Ÿä¸€è§„èŒƒçš„æ–‡ä»¶å†…ï¼Ÿ å…¨å±€æ¥å£ã€å‘½åç©ºé—´ã€æ¨¡å—ç­‰å£°æ˜åˆæœ‰é‚£äº›å†™æ³•æ¥å®šä¹‰ï¼Ÿè¯¥å¦‚ä½•å†™ï¼Ÿ â€¦ å¯¹äºäº§ç”Ÿçš„è¿™ä¹ˆäº›é—®é¢˜ï¼Œä¸‹é¢ä¾æ¬¡åˆ†æã€‚ è§£æƒ‘ç†è§£å¹¶æ”¹é€  shims-xxx.d.tsæˆ‘ä»¬çŸ¥é“ï¼Œxxx.d.ts çš„æ–‡ä»¶è¡¨æ˜ï¼Œå…¶å†…éƒ¨çš„ä¸€äº›å£°æ˜éƒ½ä¸ºå…¨å±€çš„å£°æ˜ï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®å„ç»„ä»¶å†…éƒ½èƒ½è·å–åˆ°ã€‚å› æ­¤ Vue ç”Ÿæˆçš„ä¸¤ä¸ª shims-xxx.d.ts å…¶å®æ˜¯ä¸ºäº†è¡¨æ˜ï¼Œè¯¥ä¸¤æ–‡ä»¶ä¸º Vue ç›¸å…³çš„å…¨å±€å£°æ˜æ–‡ä»¶ã€‚ ä½†æ˜¯ä»é¡¹ç›®ç®¡ç†æ¥è¯´ï¼Œéšç€å¼•å…¥çš„ npm æ¨¡å—å¢å¤šï¼ˆæ¯”å¦‚å…¬å¸å†…éƒ¨ npm æºä¸Šçš„ä¸å¸¦ types çš„åŒ…ï¼‰ï¼Œé‚£ä¹ˆæ¨¡ä»¿ Vue çš„å£°æ˜æ–‡ä»¶å†™æ³•ï¼Œå¤–éƒ¨å£°æ˜çš„æ–‡ä»¶ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œæ–‡ä»¶å¤¹çœ‹èµ·æ¥å°±ä¸æ˜¯å¾ˆèˆ’æœäº†ã€‚å› æ­¤æœ‰æ²¡æœ‰ä¸€ç§æ¯”è¾ƒå¥½çš„æ–¹æ³•æ¥è§£å†³æ–‡ä»¶è¿‡å¤šçš„é—®é¢˜å‘¢ï¼Ÿ å¯¹äºæˆ‘æ¥è¯´ï¼Œæˆ‘æ›´åå‘å°†è¿™äº›ç®€å•çš„å£°æ˜ç»´æŠ¤åœ¨ä¸€ä¸ª .d.ts æ–‡ä»¶å†…ï¼Œæ­£å¥½å®˜ç½‘ä¹Ÿæ¨èç»´æŠ¤åœ¨ä¸€ä¸ªå¤§çš„ module å†…ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ª module.d.ts æ¥æ€»ä½“å£°æ˜æ‰€æœ‰çš„å¤–éƒ¨æ¨¡å—ã€‚åŸºäºå®˜æ–¹çš„ä¾‹å­ï¼Œæˆ‘åšäº†ä¸¤ä¸ªæ–‡ä»¶æ¥ç®¡ç†å¤–éƒ¨æ¨¡å—çš„å£°æ˜ï¼Œåˆ†åˆ«æ˜¯ module.d.ts å’Œ declarations.d.tsã€‚å‰è€…ä¸»è¦ç»´æŠ¤éœ€è¦å†™çš„æ¯”è¾ƒè¯¦ç»†çš„å¤–éƒ¨æ¨¡å—ï¼Œåè€…ä¸»è¦ç»´æŠ¤ç®€å†™æ¨¡å¼çš„æ¨¡å—ï¼ˆåŒ…æ‹¬å†…éƒ¨éœ€è¦å£°æ˜çš„ .js æ–‡ä»¶ï¼Œå…¼å®¹å†å²é—ç•™é—®é¢˜ï¼‰ã€‚ä¾‹å¦‚ï¼š æ”¹é€ åçš„ module/index.d.ts 12345678910111213141516171819202122// This `declare module` is called ambient module, which is used to describe modules written in JavaScript.// æ·»åŠ  vue-clipboard2 çš„ Vue æ’ä»¶å£°æ˜declare module 'vue-clipboard2' &#123; import &#123; PluginFunction &#125; from 'vue'; const clipboard: PluginFunction&lt;any&gt;; // å®šä¹‰é»˜è®¤å¯¼å‡ºçš„ç±»å‹ export default clipboard;&#125;// æ·»åŠ  fe-monitor-sdk çš„ Vue æ’ä»¶å£°æ˜declare module 'fe-monitor-sdk' &#123; import &#123; PluginObject &#125; from 'vue'; // å®šä¹‰è§£æ„çš„å˜é‡ç±»å‹ export const monitorVue: PluginObject&lt;any&gt;;&#125;// æ·»åŠ æ‰€æœ‰ .vue æ–‡ä»¶çš„å£°æ˜declare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125; æ”¹é€ åçš„ module/declarations.d.ts 123// Shorthand ambient modules, All imports from this shorthand module will have the any type.declare module '@/cookie-set'; é™„åŠ ï¼šå¯¹äº global å£°æ˜å¯è§†æƒ…å†µåˆ†ç±»ï¼Œæ¯”å¦‚é€šç”¨çš„æ”¾åœ¨ global.d.tsï¼Œå…¶ä½™å¯è§†æƒ…å†µï¼ˆå¦‚æœè¯¥ç±»å‹æ¯”è¾ƒå¤šçš„è¯ï¼‰æŒ‰ç…§å¯¹åº”ç±»å‹åˆ†ç±»ï¼Œæ¯”å¦‚ table çš„å¯å…¨éƒ¨æ”¾åœ¨ global-table.d.tsã€‚ å…¨å±€å£°æ˜çš„å†™æ³•å¦ä¸€ä¸ªä¸€ç›´æ¯”è¾ƒç–‘æƒ‘çš„é—®é¢˜æ˜¯å…¨å±€å£°æ˜çš„å†™æ³•ï¼Œæ¯”å¦‚æ¨¡å—çš„â€œå•æ–‡ä»¶å•æ¨¡å—å£°æ˜â€çš„å†™æ³•â€œå•æ–‡ä»¶å¤šæ¨¡å—åˆå¹¶å£°æ˜â€çš„å†™æ³•ä¸å¤ªä¸€æ ·ï¼Œâ€œæ— å¯¼å…¥çš„å…¨å±€å£°æ˜æ–‡ä»¶â€å’Œâ€œå¸¦å¯¼å…¥å£°æ˜çš„å…¨å±€å£°æ˜æ–‡ä»¶â€çš„å†™æ³•åˆæœ‰äº›ä¸åŒï¼Œè¿™é‡Œæˆ‘ä¸€ä¸€åˆ—å‡ºå…¶å¯è¡Œçš„å†™æ³•ä»¥åŠå…¶ä¸åŒçš„åŸå› ã€‚ æ³¨ï¼šè¿™é‡Œçš„ä¸€äº›å®šä¹‰éƒ½æ˜¯ä¸ªäººæ€»ç»“çš„ä¾¿äºè®°å¿†çš„è¯´æ³•ï¼Œä¸ºéæ ‡å‡†å®šä¹‰ã€‚ å•æ–‡ä»¶å•æ¨¡å—å£°æ˜è¯¥æ–‡ä»¶æ”¯æŒä¸¤ç§å†™æ³•ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š 123456789101112// å†™æ³•ä¸€declare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125;// å†™æ³•äºŒimport Vue from 'vue';declare module '*.vue' &#123; export default Vue;&#125; æ³¨ï¼š å‰è€…ï¼ˆå†™æ³•ä¸€ï¼‰ä¸»è¦ä¸ºæ—  ts å£°æ˜çš„æ¨¡å—æ·»åŠ å£°æ˜ï¼Œåè€…ï¼ˆå†™æ³•äºŒï¼‰ä¸»è¦ä¸ºå·²æœ‰ types å£°æ˜çš„æ¨¡å—è¿›è¡Œå£°æ˜æ‰©å±•ï¼ˆå¯ä»¥å‚è€ƒ vue-router æºç éƒ¨åˆ†ï¼‰ å•æ–‡ä»¶å¤šæ¨¡å—åˆå¹¶å£°æ˜ä»…æœ‰ä¸€ç§å†™æ³•ï¼ˆéœ€è¦å…³é—­å¯¹åº”çš„å¤šæ¬¡å¼•å…¥é‡å¤æ¨¡å—çš„ lint è§„åˆ™æˆ–è€…å¿½ç•¥æ­¤ types æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰å†…å®¹ï¼‰ 1234declare module '*.vue' &#123; import Vue from 'vue'; export default Vue;&#125; æ— å¯¼å…¥çš„å…¨å±€å£°æ˜æ–‡ä»¶æ— å¯¼å…¥å³æ²¡æœ‰ import å£°æ˜ï¼Œç›´æ¥å®šä¹‰å…¨å±€æ¥å£ã€å‡½æ•°ç­‰ 12345interface TableRenderParam extends BasicObject &#123; row: BasicObject; key: string; index?: number;&#125; å¸¦å¯¼å…¥å£°æ˜çš„å…¨å±€å£°æ˜æ–‡ä»¶å¸¦æœ‰ import å¯¼å…¥æ’ä»¶å£°æ˜çš„å¿…é¡»æ˜¾ç¤ºå®šä¹‰ globalï¼Œä¾‹å¦‚ï¼š 1234567891011import &#123; CreateElement &#125; from 'vue';// function éƒ¨åˆ†declare global &#123; interface TableRenderFunc &#123; (h: CreateElement, &#123; row, key, index &#125;: TableRenderParam): JSX.Element; &#125;&#125;// namespace éƒ¨åˆ†declare global &#123;&#125; ä¸åŒçš„åŸå› å¦‚æœåœ¨â€œå•æ–‡ä»¶å¤šæ¨¡å—åˆå¹¶å£°æ˜â€å°† import æå‡ºè‡³æœ€é¡¶å±‚æ—¶ï¼Œä¼šå‘ç° ts æŠ¥é”™ï¼Œè¯´æ¨¡å—æ— æ³•è¿›ä¸€æ­¥æ‰©å¤§ï¼Œä¸ºä»€ä¹ˆå°† import æå‡ºåä¼šæŠ¥é”™æç¤ºæ¨¡å—æ— æ³•æ‰©å¤§ï¼Ÿ ä¸ªäººç ”ç©¶å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œå½“å°† import æå‡ºè‡³æ¨¡å—å¤–æ—¶ï¼Œå°±å·²ç»è¡¨æ˜è¯¥æ–‡ä»¶å†…çš„å…¶å®ƒ declare çš„æ¨¡å—å·²ç»æ˜¯å­˜åœ¨ ts å£°æ˜çš„æ¨¡å—ï¼Œæ­¤æ—¶å†å¯¹å…¶è¿›è¡Œ declare å£°æ˜å³å¯¹å…¶åŸæœ¬çš„å£°æ˜ä¸Šè¿›è¡Œæ‰©å±•ï¼ˆå¯å‚è€ƒ vue-router å¯¹äº vue çš„æ‰©å±•ï¼‰ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰ ts å£°æ˜çš„æ¨¡å—ï¼Œæˆ‘ä»¬æ‹¿ä¸åˆ°å®ƒçš„ ts å£°æ˜ï¼Œå› æ­¤ä¹Ÿå°±æ²¡å‘è¿›è¡Œæ¨¡å—æ‰©å±•ï¼Œæ‰€ä»¥å°±ä¼šæŠ¥é”™ã€‚ è€Œå°† import æ”¾è‡³æ¨¡å—å†…æ—¶ï¼Œå› ä¸º module æœ¬æ¥å°±è¡¨æ˜è‡ªå·±ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œå…¶å°±å¯ä»¥ä½œä¸ºæ¨¡å—çš„å£°æ˜ï¼Œä¸ºæ²¡æœ‰å¯¹åº”å£°æ˜çš„æ¨¡å—æ·»åŠ å£°æ˜äº†ã€‚ æ­¤å¤–ï¼Œå¯¹äºå¤šä¸ª declare global çš„å†™æ³•ï¼Œæ­¤æ˜¯é‡‡ç”¨äº†å£°æ˜åˆå¹¶&gt;)çš„æ–¹å¼ï¼Œä½¿å¾—æ‰€æœ‰çš„æ¨¡å—å£°æ˜éƒ½åˆå¹¶è‡³åŒä¸€ä¸ª global å…¨å±€å£°æ˜ä¸­ï¼Œå› æ­¤ï¼Œåœ¨å¯¹äºå°† import æè‡³å¤–å±‚çš„â€œå¸¦å¯¼å…¥å£°æ˜çš„å…¨å±€å£°æ˜æ–‡ä»¶â€æ¥è¯´ï¼Œåˆ†æ–‡ä»¶å…¨å±€ç»´æŠ¤æˆ–è€…å•æ–‡ä»¶å£°æ˜åˆå¹¶å¼ç»´æŠ¤éƒ½æ˜¯å¯è¡Œçš„ã€‚ TypeScript ä¸ ECMAScript 2015 ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ import æˆ–è€… export çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ import æˆ–è€… export å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹è¢«è§†ä¸ºå…¨å±€å¯è§çš„ï¼ˆå› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„ï¼‰ã€‚ ts è¸©å‘è®°å½•å·²ç»ç»´æŠ¤è‡³åšæ–‡é¡¹ç›® ts è¿ç§»çš„è¸©å‘è®°å½•ä¸­äº† å‚è€ƒæ–‡æ¡£ å‘½åç©ºé—´å’Œæ¨¡å— Clarify what â€œambientâ€ means Ambient Declarations TypeScript å…¥é—¨æ•™ç¨‹ Typescript: IDE reports TS2307 typescript declare third party modules TypeScript çš„ä¸¤ç§å£°æ˜æ–‡ä»¶å†™æ³•çš„åŒºåˆ«å’Œæ ¹æœ¬æ„ä¹‰ åŒºåˆ† TS ä¸­çš„ namespace å’Œ module","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"å…³äº JS ä¸­â€œç»§æ‰¿â€çš„å†™æ³•","slug":"å…³äº-JS-ä¸­â€œç»§æ‰¿â€çš„å†™æ³•","date":"2019-06-28T05:01:15.000Z","updated":"2022-07-26T13:15:39.718Z","comments":true,"path":"2019/06/28/å…³äº-JS-ä¸­â€œç»§æ‰¿â€çš„å†™æ³•/","link":"","permalink":"https://monocy.gitee.io/2019/06/28/å…³äº-JS-ä¸­â€œç»§æ‰¿â€çš„å†™æ³•/","excerpt":"å‰è¨€åœ¨å·©å›ºç»§æ‰¿è¿™éƒ¨åˆ†çŸ¥è¯†æ—¶ï¼Œçªç„¶æƒ³åˆ°æ—©æœŸåˆ†äº«æ—¶åŒäº‹æå‡ºçš„ä¸€äº›ç–‘é—®ï¼Œå³å®ç° JS ç»§æ‰¿å…·ä½“æœ‰é‚£äº›æ–¹æ³•ã€‚åœ¨ç»è¿‡ä¸€ç•ªè°ƒç ”åï¼Œæ­¤ç¯‡ä¾¿æ˜¯æˆ‘æ‰€æ€»ç»“å‡ºçš„æ¯”è¾ƒå…¨é¢çš„æ–¹æ³•ã€‚å½“ç„¶ï¼Œæ–‡ä¸­è®°å½•çš„ä»…æ˜¯ä¸€äº›åŸºç¡€çš„ç»§æ‰¿æ–¹æ³•ä»¥åŠå®ƒä»¬ä¹‹é—´çš„çš„åŒºåˆ«ï¼Œä»¥ä¾›å‚è€ƒã€‚","text":"å‰è¨€åœ¨å·©å›ºç»§æ‰¿è¿™éƒ¨åˆ†çŸ¥è¯†æ—¶ï¼Œçªç„¶æƒ³åˆ°æ—©æœŸåˆ†äº«æ—¶åŒäº‹æå‡ºçš„ä¸€äº›ç–‘é—®ï¼Œå³å®ç° JS ç»§æ‰¿å…·ä½“æœ‰é‚£äº›æ–¹æ³•ã€‚åœ¨ç»è¿‡ä¸€ç•ªè°ƒç ”åï¼Œæ­¤ç¯‡ä¾¿æ˜¯æˆ‘æ‰€æ€»ç»“å‡ºçš„æ¯”è¾ƒå…¨é¢çš„æ–¹æ³•ã€‚å½“ç„¶ï¼Œæ–‡ä¸­è®°å½•çš„ä»…æ˜¯ä¸€äº›åŸºç¡€çš„ç»§æ‰¿æ–¹æ³•ä»¥åŠå®ƒä»¬ä¹‹é—´çš„çš„åŒºåˆ«ï¼Œä»¥ä¾›å‚è€ƒã€‚ ï¼ˆåŸå‹ï¼‰ç»§æ‰¿JavaScript ä¸­æœ‰è®¸å¤šæ¨¡æ‹Ÿç±»è¡Œä¸ºçš„æ–¹æ³•ï¼Œå…¶ä¸­â€œç»§æ‰¿â€ï¼ˆæ›´è´´åˆ‡çš„è¯´æ³•æ˜¯å§”æ‰˜ï¼‰ä¾¿æ˜¯å…¶ä¸­çš„ä¸€é¡¹ï¼Œæ²¡æœ‰â€œç»§æ‰¿â€æœºåˆ¶ï¼ŒJavaScript ä¸­çš„ç±»å°±æ˜¯ä¸€ä¸ªç©ºæ¶å­ã€‚ å‡å¦‚æˆ‘ä»¬ä»¥æ­¤ä¾‹ä½œä¸ºç»§æ‰¿çš„æ¨¡æ¿ï¼Œå½’ç»“ä¸‹æ¥æ€»å…±æœ‰ 5 ç§ç»§æ‰¿çš„å†™æ³•ã€‚ 123456789101112131415161718// çˆ¶ç±»function Father(age) &#123; this.age = age;&#125;Father.prototype.getAge = function () &#123; return this.age;&#125;;// å­ç±»function Child(age, size) &#123; Father.call(this, age); this.size = size;&#125;/* ç»§æ‰¿çš„å®ç°ï¼Œçœ‹ä¸‹ä¾‹ */// å®ä¾‹const child = new Child(28, 'small'); éšå¼é“¾æ¥æ³•ES6 ä¹‹å‰æ¯”è¾ƒéå¸¸è§„çš„å†™æ³•æ˜¯æ‰‹åŠ¨æ›´æ”¹ __proto__ å±æ€§æ¥æœ€ç®€åŒ–é“¾å¼ç»§æ‰¿ã€‚ 1Child.prototype.__proto__ = Father.prototype; ä¼˜ç‚¹ï¼šæ“ä½œå¾ˆç®€ä¾¿ç›´æ¥ ç¼ºç‚¹ï¼šè¯¥æ–¹æ³•å¹¶éæ ‡å‡†ï¼Œå¹¶ä¸”æ— æ³•å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ…ç”¨ã€‚ ç›´æ¥å¼•ç”¨æ³•ç›´æ¥å°†å­ç±»çš„ prototype å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„ prototype å¯¹è±¡ã€‚ 1Child.prototype = Father.prototype; ä¼˜ç‚¹ï¼šæ“ä½œç®€å• ç¼ºç‚¹ï¼š Child çš„ prototype å±æ€§ä¿®æ”¹ä¼šç›´æ¥å½±å“åˆ°çˆ¶ç±»ï¼Œæ­¤å†™æ³•å…¶å®ç›¸å½“äºç›´æ¥åœ¨çˆ¶ç±»è¿›è¡Œä¿®æ”¹ï¼Œæ–°åˆ›å»ºä¸€ä¸ªå­ç±»æœ‰äº›å¤šæ­¤ä¸€ä¸¾ã€‚ å®ä¾‹åŒ–æ–¹æ³•å­ç±»çš„ prototype å±æ€§ä¸ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå€Ÿç”±å¯¹è±¡çš„ prototype é“¾æ¥ä¼ é€’ã€‚ 12Child.prototype = new Father();// Child.prototype.constructor = Chlid; ä¼˜ç‚¹ï¼šèƒ½åŸºæœ¬æ»¡è¶³â€œç»§æ‰¿â€çš„éœ€æ±‚ ç¼ºç‚¹ï¼š éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç„¶åå°†æ—§å¯¹è±¡ï¼ˆåŸæœ¬å­˜åœ¨çš„ prototype å¯¹è±¡ï¼Œå¸¦æœ‰ constructorï¼‰æŠ›å¼ƒæ‰ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹é»˜è®¤çš„ prototype å¯¹è±¡ã€‚ ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œæ¯”å¦‚ï¼šåŸå‹ï¼ˆprototypeï¼‰ä¸Šä¼šæœ‰â€œè„â€å±æ€§ï¼Œæœ¬ä¾‹çš„ prototype ä¸Šä¼šæœ‰å¤šä½™çš„ age å±æ€§ã€‚ å¿…è¦æ—¶è¿˜å¾—è‡ªå·±é‡å†™ä¸€ä¸‹ Child çš„ constructor æŒ‡å‘ï¼Œå¦‚â€œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿â€ã€‚ â€œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿â€ åœ¨ ES5 ä¸­ä¸ºæœ€ä½³å†™æ³•ï¼Œå¦‚æœä¸è€ƒè™‘å…¶ç¨å¾®çš„å¤æ‚æ€§ã€‚ å¯¹è±¡æ„é€ æ³•é€šè¿‡ Object.create æ–¹æ³•æ¥æ„é€ ä¸€ä¸ªåˆé€‚çš„å…³è”å¯¹è±¡ã€‚ 12Child.prototype = Object.create(Father.prototype);// Child.prototype.constructor = Chlid; ä¼˜ç‚¹ï¼šåœ¨ ES6 ä¹‹å‰çš„æœ€ä½³ä¹‹é€‰ï¼Œä¼˜äºå®ä¾‹åŒ–æ–¹æ³•ã€‚ ç¼ºç‚¹ï¼šä¸å®ä¾‹åŒ–æ–¹æ³•åŸºæœ¬ç›¸åŒï¼Œä½†æ²¡æœ‰å‰¯ä½œç”¨ã€‚æ­¤å¤–ï¼Œå…¶éšå¼ __proto__ é“¾æ¯”å®ä¾‹åŒ–æ–¹æ³•è¦å¤šä¸€å±‚ï¼Œé“¾å¼æŸ¥æ‰¾æ–¹æ³•ç›¸å¯¹ä¼šè€—æ—¶é•¿ä¸€ç‚¹ç‚¹ï¼ŒåŸºæœ¬å¯å¿½ç•¥ã€‚ è®¾ç½®åŸå‹æ³•ä½¿ç”¨ ES6 çš„åŸå‹è®¾ç½®æ–¹æ³•ï¼Œæ­¤æ³•åœ¨ ES6 ç¯å¢ƒä¸ºæœ€ä½³ä¹‹é€‰ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚ 1Object.setPrototypeOf(Child.prototype, Father.prototype); ä¼˜ç‚¹ï¼šèƒ½è¦†ç›–æ‰€æœ‰éœ€æ±‚ï¼Œæ¸…æ™°æ˜“æ‡‚ï¼Œå¯è¯»æ€§å¼ºã€‚ ç¼ºç‚¹ï¼šæ€§èƒ½æ¯” Object.create ç¨å¾®å·®ç‚¹ï¼Œå¦‚æœè€ƒè™‘æ€§èƒ½çš„è¯å¯ä¼˜å…ˆä½¿ç”¨ Object.create æ–¹æ³• å‚è€ƒæ–‡æ¡£ MDN","categories":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"}]},{"title":"å±‚å ä¸Šä¸‹æ–‡","slug":"å±‚å ä¸Šä¸‹æ–‡","date":"2019-06-18T02:43:12.000Z","updated":"2022-07-26T13:16:51.859Z","comments":true,"path":"2019/06/18/å±‚å ä¸Šä¸‹æ–‡/","link":"","permalink":"https://monocy.gitee.io/2019/06/18/å±‚å ä¸Šä¸‹æ–‡/","excerpt":"å‰è¨€åœ¨åšé¡¹ç›®å¸ƒå±€å›é¡¾æ—¶ï¼Œæ€è€ƒåˆ°äº†ä¸€ä¸ªå½“åˆæ¯”è¾ƒçŠ¹è±«çš„é—®é¢˜ã€Œflex å¸ƒå±€èƒ½å¦äº§ç”Ÿå±‚å /å †å ä¸Šä¸‹æ–‡ã€ã€‚åœ¨ç½‘ä¸Šä¹Ÿå‚è€ƒäº†å›½å†…å¤–å¾ˆå¤šæœ‰ä»·å€¼çš„æ–‡ç« ï¼Œæ­¤å¤„å°ç»“ä¸€ä¸‹ï¼Œç®—æ˜¯å¯¹å±‚å ä¸Šä¸‹æ–‡è¿™ä¸€éƒ¨åˆ†åšä¸€æ¬¡è¾ƒä¸ºå…¨é¢çš„æ€»ç»“ã€‚","text":"å‰è¨€åœ¨åšé¡¹ç›®å¸ƒå±€å›é¡¾æ—¶ï¼Œæ€è€ƒåˆ°äº†ä¸€ä¸ªå½“åˆæ¯”è¾ƒçŠ¹è±«çš„é—®é¢˜ã€Œflex å¸ƒå±€èƒ½å¦äº§ç”Ÿå±‚å /å †å ä¸Šä¸‹æ–‡ã€ã€‚åœ¨ç½‘ä¸Šä¹Ÿå‚è€ƒäº†å›½å†…å¤–å¾ˆå¤šæœ‰ä»·å€¼çš„æ–‡ç« ï¼Œæ­¤å¤„å°ç»“ä¸€ä¸‹ï¼Œç®—æ˜¯å¯¹å±‚å ä¸Šä¸‹æ–‡è¿™ä¸€éƒ¨åˆ†åšä¸€æ¬¡è¾ƒä¸ºå…¨é¢çš„æ€»ç»“ã€‚ æ ¸å¿ƒæ¦‚å¿µå±‚å ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆè¿™é‡Œå…ˆå¼•ç”¨ MDN ä¸Šçš„ä¸€æ®µå¯¹å±‚å ä¸Šä¸‹æ–‡çš„ä»‹ç»ï¼š å±‚å ä¸Šä¸‹æ–‡æ˜¯ HTML å…ƒç´ çš„ä¸‰ç»´æ¦‚å¿µï¼Œè¿™äº› HTML å…ƒç´ åœ¨ä¸€æ¡å‡æƒ³çš„ç›¸å¯¹äºé¢å‘ï¼ˆç”µè„‘å±å¹•çš„ï¼‰è§†çª—æˆ–è€…ç½‘é¡µçš„ç”¨æˆ·çš„ z è½´ä¸Šå»¶ä¼¸ï¼ŒHTML å…ƒç´ ä¾æ®å…¶è‡ªèº«å±æ€§æŒ‰ç…§ä¼˜å…ˆçº§é¡ºåºå ç”¨å±‚å ä¸Šä¸‹æ–‡çš„ç©ºé—´ã€‚ ç®€å•æ¥è¯´ï¼Œç”µè„‘å±å¹•ç»™æˆ‘ä»¬å±•ç°çš„æ˜¯ä¸€ä¸ªå¹³é¢ï¼Œæ­¤å¯¹åº”ç›´è§’åæ ‡ç³»çš„ Xã€Y è½´ï¼Œè€Œå‚ç›´ä¸ç”µè„‘å±å¹•çš„è¿™ä¸ªä¸å¯è§çš„è½´ï¼ˆç›¸å½“äºç›´è§’åæ ‡ç³»çš„ Z è½´ï¼‰ï¼Œå…¶ä¸Šé¢éå¸ƒç€ä¸åŒçš„å †å å±‚ï¼Œè€Œæ­¤å †å å±‚çš„å±‚å é¡ºåºå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„å±‚å ä¸Šä¸‹æ–‡äº†ã€‚ å¦‚æœæœ‰è®¾è®¡ç»éªŒçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªå †å å±‚å¯ä»¥ç†è§£ä¸º PS ä¸­çš„ç”»å¸ƒï¼Œé»˜è®¤åªæœ‰æœ€åˆçš„ä¸€å±‚ï¼ˆé¡µé¢ä¸­çš„ html å…ƒç´ ï¼‰ å±‚å ä¸Šä¸‹æ–‡çš„å †å é¡ºåºè¿™è¾¹å€Ÿç”¨ä¸€å¼ å›¾æ¥æè¿°ä¸€ä¸‹å †å é¡ºåºï¼š æ­¤å¤„å¯¹å›¾åšç®€å•è¯´æ˜ï¼š å±‚å ä¸Šä¸‹æ–‡éƒ¨åˆ†ï¼šç›¸å½“äºè¯¥å±‚å åŒºåŸŸçš„è£…é¥°ï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œå¤„äºæœ€åº•å±‚ block å—çŠ¶æ°´å¹³ç›’å­ï¼šå±‚å åŒºæœ€ä¸ºåŸºç¡€çš„å¸ƒå±€æ–¹å¼ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æ§åˆ¶å‘ˆç°çš„æ ·å¼ float æµ®åŠ¨ç›’å­ï¼šfloat é»˜è®¤çš„ display å±æ€§å°±æ˜¯ block ï¼Œåªæ˜¯è„±ç¦»äº†æ–‡æ¡£æµï¼Œå…¶ä¹Ÿæ˜¯ä¸€ç§å¸ƒå±€æ–¹å¼ inline/inline-block æ°´å¹³ç›’å­ï¼šå±‚å åŒºé»˜è®¤çš„å†…å®¹å‘ˆç°éƒ¨åˆ†ï¼Œæ‰¿è½½é¡µé¢å¤§å¤šæ•°å†…å®¹éƒ¨åˆ†ï¼ˆæ¶‰åŠåˆ°é¡µé¢å†…å®¹çš„æ ‡ç­¾åŸºæœ¬ä¸Šæ˜¯ inline ï¼Œæˆ–è€…æ˜¯éšå¼è¡Œå†…ç›’ï¼‰ z-index + positionï¼ˆå’Œéƒ¨åˆ† CSS3 å±æ€§ï¼‰ï¼šæ§åˆ¶å…ƒç´ åœ¨å…¶æ‰€åœ¨çš„å±‚å åŒº Z è½´ä¸Šçš„é¡ºåºï¼ˆé»˜è®¤ autoï¼Œç›¸å½“äº 0ï¼‰ï¼Œæœ‰æ­£è´Ÿå€¼ å…¶ä¸­æ¯”è¾ƒæœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œinline/inline-block çš„å±‚çº§é¡ºåºè¦é«˜äº block å…ƒç´ ï¼Œå…·ä½“çš„ä½“ç°å°±åœ¨â€œæ–‡å­—ç¯ç»•â€å¼å¸ƒå±€äº†ã€‚ å…¶å®è¿™ä¹ˆæ’åºä¹Ÿæœ‰å…¶ç†ç”±ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé¡µé¢å…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å‘ˆç°å†…å®¹çš„ï¼Œè€Œå—çº§å…ƒç´ åå‘äºå¸ƒå±€ï¼ˆè®¾ç½®å®½é«˜ã€å†…å¤–è¾¹è·ã€è¾¹æ¡†ã€è¡Œå†…å…ƒç´ çš„å¤§å¤šæ•°é…ç½®ç­‰ç­‰ï¼‰ï¼Œè¡Œå†…å…ƒç´ åå‘äºå†…å®¹ï¼ˆä¸å…¶å®ƒå†…å®¹çš„é—´éš”ã€å­—ä½“å¤§å°ç­‰ç­‰ï¼‰ï¼Œå› æ­¤ä¸éš¾ç†è§£è¡Œå†…å…ƒç´ åº”è¯¥é«˜äºå—çº§å…ƒç´ çš„å±‚å çº§åˆ«äº†ã€‚ æ­¤å¤–ï¼Œå¯¹äºé»˜è®¤æƒ…å†µï¼ˆä»€ä¹ˆéƒ½æ²¡æœ‰è®¾ç½®ï¼‰ï¼Œåé¢çš„å…ƒç´ é»˜è®¤å †å é¡ºåºä¼šé«˜äºå‰é¢çš„å…ƒç´ ï¼Œå…·ä½“çš„ä½“ç°ä¸ºä¸¤ä¸ª button æŒ‰é’®ï¼Œå¦‚æœå°†åè€…çš„ margin å€¼è®¾ä¸ºè´Ÿå€¼ï¼Œå…¶ä¼šè¦†ç›–æ‰å…ˆå‰çš„æŒ‰é’®ã€‚ æ³¨ï¼šåœ¨å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå…¶å­å…ƒç´ åŒæ ·ä¹ŸæŒ‰ç…§ä¸Šé¢è§£é‡Šçš„è§„åˆ™è¿›è¡Œå±‚å ã€‚ ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå…¶å­å…ƒç´ çš„ z-index å€¼åªåœ¨çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡ä¸­æœ‰æ„ä¹‰ã€‚å­çº§å±‚å ä¸Šä¸‹æ–‡è¢«è‡ªåŠ¨è§†ä¸ºçˆ¶çº§å±‚å ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªç‹¬ç«‹å•å…ƒã€‚ å¦‚ä½•äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡æ­¤å¤„è¿˜æ˜¯å¼•ç”¨ MDN ä¸Šçš„ä»‹ç»ï¼Œæ–‡æ¡£ä¸­çš„å±‚å ä¸Šä¸‹æ–‡ç”±æ»¡è¶³ä»¥ä¸‹ä»»æ„ä¸€ä¸ªæ¡ä»¶çš„å…ƒç´ å½¢æˆï¼ˆæœªåšè¯´æ˜çš„ä¼šå½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ï¼š æ ¹å…ƒç´  (HTML) z-index å€¼ä¸ä¸º â€œautoâ€ çš„ ç»å¯¹/ç›¸å¯¹å®šä½ï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ z-index å€¼ä¸ä¸º â€œautoâ€ çš„ flex é¡¹ç›® (flex item)ï¼Œå³ï¼šçˆ¶å…ƒç´  display: flex|inline-flex opacity å±æ€§å€¼å°äº 1 çš„å…ƒç´ ï¼ˆå‚è€ƒ the specification for opacityï¼‰ï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ transform å±æ€§å€¼ä¸ä¸º â€œnoneâ€ çš„å…ƒç´  mix-blend-mode å±æ€§å€¼ä¸ä¸º â€œnormalâ€ çš„å…ƒç´ ï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ filter å€¼ä¸ä¸º â€œnoneâ€ çš„å…ƒç´  perspective å€¼ä¸ä¸º â€œnoneâ€ çš„å…ƒç´  isolation å±æ€§è¢«è®¾ç½®ä¸º â€œisolateâ€ çš„å…ƒç´ ï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ position: fixedï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ will-change ä¸­æŒ‡å®šäº†ä»»æ„ CSS å±æ€§ï¼Œå³ä¾¿ä½ æ²¡æœ‰ç›´æ¥æŒ‡å®šè¿™äº›å±æ€§çš„å€¼(å‚è€ƒè¿™ç¯‡æ–‡ç«  -webkit-overflow-scrolling å±æ€§è¢«è®¾ç½® â€œtouchâ€ çš„å…ƒç´ ï¼ˆä¸å½±å“å­å…ƒç´ çš„ fix å¸ƒå±€ï¼‰ ï¼ˆè¡¥å……ï¼‰transform-style ä¸º preserve-3d çš„å…ƒç´  å½“ç„¶ï¼Œè¿™é‡Œä»…ä»…åªæ˜¯åˆ—ä¸¾äº†èƒ½å¤Ÿå½¢æˆå±‚å ä¸Šä¸‹æ–‡çš„ä¸€äº›æƒ…å†µï¼Œè€Œå…¶ä¸­ä¹Ÿæœ‰éƒ¨åˆ†ç¿»è¯‘çš„çš„ä¸æ˜¯å¾ˆå‡†ç¡®ï¼ˆå‚è€ƒå¼ é‘«æ—­çš„æ–‡ç« ï¼Œåé¢åšäº†ä¸€äº›è¦ç‚¹æè¿°ï¼‰ å±‚å ä¸Šä¸‹æ–‡çš„å±‚çº§æ˜¯ HTML å…ƒç´ å±‚çº§çš„ä¸€ä¸ªå±‚çº§ï¼Œå› ä¸ºåªæœ‰æŸäº›å…ƒç´ æ‰ä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚å¯ä»¥è¿™æ ·è¯´ï¼Œæ²¡æœ‰åˆ›å»ºè‡ªå·±çš„å±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´  å°†è¢«çˆ¶å±‚å ä¸Šä¸‹æ–‡åŒ…å«ã€‚ â€”â€” MDN è¯¦è§£å±‚å ä¸Šä¸‹æ–‡çš„å½¢æˆz-index ä¸ä¸º auto çš„ flex é¡¹ç›®æ­¤æŒ‡çš„æ˜¯çˆ¶å…ƒç´ çš„ display å±æ€§ä¸º flex/inline-flex ï¼Œå…¶å­å…ƒç´ çš„ z-index å€¼ä¸ä¸º autoï¼Œæ­¤æ—¶è¯¥å­å…ƒç´ ä¼šå½¢æˆå †å åŒºã€‚ transform å±æ€§å€¼ä¸ä¸º â€œnoneâ€ çš„å…ƒç´ åœ¨åš position: fixed å®šä½æ—¶ï¼Œå…¶é»˜è®¤æ˜¯åŸºäºé¡µé¢çª—å£åˆ›å»ºå †å åŒºï¼ˆæ ¹å…ƒç´ æœ‰ä¸ªæœ€åŸºç¡€çš„å †å åŒºï¼‰ï¼Œç„¶è€Œçˆ¶çº§å…ƒç´ çš„ transform å±æ€§å€¼é none æ—¶ï¼Œå…¶ä¼šç”Ÿæˆä¸€ä¸ªå †å å±‚ï¼Œä½¿å¾—å†…éƒ¨çš„ fixed å¸ƒå±€ä¸æ˜¯ä»¥çª—å£ä¸ºåŸºæœ¬çš„å †å å±‚ï¼Œè€Œæ˜¯æ­¤çˆ¶çº§æœ¬èº«ï¼Œä»è€Œäº§ç”Ÿå¾ˆâ€œé…¸çˆ½â€çš„ bug ä½“éªŒã€‚ ä¸ä¼šå½±å“ fix å¸ƒå±€çš„ä¼šç”Ÿæˆè‡ªèº«å±‚å çš„ä¾‹å­æ­¤éƒ¨åˆ†å¯¹äº -webkit-overflow-scrolling å±æ€§æœªèƒ½å°è¯•æˆåŠŸï¼Œå¯èƒ½åªèƒ½æ‰‹æœºç«¯æ˜¾ç°ï¼ˆæœªæµ‹è¯•ï¼‰ ä¼šå½±å“ fix å¸ƒå±€çš„å±‚å çš„ä¾‹å­æœ‰äººåšäº†æ¯”è¾ƒå…¨çš„ demoï¼Œæˆ‘ fork äº†ä¸€ä»½ï¼Œåˆ é™¤äº†é”™è¯¯çš„ flex å¸ƒå±€ä¾‹å­ï¼Œå»æ‰ä¸å—å½±å“çš„éƒ¨åˆ†ã€‚ æºç åœ°å€ï¼šä¼ é€é—¨ æ€»ç»“å¯¹äºå±‚å ä¸Šä¸‹æ–‡ï¼Œå½“å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œå…¶è¦†ç›–å…³ç³»éµå¾ªä¸¤æ¡é»„é‡‘å‡†åˆ™ï¼š è°å¤§è°ä¸Šï¼šå½“å…·æœ‰æ˜æ˜¾çš„å±‚å æ°´å¹³æ ‡ç¤ºçš„æ—¶å€™ï¼Œå¦‚å…·ä½“çš„ z-index å€¼ï¼Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œå±‚å æ°´å¹³å€¼å¤§çš„é‚£ä¸€ä¸ªè¦†ç›–å°çš„é‚£ä¸€ä¸ªã€‚ åæ¥å±…ä¸Šï¼šå½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´ã€å±‚å é¡ºåºç›¸åŒçš„æ—¶å€™ï¼Œåœ¨ DOM æµä¸­å¤„äºåé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ ã€‚ å‚è€ƒæ–‡ç«  The stacking context å±‚å é¡ºåºä¸å †æ ˆä¸Šä¸‹æ–‡çŸ¥å¤šå°‘ æ·±å…¥ç†è§£ CSS ä¸­çš„å±‚å ä¸Šä¸‹æ–‡å’Œå±‚å é¡ºåº ä½ ä¸çŸ¥é“çš„ CSS å±‚å ä¸Šä¸‹æ–‡ æ·±å…¥ç ”ç©¶ -webkit-overflow-scrolling: touch åŠ ios æ»šåŠ¨","categories":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"},{"name":"å±‚å ä¸Šä¸‹æ–‡","slug":"å±‚å ä¸Šä¸‹æ–‡","permalink":"https://monocy.gitee.io/tags/å±‚å ä¸Šä¸‹æ–‡/"}]},{"title":"é¡¹ç›®å¸ƒå±€ä¸ flex","slug":"é¡¹ç›®å¸ƒå±€ä¸-flex","date":"2019-06-10T03:39:42.000Z","updated":"2022-07-26T13:13:08.487Z","comments":true,"path":"2019/06/10/é¡¹ç›®å¸ƒå±€ä¸-flex/","link":"","permalink":"https://monocy.gitee.io/2019/06/10/é¡¹ç›®å¸ƒå±€ä¸-flex/","excerpt":"å‰è¨€åœ¨åšé¡¹ç›®çš„æ•´ä½“æ¡†æ¶å¸ƒå±€æ—¶æ›¾ç”¨äº† 3 ä¸ªç‰ˆæœ¬ï¼Œç”±æœ€å¼€å§‹å…¼å®¹æ€§æœ€å¥½çš„ position å¸ƒå±€ï¼Œåˆ°ä¸­é—´è¿‡æ¸¡è°ƒæ•´ç”¨çš„ calc å¸ƒå±€ï¼Œå†åˆ°ç›®å‰ä½¿ç”¨çš„ flex å¸ƒå±€ã€‚å› ä¸ºä¸è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼Œå› æ­¤ç”¨æœ€æ–°çš„å†™æ³•æ¥å¤šè¶Ÿè¶Ÿæ°´ï¼Œæ­¤ç¯‡å°±æ˜¯å¯¹æ‰€å†™çš„å¸ƒå±€çš„ä¸€äº›å¿ƒå¾—ã€‚","text":"å‰è¨€åœ¨åšé¡¹ç›®çš„æ•´ä½“æ¡†æ¶å¸ƒå±€æ—¶æ›¾ç”¨äº† 3 ä¸ªç‰ˆæœ¬ï¼Œç”±æœ€å¼€å§‹å…¼å®¹æ€§æœ€å¥½çš„ position å¸ƒå±€ï¼Œåˆ°ä¸­é—´è¿‡æ¸¡è°ƒæ•´ç”¨çš„ calc å¸ƒå±€ï¼Œå†åˆ°ç›®å‰ä½¿ç”¨çš„ flex å¸ƒå±€ã€‚å› ä¸ºä¸è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ï¼Œå› æ­¤ç”¨æœ€æ–°çš„å†™æ³•æ¥å¤šè¶Ÿè¶Ÿæ°´ï¼Œæ­¤ç¯‡å°±æ˜¯å¯¹æ‰€å†™çš„å¸ƒå±€çš„ä¸€äº›å¿ƒå¾—ã€‚ æ•´ä½“å¸ƒå±€é¡¹ç›®çš„æ•´ä½“å¤–æ¡†ä¸ºå“å­—å½¢å¸ƒå±€ï¼Œé¡¶éƒ¨ä¸º logo ã€ä¸»é¢˜å’Œç”¨æˆ·ä¿¡æ¯ï¼ˆhover å±•ç¤º poper è¯¦æƒ…ï¼‰ï¼›åº•éƒ¨å·¦ä¾§ä¸ºå¯¹åº”ä¸»é¢˜çš„å›¾ç‰‡ï¼Œä»¥åŠå…¶ä¸€ã€äºŒçº§èœå•ï¼›åº•éƒ¨å³ä¾§ä¸ºå†…å®¹åŒºã€‚æ­¤å¤–æœ€å³ä¾§è¿˜æœ‰ä¸€ä¸ªæµ®åŠ¨çš„å¿«æ·æ ã€‚ å†…å®¹åŒºé¡¶éƒ¨æœ‰å…¬å‘Šä¿¡æ¯ï¼ˆå¯å±•ç¤ºä¹Ÿå¯éšè—ï¼‰ï¼Œåº•éƒ¨åˆ™æ˜¯è‡ªé€‚åº”å†…å®¹åŒºã€‚å¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š ä¸‹é¢æ¥è¯´è¯´å¦‚ä½•æ¥è§„åˆ’å¸ƒå±€ä»¥åŠé‡åˆ°çš„é—®é¢˜çš„å¤„ç†ã€‚ å†å²ç‰ˆæœ¬åŠå…¶é—®é¢˜position ç‰ˆæœ¬æ—©æœŸé¡¹ç›®å¹¶ä¸æ˜¯å¾ˆå¤æ‚æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ç»å¯¹å®šä½çš„æ–¹å¼ã€‚å½“æ—¶é¡¶éƒ¨æ— ä¸»é¢˜ã€å³ä¾§æ— å…¬å‘Šï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ä¸€ç›´æ‚¬æŒ‚åœ¨å³ä¾§çš„æµ®åŠ¨æ¡†å’ŒåŠ¨ç”»ï¼Œå› æ­¤å¤„ç†æ¯”è¾ƒç®€å•ã€‚ä¸è¿‡ä½¿ç”¨ position æ¥åšå®šä½ï¼Œåˆä¸€ç‚¹ä¸æ˜¯å¾ˆå¥½çš„åœ°æ–¹æ˜¯å·¦ä¾§å’Œé¡¶éƒ¨éœ€è¦ç”¨ margin æ’‘å¼€ï¼ˆé˜²æ­¢å†…å®¹è¢«æŒ¡ä½ï¼‰ï¼ŒåŒæ—¶è¶…å‡ºéƒ¨åˆ†çš„æ»šåŠ¨æ¡å±•ç¤ºï¼Œä»¥åŠä¸€éƒ¨åˆ†åˆ‡æ¢åŠ¨ç”»çš„æ•ˆæœå‘ˆç°æœ€ç»ˆè®©æˆ‘ä¸‹å®šå†³å¿ƒæ¥æ›´æ”¹æ•´ä½“çš„å¸ƒå±€ã€‚ calc ç‰ˆæœ¬ä¸­æœŸå› ä¸ºè¿˜åœ¨å¼€å‘é¡¹ç›®ï¼Œå› æ­¤é‡‡å–äº†ä¸€ä¸ªè¿‡æ¸¡æ–¹æ¡ˆ calcï¼Œå°†å„éƒ¨åˆ†çš„å®½åº¦è®¡ç®—å‡ºæ¥ï¼Œä»è€Œåšåˆ°é¡µé¢çš„å¸ƒå±€å±•ç°ã€‚è¿™ä¸ªç‰ˆæœ¬å€’æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œåœ¨ chrome ä¸Šè¿è¡Œçš„å¾ˆç¨³å®šï¼Œç”±äºä¸æ¸…æ¥š calc è®¡ç®—ä¼šä¸ä¼šå½±å“é¡µé¢çš„æ¸²æŸ“é€Ÿåº¦ï¼Œå› æ­¤æœ€åè¿˜æ˜¯æ”¹æˆäº† flex å¸ƒå±€ã€‚ flex å¸ƒå±€åˆ†ææ•´ä½“ç»“æ„æ•´ä½“çš„ç»“æ„å¯åˆ†ä¸ºä¸Šä¸‹ç»“æ„ï¼Œè€Œä¸‹åŠéƒ¨åˆ†åˆæ‹†åˆ†ä¸ºå·¦å³ç»“æ„ï¼Œå› æ­¤ï¼Œåœ¨è®¾ç½®å®Œé¡¶å±‚çš„ html å’Œ body ä¹‹åï¼Œç»™é¡¹ç›®çš„æœ€å¤–å±‚ container å…ƒç´ è®¾ä»¥ä¸‹å±æ€§ä½œä¸ºå¤–å±‚å®¹å™¨ï¼š 1234567.container &#123; height: 100%; width: 100%; display: flex; flex-direction: column; position: relative;&#125; ç„¶åé¡¶éƒ¨è®¾ç½®å›ºå®šé«˜åº¦ 60pxï¼Œåº•éƒ¨é»˜è®¤ flex-grow: 1 æ’‘å¼€å³å¯ã€‚ç„¶è€Œåœ¨å†…å®¹æ’‘æ»¡åï¼Œè¿™æ ·è®¾ç½®å‡ºç°äº†é¡¶éƒ¨å›ºå®šé«˜åº¦éƒ¨åˆ†è¢«å‹ç¼©äº†ã€‚ é¡¶éƒ¨ç»“æ„é¡¶éƒ¨å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå·¦ä¾§çš„ logoã€ä¸­é—´çš„ä¸»é¢˜åˆ—è¡¨ä»¥åŠå³ä¾§çš„ç”¨æˆ·å¤´åƒéƒ¨åˆ†ã€‚é¡¶éƒ¨åŸºæœ¬å¤ªå¤šé—®é¢˜ï¼Œå› ä¸ºç”¨æˆ·å¤´åƒéƒ¨åˆ†æœ‰å¤šä¸ªä¸åŒçš„è¡Œå†…å…ƒç´ ï¼Œè€Œè¿™å—äº§ç”Ÿäº†è¡Œå†…å…ƒç´ æ— æ³•å¯¹é½çš„é—®é¢˜ï¼ˆäºæ˜¯é‡‡ç”¨äº†æœ€ä¸ºæ–¹ä¾¿çš„ flex å†™æ³•ï¼‰ åº•éƒ¨ç»“æ„åº•éƒ¨å†…å®¹åŒºåŸŸåˆ†ä¸ºå·¦å³ç»“æ„ï¼Œå·¦ä¾§èœå•å±•ç¤ºï¼ˆç”¨ element-menu å¾ˆç®€å•ï¼‰ï¼Œå³ä¾§å°±æ˜¯å†…å®¹åŒºäº†ã€‚è¿™éƒ¨åˆ†å·¦ä¾§æ”¶ç¼©æœ‰åš transition åŠ¨ç”»ï¼Œå¯¹äºé¡µé¢å›¾è¡¨æ¸²æŸ“è¾ƒå¤šçš„æƒ…å†µä¼šæ¯”è¾ƒå¡ï¼ˆåŠ¨ç”»å»æ‰äº†ï¼‰ï¼ŒåŸºæœ¬ä¸Šæ²¡é‡åˆ°ä»€ä¹ˆéº»çƒ¦ï¼›å³ä¾§æœ‰ä¸€ä¸ªå¾ˆå¤´ç–¼çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯é¡µé¢é¡¶éƒ¨çš„å…¬å‘Šï¼Œå› ä¸ºæ˜¯å¯æœ‰å¯æ— çš„ï¼Œè€Œå…¬å‘Šä¸‹é¢çš„å†…å®¹åŒºè¦ä¸€ç›´ä¿è¯èƒ½å¤Ÿå æ»¡å†…å®¹åŒºï¼ˆå¦‚æœå†…å®¹è¶…å‡ºåˆ™æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼‰ã€‚ æœ‰äººä¼šè¯´ï¼šâ€œï¼ˆæŠ˜ä¸­æ–¹æ¡ˆï¼‰è¿™æœ‰ä»€ä¹ˆéš¾çš„ï¼Œå†…å®¹åŒº flex å¸ƒå±€ï¼Œä¸Šä¾§å…¬å‘ŠåŒºï¼ˆflex-shrink: 0ï¼‰ï¼Œä¸‹éƒ¨åˆ†å†…å®¹åŒºé»˜è®¤æ·»ä¸Š flex-grow: 1ï¼Œç„¶åæº¢å‡ºæ»šåŠ¨å°±å¯ä»¥äº†ï½â€ã€‚å¦‚æœäº‹æƒ…èƒ½è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚éœ€æ±‚å´å¹¶ä¸æ˜¯ä¸Šä¸‹ç»“æ„ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œå› ä¸ºæ»šåŠ¨æ¡åŒºåŸŸåŒ…è£¹äº†é¡¶éƒ¨å…¬å‘Šï¼ŒåŒæ—¶è¿˜è¦å…¼å®¹ä»¥å‰çš„é¡µé¢ï¼Œå³ï¼š å½“ â€œå‘ˆç°çš„å†…å®¹é«˜åº¦â€ + â€œå…¬å‘Šé«˜åº¦ï¼ˆå¾—è€ƒè™‘æ— å…¬å‘Šçš„æƒ…å†µï¼‰â€ &lt; â€œå†…å®¹åŒºåŸŸé«˜åº¦â€ æ—¶æ— æ»šåŠ¨æ¡ï¼›åä¹‹æœ‰æ»šåŠ¨æ¡ã€‚æ­¤å¤–è¿˜éœ€è¦åšå¥½è€ä»£ç çš„å…¼å®¹å¤„ç†ã€‚ emmmmmï¼Œæœç„¶ä¸–ç•Œä¸Šæ²¡æœ‰äº§å“æ‰€æƒ³ä¸å‡ºæ¥çš„ä¸»æ„å•Šï¼Œå½“ç„¶ï¼Œåœ¨â€œæŠ˜ä¸­æ–¹æ¡ˆâ€ä¸Šçº¿ä¹‹åï¼Œæ…¢æ…¢çš„ç»ˆäºæ‘¸ç´¢å‡ºäº†æœ€ä½³æ–¹æ¡ˆã€‚ å³ä¾§æ‚¬æµ®æ¡†å³ä¾§æ‚¬æµ®æ¡†è™½ç„¶å¹¶æ— å¤ªå¤šå†…å®¹ï¼Œä½†æ˜¯éœ€è¦åœ¨ Vue é¡¹ç›®å†…æ”¯æŒæ‹–æ‹½ï¼Œå¤§è‡´ä¸ºï¼šæ‹–æ‹½æ—¶é¢œè‰²å˜æµ…ï¼Œåœæ­¢æ‹–æ‹½æ—¶æ¢å¤åŸæ ·ã€‚ç”±äº Vue æä¾› drag æ–¹æ³•ï¼Œå› æ­¤æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ–¹å¼æ˜¯åœ¨ç›‘å¬æ‹–æ‹½çš„èµ·æ­¢åŠ¨ä½œï¼Œç„¶ååŠ¨æ€ç»‘å®š class æ§åˆ¶å…¶ Visibility æ˜¾éšæ€§ï¼Œç„¶è€ŒåŸºæœ¬ä¸Šæ¯æ¬¡å¼€å§‹æ‹–æ‹½åç«‹é©¬å°±ç»“æŸæ‹–æ‹½äº†ï¼Œæœ€ç»ˆå®šä½çš„é—®é¢˜å°±åœ¨ Visibility ä¸Šã€‚ é‡åˆ°çš„é—®é¢˜å›ºå®šé«˜åº¦å†…å®¹æ”¶ç¼©é—®é¢˜åœ¨ flex å¸ƒå±€çš„æ¨¡å¼ä¸‹ï¼Œå­é¡¹çš„é»˜è®¤å€¼ä¸ºï¼š 1flex: 0 1 auto; å…¶åˆ†åˆ«è¡¨ç¤º flex-grow ä¸º 0ï¼Œå³ä¸ä¼šå‚ä¸å¤šä½™éƒ¨åˆ†çš„åˆ†é…ï¼ˆä¸å¯æ‰©å¼ ï¼‰ï¼›flex-shrink ä¸º 1ï¼Œå³å½“æ•´ä½“ç©ºé—´æ— æ³•è£…ä¸‹æ‰€æœ‰çš„å†…å®¹æ—¶ï¼Œè¯¥éƒ¨åˆ†ä¼šæŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ¥å‹ç¼©ï¼›flex-basic ä¸º autoï¼Œå³é»˜è®¤ä»¥å†…å®¹åŒºé«˜åº¦ä¸ºåŸºç¡€é«˜åº¦ã€‚ é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ã€‚å› ä¸º flex-basic ä¸º autoï¼Œå†…å®¹åŒºåŸŸé«˜åº¦æ˜¯ç”±å†…å®¹æ¥å†³å®šçš„ï¼Œè™½ç„¶æˆ‘ä»¬é€šè¿‡è®¾ç½® height: 60px å°†é«˜åº¦å›ºå®šæ’‘å¼€ï¼Œä½†æ˜¯å¯¹äº flex æ¥è¯´ï¼Œæˆ‘çš„ basic éƒ¨åˆ†å¹¶æ²¡æœ‰è¿™ä¹ˆé«˜ï¼ˆå†…å®¹æ²¡æœ‰è¾¾åˆ° 60pxï¼‰ï¼ŒåŒæ—¶æˆ‘è¿™éƒ¨åˆ†åˆæ˜¯å¯å‹ç¼©çš„ï¼Œå› æ­¤æˆ‘å¯ä»¥åŒ€ä¸€ç‚¹æ¥å°½é‡ä½¿å¾—å¦ä¸€éƒ¨åˆ†èƒ½å¤Ÿæ’‘æ»¡æº¢å‡ºçš„å†…å®¹ã€‚è€Œç»“æœå¯æƒ³è€ŒçŸ¥ï¼ˆé¡¶éƒ¨è¢«å‹ç¼©äº†ï¼‰ è§£å†³çš„æ€è·¯æœ‰ä¸‰ç§ï¼š è®¾ç½® flex-shrink: 0 æ¥ç¦æ­¢å…¶è¢«å‹ç¼© è®¾ç½® min-height: 60px ä»è€Œä¿è¯æœ€ä½çš„é«˜åº¦ å°†å…¶åŒ…è£¹çš„å†…å®¹åŒºé«˜åº¦è®¾ç½®ä¸º 60px è¡Œå†…å…ƒç´ å¯¹é½é—®é¢˜è¿™éƒ¨åˆ†å…ˆå‰æœ‰å†™è¿‡æµ…è°ˆè¡Œå†…å…ƒç´ ï¼Œå› ä¸ºå„éƒ¨åˆ†é»˜è®¤å¯¹é½æ–¹å¼ä¸åŒï¼Œæ­¤å¤„ä»…å†™å‡ºä¸¤ç§æœ€ä¸ºå¿«æ·çš„æ–¹æ³•ï¼š è®¾ç½®çˆ¶çº§ä¸º flexï¼Œç„¶åè®¾ç½® align-items: center ä¿®æ”¹å„å­å…ƒç´ çš„å¯¹é½æ–¹å¼ä¸º vertical-align: center å†…å®¹åŒºçš„æ™ºèƒ½æ»šåŠ¨æ¡é—®é¢˜é—®é¢˜ç®€å•çš„æŠ½è±¡ä¸ºä¸€ä¸ªæœ‰å›ºå®šå®½é«˜çš„ flex å¸ƒå±€çš„çˆ¶å®¹å™¨ï¼ˆcolumn æ’åºï¼‰ï¼Œå…¶åŒ…å«ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼š ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¯æœ‰å¯æ— ï¼Œå‘ˆç°æ—¶ä¸ºå®šé«˜çš„çŠ¶æ€ï¼› ç¬¬äºŒä¸ªèŠ‚ç‚¹å½“å†…å®¹ä¸æ˜¯å¾ˆé«˜æ—¶ï¼Œå…¶ä¼šè‡ªåŠ¨å¡«å……å‰©ä½™éƒ¨åˆ†ï¼ˆå‰©ä½™éƒ¨åˆ† + æ­¤èŠ‚ç‚¹å†…å®¹ + ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å†…å®¹ = çˆ¶å®¹å™¨é«˜åº¦ï¼‰ï¼›å½“å†…å®¹æœ‰è¶³å¤Ÿé«˜æ—¶ï¼Œçˆ¶çº§ä¼šå‡ºç°æ»šåŠ¨æ¡æ¥æ˜¾ç¤ºæº¢å‡ºçš„å†…å®¹ã€‚ è€ç‰ˆæœ¬æ­¤éƒ¨åˆ†çš„å®ç°æ˜¯ï¼š 12345.content &#123; height: 100%; width: 100%; position: relative;&#125; ç†æƒ³ä¸­æœ€å®Œç¾çš„å‡çº§æ–¹æ¡ˆæ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ª flex-grow: 1 ç„¶ååˆ é™¤ height: 100%ï¼Œä½†æ˜¯ç”±äºè¦ä¸å½±å“åŸæœ‰çš„ä»£ç ï¼ˆä»…ä½¿ç”¨ flex-grow ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼ŒæŸä¸ªé¡µé¢ä¼šå‡ºç°ä¸€ä¸ªåªæ»šåŠ¨ 1px è·ç¦»çš„æ»šåŠ¨æ¡ï¼Œæ–¹æ¡ˆ passï¼‰ï¼Œå› æ­¤åšäº†ä¸‹æ”¹å˜å³æ·»åŠ ä¸€é¡¹ min-height: calc(100% - 60px) ç„¶åæ»šåŠ¨æ¡å°±æ²¡æœ‰äº†ã€‚ å‰åè¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å¿…é¡»åŠ¨æ€è®¡ç®—çš„ min-height å€¼ä¸å›ºå®šå€¼ä¹‹å’Œä¸º 100% æ—¶æ‰ç”Ÿæ•ˆï¼Œä¸ªäººæ„Ÿè§‰åº”è¯¥æ˜¯å› ä¸ºåˆšå¥½å æ»¡æ•´ä¸ªå±å¹•ï¼Œå› æ­¤ä¸ä¼šè§¦å‘å¤šä½™çš„ flex çš„åŠ¨æ€è®¡ç®—ï¼Œå› æ­¤ä¹Ÿå°±æ²¡æœ‰é¢å¤–çš„æ»šåŠ¨æ¡äº†ï¼›å½“é¡¶éƒ¨å…¬å‘Šæ¶ˆå¤±æ—¶ï¼Œ min-height &lt; height å€¼ï¼Œä½¿å†…å®¹èƒ½è‡ªåŠ¨å……æ»¡å±å¹•ã€‚ å¦‚æœå¹¶ééœ€è¦å…¼å®¹å†å²ä»£ç ï¼Œå»ºè®®ç›´æ¥ flex-grow: 1ï¼Œåˆ é™¤ height: 100% è¿™æ ·åº”è¯¥ä¼šå¥½è°ƒæ•´ä¸€äº›ã€‚ è¯¡å¼‚çš„æ‹–æ‹½äº‹ä»¶æœ€å¼€å§‹å†™æ‹–æ‹½æ–¹æ³•æ—¶æ·»åŠ çš„ç±»ä¸ºï¼š 123.onDrag &#123; visibility: hidden;&#125; åœ¨æ‹–æ‹½æ—¶éšè—å…ƒç´ ï¼Œæ¾å¼€æ—¶æ˜¾ç¤ºå…ƒç´ ï¼ˆæœ€å¼€å§‹å®éªŒé˜¶æ®µçš„ vue/cli3 æ—¶å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•å®ç°ï¼‰ï¼Œåæ¥ç‰ˆæœ¬å‡çº§åï¼Œè¯¥æ–¹æ³•å¤±æ•ˆäº†ï¼Œä¼šä½¿å¾—éšè—åä¼šç«‹å³äº‹æƒ…å…ƒç´ ç„¦ç‚¹ï¼Œç„¶åç«‹å³å‡ºå‘äº† dragend äº‹ä»¶ï¼Œæ­¤è¾ƒå¥½çš„è§£å†³æ–¹æ³•ç›®å‰æ˜¯å°† visibility: hidden æ”¹æˆäº† opacity: 0ï¼Œä½†æ˜¯æ›´æ–°åæ‹–æ‹½è¿‡ç¨‹ä¸­è®¾ç½®å…ƒç´  visibility: hidden; ä¼šä½¿å¾—ç„¦ç‚¹ä¸¢å¤±ï¼Œè¿™ä¸ªåŸå› ç›®å‰ä¸æ˜¯å¾ˆæ˜ç¡®ã€‚ å®ä¾‹ä»£ç  å‚è€ƒä¾‹å­ å‚è€ƒæ–‡ç«  flex è®¾ç½®æˆ 1 å’Œ auto æœ‰ä»€ä¹ˆåŒºåˆ« W3C flex","categories":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"}]},{"title":"JavaScript å¯¹è±¡","slug":"JavaScript-å¯¹è±¡","date":"2019-06-06T09:28:38.000Z","updated":"2022-07-26T13:11:09.455Z","comments":true,"path":"2019/06/06/JavaScript-å¯¹è±¡/","link":"","permalink":"https://monocy.gitee.io/2019/06/06/JavaScript-å¯¹è±¡/","excerpt":"å‰è¨€å¯¹è±¡æ˜¯ JavaScript çš„ä¸ƒç§ä¸»è¦ç±»å‹ä¸­çš„ä¸€ç§ï¼ˆstringã€booleanã€numberã€nullã€undefinedã€symbolã€objectï¼‰ï¼Œä¹Ÿæ˜¯è¿™ä¸ƒç§ä¸»è¦ç±»å‹ä¸­æœ€ä¸ºå¤æ‚çš„ä¸€ç§ç±»å‹ï¼Œäº†è§£å¯¹è±¡å¯¹å­¦ä¹  JavaScriptã€äº†è§£ thiså’Œä½œç”¨åŸŸé“¾ï¼Œä»¥åŠä¹‹åçš„â€œç±»â€çš„æ¦‚å¿µéƒ½ååˆ†é‡è¦ï¼Œè€Œæ­¤ç¯‡å°±ä»è¾¹è¾¹è§’è§’æ¥ä»‹ç» JavaScript ä¸­çš„å¯¹è±¡ã€‚","text":"å‰è¨€å¯¹è±¡æ˜¯ JavaScript çš„ä¸ƒç§ä¸»è¦ç±»å‹ä¸­çš„ä¸€ç§ï¼ˆstringã€booleanã€numberã€nullã€undefinedã€symbolã€objectï¼‰ï¼Œä¹Ÿæ˜¯è¿™ä¸ƒç§ä¸»è¦ç±»å‹ä¸­æœ€ä¸ºå¤æ‚çš„ä¸€ç§ç±»å‹ï¼Œäº†è§£å¯¹è±¡å¯¹å­¦ä¹  JavaScriptã€äº†è§£ thiså’Œä½œç”¨åŸŸé“¾ï¼Œä»¥åŠä¹‹åçš„â€œç±»â€çš„æ¦‚å¿µéƒ½ååˆ†é‡è¦ï¼Œè€Œæ­¤ç¯‡å°±ä»è¾¹è¾¹è§’è§’æ¥ä»‹ç» JavaScript ä¸­çš„å¯¹è±¡ã€‚ åŸºç¡€å†…å®¹åŸºæœ¬è¯­æ³•å¯¹è±¡å†™æ³•æœ‰ä¸¤ç§ï¼šå£°æ˜ï¼ˆæ–‡å­—ï¼‰å½¢å¼å’Œæ„é€ å½¢å¼ã€‚ï¼ˆä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨æ„é€ å½¢å¼ï¼‰ 12345// å£°æ˜æ–‡å­—å½¢å¼const obj = &#123;&#125;;// æ„é€ å½¢å¼const obj = new Object(); å†™æ³•åŒºåˆ«ï¼šå£°æ˜æ–‡å­—å½¢å¼èƒ½ä¼ é€’æ›´å¤šçš„é”®/å€¼ï¼Œæ„é€ å½¢å¼å¾—ä¸€ä¸ªä¸ªçš„æ·»åŠ ã€‚ ç±»å‹ä¸ºä»€ä¹ˆè¦å•ç‹¬å¼ºè°ƒç±»å‹ï¼Ÿå› ä¸ºåœ¨æœ€å¼€å§‹ï¼Œæˆ‘ä¹Ÿæ˜¯è®¤ä¸º JS ä¸­ä¸‡ç‰©æ¥å¯¹è±¡ï¼Œå…¶å®ä¸ç„¶ï¼Œåƒæˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ç®€å•åŸºæœ¬ç±»å‹ï¼ˆstringã€booleanã€undefinedã€null å’Œ numberï¼‰å°±å¹¶éå¯¹è±¡ï¼ˆå­—é¢é‡å½¢å¼ï¼‰ã€‚å‡½æ•°å°±æ˜¯å¯¹è±¡çš„ä¸€ä¸ªå­ç±»å‹ï¼ˆæŠ€æœ¯è§’åº¦æ¥è¯´å³â€œå¯è°ƒç”¨çš„å¯¹è±¡â€ï¼‰ï¼›åŒæ ·çš„ï¼Œæ•°ç»„ä¹Ÿæ˜¯ï¼Œåªä¸è¿‡æ˜¯å…·å¤‡ä¸€äº›é¢å¤–çš„è¡Œä¸ºã€‚ typeof null === &#39;object&#39; æ˜¯è¯­è¨€æœ¬èº«çš„ bugï¼Œåœ¨ JavaScript ä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½éƒ½ä¸º 0 çš„è¯ä¼šè¢«åˆ¤æ–­ä¸º object ï¼Œç”±äº null çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯å…¨ 0ï¼Œå› æ­¤åœ¨åšç±»å‹åˆ¤è¯»æ—¶ä¼šå‡ºç°â€œè¯¯åˆ¤â€çš„é—®é¢˜ã€‚ åŸºç¡€ç±»å‹ä¸å¯¹è±¡ç±»å‹çš„ä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹è±¡çš„ç”Ÿå­˜æœŸï¼Œä½¿ç”¨ new æ“ä½œç¬¦åˆ›å»ºçš„å¼•ç”¨ç±»å‹çš„å®ä¾‹ï¼Œåœ¨æ‰§è¡Œæµç¦»å¼€å½“å‰ä½œç”¨åŸŸä¹‹å‰éƒ½ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œè‡ªåŸºæœ¬ç±»å‹åˆ™åªå­˜åœ¨äºä¸€è¡Œä»£ç çš„æ‰§è¡Œç¬é—´ï¼Œç„¶åç«‹å³è¢«é”€æ¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½åœ¨è¿è¡Œæ—¶ä¸ºåŸºæœ¬ç±»å‹æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚å¦‚ï¼š 123let name = 'ConardLi';name.color = 'red';console.log(name.color); // undefined å†…ç½®å¯¹è±¡JavaScript ä¸­è¿˜æœ‰ä¸€äº›å†…ç½®å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š String Boolean Number Object Function Array Date RegExp Error å®ƒä»¬å¯ä»¥ç±»æ¯”ä¸º Java ä¸­çš„ Classï¼ˆä½†ä» JavaScript è§’åº¦æ¥è¯´ï¼Œå®ƒä»¬åªæ˜¯ä¸€äº›å¯ä»¥å½“ä½œæ„é€ å‡½æ•°çš„å†…ç½®å‡½æ•°ï¼‰ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ JavaScript æ—¶ï¼Œæ›´ä¸ºå¸¸ç”¨çš„æ–¹å¼æ˜¯ç›´æ¥å£°æ˜ä¸€ä¸ªå­—é¢é‡ï¼Œå¦‚ï¼š 1234567891011const str1 = 'This is a string';const str2 = new String('This is a object');typeof str1 === 'string'; // truetypeof str2 === 'object'; // truestr1 instanceof String; // falsestr2 instanceof String; // trueObject.prototype.toString.call(str1); // [object String]Object.prototype.toString.call(str2); // [object String] è¿™é‡Œè§£é‡Šäº†å­—é¢é‡å¹¶éç”± String çš„æ„é€ å‡½æ•°å¾—åˆ°çš„å¯¹è±¡ï¼Œå®é™…ä¸Š str1 ä¸ºä½•å…¶è¡¨ç°å½¢å¼å’Œ str2 æ— ä»»ä½•ä¸åŒï¼ˆä»å­—ç¬¦ä¸²çš„æ“ä½œçš„å±‚é¢ï¼‰ï¼Œæ˜¯å› ä¸ºå¼•æ“ä¼šè‡ªåŠ¨å°†å­—é¢é‡è½¬æ¢æˆå…¶å¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼Œå› æ­¤å¯ä»¥è®¿é—®å¯¹åº”ç±»å‹çš„å±æ€§å’Œæ–¹æ³•ã€‚ å±æ€§ä¸æ–¹æ³•å¯¹è±¡çš„å†…å®¹æ˜¯ç”±ä¸€äº›å­˜å‚¨åœ¨ç‰¹å®šå‘½åä½ç½®çš„å€¼ç»„æˆçš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå±æ€§ï¼ˆå¯ç±»æ¯”æŒ‡é’ˆæ¥ç†è§£ï¼‰ã€‚å¯¹äºåŸºç¡€ç±»å‹æ¥è¯´ï¼Œå…¶æ‰€å­˜å‚¨çš„å€¼å¯¹åº”ä¸€å—å›ºå®šçš„ç©ºé—´ï¼Œä¸ä¼šåŠ¨æ€æ”¹å˜ï¼›è€Œå¯¹äºå¯¹è±¡è¿™æ ·çš„è¾ƒä¸ºå¤æ‚çš„ç±»å‹æ¥è¯´ï¼Œå®ƒä»¬å­˜å‚¨çš„ä¸ºä¸€å—å†…å­˜åŒºåŸŸçš„å¼•ç”¨ã€‚ é€šä¿—çš„æ¥è¯´ï¼ŒåŸºç¡€ç±»å‹å°±åƒæ‰‹æœºåº—è´§æ¶ä¸Šçš„æ‰‹æœºå£³ï¼Œå®ƒä»¬æ˜¯å®ç‰©ï¼Œâ€œæ‰€è§å³æ‰€å¾—â€ï¼›è€Œå¤æ‚ç±»å‹å°±åƒæ˜¯æ‰‹æœºåº—æŸœå­å†…çš„é«˜ä»·æ‰‹æœºï¼Œå±•ç¤ºçš„æ˜¯æ¨¡å‹æœºï¼Œå…¶è±¡å¾è¿™è¿™ä¸€å‹å·çš„æ‰€æœ‰æ‰‹æœºï¼Œéœ€è¦çš„æ—¶å€™é€šè¿‡æ­¤å»å¯¹åº”ä»“åº“è·å–çœŸæœºã€‚ è®¿é—®æ–¹å¼å¯¹è±¡å±æ€§çš„è®¿é—®æ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œä¾‹å¦‚ï¼š 1234567const obj = &#123; name: 1 &#125;;// å±æ€§è®¿é—®obj.name;// é”®è®¿é—®obj['name']; ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œå‰è€…åœ¨å†™çš„æ—¶å€™è¾ƒä¸ºæ–¹ä¾¿ï¼Œä½†æ˜¯å¾—æ»¡è¶³æ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒï¼Œæ¯”è¾ƒå›ºå®šï¼›åè€…çš„å†™æ³•æ¯”è¾ƒå¤šæ ·ï¼ˆES6 æ”¯æŒå¯è®¡ç®—å±æ€§åï¼‰ï¼Œç¼ºç‚¹æ˜¯æ²¡æœ‰å‰è€…ç›´æ¥ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå±æ€§åæ°¸è¿œéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚å¦‚æœä½¿ç”¨å­—ç¬¦ä¸²ä¹‹å¤–çš„å€¼ä½œä¸ºå±æ€§åï¼Œé‚£ä¹ˆå…¶ä¼šå…ˆè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š 12345678const obj = &#123;&#125;;obj[true] = 'boolean';obj[&#123;&#125;] = 'object';obj[3] = 'number';obj['true']; // booleanobj['[object object]']; // objectobj['3']; // number å‡½æ•°å±æ€§æœ‰æ—¶å€™å¯¹è±¡ä¸­çš„å±æ€§ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä¸Šç§°è¿™æ ·çš„å±æ€§ä¸ºâ€œå‡½æ•°çš„æ–¹æ³•â€ï¼ˆç±»æ¯” C è¯­è¨€ï¼‰ã€‚ç„¶è€Œä»æŠ€æœ¯è§’åº¦æ¥è¯´ï¼Œåœ¨ JavaScript ä¸­ï¼Œå‡½æ•°æ°¸è¿œä¹Ÿä¸ä¼šâ€œå±äºâ€ä¸€ä¸ªå¯¹è±¡ï¼Œå› ä¸º this æ˜¯åŠ¨æ€ç»‘å®šè‡³å¯¹è±¡ä¸Šçš„ï¼ˆå…ˆå‰æœ‰å†™è¿‡è¿™ä¹ˆä¸€ç¯‡æ–‡ç« ï¼‰ï¼Œå‡½æ•°ä¸å¯¹è±¡é—´çš„å…³ç³»å¹¶ä¸ç¨³å®šï¼Œå› æ­¤å¯¹è±¡ä¸å‡½æ•°æœ€å¤šä¹Ÿåªèƒ½ç§°ä½œä¸ºé—´æ¥å…³ç³»ã€‚æœ€ä¸ºä¿é™©çš„è¯´æ³•å¯èƒ½æ˜¯â€œå‡½æ•°â€å’Œâ€œæ–¹æ³•â€åœ¨ JavaScript ä¸­æ˜¯å¯ä»¥äº’æ¢çš„ã€‚ 1234567891011121314const obj = &#123; foo: function () &#123; console.log(1); &#125;,&#125;;// åŸºæœ¬ä¸Šå¯ä»¥ç­‰ä»·äºfunction foo() &#123; console.log(1);&#125;const obj1 = &#123; foo: foo,&#125;; æ•°ç»„æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JS ä¸­æ•°ç»„ä¹Ÿæ˜¯â€œå¯¹è±¡â€ï¼Œä½†æ˜¯ç›¸å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œæ•°ç»„æœ‰ä¸€å¥—æ›´ä¸ºç»“æ„åŒ–çš„å€¼å­˜å‚¨æœºåˆ¶ï¼ˆé€šè¿‡ç´¢å¼•çš„æ–¹å¼ï¼‰ï¼Œä¾‹å¦‚ï¼š 123const arr = [1, 2, 3];arr[0]; // 1 ç”±äºæ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™æ•°ç»„æ·»åŠ å±æ€§ï¼Œå¦‚ï¼š 12// æ²¿ç”¨ä¸Šä¾‹arr.bar = &apos;bar&apos;; æ³¨æ„ï¼šå¦‚æœè¯•å›¾åƒæ•°ç»„å†…æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œè€Œå±æ€§â€œçœ‹èµ·æ¥â€åƒä¸€ä¸ªæ•°å­—ï¼ˆå¦‚å­—ç¬¦ä¸²æ•°å­ï¼‰ï¼Œé‚£ä¹ˆå®ƒä¼šå˜æˆä¸€ä¸ªæ•°å€¼ä¸‹æ ‡ æå‡å†…å®¹å±æ€§æè¿°ç¬¦æœ€æ—©æ¥è§¦åˆ°å±æ€§æè¿°ç¬¦çš„æ—¶å€™è¿˜æ˜¯åœ¨è¯» JS çº¢å®ä¹¦çš„æ—¶å€™ï¼Œä¸è¿‡é‚£æ—¶å€™ä¸æ˜¯å¾ˆæ‡‚æœ‰å•¥ç”¨ï¼Œéšç€æ¥è§¦çš„ä¸œè¥¿é€æ¸å˜å¤šï¼Œæºç ä¹Ÿçœ‹äº†ä¸€éƒ¨åˆ†ï¼Œå¯¹å±æ€§æè¿°ç¬¦ä¹Ÿæœ‰äº†ä¸€å®šçš„ç¨‹åº¦çš„ç†è§£ã€‚ è‡ª ES5 ä»¥æ¥ï¼ŒJS çš„æ‰€æœ‰å±æ€§éƒ½å…·å¤‡äº†å±æ€§æè¿°ç¬¦ï¼Œé€šè¿‡ Object.getOwnPropertyDescription(&lt;obj&gt;, &lt;prop&gt;) èƒ½å¤Ÿæ‹¿åˆ°å¯¹åº”å±æ€§çš„æè¿°ï¼ŒåŒ…å«å†…å®¹å¦‚ä¸‹ï¼š 123456&#123; value: 'xxx', // å€¼ writable: true, // æ˜¯å¦å¯å†™ï¼ˆé»˜è®¤ï¼‰ enumerable: true, // æ˜¯å¦å¯æšä¸¾ï¼ˆé»˜è®¤ï¼‰ configurable: true // æ˜¯å¦å¯é…ç½®ï¼ˆé»˜è®¤ï¼‰&#125; å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ Object.defineProperty(&lt;obj&gt;, &lt;prop&gt;, {/* */}) æ¥ä¿®æ”¹å±æ€§æè¿°ç¬¦ã€‚ writablewritable å†³å®šæ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§çš„å€¼ï¼Œå¦‚æœè®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆä¿®æ”¹å±æ€§å€¼æ—¶ä¼šé™é»˜å¤±æ•ˆ 123456789101112const obj = &#123;&#125;;Object.defineProperty(obj, 'a', &#123; enumerable: true, configurable: true, writable: false, value: 'static',&#125;);obj.a = 'public';obj.a; // staticï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼‰ ç„¶è€Œï¼Œå½“é…ç½®ä¸­æœ‰é…ç½® getter/setter æ—¶ï¼Œè¿™ä¸ªå±æ€§ä¼šè¢«å®šä¹‰ä¸ºâ€œè®¿é—®æè¿°ç¬¦â€ï¼ˆä¸â€œæ•°æ®æè¿°ç¬¦â€ç›¸å¯¹ï¼‰ï¼Œå¯¹äºè®¿é—®æè¿°ç¬¦æ¥è¯´ï¼Œ JavaScript ä¼šå¿½ç•¥å…¶ value å’Œ writable å±æ€§ï¼ˆå…·ä½“æ¥è¯´æ­¤ï¼‰ï¼Œä¾‹å¦‚ï¼š 12345678910111213const obj = &#123; a: 2,&#125;;Object.defineProperty(obj, 'a', &#123; enumerable: true, configurable: true, get() &#123; return 3; &#125;,&#125;);obj.a; // 3 configurableconfigurable å†³å®šå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯é…ç½®ã€‚ä¸ writable ä¸åŒï¼Œwritable æ§åˆ¶çš„æ˜¯å¯¹è±¡å±æ€§å€¼èƒ½å¦æ”¹å˜ï¼Œè€Œ configurable é…ç½®çš„æ˜¯å±æ€§æè¿°ç¬¦èƒ½å¦æ”¹å˜ï¼Œå³åè€…æ˜¯å•å‘çš„ï¼ˆæŸä¸ªå¯¹è±¡çš„ configurable è®¾ç½®ä¸º false åå°±æ— æ³•å°†å…¶å†è®¾ç½®ä¸º true äº†ï¼‰ã€‚ é™¤æ­¤ä»¥å¤–ï¼Œå…¶è¿˜ç¦æ­¢åˆ é™¤æ­¤å±æ€§ï¼Œå¦‚ï¼š 1234567891011121314151617181920const obj = &#123; a: 'static',&#125;;obj.a; // 2delete obj.a;obj.a; // undefinedObject.defineProperty(obj, 'a', &#123; enumerable: true, configurable: false, writable: true, value: 'static',&#125;);obj.a; // 2delete obj.a;obj.a; // 2 æ³¨ï¼š delete ä»…æ˜¯ä¸€ä¸ªåˆ é™¤å¯¹è±¡å±æ€§çš„æ“ä½œï¼Œå¹¶éä¸€ä¸ªé‡Šæ”¾å†…å­˜çš„å·¥å…· ç‰¹ä¾‹ï¼šå½“ configurable è®¾ç½®ä¸º false ä¹‹åï¼Œwritable å¯ç”± true æ›´æ”¹ä¸º falseï¼Œä½†æ— æ³•ç”± false æ›´æ”¹ä¸º trueã€‚ Enumerableé¡¾åæ€ä¹‰ï¼Œæ­¤æè¿°ç¬¦æ§åˆ¶çš„äº‹å±æ€§æ˜¯å¦ä¼šåœ¨éå†å¯¹è±¡æ—¶ï¼Œå°†å…¶æšä¸¾ã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718const obj = &#123; bar: 1, foo: 2,&#125;;Object.defineProperty(obj, 'c', &#123; enumerable: false, configurable: true, writable: true, value: 3,&#125;);for (const key in obj) &#123; console.log(key, obj[key]); // æ²¡æœ‰ [c 3]&#125;'c' in obj; // trueobj.hasOwnProperty('c'); // true for .. in å¾ªç¯å¯ä»¥éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§åˆ—è¡¨ï¼ˆåŒ…æ‹¬[[Prototype]]é“¾ï¼‰ï¼Œè€Œéå†å±æ€§çš„å€¼æˆ‘ä»¬é€šå¸¸ç”¨çš„æ˜¯ for .. ofï¼Œå¦‚ï¼š 12345const arr = [1, 2, 3];for (const value of arr) &#123; console.log(value); // 1, 2, 3&#125; for .. of é¦–é€‰ä¼šå‘è¢«è®¿é—®çš„å¯¹è±¡è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¿­ä»£å™¨å¯¹è±¡çš„ next() æ–¹æ³•æ¥éå†è¿”å›å€¼ï¼Œæ•°ç»„å†…é»˜è®¤ä¼šå¸¦æœ‰è¿­ä»£å™¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥å°† for .. of è¿ç”¨è‡³æ•°ç»„ä¸­ã€‚ä½†æ˜¯å¯¹è±¡å´æ²¡æœ‰ï¼Œæˆ‘ä¹ˆå¯ä»¥è¿™æ ·é€ ä¸€ä¸ªè‡ªå®šä¹‰è¿­ä»£å™¨ã€‚ 123456789101112131415161718192021const obj = &#123; a: 1, b: 2&#125;;Object.defineProperty(obj, Symbol.iterator, &#123; enumerable: false, configurable: true, writable: false, value: function() &#123; const self = this; let idx = 0; const ks = Object.keys(self); return &#123; next: function() &#123; value: self[ks[idx++]], done: (idx &gt; ks.length ) &#125; &#125;; &#125;&#125;) éå†æ•°ç»„ä¸‹æ ‡ä½¿ç”¨çš„æ˜¯æ•°å­—é¡ºåºï¼Œä½†æ˜¯éå†å¯¹è±¡æ—¶å…¶é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚å› æ­¤åœ¨ä¸åŒç¯å¢ƒè¦æƒ³æ•°æ®å±•ç°å½¢å¼ä¿æŒä¸€è‡´ï¼Œé‚£ä¹ˆä¸€å®šä¸è¦ç›¸ä¿¡ä»»ä½•è§‚å¯Ÿåˆ°çš„é¡ºåºï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸å¯é çš„ã€‚ ä¸å˜æ€§å¯¹è±¡å¸¸é‡æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®å¯¹è±¡å±æ€§çš„ writable æ¥è®¾ç½®å¯¹è±¡å¸¸é‡ï¼Œè¿™æ ·èƒ½åšåˆ°çœŸæ­£æ„ä¹‰ä¸Šçš„ä¸å¯ä¿®æ”¹ï¼ˆç±»æ¯” const å£°æ˜ï¼‰ ç¦æ­¢æ‰©å±•å¯¹è±¡é»˜è®¤æ˜¯å¯æ‰©å±•çš„ï¼ŒåŠ å…¥æƒ³è¦ç¦æ­¢ä¸€ä¸ªå¯¹è±¡çš„æ‰©å±•æ€§ï¼Œå³ä¸èƒ½åæœŸæ–°å¢å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ Object.preventExtensions(&lt;obj&gt;) å¯†å°Object.seal(&lt;obj&gt;) ä¼šåˆ›å»ºä¸€ä¸ªå¯†å°å¯¹è±¡ï¼Œå…¶ä¼šåœ¨ä¸€ä¸ªç°æœ‰å¯¹è±¡ä¸Šè°ƒç”¨ Object.preventExtensions() å¹¶å°†æ‰€æœ‰çš„å±æ€§æ ‡è®°ä¸º configurable: falseã€‚å…¶ä¸ä»…ä¸èƒ½æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿä¸èƒ½é‡æ–°é…ç½®æˆ–åˆ é™¤åŸæœ‰å±æ€§ï¼ˆå¯ä¿®æ”¹å±æ€§å€¼ï¼‰ã€‚ å†»ç»“Object.freeze(&lt;obj&gt;) ä¼šåˆ›å»ºä¸€ä¸ªå†»ç»“å¯¹è±¡ï¼Œå…¶ä¼šåœ¨å¯¹è±¡ä¸Šè°ƒç”¨ Object.seal() å¹¶å°†æ‰€æœ‰çš„å±æ€§æ ‡è®°ä¸º writable: falseï¼Œè¿™æ ·å°±æ— æ³•ä¿®æ”¹å…¶å€¼ã€‚ æ³¨æ„ï¼šå¯¹è±¡ä¸­å¼•ç”¨çš„å¯¹è±¡æ— æ³•è¢«å¯†å°å’Œå†»ç»“ï¼Œåªæœ‰éå¼•ç”¨å¯¹è±¡å—å½±å“æœ€ä¸ºå…¨é¢ï¼Œå¹¶ä¸”æ˜¯æµ…æ“ä½œã€‚ å‚è€ƒæ–‡æ¡£ ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JavaScriptã€‹","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"}]},{"title":"markdown è¯­æ³•","slug":"markdown-è¯­æ³•","date":"2019-05-30T05:13:20.000Z","updated":"2022-07-26T13:18:03.889Z","comments":true,"path":"2019/05/30/markdown-è¯­æ³•/","link":"","permalink":"https://monocy.gitee.io/2019/05/30/markdown-è¯­æ³•/","excerpt":"å‰è¨€ç”±äºå†™æ–‡ç« æ—¶ç»å¸¸ä¼šç”¨åˆ° Markdown è¯­æ³•ï¼Œä½†æ˜¯é™¤äº†åŸºç¡€çš„ Markdown è¯­æ³•å¤–ï¼Œhexo è¿˜æ”¯æŒä¸€äº›è¯­æ³•æ‰©å±•ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾æ‰©å±•è¯­æ³•ï¼Œå†™æ­¤ç¯‡ä»¥åšè®°å½•ã€‚","text":"å‰è¨€ç”±äºå†™æ–‡ç« æ—¶ç»å¸¸ä¼šç”¨åˆ° Markdown è¯­æ³•ï¼Œä½†æ˜¯é™¤äº†åŸºç¡€çš„ Markdown è¯­æ³•å¤–ï¼Œhexo è¿˜æ”¯æŒä¸€äº›è¯­æ³•æ‰©å±•ï¼Œå› æ­¤ä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾æ‰©å±•è¯­æ³•ï¼Œå†™æ­¤ç¯‡ä»¥åšè®°å½•ã€‚ åŒºå—å…ƒç´ æ®µè½ä¸æ¢è¡Œä¸€ä¸ª Markdown æ®µè½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­çš„æ–‡æœ¬è¡Œç»„æˆï¼Œå®ƒçš„å‰åè¦æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç©ºè¡Œï¼ˆç©ºè¡Œçš„å®šä¹‰æ˜¯æ˜¾ç¤ºä¸Šçœ‹èµ·æ¥åƒæ˜¯ç©ºçš„ï¼Œä¾¿ä¼šè¢«è§†ä¸ºç©ºè¡Œï¼ˆæ­¤ä¾¿æ˜¯æ®µè½ï¼‰ã€‚ Markdown ä¸­å¤šä¸ªç©ºæ ¼è¡¨ç¤ºæ¢è¡Œï¼Œé™¤æ­¤å¤– &lt;br /&gt; æ ‡ç­¾ä¹Ÿè¡¨ç¤ºæ¢è¡Œï¼ˆå›è½¦ä¼šå¤„ç†æˆç©ºæ ¼ï¼‰ã€‚ æ¨èçš„æ¢è¡Œæ–¹å¼ï¼šä¸¤æ¬¡å›è½¦ï¼Œè¿™æ ·ç»“æ„æ›´æ¸…æ™°ä¸€äº› æ ‡é¢˜æ ‡é¢˜ä½¿ç”¨ # è¡¨ç¤ºå…¶å±‚çº§ï¼ˆè¿˜æœ‰ä¸‹ç­‰å·æˆ–æ¨ªçº¿çš„å½¢å¼ï¼Œå•ä¸æ¨èï¼‰ 123456# è¿™æ˜¯ä¸€çº§æ ‡é¢˜## è¿™æ˜¯äºŒçº§æ ‡é¢˜### è¿™æ˜¯ä¸‰çº§æ ‡é¢˜#### è¿™æ˜¯å››çº§æ ‡é¢˜##### è¿™æ˜¯äº”çº§æ ‡é¢˜###### è¿™æ˜¯å…­çº§æ ‡é¢˜ ç”±äº ä¸€ã€äºŒã€ä¸‰çº§æ ‡é¢˜éƒ½æœ‰ä¸‹åˆ’çº¿ï¼Œä¸ªäººåå‘ä»ä¸‰çº§æ ‡é¢˜å¼€å§‹ï¼Œä¸‹åˆ’çº¿è¿‡å¤šçœ‹åŒºå—åˆ’åˆ†ä¸æ˜¯å¾ˆèˆ’æœã€‚ åŒºå—å¼•ç”¨åŒºå—å¼•ç”¨åªéœ€è¦åœ¨æ²¡è¡Œå‰æ·»åŠ  &gt; ç¬¦å·å³å¯ï¼Œå¯åµŒå¥— markdown è¯­æ³•ï¼Œä¾‹å¦‚ï¼š 12&gt; &gt; åµŒå¥—å¼•ç”¨&gt; &gt; **åµŒå¥—åŠ ç²—** åˆ—è¡¨æ— åºåˆ—è¡¨æ— åºåˆ—è¡¨ä¸€èˆ¬é€šè¿‡ -ã€* æˆ–è€… + ä½œä¸ºå…¶è¯­æ³•ï¼Œä¾‹å¦‚ï¼š 123- é¡¹ç›®ä¸€- é¡¹ç›®äºŒ- é¡¹ç›®ä¸‰ æœ‰åºåˆ—è¡¨æœ‰åºåˆ—è¡¨ç”¨ é˜¿æ‹‰ä¼¯æ•°å­— æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š 1231. é¡¹ç›® A2. é¡¹ç›® B3. é¡¹ç›® C åˆ—è¡¨æ®µè½åˆ—è¡¨é¡¹ç›®å¯ä»¥åŒ…å«å¤šä¸ªæ®µè½ï¼Œæ¯ä¸ªé¡¹ç›®ä¸‹çš„æ®µè½éƒ½å¿…é¡»ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦ï¼š 123- This is a list item with two paragraphs. &gt; This is the second paragraph in the list item.- Another item in the same list. ä»£ç åŒºå—ä»£ç åŒºå—åªè¦ç®€å•åœ°ç¼©è¿› 4 ä¸ªç©ºæ ¼æˆ–æ˜¯ 1 ä¸ªåˆ¶è¡¨ç¬¦å°±å¯ä»¥ï¼Œæ­¤å¤„æ¨èä½¿ç”¨ ``` æ¥åŒ…è£¹ä»£ç å—ï¼Œå¦‚ï¼š 1234`` html&lt;p&gt;è¿™æ˜¯ html ä»£ç &lt;/p&gt;`` æ³¨ï¼šä¸ºäº†èƒ½å±•ç¤ºä»£ç å—çš„å†™æ³•ï¼Œæ­¤å¤„çœç•¥äº†ä¸€ä¸ª ` åˆ†å‰²çº¿ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚å¦‚ï¼š 1------ è¡¨æ ¼è¡¨æ ¼å†™æ³•ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œç¬¬äºŒè¡Œä¸­çš„ : è¡¨ç¤ºå¯¹é½æ–¹å¼ï¼Œé»˜è®¤å·¦å¯¹é½ 1234è¡¨å¤´|è¡¨å¤´|è¡¨å¤´---|:--:|---:å†…å®¹|å†…å®¹|å†…å®¹å†…å®¹|å†…å®¹|å†…å®¹ åŒºæ®µå…ƒç´ é“¾æ¥å’Œå›¾ç‰‡é“¾æ¥çš„è¯­æ³•ä¸ºï¼š 1[ä¸­æ–‡æç¤º](&lt;address&gt;) å›¾ç‰‡è¯­æ³•ä¸º 1![ä¸­æ–‡æç¤º](&lt;address&gt;) å¼ºè°ƒMarkdown ä½¿ç”¨åŒæ˜Ÿå·ï¼ˆ*ï¼‰æˆ–åŒåº•çº¿ï¼ˆ_ï¼‰ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼š 1**å¼ºè°ƒéƒ¨åˆ†** æ–œä½“Markdown ä½¿ç”¨å•æ˜Ÿå·ï¼ˆ*ï¼‰æˆ–åŒåº•çº¿ï¼ˆ_ï¼‰ä½œä¸ºæ ‡è®°å¼ºè°ƒå­—è¯çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼š 1*æ–œä½“éƒ¨åˆ†* å…¶å®ƒåæ–œæ Markdown å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œå¦‚ * 1\\*literal asterisks\\* æ‹“å±•è¯­æ³•å¼•ç”¨å—123&#123;% quote David Levithan, Wide Awake %&#125;Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.&#123;% endquote %&#125; Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy. David LevithanWide Awake å±…ä¸­å¼•ç”¨123&#123;% cq User Name%&#125; This is a center quoet list&#123;% endcq %&#125; This is a center quoet list ç¬”è®°å—123&#123;% note default %&#125; Any content (support inline tags too.io).&#123;% endnote %&#125; Any content (support inline tags too.io). ç¬”è®°å—æœ‰ 2 å‚æ•°ï¼šç¬¬ä¸€ä¸ªä¸ºç±»å‹ï¼š[default | primary | success | info | warning | danger]ç¬¬äºŒä¸ªè¡¨é¢æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡ï¼ˆå†™äº†å³ä¾§å†…å®¹å°±æ²¡ icon äº†ï¼‰: no-icon å‚è€ƒæ–‡ç«  Markdown æ•™ç¨‹ hexo æ ‡ç­¾æ’ä»¶ next Tag Plugins","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"ç‰¹æ€§ä»‹ç»","slug":"ç‰¹æ€§ä»‹ç»","permalink":"https://monocy.gitee.io/tags/ç‰¹æ€§ä»‹ç»/"}]},{"title":"webpack æ–‡ä»¶åˆ†ç¦»æ€æƒ³","slug":"webpack-æ–‡ä»¶åˆ†ç¦»æ€æƒ³","date":"2019-05-23T11:17:39.000Z","updated":"2022-07-26T13:04:43.965Z","comments":true,"path":"2019/05/23/webpack-æ–‡ä»¶åˆ†ç¦»æ€æƒ³/","link":"","permalink":"https://monocy.gitee.io/2019/05/23/webpack-æ–‡ä»¶åˆ†ç¦»æ€æƒ³/","excerpt":"å‰è¨€å…ˆå‰åš vue é¡¹ç›®æ—¶ï¼Œå¯¹äºä»£ç åˆ†å‰²åšäº†ä¸€ä¸ª DllPlugin çš„ demo ï¼Œé¡¹ç›®å†…çš„æ”¶ç›Šä¹ŸæŒºä¸é”™ï¼ˆç¼–è¯‘æ—¶é—´å‡å°‘äº† 20s å·¦å³ï¼‰ï¼Œä½†æ˜¯ä»Šå¤©åœ¨çœ‹æ–‡æ¡£æ—¶ï¼Œæ— æ„é—´åˆæ‰«åˆ°äº† SplitChunksPluginã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå…ˆå‰ç”¨çš„æ˜¯ DllPlugin ï¼Œå®ƒå’Œè¿™ä¸ª SplitChunksPlugin åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ã€‚è¿™é‡Œç®€å•è®°å½•ä¸‹è°ƒç ”æ‰€è·å¾—çš„ä¸€äº›æ”¶è·ã€‚","text":"å‰è¨€å…ˆå‰åš vue é¡¹ç›®æ—¶ï¼Œå¯¹äºä»£ç åˆ†å‰²åšäº†ä¸€ä¸ª DllPlugin çš„ demo ï¼Œé¡¹ç›®å†…çš„æ”¶ç›Šä¹ŸæŒºä¸é”™ï¼ˆç¼–è¯‘æ—¶é—´å‡å°‘äº† 20s å·¦å³ï¼‰ï¼Œä½†æ˜¯ä»Šå¤©åœ¨çœ‹æ–‡æ¡£æ—¶ï¼Œæ— æ„é—´åˆæ‰«åˆ°äº† SplitChunksPluginã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå…ˆå‰ç”¨çš„æ˜¯ DllPlugin ï¼Œå®ƒå’Œè¿™ä¸ª SplitChunksPlugin åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ã€‚è¿™é‡Œç®€å•è®°å½•ä¸‹è°ƒç ”æ‰€è·å¾—çš„ä¸€äº›æ”¶è·ã€‚ SplitChunksPluginè‡ª webpack 4.0 ä¸Šçº¿ä¹‹åï¼ŒCommonsChunkPlugin å·²è¢«æ›¿æ¢æˆ SplitChunksPluginï¼Œæ—¨åœ¨ä¼˜åŒ– chunk çš„æ‹†åˆ†ã€‚äº†è§£ SplitChunksPlugin ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸ºä»€ä¹ˆä¼šå¼ƒç”¨ CommonsChunkPluginï¼ŒCommonsChunkPlugin çš„è®¾è®¡æ€è·¯æ˜¯ä»€ä¹ˆï¼Œç›®å‰çš„ SplitChunksPlugin åœ¨åŸæ¥çš„æ€è·¯ä¸Šæœ‰ä»€ä¹ˆæ”¹è¿›ã€‚å› æ­¤å…ˆçœ‹çœ‹ CommonsChunkPlugin çš„è®¾è®¡æ€è·¯ CommonsChunkPlugin çš„è®¾è®¡æ€è·¯åŸæœ¬çš„ CommonsChunkPlugin çš„æ€è·¯ä¸ºï¼š Create this chunk and move all modules matching minChunks into the new chunk å³ï¼š æ»¡è¶³ minChunks çš„å¼•ç”¨æ¬¡æ•°æ—¶ï¼Œéƒ½ä¼šå°†å¯¹åº”çš„æ¨¡å—æŠ½ç¦»å¦‚ä¸€ä¸ªæ–°çš„ chunk æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºæ‰€æœ‰çš„ä¸šåŠ¡æ–‡ä»¶çš„çˆ¶çº§ã€‚ è€Œè¿™ç§è®¾è®¡æ€è·¯å¸¦æ¥äº†ä¼šé€ æˆæ¨¡å—æ‰“åŒ…å†—ä½™ã€‚æ€»çš„æ¥è¯´ä¼šé€ æˆè¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼š äº§å‡ºçš„ chunk åœ¨å¼•å…¥æ—¶ï¼Œä¼šåŒ…å«é‡å¤çš„ä»£ç ï¼› æ— æ³•ä¼˜åŒ–å¼‚æ­¥ chunkï¼› é«˜ä¼˜çš„ chunk äº§å‡ºéœ€è¦çš„ minchunks é…ç½®æ¯”è¾ƒå¤æ‚ã€‚ è®©æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸‹é¢ä¸¤ç§æƒ…å†µã€‚ äº§ç”Ÿå¤šä½™æ¨¡å—å‡å¦‚æˆ‘ä»¬çš„æ–‡ä»¶æ˜¯è¿™ä¹ˆé…ç½®çš„ï¼š 12345minChunks: 2entryA: vuex vue AcomponententryB: vue axios BComponententryC: vue vuex axios CComponent é‚£ä¹ˆäº§å‡ºçš„æ–‡ä»¶ä¸ºï¼š 12vendor-chunk: vuex vue axioschunkA~chunkC: only the Component å¸¦æ¥çš„é—®é¢˜ï¼šentryB å¹¶æ²¡æœ‰ä½¿ç”¨ vuexï¼ŒentryA å¹¶æ²¡æœ‰ä½¿ç”¨ axios ï¼Œä½†æ˜¯ä»äº§å‡ºçš„æ–‡ä»¶ä¸Šæ¥çœ‹ï¼ŒentryA ä¸ entryB éƒ½å¼•å…¥äº†éƒ¨åˆ†â€œè„â€æ¨¡å—ï¼Œè¿™å¹¶ä¸å¤ªå¥½ã€‚ å¼‚æ­¥æ”¯æŒå·®é™¤æ­¤ä¹‹å¤–ï¼ŒCommonsChunkPlugin å¯¹äºå¼‚æ­¥çš„æ¨¡å—ä¸æ˜¯å¾ˆå‹å¥½ã€‚ä¾‹å¦‚ï¼š 12345minChunks: 2entryA: vuex vue AcomponentasyncB: vue axios BComponententryC: vue vuex axios CComponent äº§å‡ºçš„ chunk ä¸ºï¼š 1234vendor-chunkï¼švue vuexchunkA: only the componentsasyncB: vue axios someComponentschunkC: axios someComponents å¸¦æ¥çš„é—®é¢˜ï¼šå¼‚æ­¥å¼•å…¥ asyncB ä¹‹åä¼šå¼•å…¥è¿‡å¤šçš„ moduleã€‚ SplitChunksPlugin çš„è®¾è®¡æ€è·¯SplitChunksPlugin ä¼˜åŒ–äº† webpack çš„æ‰“åŒ…ç­–ç•¥ï¼Œä½¿ç”¨è‡ªåŠ¨é‡å¤ç®—æ³•ï¼Œä¼šè‡ªåŠ¨è®¡ç®—å‡ºå„é¡µé¢å…¬å…±çš„åŒ…å¼•ç”¨ä»¥åŠéƒ¨åˆ†é¡µé¢å…¬å…±çš„åŒ…å¼•ç”¨ï¼Œå½“ç„¶ï¼Œå¯¹äºé‚£äº›éƒ¨åˆ†å…±æœ‰ä½†æ˜¯é˜ˆå€¼è¿‡å°çš„æ–‡ä»¶å…¶ä¸ä¼šåˆ›å»ºå•ç‹¬çš„è¾“å‡ºæ–‡ä»¶ï¼Œå› ä¸ºå…¶å¤§å°ä¸å€¼å¾—å»æ–°å¼€ä¸€ä¸ªè¯·æ±‚ã€‚ï¼ˆç¼“å­˜ç­–ç•¥é…ç½®åœ¨ cacheGroup ä¸­ï¼‰ æ³¨ï¼šå‡å°‘ maxInitial/AsyncRequest ä¼šåŠ å¤§ module çš„å†—ä½™ï¼Œä½†æ˜¯ä¼šè¿›ä¸€æ­¥çš„å‡å°‘è¯·æ±‚ã€‚ SplitChunksPlugin é»˜è®¤çš„åˆ†åŒ…ç­–ç•¥åŸºäºä»¥ä¸‹ 4 ä¸ªæ¡ä»¶ï¼š æ–°ä»£ç å—å¯ä»¥è¢«å…±äº«å¼•ç”¨ï¼Œæˆ–è¿™äº›æ¨¡å—éƒ½æ˜¯æ¥è‡ª node_modules; æ–°äº§å‡ºçš„ vendor-chunk çš„å¤§å°å¾—å¤§äº 30kb; æŒ‰éœ€åŠ è½½çš„ä»£ç å—ï¼ˆvendor-chunkï¼‰å¹¶è¡Œè¯·æ±‚çš„æ•°é‡ä¸å¤šäº 5 æ¬¡ï¼› åˆå§‹åŠ è½½çš„ä»£ç å—ï¼Œå¹¶è¡Œè¯·æ±‚çš„æ•°é‡ä¸å¤šäº 3 æ¬¡ã€‚ SplitChunksPlugin é…åˆä½¿ç”¨ RuntimeChunk å¯¹è¿è¡Œæ—¶çš„ hash å˜åŠ¨åšä¼˜åŒ–ï¼ˆç›¸å½“äº CommonsChunkPlugin çš„ä¸¤æ¬¡ä½¿ç”¨ï¼‰ DllPluginDLLPlugin è¿™ä¸ªæ’ä»¶æ˜¯åœ¨ä¸€ä¸ªé¢å¤–ç‹¬ç«‹çš„ webpack è®¾ç½®ä¸­åˆ›å»ºä¸€ä¸ªåªæœ‰ dll çš„ bundleï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº† webpack.config.jsï¼Œé¡¹ç›®ä¸­è¿˜ä¼šæ–°å»ºä¸€ä¸ª webpack.dll.config.js æ–‡ä»¶æ¥é…ç½® dll çš„æ‰“åŒ…ã€‚webpack.dll.config.js ä½œç”¨æ˜¯æŠŠæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ª bundle çš„ dll æ–‡ä»¶é‡Œé¢ï¼Œè¿˜ä¼šç”Ÿæˆä¸€ä¸ªåä¸º manifest.json æ–‡ä»¶ã€‚ è¯¥ manifest.json çš„ä½œç”¨æ˜¯ç”¨æ¥è®© DllReferencePlugin æ˜ å°„åˆ°ç›¸å…³çš„ä¾èµ–ä¸Šå»çš„ã€‚ï¼ˆå¯ç±»æ¯” CommonsChunkPlugin çš„ä¸¤æ¬¡æ‰“åŒ…æˆ–è€… RuntimeChunk çš„è¿è¡ŒåŒ…é…ç½®ï¼‰ DllPlugin çš„è®¾è®¡æ€è·¯SplitChunksPlugin è™½ç„¶ä¹Ÿæ˜¯å°†å…¬å…±æ¨¡å—æŠ½ç¦»ï¼Œä½†æ˜¯å…¶æ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™è¿˜æ˜¯ä¼šå»å¤„ç†ä¸€äº›ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œåªæ˜¯å®ƒèƒ½æŠŠç¬¬ä¸‰æ–¹åº“æ–‡ä»¶å’Œæˆ‘ä»¬çš„ä»£ç åˆ†å¼€æ‰ï¼Œç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„ js æ–‡ä»¶ã€‚ä½†æ˜¯å®ƒè¿˜æ˜¯ä¸èƒ½æé«˜æ‰“åŒ…çš„é€Ÿåº¦ã€‚ DLLPlugin å®ƒåˆ™æ˜¯æå‰å°†å…¬å…±çš„åŒ…æ„å»ºå‡ºæ¥ï¼Œä½¿å¾—åœ¨ build æ—¶è¿‡æ»¤æ‰è¿™äº›æ„å»ºè¿‡çš„åŒ…ï¼Œä½¿å¾—åœ¨æ­£æ˜¯æ„å»ºæ—¶çš„é€Ÿåº¦ç¼©çŸ­ã€‚æ‰€ä»¥å…¶ç›¸å¯¹æ¥è¯´æ‰“åŒ…é€Ÿåº¦ä¼šæ›´å¿«ã€‚ æ€»ç»“æ€»çš„æ¥è¯´ï¼Œä¸¤ç§æ‰“åŒ…çš„æ–¹å¼å„æœ‰ä¼˜åŠ£ã€‚ å¦‚æœå¼€å‘çš„é¡¹ç›®æ˜¯é”å®šç‰ˆæœ¬çš„ï¼ŒåŒæ—¶æƒ³è¦æå‡æ„å»ºé€Ÿåº¦ï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨ DllPlugin çš„åˆ†åŒ…ç­–ç•¥ï¼Œæå‰å°†ä¸å˜çš„ä¸€äº›ä¾èµ–æ„å»ºå¥½ï¼Œæ¯æ¬¡æ„å»ºæ—¶ä»…æ„å»ºä¸šåŠ¡ä»£ç å³å¯ã€‚ å¦‚æœé¡¹ç›®ä¼šå‡çº§ï¼ŒåŒæ—¶æƒ³è¦å‡å°‘åæœŸå¯¹äºæ‰“åŒ…æ­¥éª¤çš„æ“ä½œï¼ˆæ„å»ºæ—¶é—´ä¸è€ƒè™‘ï¼‰ï¼Œé‚£ä¹ˆä¼˜å…ˆä½¿ç”¨ SplitChunksPlugin æ¥é…ç½®åˆ†åŒ…ç­–ç•¥ï¼Œæ¯•ç«Ÿ DllPlugin å¾—èµ°ä¸¤æ­¥ã€‚ å¯¹äºä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µï¼Œç›®å‰æŸ¥é˜…è¿‡ä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„ä¾‹å­ï¼ˆè²Œä¼¼ä¼šæ‰“åŒ…é‡å¤ï¼Œæœ‰å†²çªï¼‰ä¸è¿‡ç½‘ä¸Šçš„ç»“è®ºæ¯”è¾ƒé™ˆæ—§ï¼Œç¬”è€…æš‚æœªåšæµ‹è¯•ï¼Œä¹‹åç©ºé—²ä¸‹æ¥å†åšè¡¥å……ã€‚ å‚è€ƒæ–‡æ¡£ webpack4ï¼šè¿å¥ä¸­çš„è¿›åŒ– webpack çš„è‡ªåŠ¨é‡å¤æ•°æ®åˆ é™¤ç®—æ³•ç¤ºä¾‹ webpack4 tree-shaking ä¸ side-effect webpack ã€manifest ã€runtime ã€ç¼“å­˜ä¸ CommonsChunkPlugin vue-cli ä¸­çš„ CommonsChunkPlugin éƒ½åšäº†äº›å•¥ Webpack4 ä¹‹ SplitChunksPlugin è§„åˆ™ æ·±å…¥æµ…å‡ºçš„ webpack æ„å»ºå·¥å…·â€”DllPlugin DllReferencePlugin æé«˜æ„å»ºé€Ÿåº¦(ä¸ƒ) webpack4 ä¸­ï¼Œ splitchunks å’Œ dllplugin å¯ä»¥å¹¶å­˜å—ï¼Ÿ","categories":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/categories/Webpack/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"}]},{"title":"æ·±å…¥äº†è§£ this","slug":"æ·±å…¥äº†è§£-this","date":"2019-05-19T13:33:54.000Z","updated":"2022-07-26T13:14:01.978Z","comments":true,"path":"2019/05/19/æ·±å…¥äº†è§£-this/","link":"","permalink":"https://monocy.gitee.io/2019/05/19/æ·±å…¥äº†è§£-this/","excerpt":"å‰è¨€åœ¨ JavaScript å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ä½œç”¨åŸŸä¸é—­åŒ…ä¹‹å¤–ï¼Œå›°æ‰°æˆ‘ä»¬çš„éš¾ç‚¹è¿˜æœ‰ thisï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯å‰ç«¯ JS å­¦ä¹ çš„å™©æ¢¦ã€‚å®é™…ä¸Š this å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤æ‚ï¼Œåªæ˜¯å¼€å‘è€…å¾€å¾€ä¼šå°†ç†è§£è¿‡ç¨‹å¤æ‚åŒ–ï¼Œåœ¨ç¼ºä¹æ¸…æ¥šè®¤è¯†çš„æƒ…å†µä¸‹ï¼Œthis å¯¹æˆ‘ä»¬æ¥è¯´å°±å®Œå…¨æ˜¯ä¸€ç§é­”æ³•äº†ã€‚è€Œæ­¤ç¯‡å°±æ¥æ­å¼€ this ç¥ç§˜çš„é¢çº±ã€‚ æ³¨ï¼šæ­¤ç¯‡ä¸ºå­¦ä¹ ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JSã€‹æ—¶çš„å¿ƒå¾—æ€»ç»“","text":"å‰è¨€åœ¨ JavaScript å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ä½œç”¨åŸŸä¸é—­åŒ…ä¹‹å¤–ï¼Œå›°æ‰°æˆ‘ä»¬çš„éš¾ç‚¹è¿˜æœ‰ thisï¼Œç”šè‡³å¯ä»¥è¯´æ˜¯å‰ç«¯ JS å­¦ä¹ çš„å™©æ¢¦ã€‚å®é™…ä¸Š this å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¤æ‚ï¼Œåªæ˜¯å¼€å‘è€…å¾€å¾€ä¼šå°†ç†è§£è¿‡ç¨‹å¤æ‚åŒ–ï¼Œåœ¨ç¼ºä¹æ¸…æ¥šè®¤è¯†çš„æƒ…å†µä¸‹ï¼Œthis å¯¹æˆ‘ä»¬æ¥è¯´å°±å®Œå…¨æ˜¯ä¸€ç§é­”æ³•äº†ã€‚è€Œæ­¤ç¯‡å°±æ¥æ­å¼€ this ç¥ç§˜çš„é¢çº±ã€‚ æ³¨ï¼šæ­¤ç¯‡ä¸ºå­¦ä¹ ã€Šä½ æ‰€ä¸çŸ¥é“çš„ JSã€‹æ—¶çš„å¿ƒå¾—æ€»ç»“ ç¤ºä¾‹åˆ†æå·¥ä½œä¸­æˆ‘ä»¬å¸¸å¸¸é‡åˆ° this æŒ‡å‘é—®é¢˜ï¼Œçœ‹ä¸ªç®€å•çš„ä»£ç ï¼š 12345678910111213141516171819202122function foo(num) &#123; console.log(`foo: $&#123;num&#125;`); this.count++;&#125;foo.count = 0;// case 1:for (var i = 0; i &lt; 10; i++) &#123; if (i &gt; 5) &#123; foo(i); &#125;&#125;console.log(foo.count); // 0// case 2:for (var i = 0; i &lt; 10; i++) &#123; if (i &gt; 5) &#123; foo.call(foo, i); &#125;&#125;console.log(foo.count); // 4 äº†è§£æ¯”è¾ƒæ·±å…¥çš„ä¼šä¸€çœ¼çœ‹å‡ºä¸ºä»€ä¹ˆåŠ ä¸€ä¸ª call å°±æ²¡é—®é¢˜ï¼ˆå¼ºç»‘å®šæŒ‡å‘ï¼‰ï¼Œäº†è§£çš„ä¸€èˆ¬çš„å°±ä¼šé€šè¿‡å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡æ¥ç¼“å­˜å¯¹åº”çš„å€¼æ¥ç»•è¿‡ thisï¼Œè™½ç„¶ç”¨è¿™ç§å…¶å®ƒå˜é‡æ›¿ä»£ this èƒ½å¤Ÿç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·æ°¸è¿œä¹Ÿäº†è§£ä¸åˆ° this çš„çœŸè°›ã€‚å›è¿‡å¤´æ¥æ€è€ƒï¼Œä¸ºä»€ä¹ˆå¿…é¡»å¼ºç»‘å®šæ‰èƒ½æ­£ç¡®æŒ‡å‘ï¼Ÿå¦‚æœä¸è¿›è¡Œå¼ºç»‘å®šï¼Œthis é»˜è®¤åˆæŒ‡å‘ä»€ä¹ˆå‘¢ï¼Ÿè¦æ·±å…¥äº†è§£åˆ° this çš„åŸç†ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—è®¤è¯†åˆ°è‡ªå·±çš„ç†è§£è¯¯åŒºã€‚ ç†è§£è¯¯åŒºå­¦ä¹  this æ—¶å¸¸è§çš„é”™è¯¯ç†è§£å¤§è‡´æœ‰ä¸¤ç§ï¼š this æŒ‡å‘å‡½æ•°è‡ªèº« this æŒ‡å‘å‡½æ•°ä½œç”¨åŸŸ å¯èƒ½å› ä¸ºæˆ‘ä»¬æœ€æ—©æ¥è§¦çš„è¯­è¨€æ˜¯ C è¯­è¨€ï¼Œè€Œ C è¯­è¨€çš„ç¼–è¯‘é¡ºåºå¤§è‡´ä¸ºï¼š è¯æ³•åˆ†æ è¯­æ³•åˆ†æ è¯­ä¹‰åˆ†æ ä¸­é—´ä»£ç ç”Ÿæˆ ä»£ç ä¼˜åŒ–ï¼ˆå¯ä¸è¦ï¼‰ ç›®çš„ä»£ç ç”Ÿæˆ å› æ­¤åœ¨å­¦ä¹  JS æ˜¯ä¼šè‡ªç„¶è€Œç„¶çš„å¥—ç”¨æ­¤æ–¹æ³•æ¥ç†è§£å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ JS ä¹Ÿèµ°è¿™ä¹ˆä¸€å¥—æµç¨‹æ¥å¤„ç†ï¼Œé‚£ä¹ˆç½‘é¡µçš„åŠ è½½å¾—å¤šæ…¢å•Šã€‚å› æ­¤åœ¨ç¼–è¯‘è¿™éƒ¨åˆ†æˆ‘ä»¬å¾—æŠ›å¼ƒ C è¯­è¨€çš„é‚£ä¸€å¥—é€»è¾‘ï¼Œè¿™æ ·æ‰æ–¹ä¾¿ç†è§£ this çš„æŒ‡å‘ã€‚ ä¸ C è¯­è¨€ç¼–è¯‘ä¸åŒï¼ŒJS çš„ç¼–è¯‘ä¸ºè¿è¡Œæ—¶ç¼–è¯‘ï¼Œå…¶ä¼šå…ˆä»å¤´åˆ°å°¾â€œè¿‡â€ä¸€éå¾…è§£æçš„æ–‡ä»¶ï¼Œç²—ç•¥çš„æå–å…¶ä¸­çš„å˜é‡å£°æ˜ï¼Œç„¶åé€è¡Œè§£æç¼–è¯‘ï¼ˆè§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šå˜é‡æå‡ï¼‰ï¼Œå› æ­¤ this çš„çŠ¶æ€å°±å¹¶éé‚£ç§èƒ½å¤Ÿç”Ÿæˆä¸­é—´ä»£ç çš„å­˜å‚¨æ€ï¼Œè€Œæ˜¯åŠ¨æ€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œthis æ‰ä¼šçœŸæ­£çš„è¿›è¡Œç»‘å®šï¼Œè€Œå¹¶ä¸æ˜¯åœ¨æœ€å¼€å§‹ï¼ˆéå† JS è¯­æ³•ï¼‰æ—¶ç»‘å®šï¼Œæ¯•ç«Ÿæ²¡æœ‰å¬è¯´è¿‡ä»€ä¹ˆâ€œ this æå‡â€å¯¹å§ï¼Ÿ ç®€è€Œè¨€ä¹‹ï¼Œå› ä¸º this æ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰è¿›è¡Œç»‘å®šï¼Œæ‰€ä»¥ this å¹¶ä¸æ˜¯æŒ‡å‘å…¶æ‰€åœ¨çš„å‡½æ•°è‡ªèº«ï¼Œä¹Ÿä¸æŒ‡å‘å‡½æ•°æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå®ƒçš„æŒ‡å‘å®Œå…¨å–å†³äºå‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨çš„ã€‚ this å…¨é¢è§£æè°ƒç”¨ä½ç½®å‰é¢æœ‰æåˆ° this æŒ‡å‘å–å†³äºå‡½æ•°æ˜¯åœ¨å“ªé‡Œè°ƒç”¨çš„ï¼Œå³æ‰¾åˆ°å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œç›¸å½“äºæˆ‘ä»¬å°±å®šä½äº† thisã€‚è€Œå¯»æ‰¾å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œé¦–å…ˆå¾—æ‰¾åˆ°å‡½æ•°æ‰€åœ¨çš„æ ˆçš„ä½ç½®ï¼Œè¯¥æ ˆæ‰€åœ¨çš„ç¯å¢ƒå³ this çš„æŒ‡å‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼š 123456789101112131415function foo() &#123; // å½“å‰æ‰€åœ¨çš„æ ˆä¸º foo // å› æ­¤ï¼Œå½“å‰è°ƒç”¨ä½ç½®æ˜¯ å…¨å±€ä½œç”¨åŸŸï¼ˆthis = windowï¼‰ console.log('foo'); bar(); // bar è°ƒç”¨ä½ç½®&#125;function bar() &#123; // å½“å‰æ‰€åœ¨çš„æ ˆä¸º foo -&gt; bar // å› æ­¤å½“å‰çš„è°ƒç”¨ä½ç½®æ˜¯åœ¨ foo ä¸­ (this = this(foo) = window) console.log('bar');&#125;foo(); // foo è°ƒç”¨çš„ä½ç½® æ—¢ç„¶æˆ‘ä»¬å·²ç»æ‰¾åˆ°äº† this è°ƒç”¨ä½ç½®ï¼Œé‚£ä¹ˆ this çš„å€¼æ­¤æ—¶åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒæ‰€ç»‘å®šçš„å†…å®¹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Œè€Œè¿™å°±æ¶‰åŠåˆ° this çš„ç»‘å®šè§„åˆ™ã€‚ ç»‘å®šè§„åˆ™æ‰¾åˆ° this çš„è°ƒç”¨ä½ç½®ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹å››æ¡è§„åˆ™æ¥åˆ¤æ–­ this ç»‘å®šçš„å¯¹è±¡ã€‚ å¦‚æœç”± new è°ƒç”¨ï¼Œé‚£ä¹ˆ this ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ å¦‚æœç”± call æˆ–è€… applayï¼ˆæˆ–è€… bindï¼‰è°ƒç”¨ï¼Œé‚£ä¹ˆç»‘å®šåˆ°å…¶æŒ‡å®šçš„å¯¹è±¡ã€‚ å¦‚æœç”±ä¸Šä¸‹æ–‡å¯¹è±¡è°ƒç”¨ï¼Œåˆ™ç»‘å®šåˆ°è¯¥ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ é»˜è®¤ï¼šä¸¥æ ¼æ¨¡å¼ä¸‹ç»‘å®šè‡³ undefinedï¼Œå¦åˆ™ç»‘å®šè‡³ windowã€‚ æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬è‡ªä¸‹è€Œä¸Šï¼Œç”±é¢åˆ°ç‚¹çš„äº†è§£è¿™äº›ç»‘å®šè§„åˆ™ä»¥åŠå…¶æ’åºæ¥ç”±ã€‚ æ³¨ï¼šä¸Šä¸‹æ–‡å¯¹è±¡ç»‘å®šå³æ‰€è°“çš„éšå¼ç»‘å®š é»˜è®¤ç»‘å®šä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼š 1234567function foo() &#123; console.log(this.a);&#125;var a = 2;foo(); // 2 è°ƒç”¨ this çš„è°ƒç”¨æ ˆåœ¨ foo ä¸­ï¼Œå½“å‰æ‰€å¤„çš„ä½ç½®æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œå› æ­¤ this æŒ‡å‘å…¨å±€çš„ windowã€‚ å›å¤´çœ‹å…ˆå‰è°ƒç”¨ä½ç½®æ—¶åˆ—ä¸¾çš„ä¾‹å­ï¼Œé€šè¿‡é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œå†åŠ ä¸Šå¼•ç”¨ä¼ é€’ï¼Œå› æ­¤å„éƒ¨åˆ†çš„ this æŒ‡å‘éƒ½æŒ‡å‘å…¨å±€çš„ window å¯¹è±¡ã€‚ éšå¼ç»‘å®šéšå¼ç»‘å®šï¼Œå³è§„åˆ™çš„è°ƒç”¨ä½ç½®æ˜¯å¦æ‹¥æœ‰å…¶ä¸Šä¸‹æ–‡ï¼ˆé»˜è®¤ä¸ºå…¨å±€çš„ window å¯¹è±¡ï¼‰ã€‚ä¾‹å¦‚ï¼š 12345678910function foo() &#123; console.log(this.name);&#125;const obj = &#123; name: 'test', foo: foo,&#125;;obj.foo(); // test åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¨å±€ç¯å¢ƒçš„ this.name === window.nameï¼Œæ­¤æ—¶æ‰€å¤„çš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¸ºå…¨å±€ç¯å¢ƒï¼Œè€Œæ­¤ä¾‹çš„ foo è°ƒç”¨æ˜¯é€šè¿‡ obj.foo æ¥è°ƒç”¨çš„ï¼Œthis çš„è°ƒç”¨ä½ç½®ä¸º fooï¼Œä½†æ˜¯ foo çš„å¼•ç”¨è½è„šç‚¹æ­¤æ—¶ä¸æ˜¯ window äº†ï¼Œè€Œæ˜¯ obj äº†ï¼Œå› æ­¤é€šè¿‡éšå¼ç»‘å®šï¼Œthis æ­¤æ—¶ä¹‹ä¹¡çš„æ˜¯ objï¼Œå³æ­¤æ—¶çš„ this.name === obj.nameã€‚ æ­¤å¤„éœ€æ³¨æ„çš„ä¸€ç‚¹æ˜¯ obj.foo çš„ this ç»‘å®šçš„æ˜¯ objï¼ˆéšå£«ç»‘å®šï¼‰ï¼Œè¿™æ˜¯å› ä¸ºï¼Œå¯¹è±¡å±æ€§çš„å¼•ç”¨é“¾åªæœ‰æœ€é¡¶å±‚ä¼šå½±å“è°ƒç”¨ä½ç½®ï¼ˆæˆ–è€…æ˜¯è¯´æœ€åä¸€å±‚ï¼‰ï¼Œä¾‹å¦‚ï¼š 123456789101112131415function foo() &#123; console.log(this.name);&#125;const obj1 = &#123; name: 'test1', obj2: obj2,&#125;;const obj2 = &#123; name: 'test2', foo: foo,&#125;;obj1.obj2.foo(); // test2 è€Œåœ¨éšå¼è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œæœ€å®¹æ˜“å‡ºç°çš„é—®é¢˜æ˜¯éšå¼ä¸¢å¤±ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516171819202122function foo() &#123; console.log(this.name);&#125;const obj = &#123; name: 'test', getName: foo,&#125;;// Case 1: è§£æ„const &#123; getName &#125; = obj;getName(); // undefined// Case 2: ç›´æ¥å–å¼•ç”¨ï¼ˆç±»æ¯”è§£æ„ï¼‰const linkFunc = obj.getName;linkFunc(); // undefined// Case 3: å¼•ç”¨ä¼ é€’ï¼ˆç±»æ¯” setTimeout)function linkPassFunc(fn) &#123; fn();&#125;linkPassFunc(obj.getName); æ³¨ï¼šå‚æ•°ä¼ é€’å°±æ˜¯ä¸€ç§éšå¼ä¼ é€’ï¼Œå…¶å–å¾—æ˜¯å¯¹è±¡çš„å¼•ç”¨ æ˜¾ç¤ºç»‘å®šJS æä¾›ä¸€ç§æ˜¾ç¤ºæ›´æ”¹ this ç»‘å®šçš„å‡½æ•°ï¼šapplyã€callï¼Œä¾‹å¦‚ï¼š 123456789function foo() &#123; console.log(this.name);&#125;const obj = &#123; name: 'test',&#125;;foo.call(obj); // test é€šè¿‡ foo.call å¯ä»¥æ˜¾ç¤ºçš„å°† this ç»‘å®šåœ¨ obj ä¸Šï¼Œæ˜¾ç¤ºç»‘å®šæ— æ³•è§£å†³éšå¼ç»‘å®šä¸­çš„å¼•ç”¨ä¼ é€’é—®é¢˜ï¼ˆä¸Šé¢çš„ Case 3ï¼‰ï¼Œè€Œé€šè¿‡ä¸€ç§å˜å½¢â€œç¡¬ç»‘å®šâ€å¯ä»¥è§£å†³ã€‚ ç¡¬ç»‘å®šä¸æ˜¾ç¤ºç»‘å®šä¸åŒçš„æ˜¯ï¼Œç¡¬ç»‘å®šä¼šæå‰å°† this çš„æŒ‡å‘åœ¨è¿‡æ¸¡å‡½æ•°å†…æå‰ç»‘å®šä¸Šï¼Œè¿™æ ·å½“ä¼ å…¥è¿™ä¸ªè¿‡æ¸¡å‡½æ•°æ—¶ï¼Œthis å°±ä¸ä¼šè¢«éšå¼ä¿®æ”¹äº†ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516function foo() &#123; console.log(this.name);&#125;const obj = &#123; name: 'test',&#125;;// è¿‡æ¸¡å‡½æ•°ï¼Œå†…éƒ¨æå‰æ˜¾ç¤ºç»‘å®š thisfunction bar() &#123; foo.call(obj);&#125;bar(); // testsetTimeout(bar, 100); // test å…¶å®è¿™ç§æ–¹å¼ç‰¹åˆ«å¸¸è§ï¼ˆå¦‚å¤§å¤šæ•°æºç ä¸­ï¼‰ï¼Œå°†ä¸Šä¾‹ç¨å¾®å˜åŒ–ä¸€ä¸‹ï¼Œå¦‚ï¼š 123456789101112131415161718function foo(otherContent) &#123; return `$&#123;this.prefix&#125;-$&#123;otherContent&#125;`;&#125;function bar(fn, obj) &#123; // æ­¤å¤„çš„ arguments ä¸ºæ­¤æ— åå‡½æ•°çš„ argumentsï¼Œç¡¬ç»‘å®šå‡½æ•° this æŒ‡å‘ return function () &#123; return fn.apply(obj, arguments); &#125;;&#125;const obj = &#123; prefix: 'my',&#125;;const prefixFunc = bar(foo, obj);const prefixStr = prefixFunc('age'); ç»•æ˜¯ç»•äº†ç‚¹ï¼Œæ ¹æ®å‡½æ•°å¼ç¼–ç¨‹çš„å¸¦å…¥æ€æƒ³ï¼Œå…¶å®å°±ç›¸å½“äº 1const prefixStr = foo.apply(obj, ['age']); æ³¨ï¼š ç¡¬ç»‘å®šä¼šå¤§å¤§é™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œä½¿ç”¨ç¡¬ç»‘å®šåå°±æ— æ³•ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾ç¤ºç»‘å®šæ¥æ”¹å˜ this äº†ã€‚ new ç»‘å®šJavaScript ä¸­æ‰€è°“çš„â€œæ„é€ å‡½æ•°â€å…¶å®ä¸å…¶å®ƒè¯­è¨€çš„ç±»çš„æ„é€ å‡½æ•°ä¸åŒï¼Œå®ƒå¹¶ä¸å±äºæŸä¸€ä¸ªç±»ï¼Œä¹Ÿä¸ä¼šå»å®ä¾‹åŒ–ä¸€ä¸ªç±»ã€‚åœ¨ JavaScript ä¸­ï¼Œæ„é€ å‡½æ•°åªæ˜¯ä¸€äº›ä½¿ç”¨ new æ“ä½œç¬¦æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š åˆ›å»ºï¼ˆæˆ–è€…è¯´æ„é€ ï¼‰ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ [[åŸå‹]] è¿æ¥ è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„ this å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶å®ƒå¯¹è±¡ï¼Œé‚£ä¹ˆ new è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡ é¢è¯•é¢˜ä¸­å¯èƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ä¸ªé¢˜ï¼š 12345678910111213function foo1(a) &#123; this.a = a;&#125;function foo2(a) &#123; this.a = a; return &#123; a: 2 &#125;;&#125;const f1 = new foo1(1);const f2 = new foo2(1);console.log(f1.a === f2.a); çŸ¥é“è¿™ä¸ª new è¿”å›å¯¹è±¡çš„â€œé­”æœ¯â€ä¹‹åï¼Œæˆ‘ä»¬å°±å¾ˆæ¸…æ¥šç­”æ¡ˆæ˜¯ false äº†ï¼Œå› ä¸º foo2 æœ‰è¿”å›å¯¹è±¡ã€‚è€Œ foo1 å› ä¸ºæ²¡æœ‰å‡½æ•°è¿”å›å€¼ï¼Œå› æ­¤ä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶å°† this ç»‘å®šè‡³è¯¥æ–°å¯¹è±¡ä¸Šã€‚ new æ˜¯æœ€åä¸€ç§å¯ä»¥å½±å“å‡½æ•°è°ƒç”¨æ—¶ this ç»‘å®šè¡Œä¸ºçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º new ç»‘å®šã€‚ æç¤ºï¼š f1.a ä¸º 1; f2.a ä¸º 2 ä¼˜å…ˆçº§ç°åœ¨è§„åˆ™æˆ‘ä»¬å·²ç»æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„å°±æ˜¯æ‰¾åˆ°å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œç„¶åè¯¥ä½¿ç”¨é‚£ç§è§„åˆ™å»åŒ¹é…ã€‚â€œé»˜è®¤ç»‘å®šâ€æ¯«æ— ç–‘é—®æ˜¯å››æ¡è§„åˆ™ä¸­ä¼˜å…ˆçº§æœ€ä½çš„ï¼Œé‚£ä¹ˆå¦å¤–ä¸‰æ¡è§„åˆ™çš„ä¼˜å…ˆçº§åˆè¯¥å¦‚ä½•æ’åºå‘¢ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬ä¸€ä¸€æ¥åˆ†æï½ å…ˆç»™å‡ºç»“è®ºï¼š new ç»‘å®š &gt; æ˜¾ç¤ºç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š éšå¼ç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼š 123456789101112131415161718192021function foo() &#123; console.log(this.a);&#125;const obj1 = &#123; a: 2, foo: foo,&#125;;const obj2 = &#123; a: 3, foo: foo,&#125;;// éšå¼ç»‘å®šobj1.foo(); // 2obj2.foo(); // 3// æ˜¾ç¤ºç»‘å®šå°è¯•æ›´æ”¹obj1.foo.call(obj2); // 3obj2.foo.call(obj1); // 2 é€šè¿‡å¯¹æ¯”å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾ç¤ºç»‘å®šä¼˜å…ˆçº§æ›´é«˜ã€‚é‚£ä¹ˆéšå¼ç»‘å®šå’Œ new ç»‘å®šçš„ä¼˜å…ˆçº§é¡ºåºå‘¢ï¼Ÿ éšå¼ç»‘å®šå’Œ new ç»‘å®š12345678910111213141516function foo(a) &#123; this.a = a;&#125;const obj1 = &#123; foo: foo,&#125;;// éšå¼ç»‘å®šä¸º obj1 ç»‘å®š a å±æ€§obj1.foo(2);console.log(obj1.a); // 2// new ç»‘å®šå°è¯•æ›´æ”¹è¿”å›å¯¹è±¡ä¸­çš„ this æŒ‡å‘ï¼ˆéšå¼åŸç†åº”è¯¥ this æŒ‡å‘é“¾å°¾çš„ obj1ï¼‰const bar = new obj1.foo(4);console.log(obj1.a); // 2console.log(bar.a); // 4 å¯ä»¥çœ‹åˆ° new ç»‘å®šæ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ï¼Œæ¥ä¸‹æ¥å°±åªå‰© new ç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šçš„ä¼˜å…ˆçº§äº†ã€‚ new ç»‘å®šå’Œæ˜¾ç¤ºç»‘å®šç”±äº new å’Œ call/apply æ— æ³•ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æ— æ³•é€šè¿‡ new foo.call(obj1) æ¥ç›´æ¥è¿›è¡Œæµ‹è¯•ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ç¡¬ç»‘å®šæ¥æµ‹è¯•å®ƒä»¬çš„ä¼˜å…ˆçº§ã€‚ä¸¾ä¸ªä¾‹å­ï¼š 123456789101112131415function foo(a) &#123; this.a = a;&#125;const obj1 = &#123;&#125;;// ä¸º foo æ˜¾ç¤ºç»‘å®š this ä¸º obj1const bar = foo.bind(obj1);bar(2);console.log(obj1.a); // 2// new å°è¯•ä¿®æ”¹è¿”å›å¯¹è±¡çš„ this æŒ‡å‘const baz = new bar(3);console.log(obj1.a); // 2console.log(baz.a); // 3 åœ¨ new ä¸­ä½¿ç”¨ç¡¬ç»‘å®šå‡½æ•°ï¼Œä¸»è¦ç›®çš„æ˜¯é¢„å…ˆè®¾ç½®å‡½æ•°çš„ä¸€äº›å‚æ•°ï¼Œè¿™æ ·åœ¨ä½¿ç”¨ new è¿›è¡Œåˆå§‹åŒ–æ—¶å°±å¯ä»¥åªä¼ å…¥å…¶ä½™çš„å‚æ•°ã€‚bind(â€¦)çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯å¯ä»¥æŠŠé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºç»‘å®š thisï¼‰ä¹‹å¤–çš„å…¶ä»–å‚æ•°éƒ½ä¼ é€’ç»™ä¸‹å±‚çš„å‡½æ•°ï¼ˆè¿™ç§æŠ€æœ¯ç§°ä¸ºâ€œéƒ¨åˆ†åº”ç”¨â€ï¼Œæ˜¯â€œæŸ¯é‡ŒåŒ–â€çš„ä¸€ç§ï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š 1234567891011function foo(p1, p2) &#123; this.val = p1 + p2;&#125;// ä¹‹æ‰€ä»¥ä½¿ç”¨ null æ˜¯å› ä¸ºåœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬å¹¶ä¸å…³å¿ƒç¡¬ç»‘å®šçš„ this æ˜¯ä»€ä¹ˆ// åæ­£ä½¿ç”¨ new æ—¶ this ä¼šè¢«ä¿®æ”¹const bar = foo.bind(null, 'p1');const baz = new bar('p2');baz.val; // p1p2 æ³¨æ„ï¼Œè¿™ç§é€šè¿‡ null çš„ç»‘å®šå…¶å®ä¼šä½¿ç”¨â€œé»˜è®¤ç»‘å®šâ€è§„åˆ™ï¼Œå°† this ç»‘å®šè‡³å…¨å±€å¯¹è±¡ï¼Œè¿™åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ä¼šå­˜åœ¨é£é™©ï¼Œæ›´ä¸ºç¨³å¦¥çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„ç©ºå¯¹è±¡ï¼Œå¦‚ï¼š let Ã¸ = object.create(null)ï¼Œç„¶åå°†æ­¤ Ã¸ ä½œä¸ºç»‘å®šçš„ä½œç”¨åŸŸï¼ˆconst bar = foo.bind(Ã¸, â€˜p1â€™);ï¼‰ ç»‘å®šä¾‹å¤–è¢«å¿½ç•¥çš„ thiscallã€applyã€bind æ¥å—ç»‘å®šçš„å¯¹è±¡ä¸º undefinedã€null æ—¶ï¼Œåœ¨è°ƒç”¨æ—¶ä¼šè¢«å¿½ç•¥ï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œä¸¥æ ¼æ¥è¯´æœ€å¥½ä½¿ç”¨ä¸€ä¸ªçœŸæ­£çš„ Ã¸ å…ƒç´ æ¥ä½œä¸ºç»‘å®šå¯¹è±¡ï¼ˆå‰é¢å·²ç»æåˆ°ï¼‰ã€‚ 12345678function foo() &#123; console.log(this.a);&#125;var a = 2;// å…¶å®ç»‘å®šçš„è¿˜æ˜¯ windowï¼Œå¯èƒ½é€ æˆå…¨å±€æ±¡æŸ“foo.call(null); // 2 é—´æ¥å¼•ç”¨è¿™ä¸ªå°±ä¸éš¾è¯´æ˜äº†ï¼Œé—´æ¥å¼•ç”¨ä¼šä½¿å¾—éšå¼ç»‘å®šæœ€é¡¶ç«¯çš„å¯¹è±¡æ”¹å˜ï¼Œé€ æˆ this çš„æŒ‡å‘éæˆ‘ä»¬æ‰€æƒ³è±¡çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š 123456789101112const test = &#123; a: 2, foo: function () &#123; console.log(this.a); &#125;,&#125;;var a = 3;// test å·²ç»ä¸æ˜¯ç»‘å®šé¡¶ç«¯çš„å¯¹è±¡ï¼Œå˜æˆäº† window äº†const func = test.foo;func(); // 3 ç®­å¤´å‡½æ•°ES6 ä¸­çš„ç®­å¤´å‡½æ•°å¹¶ä¸ä¼šä½¿ç”¨å››æ¡æ ‡å‡†çš„ç»‘å®šè§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ä½œç”¨åŸŸæ¥å†³å®š thisã€‚ä¾‹å¦‚ï¼š 123456function foo() &#123; setTimeout(() =&gt; &#123; // æ­¤å¤„çš„ this åœ¨è¯æ³•ä¸Šç»§æ‰¿è‡ª foo console.log(this.a); &#125;);&#125; å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ç§ ES6 çš„â€œèƒ–ç®­å¤´â€æ—¶ï¼Œå°±å¯ä»¥æŠ›å¼ƒ ES5 ä¸­çš„ var self = this çš„â€œè¯æ³•ä½œç”¨åŸŸâ€å¼çš„ä»£ç äº†ã€‚","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"This","slug":"This","permalink":"https://monocy.gitee.io/tags/This/"}]},{"title":"vue-cli3 çš„å¿«é€Ÿæ’ä»¶å¼€å‘","slug":"vue-cli3-çš„å¿«é€Ÿæ’ä»¶å¼€å‘","date":"2019-05-09T08:20:08.000Z","updated":"2022-07-26T13:04:47.334Z","comments":true,"path":"2019/05/09/vue-cli3-çš„å¿«é€Ÿæ’ä»¶å¼€å‘/","link":"","permalink":"https://monocy.gitee.io/2019/05/09/vue-cli3-çš„å¿«é€Ÿæ’ä»¶å¼€å‘/","excerpt":"å‰è¨€ä¸ä¹…å‰ç»„å†…æœ‰å¤§ä½¬å‘å¸ƒäº†ä¸€ä¸ª vue-cli3 çš„ dll åŒ…ï¼Œä½œä¸ºä¸€ä¸ªåœ¨ vue é¡¹ç›®å†…æ‘¸çˆ¬æ»šæ‰“çš„èŒæ–°ï¼Œæ˜¯æ—¶å€™è¯¥å­¦ä¹ ç‚¹å„¿æ–°çš„æŠ€æœ¯äº†ï¼Œäºæ˜¯åœ¨é—²æš‡ä¹‹ä½™ï¼Œæˆ‘æ‹·è´äº†ä¸€ä»½ä»£ç ï¼ŒåŒæ—¶ç ”ç©¶è¯¥å¦‚ä½•ä»â€œé›¶â€å¼€å§‹ç¼–å†™ä¸€ä¸ª dll åŒ…ï¼ˆè¯¥éƒ¨åˆ†ä»¥ webpack çš„ dllPlugin ä½œä¸ºä¾‹å­ï¼‰ã€‚","text":"å‰è¨€ä¸ä¹…å‰ç»„å†…æœ‰å¤§ä½¬å‘å¸ƒäº†ä¸€ä¸ª vue-cli3 çš„ dll åŒ…ï¼Œä½œä¸ºä¸€ä¸ªåœ¨ vue é¡¹ç›®å†…æ‘¸çˆ¬æ»šæ‰“çš„èŒæ–°ï¼Œæ˜¯æ—¶å€™è¯¥å­¦ä¹ ç‚¹å„¿æ–°çš„æŠ€æœ¯äº†ï¼Œäºæ˜¯åœ¨é—²æš‡ä¹‹ä½™ï¼Œæˆ‘æ‹·è´äº†ä¸€ä»½ä»£ç ï¼ŒåŒæ—¶ç ”ç©¶è¯¥å¦‚ä½•ä»â€œé›¶â€å¼€å§‹ç¼–å†™ä¸€ä¸ª dll åŒ…ï¼ˆè¯¥éƒ¨åˆ†ä»¥ webpack çš„ dllPlugin ä½œä¸ºä¾‹å­ï¼‰ã€‚ äº†è§£æ–‡æ¡£é€šç¯‡è¯»å®Œå®˜ç½‘çš„æ–‡æ¡£ï¼Œå› ä¸ºçŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œå¹¶ä¸”æ²¡æœ‰è¯¦ç»†çš„ä¾‹å­ï¼ˆæŒ‡â€œå‚»ç“œå¼æ•™å­¦å¼â€ï¼‰ï¼Œå› æ­¤å¼€å‘è¿™ç¬¬ä¸‰æ–¹åŒ…çš„å­¦ä¹ æˆæœ¬è¿˜æ˜¯æœ‰ä¸€äº›çš„ï¼Œç‰¹åˆ«æ˜¯ webpack-chain å’Œ node çš„éƒ¨åˆ†çŸ¥è¯†ï¼Œè¿™é‡Œè®°å½•æ€»ç»“äº†ä¸€äº›å…³é”®çš„ç‚¹ã€‚ æ’ä»¶å‘½åæœ€å¼€å§‹å‘½åæ–‡ä»¶å¤¹æ—¶æˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨ vue-cli-plugin- ä½œä¸ºæ–‡ä»¶åå‰ç¼€ï¼Œç»“æœå¯æƒ³è€ŒçŸ¥ï¼Œvue invoke ä¸€ç›´æç¤ºæ‰¾ä¸åˆ°è¯¥åŒ…çš„ä¿¡æ¯ã€‚äºæ˜¯æˆ‘å»çœ‹äº†çœ‹æºç â€¦â€¦ åœ¨ @vue/cli/lib/invoke.js å†…ï¼Œå…¶æœ‰ä¸€ä¸ªå…³é”®çš„è·å–åŒ… Id çš„æ–¹æ³• resolvePluginIdï¼Œè¯¥æ–¹æ³•åœ¨ @vue/cli-shared-utils/lib/pluginResolution.jsï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920exports.resolvePluginId = id =&gt; &#123; // already full id // e.g. vue-cli-plugin-foo, @vue/cli-plugin-foo, @bar/vue-cli-plugin-foo if (pluginRE.test(id)) &#123; return id; &#125; // scoped short // e.g. @vue/foo, @bar/foo if (id.charAt(0) === '@') &#123; const scopeMatch = id.match(scopeRE); if (scopeMatch) &#123; const scope = scopeMatch[0]; const shortId = id.replace(scopeRE, ''); return `$&#123;scope&#125;$&#123;scope === '@vue/' ? `` : `vue-`&#125;cli-plugin-$&#123;shortId&#125;`; &#125; &#125; // default short // e.g. foo return `vue-cli-plugin-$&#123;id&#125;`;&#125;; å¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨ vue invoke æ—¶å…¶åªä¼šå¯»æ‰¾å«æœ‰ vue-cli-plugin- ä½œä¸ºå‰ç¼€çš„åŒ…ï¼Œå®˜ç½‘å†…åœ¨æ–‡æ¡£çš„æœ€åéƒ¨åˆ†æœ‰åšå¯¹åº”çš„è¯´æ˜ï¼ˆè¿™ä¸ªæ˜¯åæ¥æ‰çœ‹åˆ°çš„ï¼‰ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š ä¸ºäº†è®©ä¸€ä¸ª CLI æ’ä»¶èƒ½å¤Ÿè¢«å…¶å®ƒå¼€å‘è€…ä½¿ç”¨ï¼Œä½ å¿…é¡»éµå¾ª vue-cli-plugin-&lt;name&gt; çš„å‘½åçº¦å®šå°†å…¶å‘å¸ƒåˆ° npm ä¸Šã€‚ å› æ­¤ package.json çš„ name å­—æ®µç¬¦åˆè§„åˆ™å³å¯ã€‚ creator å’Œ serviceå®˜ç½‘å¼€ç¯‡å°±ä»‹ç»äº†ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†ï¼š@vue/cli å’Œ @vue/cli-serviceï¼Œé¦–å…ˆæ˜¯ @vue/cli éƒ¨åˆ†ï¼Œè¿™é‡Œä»‹ç»äº†æ’ä»¶çš„ç›®å½•ç»“æ„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®æ­¤æ¥æ­ä¸€ä¸ªæ’ä»¶æ¡†æ¶ï¼š 123456789101112vue-cli-plugin-xxx â”œâ”€â”€ README.md â”œâ”€â”€ generator | â””â”€â”€ index.js â”œâ”€â”€ index.js â”œâ”€â”€ package.json â”œâ”€â”€ prompts | â””â”€â”€ index.js â”œâ”€â”€ service | â”œâ”€â”€ config-file.js | â””â”€â”€ regist-command.js â””â”€â”€ yarn.lock æ¥ä¸‹æ¥å°±è¯¦ç»†åˆ†æä¸€ä¸‹å„éƒ¨åˆ†çš„ä½œç”¨ã€‚ generatoræ–‡æ¡£åˆ†ææ–‡æ¡£ä¸­æœ‰æåˆ°ï¼Œæ’ä»¶å†…çš„ generator å°†ä¼šåœ¨ä¸¤ç§åœºæ™¯ä¸‹è¢«è°ƒç”¨ï¼š åœ¨ä¸€ä¸ªé¡¹ç›®çš„åˆå§‹åŒ–åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœ CLI æ’ä»¶ä½œä¸ºé¡¹ç›®åˆ›å»º preset çš„ä¸€éƒ¨åˆ†è¢«å®‰è£… æ’ä»¶åœ¨é¡¹ç›®åˆ›å»ºå¥½ä¹‹åé€šè¿‡ vue invoke ç‹¬ç«‹è°ƒç”¨æ—¶è¢«å®‰è£… ç”±äºå¼€å‘çš„ç¬¬ä¸‰æ–¹æ’ä»¶ä½¿ç”¨åœºæ™¯å¤šæ•°åœ¨äºæ›´æ”¹å·²å®‰è£…çš„é¡¹ç›®é…ç½®ï¼Œpreset ä½¿ç”¨åœºæ™¯ä¸æ˜¯å¾ˆå¤šï¼ˆåˆ›å»ºé¡¹ç›®æ—¶ä¸€èˆ¬è¿˜æ˜¯æ‰‹åŠ¨é…ç½®ï¼Œå¤§å¤šæ•°æƒ…å†µä¸ä¼šé€‰æ‹©å»ç”Ÿæˆä¸€ä¸ª ~/.vuercï¼‰ï¼Œå› æ­¤è¿™è¾¹ä»…å¤„ç†ä½¿ç”¨æ‰‹åŠ¨è°ƒç”¨ generator çš„æƒ…å†µã€‚ è§¦å‘ generator çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š vue invoke vue add ä¸‹é¢å°±ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ªå‘½ä»¤çš„åŒºåˆ«ã€‚ vue invoke æŒ‡ä»¤æ­¤æŒ‡ä»¤çš„é€‚ç”¨æƒ…å†µä¸ºå·²ç»é€šè¿‡ yarn æˆ–è€… npm å°†åŒ…å®‰è£…è‡³é¡¹ç›®å†…ï¼Œæ­¤æ—¶ä»…éœ€è¦è°ƒç”¨ vue invoke å³å¯ã€‚ æ³¨æ„ï¼šè¿™é‡Œçš„ packageName ä¸ºä¸åŒ…å« vue-cli-plugin- éƒ¨åˆ†çš„å‰©ä½™åŒ…åï¼Œæ¯”å¦‚ï¼šå‘å¸ƒçš„åŒ…åä¸º vue-cli-plugin-xxxï¼Œé‚£ä¹ˆæ­¤æ—¶ä½¿ç”¨å‘½ä»¤å³ vue invoke xxx vue addæ­¤æŒ‡ä»¤çš„ä½¿ç”¨æƒ…å†µä¸ºé¡¹ç›®å†…è¿˜æ²¡æœ‰å®‰è£…å¯¹åº”çš„åŒ…ï¼Œä½¿ç”¨æ–¹å¼åŒ vue invoke æ³¨ï¼šå¦‚æœåŒ…çš„æºä¸å¯¹çš„è¯ï¼Œè¯·è‡ªå·±åœ¨åé¢åŠ ä¸ŠåŒ…æ‰€åœ¨çš„ npm æºåœ°å€ï¼ˆ â€“registry ï¼‰ å†…å®¹ç¼–å†™åˆ†æäº†è¿™ä¹ˆå¤šï¼Œé‡ç‚¹è¿˜æ˜¯ generator å†…æˆ‘ä»¬åº”è¯¥å†™ç‚¹ä»€ä¹ˆï¼Œå®ƒå½±å“çš„æ˜¯ä»€ä¹ˆã€‚å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥ç»§ç»­çœ‹æ–‡æ¡£(â— ËƒÌ¶ÍˆÌ€ ãƒ­ Ë‚Ì¶ÍˆÌ)à©­ê ¥â¾â¾ generator æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œè¿™é‡Œå°±ä¸ç»†èµ˜äº†ï¼Œå› ä¸ºè¿™é‡Œä¸å…³æ³¨ preset çš„é…ç½®ï¼Œæ‰€ä»¥å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæœ‰ç”¨çš„éƒ¨åˆ†å°±åªæœ‰ç¬¬ä¸€ä¸ªå‚æ•° apiã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦æ”¹åŠ¨çš„éƒ¨åˆ†ä¾¿æ˜¯é¡¹ç›®å†…çš„ package.json äº†ï¼Œä½¿ç”¨æ–¹æ³• extendPackage å³å¯ï¼Œä¾‹å­å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324// ä¿®æ”¹ `package.json` é‡Œçš„å­—æ®µ// vue éƒ¨åˆ†çš„å†…å®¹å¯ä»¥ä¸è¦module.exports = (api, options, rootOptions) =&gt; &#123; // ä¿®æ”¹ `package.json` é‡Œçš„å­—æ®µ api.extendPackage(&#123; scripts: &#123; test: &apos;vue-cli-service test&apos; &#125;, vue: &#123; pluginOptions: &#123; test: &#123; // éœ€è¦é¢„æ‰“åŒ…çš„éƒ¨åˆ† vendors: [], // è¾“å‡ºæ–‡ä»¶å outputName: &apos;vendor.dll.js&apos;, // è¾“å‡ºåœ°å€ outputPath: &apos;./public/vendor&apos;, // æ˜¯å¦è°ƒç”¨ cleanWebpackPlugin cleanCache: true &#125; &#125; &#125; &#125;);&#125; å…³äºæ­¤å¤„æ·»åŠ çš„ vue å­—æ®µåœ¨ invoke åä¼šè‡ªåŠ¨è¡¥å……è‡³ vue.config.js æˆ–è€… package.json å†…ã€‚ å¦‚æœä½ é…ç½®äº† promots å¹¶ä¸”éœ€è¦è¯¥éƒ¨åˆ†çš„å†…å®¹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ª options å‚æ•°å»è·å–é…ç½®çš„å†…å®¹ã€‚ï¼ˆé…ç½® .vuerc çš„æ–¹æ³•æ²¡æœ‰å°è¯•ï¼Œå› ä¸ºè§£æ„ + é»˜è®¤å€¼ + prompts å·²ç»è¶³å¤Ÿäº†ï¼‰ å¦‚æœéœ€è¦é…ç½®æ¨¡æ¿æ–¹é¢çš„å‚è€ƒå®˜æ–¹æºç ï¼Œæ„Ÿè§‰é…åˆ prompts å†™ä¸ªæ¨¡æ¿æ’ä»¶ä¹Ÿä¸é”™ã€‚ å‹æƒ…æç¤ºï¼šrender() å‡½æ•°å†…ä¸ºä½ çš„ template æ¨¡æ¿åŸºäºå½“å‰æ–‡ä»¶å¤¹æ‰€åœ¨çš„è·¯å¾„ã€‚ promptsè¯¥éƒ¨åˆ†å…¶å®åœ¨è¿™ä¸ªé¡¹ç›®å†…å¹¶æ²¡æœ‰æ¶‰åŠï¼Œä½†è¿˜æ˜¯è¦æä¸€ä¸‹ã€‚å®˜æ–¹æ–‡æ¡£å¯¹äºæ­¤éƒ¨åˆ†åœ¨å†…å»ºæ’ä»¶æœ‰è¯¦ç»†çš„è¯´æ˜ï¼ˆå®˜æ–¹æ’ä»¶ï¼‰ï¼Œç¬¬ä¸‰æ–¹æ’ä»¶æåˆ°è¿‡ä¸€ç‚¹ï¼š è¿™ä¸ªæ–‡ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ªç”¨äº Inquirer.js çš„é—®é¢˜çš„æ•°ç»„ã€‚è¿™äº›è¢«è§£æçš„ç­”æ¡ˆå¯¹è±¡ä¼šä½œä¸ºé€‰é¡¹è¢«ä¼ é€’ç»™æ’ä»¶çš„ generatorã€‚ å› æ­¤ï¼Œå¦‚æœéœ€è¦çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¾—é€šè¿‡æ•°ç»„çš„å½¢å¼ç¼–å†™é—®ç­”ã€‚ä¾‹å¦‚ï¼š 12345678module.exports = [ &#123; name: 'entry', message: \"What's the output file's name?\", type: 'input', default: 'vendor', &#125;,]; æ­¤éƒ¨åˆ†çš„é…ç½®ç»“æœä¼šåœ¨ generator éƒ¨åˆ†çš„ç¬¬äºŒä¸ªå‚æ•°æ•æ‰åˆ°ã€‚ serviceè¿™éƒ¨åˆ†å°±æ˜¯é…ç½®çš„é‡ç‚¹äº†,è¿˜æ˜¯æ ¹æ®å®˜ç½‘æ¥å§ï¼Œå®˜ç½‘æœ‰æåˆ° 3 ä¸ªå‘½ä»¤ï¼š chainWebpackã€configureWebpackã€registerCommandã€‚ç›´æ¥æ›´æ”¹åŸæœ‰é¡¹ç›®çš„é…ç½®å¹¶ä¸æ˜¯å¾ˆå¥½ï¼ˆé™¤éä½ å¾ˆæœ‰ä¿¡å¿ƒï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ configureWebpack æ¥åˆå¹¶å˜æ›´ã€‚ è¿™éƒ¨åˆ†æ€»çš„æ¥è¯´åšä¸‰ä»¶äº‹ï¼š æ›´æ”¹ç”¨æˆ·çš„ webpack é…ç½®æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ vue.config.jsï¼‰ å‘ cli-service å†…æ³¨å†ŒæŒ‡ä»¤ ä¸ºæ³¨å†Œçš„æŒ‡ä»¤æŒ‡å®šæ¨¡å¼ è¿™é‡Œä»ç®€å•çš„éƒ¨åˆ†å¼€å§‹ä¸€ä¸€è¯´æ˜å§ï½ï¼ˆé¡ºåºï¼š3ã€1ã€2ï¼‰ æŒ‡å®šæ¨¡å¼å—¯ï¼Œè¿™ä¸ªæœ€ç®€å•äº†ï¼Œæ¯•ç«Ÿå®˜ç½‘æ–‡æ¡£å†…æœ‰ï¼Œç†ç”±ä¹Ÿå°±ä¸èµ˜è¿°äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š 123module.exports.defaultModes = &#123; &lt;your direct&gt;: &lt;target mode&gt;&#125; å…¶ä¸­ your direct éƒ¨åˆ†å³å…ˆå‰çš„ generator éƒ¨åˆ†æ³¨å†Œçš„ script è„šæœ¬å†…ï¼Œåœ¨ vue-cli-service åé¢çš„é‚£ä¸ªæŒ‡ï¼Œæ¯”å¦‚ï¼Œå…ˆå‰å†™çš„æ˜¯ testï¼Œé‚£ä¹ˆè¿™é‡Œæ³¨å†Œçš„æŒ‡ä»¤ä¹Ÿæ˜¯ directï¼Œmode å°±æ ¹æ®å®é™…æƒ…å†µå¤„ç†å³å¯ï¼Œä¸€èˆ¬ä½¿ç”¨ production ç”Ÿäº§æ¨¡å¼å°±æ²¡å•¥é—®é¢˜ã€‚ æ›´æ”¹ç”¨æˆ·çš„é…ç½®æ–‡ä»¶è¿™é‡Œå°±éœ€è¦æœ‰ webpack-chain çš„çŸ¥è¯†äº†ã€‚å…ˆçœ‹çœ‹ pluginAPI å†…æœ‰äº›å•¥ï¼ˆä¼ é€é—¨ï¼‰,å¯èƒ½ä¼šç”¨åˆ°çš„ä¸€äº›æ–¹æ³•åŒ…æ‹¬ï¼š getCwdï¼šè·å–å½“å‰çš„å·¥ä½œç›®å½• resolveï¼šç›¸å½“äº path.resolve registerCommandï¼šæ³¨å†ŒæŒ‡ä»¤ï¼ˆæœ‰ä¸‰ä¸ªå‚æ•°ï¼ï¼‰ chainWebpackï¼šé“¾å¼è°ƒç”¨ webpack configureWebpackï¼šç”¨äºåˆå¹¶ webpack resolveChainableWebpackConfigï¼šç”¨äºè§£æ webpack æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ configureWebpack æ¥æ›´æ”¹é…ç½®ï¼ŒåŒæ—¶ä½¿ç”¨ registerCommand æ¥æ³¨å†Œæˆ‘ä»¬çš„å‘½ä»¤ã€‚è¿™é‡Œåˆšå¥½å¯¹åº”çš„å°±æ˜¯æˆ‘ä»¬çš„ä¸¤ä¸ªæ–‡ä»¶ config-file å’Œ regist-command.js äº†ï¼Œå¯¹åº”å¼€å‘å³å¯ã€‚ configureWebpackå‚è€ƒæºç çš„å†™æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ options å‚æ•°è·å– invoke ç”Ÿæˆçš„ vue.config.js é‡Œé¢çš„ pluginOptions å­—æ®µå†…çš„å¯¹åº”é…ç½®å†…å®¹ï¼Œé…åˆ api.configureWebpack æ¥æ³¨å…¥æˆ‘ä»¬çš„ webpack é…ç½®ã€‚ç²—ç•¥çš„å†™æ³•ä¸ºï¼š 1234567api.configureWebpack(config =&gt; &#123; // å¢ä¸€ä¸ª plugins config.plugins .push /* plugin é…ç½® */ ();&#125;); registerCommandæŸ¥çœ‹æºç çš„å†™æ³•ï¼Œå‘ç°å‚æ•°æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š api: pluginAPI å®ä¾‹ options: ç”¨æ¥æ·»åŠ é…ç½®è¯´æ˜ fn: å›è°ƒå‡½æ•°ï¼Œç”¨äºè§¦å‘æ‰§è¡Œçš„å†…å®¹ï¼ˆæ¯”å¦‚è¿è¡Œä¸€ä¸ª webpack é…ç½®ï¼‰ å®˜æ–¹çš„å†™æ³•å¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ®æ­¤æ¨¡ä»¿ 12345678910111213api.registerCommand( 'test', &#123; description: 'æ­¤ä¸ºæŒ‡ä»¤çš„è¯´æ˜', // æŒ‡ä»¤æ„ä¹‰ usage: 'vue-cli-service test', // å‘½ä»¤æ€ä¹ˆç”¨ options: &#123; /* å‚æ•°è¯´æ˜ */ &#125;, &#125;, async args =&gt; &#123; /* å¯ä»¥å†™ä¸ª chain-webpack ç„¶åè°ƒç”¨ï¼Œæˆ–è€…å¹²ç‚¹å…¶å®ƒçš„ */ &#125;,); éƒ¨åˆ†é—®é¢˜æ€»ç»“1. demo å†…çš„ dll æ‰“åŒ…ä½ç½®é—®é¢˜ä½¿ç”¨é»˜è®¤çš„æ‰“åŒ…ä½ç½®ï¼š public/vendor ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ build æ–‡ä»¶å†…ä¼šåŒ…å«æ­¤ vendor æ–‡ä»¶å¤¹ï¼ˆpublic æ–‡ä»¶å¤¹å†…çš„å†…å®¹é»˜è®¤ä¼šå¸¦è‡³ dist æ–‡ä»¶å¤¹å†…ï¼‰ï¼Œæˆ‘ä»¬æ³¨å…¥çš„ä¸€äº›é…ç½®ä¸ç”Ÿæ•ˆã€‚ è§£å†³æ–¹æ³•ï¼šå°†é»˜è®¤çš„ public/vendor æ‰“åŒ…ä½ç½®æ”¹æ”¹ï¼Œåªè¦ä¸æ˜¯ç”Ÿæˆåœ¨ public æ–‡ä»¶å¤¹å†…çš„éƒ½æ²¡é—®é¢˜ï¼Œå¯çœ‹ vue-cli å®˜ç½‘çš„ public éƒ¨åˆ†çš„è§£é‡Šã€‚ 2. webpack å‡½æ•°ç›®å‰ç¬¬äºŒä¸ªå›è°ƒå‚æ•°çš„ä½¿ç”¨åœºæ™¯ä¸æ˜¯å¾ˆæ˜ç¡®ï¼ˆå…¶å®ä¸ç”¨å›è°ƒä¹Ÿå¯ä»¥ï¼Œå¤–å±‚å…³é—­å¯¹åº”çš„ log å³å¯ï¼‰ 3. configureWebpack åªèƒ½ç”¨ push?æˆ‘å°è¯•è¿‡è‡ªå·±æ–°åˆ›å»ºä¸€ä¸ª webpack-chain ç„¶åè¿”å›ï¼ˆæºç ä¸Šå¥½åƒä¼šå¯¹è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæœ‰é‚£ä¹ˆä¼šè°ƒç”¨ merge æ–¹æ³•ï¼‰ï¼ŒæŒ‰ç†æ¥è¯´è¿”å›ä¸€ä¸ª config.toConfig() åº”è¯¥ æ²¡é—®é¢˜ï¼Œä½†æ˜¯è¡Œä¸é€šï¼Œç›®å‰ä»ç„¶ç”¨çš„æ˜¯ push æ–¹æ³• demoä¼ é€é—¨ å‚è€ƒæ–‡æ¡£ æ’ä»¶å¼€å‘æŒ‡å— Vue CLI 3 ä½¿ç”¨ï¼šæ’ä»¶å’Œ Presetï¼ˆäºŒï¼‰ ä½¿ç”¨ Webpack-chain é“¾å¼ç”Ÿæˆ webpack é…ç½® å¦‚ä½•ä½¿ç”¨ vue-cli 3 çš„ preset æ‰“é€ åŸºäº git repo çš„å‰ç«¯é¡¹ç›®æ¨¡æ¿ vuetify webpack å‡½æ•°å‚æ•° webpack chain ä¸­æ–‡æ–‡æ¡£","categories":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"}]},{"title":"æå‡é¡¹ç›®çš„æ„å»ºé€Ÿåº¦","slug":"æå‡é¡¹ç›®çš„æ„å»ºé€Ÿåº¦","date":"2019-05-08T02:29:11.000Z","updated":"2022-07-26T13:13:35.256Z","comments":true,"path":"2019/05/08/æå‡é¡¹ç›®çš„æ„å»ºé€Ÿåº¦/","link":"","permalink":"https://monocy.gitee.io/2019/05/08/æå‡é¡¹ç›®çš„æ„å»ºé€Ÿåº¦/","excerpt":"å‰è¨€éšç€é¡¹ç›®çš„å¢å¤§ï¼Œè¶Šæ¥è¶Šå¤šçš„æ’ä»¶å¼•å…¥é¡¹ç›®ï¼Œä½¿å¾—é¡¹ç›®çš„æ„å»ºæ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œè€Œè¿™å¾ˆå½±å“å¼€å‘çš„æ•ˆç‡ã€‚å› æ­¤æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿä¼˜åŒ–æ„å»ºçš„å†…å®¹ï¼Œæå‰æ„å»ºå¥½ä¸æ€ä¹ˆæ”¹åŠ¨çš„æ’ä»¶ä¾èµ–ï¼Œè€Œä»…ä»…æ„å»ºæˆ‘ä»¬æ‰€å†™çš„ä¸šåŠ¡ä»£ç å‘¢ï¼Ÿwebpack æ—©å·²ä¸ºæˆ‘ä»¬è€ƒè™‘åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚","text":"å‰è¨€éšç€é¡¹ç›®çš„å¢å¤§ï¼Œè¶Šæ¥è¶Šå¤šçš„æ’ä»¶å¼•å…¥é¡¹ç›®ï¼Œä½¿å¾—é¡¹ç›®çš„æ„å»ºæ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œè€Œè¿™å¾ˆå½±å“å¼€å‘çš„æ•ˆç‡ã€‚å› æ­¤æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿä¼˜åŒ–æ„å»ºçš„å†…å®¹ï¼Œæå‰æ„å»ºå¥½ä¸æ€ä¹ˆæ”¹åŠ¨çš„æ’ä»¶ä¾èµ–ï¼Œè€Œä»…ä»…æ„å»ºæˆ‘ä»¬æ‰€å†™çš„ä¸šåŠ¡ä»£ç å‘¢ï¼Ÿwebpack æ—©å·²ä¸ºæˆ‘ä»¬è€ƒè™‘åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ DllPluginç®€ä»‹DllPlugin çš„ä¸»è¦æ€æƒ³åœ¨äºå°†é¡¹ç›®å†…çš„ä¸€äº›ä¸ç»å¸¸æ›´æ”¹çš„ä¾èµ–ï¼ˆæ¯”å¦‚ lodashï¼‰æå‰æ‰“åŒ…ï¼Œä½¿å¾—é¡¹ç›®æ„å»ºæ—¶å¿½ç•¥è¿™äº›æ‰“åŒ…æ–‡ä»¶ï¼Œä»è€Œå‡å°‘æ„å»ºæ—¶é—´ï¼Œæå‡æ„å»ºé€Ÿåº¦ã€‚ å‚æ•°ä¸ä½¿ç”¨1new webpack.DllPlugin(options); å…¶ä¸­ options å«æœ‰å¦‚ä¸‹å‚æ•°ï¼š context (optional): manifest æ–‡ä»¶ä¸­è¯·æ±‚çš„ä¸Šä¸‹æ–‡(context)(é»˜è®¤å€¼ä¸º webpack çš„ä¸Šä¸‹æ–‡(context)) name: æš´éœ²å‡ºçš„ DLL çš„å‡½æ•°å (TemplatePaths: [hash] &amp; [name] ) path: manifest json æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ (è¾“å‡ºæ–‡ä»¶) DllReferencePluginç®€ä»‹ç®€è€Œè¨€ä¹‹ï¼ŒDllReferencePlugin å°±æ˜¯å°† DllPlugin æ‰“åŒ…çš„æ–‡ä»¶è·å–ï¼Œåœ¨ä¸» webpack æ–‡ä»¶é…ç½®åï¼Œä¼šè®©å…¶åœ¨æ„å»ºåŒ…æ—¶å¿½ç•¥æ‰ DllPlugin å†…é…ç½®æ‰“åŒ…çš„æ–‡ä»¶ï¼Œå…¶ä¾èµ– DllPlugin æ‰“åŒ…å‡ºçš„ manifest æ–‡ä»¶ã€‚ å‚æ•°ä¸ä½¿ç”¨1new webpack.DllReferencePlugin(options); å…¶ä¸­ options å«æœ‰å¦‚ä¸‹å‚æ•°ï¼š context: (ç»å¯¹è·¯å¾„) manifest (æˆ–è€…æ˜¯å†…å®¹å±æ€§)ä¸­è¯·æ±‚çš„ä¸Šä¸‹æ–‡ manifest: åŒ…å« content å’Œ name çš„å¯¹è±¡ï¼Œæˆ–è€…åœ¨ç¼–è¯‘æ—¶(compilation)çš„ä¸€ä¸ªç”¨äºåŠ è½½çš„ JSON manifest ç»å¯¹è·¯å¾„ content (optional): è¯·æ±‚åˆ°æ¨¡å— id çš„æ˜ å°„ (é»˜è®¤å€¼ä¸º manifest.content) name (optional): dll æš´éœ²çš„åœ°æ–¹çš„åç§° (é»˜è®¤å€¼ä¸º manifest.name) (å¯å‚è€ƒ externals) scope (optional): dll ä¸­å†…å®¹çš„å‰ç¼€ sourceType (optional): dll æ˜¯å¦‚ä½•æš´éœ²çš„ (libraryTarget) æ³¨ï¼šä¸ output.library ä¿æŒ name çš„ä¸€è‡´æ€§ã€‚ AddAssetHtmlPluginç®€ä»‹å°† dll æ‹†åˆ†çš„ä¸¤ä¸ª plugin é…ç½®å¥½åï¼Œæ¯æ¬¡æ„å»ºé¡¹ç›®ï¼Œæ¨é€è¿œç«¯ä¹‹å‰éƒ½éœ€è¦å°†æˆ‘ä»¬çš„ dll æ–‡ä»¶çš„å¼•ç”¨åŠ¨æ€æ·»åŠ åˆ°ç”Ÿæˆçš„ html æ–‡ä»¶å†…ï¼Œæ­¤æ’ä»¶å°±æ˜¯å®ç°è¯¥æ‰‹åŠ¨æ’å…¥çš„è¿‡ç¨‹ å‚æ•°ä¸ä½¿ç”¨123const AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin');new AddAssetHtmlPlugin(options); æˆ‘ä»¬æ‰€å…³æ³¨çš„ options é…ç½®ï¼š filepath: æ–‡ä»¶æ‰€åœ¨çš„åœ°å€ï¼Œæ­¤å¤„é…ç½® dll æ„å»ºå‡ºçš„ .js æ–‡ä»¶ outputPath: åœ¨æ„å»ºæ—¶ï¼Œå¼•ç”¨çš„æ–‡ä»¶æœ€ç»ˆæ‰“åŒ…è‡³çš„ä½ç½® publicPath: script è„šæœ¬å¼•ç”¨è¯¥æ–‡ä»¶æ—¶çš„ç»å¯¹ä½ç½® æ³¨ï¼šæ­¤æ’ä»¶ä¾èµ– html-webpack-pluginï¼Œç”±äºé¢„æ„å»ºé¡¹ç›®å†…å¹¶ä¸éœ€è¦ç”Ÿæˆä¸­é—´ html æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸ç”¨åƒç¤ºä¾‹é‚£æ ·é…ç½® HtmlWebpackPlugin æ¥ç”Ÿæˆ .html æ–‡ä»¶ é…ç½®ç¤ºä¾‹ä½¿ç”¨æ–¹æ³•åˆé…ç½®å¥½æˆ–è€…ä¾èµ–çš„å†…å®¹æœ‰å˜åŠ¨ï¼ˆæ¯”å¦‚ï¼šç‰ˆæœ¬å‡çº§ï¼‰ä½¿ç”¨æ­¤å‘½ä»¤æ›´æ–°é¢„æ‰“åŒ…çš„ä¾èµ–ï¼Œå¦åˆ™å³ä½¿å‡çº§äº†åŒ…ï¼Œæœ€ç»ˆæ‰“åŒ…åä¹Ÿä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ã€‚ 1yarn dll dllPlugins éƒ¨åˆ†é…ç½®åˆ›å»ºä¸€ä¸ª webpack.dll.config.js æ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536const path = require('path');const webpack = require('webpack');const CleanWebpackPlugin = require('clean-webpack-plugin');// é…ç½®å…¬å…±è¯·æ±‚è·¯å¾„function resolve(dir) &#123; return path.join(__dirname, dir);&#125;// dllæ–‡ä»¶å­˜æ”¾çš„ç›®å½•const dllPath = '&lt;target-file&gt;';module.exports = &#123; mode: 'production', // éœ€è¦æå–çš„ä¾èµ– entry: &#123; vendor: ['lodash'], &#125;, output: &#123; path: resolve(dllPath), filename: '[name].dll.js', // vendor.dll.js ä¸­æš´éœ²å‡ºçš„å…¨å±€å˜é‡å // ä¿æŒä¸ webpack.DllPlugin ä¸­åç§°ä¸€è‡´ library: '[name]_[hash]', &#125;, plugins: [ // manifest.json æè¿°åŠ¨æ€é“¾æ¥åº“åŒ…å«äº†å“ªäº›å†…å®¹ new webpack.DllPlugin(&#123; path: path.join(__dirname, dllPath, 'manifest.json'), // ä¿æŒä¸ output.library ä¸­åç§°ä¸€è‡´ name: '[name]_[hash]', &#125;), // æ¸…é™¤ä¹‹å‰æ‰“åŒ…çš„ dll æ–‡ä»¶ new CleanWebpackPlugin(&#123;&#125;), ],&#125;; ä¸» webpack æ‰“åŒ…æ–‡ä»¶é…ç½®æ­¤å¤„ä»¥ vue-cli3 æ¥è¯´æ˜ 1234567891011121314151617181920212223const AddAssetHtmlPlugin = require('add-asset-html-webpack-plugin');module.exports = &#123; chainWebpack: config =&gt; &#123; // è®¾ç½®å¿½ç•¥æ‰“åŒ…çš„ vender æ–‡ä»¶ï¼Œæ·»åŠ å·²æ‰“åŒ…æ–‡ä»¶ config.plugin('dll').use( new webpack.DllReferencePlugin(&#123; manifest: require('./vendor/manifest.json'), &#125;), ); // å°† dll ç”Ÿæˆçš„ vender è‡ªåŠ¨æ³¨å…¥åˆ° html æ–‡ä»¶ä¸­ config.plugin('insert').use( new AddAssetHtmlPlugin(&#123; // dllæ–‡ä»¶ä½ç½® filepath: path.resolve(__dirname, './vendor/*.js'), // dll å¼•ç”¨ dist è·¯å¾„ publicPath: 'js', // dllæœ€ç»ˆæ‰“åŒ…åˆ°çš„ dist ç›®å½•ä½ç½® outputPath: 'js', &#125;), ); &#125;,&#125;; package.json é…ç½®123\"scripts\": &#123; \"dll\": \"webpack --progress --config webpack.dll.config.js\"&#125; å‚è€ƒæ–‡æ¡£ DllPlugin vue-cli3 DllPlugin æå–å…¬ç”¨åº“ å¦‚ä½•åå€æé«˜ä½ çš„ webpack æ„å»ºæ•ˆç‡","categories":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/categories/Webpack/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"}]},{"title":"æµ…è°ˆ BFC","slug":"æµ…è°ˆ-BFC","date":"2019-05-03T11:38:12.000Z","updated":"2022-07-26T13:14:31.420Z","comments":true,"path":"2019/05/03/æµ…è°ˆ-BFC/","link":"","permalink":"https://monocy.gitee.io/2019/05/03/æµ…è°ˆ-BFC/","excerpt":"å‰è¨€CSS ä¸­é™¤äº†å‚ç›´å±…ä¸­ä¹‹å¤–ï¼Œå¦å¤–ä¸€ä¸ªå¸¸è§çš„é—®é¢˜å°±æ˜¯ BFC é—®é¢˜ã€‚BFC å…¨ç§°ä¸º Block Fromatting Contextï¼Œå³â€œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€ï¼Œå¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œäº†è§£è¿™ä¸ªè¿˜æ˜¯éå¸¸å¿…è¦çš„ï¼Œå› ä¸ºå¯¹äº To C ç±»çš„äº§å“å¯¹äºå‰ç«¯ CSS è¦æ±‚è¿˜æ˜¯æŒºé«˜çš„ï¼Œäº†è§£è¿™ä¸ªèƒ½å¤Ÿæ›´ä¸ºæ–¹ä¾¿çš„æŠŠæ¡ä½é¡µé¢çš„ç»“æ„å±‚æ¬¡ä»¥åŠä¼šäº§ç”Ÿçš„é—®é¢˜ã€‚","text":"å‰è¨€CSS ä¸­é™¤äº†å‚ç›´å±…ä¸­ä¹‹å¤–ï¼Œå¦å¤–ä¸€ä¸ªå¸¸è§çš„é—®é¢˜å°±æ˜¯ BFC é—®é¢˜ã€‚BFC å…¨ç§°ä¸º Block Fromatting Contextï¼Œå³â€œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€ï¼Œå¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œäº†è§£è¿™ä¸ªè¿˜æ˜¯éå¸¸å¿…è¦çš„ï¼Œå› ä¸ºå¯¹äº To C ç±»çš„äº§å“å¯¹äºå‰ç«¯ CSS è¦æ±‚è¿˜æ˜¯æŒºé«˜çš„ï¼Œäº†è§£è¿™ä¸ªèƒ½å¤Ÿæ›´ä¸ºæ–¹ä¾¿çš„æŠŠæ¡ä½é¡µé¢çš„ç»“æ„å±‚æ¬¡ä»¥åŠä¼šäº§ç”Ÿçš„é—®é¢˜ã€‚ åˆ›å»º BFCä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆæ­¤éƒ¨åˆ†ç”± MDN æ€»ç»“ï¼‰ï¼š æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ float ä¸æ˜¯ noneï¼‰ ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ position ä¸º absolute æˆ– fixedï¼‰ è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º inline-blockï¼‰ è¡¨æ ¼å•å…ƒæ ¼ï¼ˆå…ƒç´ çš„ display ä¸º table-cellï¼ŒHTML è¡¨æ ¼å•å…ƒæ ¼é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ è¡¨æ ¼æ ‡é¢˜ï¼ˆå…ƒç´ çš„ display ä¸º table-captionï¼ŒHTML è¡¨æ ¼æ ‡é¢˜é»˜è®¤ä¸ºè¯¥å€¼ï¼‰ åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆå…ƒç´ çš„ display ä¸º tableã€table-rowã€ table-row-groupã€table-header-groupã€table-footer-groupï¼ˆåˆ†åˆ«æ˜¯ HTML tableã€rowã€tbodyã€theadã€tfoot çš„é»˜è®¤å±æ€§æˆ– inline-tableï¼‰overflow å€¼ä¸ä¸º visible çš„å—å…ƒç´  display å€¼ä¸º flow-root çš„å…ƒç´  contain å€¼ä¸º layoutã€content æˆ– strict çš„å…ƒç´  å¼¹æ€§å…ƒç´ ï¼ˆdisplay ä¸º flex æˆ– inline-flex å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ ç½‘æ ¼å…ƒç´ ï¼ˆdisplay ä¸º grid æˆ– inline-grid å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰ å¤šåˆ—å®¹å™¨ï¼ˆå…ƒç´ çš„ column-count æˆ– column-width ä¸ä¸º autoï¼ŒåŒ…æ‹¬ column-count ä¸º 1ï¼‰ column-span ä¸º all çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆæ ‡å‡†å˜æ›´ï¼ŒChrome bugï¼‰ã€‚ å¾ˆå¤šåšå®¢å¯¹äº BFC è¿™éƒ¨åˆ†çš„çŸ¥è¯†æœ‰å¾ˆè¯¦ç»†çš„è®²è§£äº†ï¼Œä½†æ˜¯å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´å¯¹å§ï¼Œæˆ‘è‡ªå·±ä¹Ÿè¯•ç€ç ”ç©¶äº†ä¸‹ï¼ŒBFC æ— å¤–ä¹ä¸¤ä¸ªé—®é¢˜ï¼šé«˜åº¦å¡Œé™·å’Œå¤–è¾¹è·é‡å ã€‚ é«˜åº¦å¡Œé™·è¿™ä¸ªç°è±¡åœ¨ä½¿ç”¨æµ®åŠ¨å¸ƒå±€æ—¶ä¼šæ—¶å¸¸é‡åˆ°ï¼Œç”¨ä¸€ä¸‹ä»£ç æ¥è¯´æ˜ï¼š 123&lt;div class=\"container\"&gt; &lt;p class=\"float-content\"&gt;This is a float element&lt;/p&gt;&lt;/div&gt; 123456789.container &#123; background-color: bisque; width: 100%;&#125;.float-content &#123; float: left; background-color: antiquewhite; width: 30%;&#125; ç”±äºå­å…ƒç´ ä¸ºæµ®åŠ¨å…ƒç´ ï¼Œè„±ç¦»äº†æ–‡æ¡£æµï¼Œå› æ­¤çˆ¶å…ƒç´ çš„å†…å®¹ä¸ºâ€œç©ºâ€ï¼Œå› æ­¤çˆ¶å…ƒç´ çš„é«˜åº¦æœ€ç»ˆè®¡ç®—ä¸º 0ã€‚ è§£å†³è¿™ä¸ªçš„æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸åšå…¨é‡æ€»ç»“äº†ï¼Œæœ€ä¸ºæ¨èçš„æ–¹æ³•ä¸ºæ·»åŠ ä¼ªå…ƒç´ æ³•ï¼š 1234567.container::after &#123; content: ''; clear: both; display: block; height: 0; visibility: hidden;&#125; å¤–è¾¹è·æŠ˜å å¤–è¾¹è·æŠ˜å é—®é¢˜ç”¨å›¾ä¸æ˜¯å¾ˆå¥½æè¿°ï¼Œè¿™é‡Œå…ˆç®€å•çš„ç”¨å­—ç¬¦ç”»æ¥æè¿°ä¸€ä¸‹ï¼ˆä¸¤ç§æƒ…å½¢ï¼‰ã€‚ ç¬¬ä¸€ç§æƒ…å½¢æ˜¯ï¼Œå½“ä½ åœ¨ä¸€ä¸ª div å…ƒç´ å†…æ’å…¥ä¸€ä¸ªå—çº§å­å…ƒç´ ï¼Œç„¶åè®¾ç½®å…¶ margin-top å€¼ï¼Œè¿™æ˜¯ä½ ä¼šå‘ç°å¹¶ä¸æ˜¯å­å…ƒç´ åœ¨çˆ¶å…ƒç´ å†…æ’‘å¼€äº†ä¸€æ®µè·ç¦»ï¼Œè€Œæ˜¯çˆ¶å…ƒç´ å‘ä¸Šæ’‘å¼€äº†ä¸€æ®µè·ç¦»ã€‚ 123456789101112åŸä»¥ä¸ºï¼š å®é™…ä¸Šï¼š------- body ------- ------- body ------- * --- parent --- | 50px * * | 50px --- parent --- * child child --- parent --- --- parent ---------- body ------- ------- body ------- å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œå½“ä½ åœ¨ div å…ƒç´ å†…æ’å…¥å¤šä¸ªå—çº§å…ƒç´ ï¼Œä½ ç»™å…¶ä¸­ç›¸é‚»çš„ä¸¤ä¸ªè®¾ç½® margin-top å’Œ margin-bottom ï¼Œä½ ä¼šå‘ç°ï¼Œä»–ä»¬ä¹‹é—´çš„è·ç¦»ä¸ºç›¸å¯¹åº”çš„ margin-top å’Œ margin-bottom ä¸­çš„æœ€å¤§å€¼ï¼Œå½“è®¾ç½®ç¬¬ä¸€ä¸ªå—çº§å…ƒç´ çš„ margin-top å±æ€§åˆ™ä¼šåƒç¬¬ä¸€ç§æƒ…å½¢é‚£æ ·ï¼Œçˆ¶çº§æ¡†ç§»åŠ¨äº†ã€‚ 1234567891011121314151617181920212223242526åŸä»¥ä¸ºï¼š-------- parent ----------- | 10px childA 10px | | ===&gt; 30px 20px | childB | 20px |-------- parent ----------å®é™…ä¸Šï¼š-------- body --------- | 10px ---- parent ---- childA | | max(10px, 20px) ==&gt; 20px childB ---- parent ---- | | 20px-------- body --------- å¤–è¾¹è·åˆå¹¶æŒ‡çš„æ˜¯ï¼Œå½“ä¸¤ä¸ªå‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬å°†å½¢æˆä¸€ä¸ªå¤–è¾¹è·ã€‚åˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå‘ç”Ÿåˆå¹¶çš„å¤–è¾¹è·çš„é«˜åº¦ä¸­çš„è¾ƒå¤§è€…ã€‚ è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒé€šä¿—æ˜“æ‡‚çš„ä¾‹å­ï¼š ç¬¬ä¸€ç§æƒ…å½¢A ä¸ B å¹¶æ’ç«™ï¼ŒA è¯´ï¼šæˆ‘ç«™åœ¨è·ç¦»å‰æ–¹ 1m çš„åœ°æ–¹ï¼Œæ¥ä¸‹æ¥è¯¥ä½ ç«™ä½å­äº†ã€‚ç”±äº A ä¸ B ä¹‹é—´æ²¡æœ‰æ˜æ˜¾çš„åˆ†å‰²çº¿ï¼ŒB æƒ³äº†æƒ³æ²¡æœ‰åŠ¨ï¼Œè¯´åˆ°ï¼šæˆ‘ç°åœ¨å’Œä½ åœ¨ä¸€æ¡çº¿ä¸Šï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿåº”è¯¥ç«™åœ¨è·ç¦»å‰æ–¹ 1m çš„åœ°æ–¹å§ï¼ ç¬¬äºŒç§æƒ…å½¢A ä¸ B ç›¸å¯¹ç«™ï¼ŒA è¯´ï¼šæˆ‘ç«™åœ¨è·ç¦»ä½  1m çš„åœ°æ–¹ï¼Œè¯¥ä½ äº†ã€‚B è¯´ï¼šæˆ‘åº”è¯¥ç«™åœ¨è·ç¦»ä½  2m çš„åœ°æ–¹ï¼Œé€šè¿‡ç›¸å¯¹åŸç†ï¼Œæˆ‘ä»¬åº”è¯¥é—´éš” 2m å§~ ä»ä¾‹å­å¯ä»¥åˆ†æå‡ºï¼Œåªè¦ç»™äºˆä¸€ä¸ªç•Œé™ï¼Œå³ä¸¤è€…ä¸æ˜¯äº’ç›¸æ¯”å¯¹ï¼ŒåŸºäºæŸä¸€ä¸ªå®šç‚¹æ¥å†³å®šä½ç½®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„å½¢æˆ BFC äº† å¥‡æ€ªçš„å¸ƒå±€å½“åœ¨ div å…ƒç´ å†…æ’å…¥å¤šä¸ªè¡Œå†…å—çº§å…ƒç´ ï¼Œä½ ç»™å…¶ä¸­ä»»æ„ä¸€ä¸ªæˆ–è€…å¤šä¸ªè®¾ç½® margin-top æƒ³è¦ä½¿å¾—å®ƒ/å®ƒä»¬è¡¨ç°å¾—ä¸ä¼—ä¸åŒï¼Œå¯æ˜¯ï¼Œåˆ°å¤´æ¥æ‰€æœ‰å…ƒç´ éƒ½ä¼šç§»åŠ¨ï¼Œè€Œä¸”å”¯ä¸€å‡†ç¡®çš„åªæœ‰æ‰€è®¾å€¼æœ€å¤§çš„é‚£ä¸ªå­å…ƒç´ ï¼Œå…¶ä»–å­å…ƒç´ åˆ™æ··æ·†ã€‚ 12345678910111213141516ï¼ˆæ³¨ï¼šæ‰€æœ‰å­å…ƒç´ é«˜åº¦ä¸º height: 100pxï¼‰åŸä»¥ä¸ºï¼š parent---------------------------------------------------- | 50px childB | 25px childA childC---------------------------------------------------- parentå®é™…ä¸Šï¼š parent---------------------------------------------------- | 50px | 50px + 25px | 50px - 25px childA childB childC---------------------------------------------------- parent ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;title&gt;CSSå¤–è¾¹è·å¡Œé™·&lt;/title&gt; &lt;/head&gt; &lt;style type=\"text/css\"&gt; .parent &#123; background-color: black; height: 500px; overflow: hidden; width: 500px; &#125; .parent div &#123; display: inline-block; /*åŒ…å«äº† wrapper */ &#125; .childA &#123; background-color: greenyellow; height: 100px; margin: 50px 0; width: 100px; &#125; .childB &#123; background-color: aliceblue; height: 100px; width: 100px; &#125; .childC &#123; background-color: orangered; height: 100px; margin: 25px 0; width: 100px; &#125; /* æ­¤ä¸ºè§£å†³åŠæ³• */ /* .wrapper &#123; height: 100%; overflow: hidden; &#125; */ &lt;/style&gt; &lt;body&gt; &lt;div class=\"parent\"&gt; &lt;div class=\"wrapper\"&gt; &lt;div class=\"childA\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=\"wrapper\"&gt; &lt;div class=\"childB\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=\"wrapper\"&gt; &lt;div class=\"childC\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt; æç¤ºç‚¹ï¼š é»˜è®¤å¯¹é½æ–¹å¼ï¼šåŸºçº¿å¯¹é½ ç©ºå…ƒç´ çš„åŸºçº¿ä½ç½®ï¼šåº•éƒ¨ block å…ƒç´ çš„ inline å†…å®¹é»˜è®¤ä½ç½®ï¼šblock å…ƒç´ çš„é¡¶éƒ¨ ç›’å­çš„é»˜è®¤ç±»å‹ï¼š content-box å¯åŸºäºæ­¤ 4 ç‚¹ï¼Œç»“åˆä»£ç çœ‹é¡µé¢å‘ˆç°æ•ˆæœï¼Œåº”è¯¥æç¤ºçš„å¾ˆæ¸…æ™°äº†ï¼Œè„‘è¡¥ä¸€ä¸‹å³å¯~ å‚è€ƒæ–‡æ¡£ W3C MDN ç›’æ¨¡å‹ BFC ç¥å¥‡èƒŒåçš„åŸç† ä»€ä¹ˆæ˜¯ BFCã€IFCã€GFC å’Œ FFC ä»æ¦‚å¿µåˆ°ä¸šåŠ¡æ¥çœ‹ To B å’Œ To C äº§å“åŒºåˆ«åœ¨å“ª é™„å½•æ­¤ç¯‡åŒæ ·ä¸ºåŸå†™çš„æ–‡ç« çš„ä¸€æ¬¡æ”¹ç‰ˆï¼Œæ›´æ–°åŸæœ‰çš„é”™è¯¯ï¼Œè®°å½•æ–°çš„ä½“ä¼šï¼","categories":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"},{"name":"BFC æ¨¡å¼","slug":"BFC-æ¨¡å¼","permalink":"https://monocy.gitee.io/tags/BFC-æ¨¡å¼/"}]},{"title":"æ°´å¹³å‚ç›´å±…ä¸­","slug":"æ°´å¹³å‚ç›´å±…ä¸­","date":"2019-04-27T05:34:53.000Z","updated":"2022-07-26T13:13:42.504Z","comments":true,"path":"2019/04/27/æ°´å¹³å‚ç›´å±…ä¸­/","link":"","permalink":"https://monocy.gitee.io/2019/04/27/æ°´å¹³å‚ç›´å±…ä¸­/","excerpt":"å‰è¨€åœ¨é¢è¯•ä¸­ï¼Œé¢è¯•å®˜è€ƒå¯Ÿ CSS æ–¹é¢çš„å†…å®¹æ—¶ï¼Œæ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ°´å¹³å‚ç›´å±…ä¸­é—®é¢˜ã€‚å…¶å®ä¸ä»…ä»…æ˜¯é¢æ˜¯ï¼Œåœ¨å·¥ä½œä¸­ä¹Ÿå¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„å¸ƒå±€ï¼Œå› æ­¤å¯¹äºä¸€äº›å¸¸è§çš„æ°´å¹³å‚ç›´å±…ä¸­çš„æ–¹æ³•ï¼Œåœ¨æ­¤åšäº†ä¸€ç•ªæ€»ç»“ï¼Œä»¥ä½œå¤‡å¿˜ã€‚","text":"å‰è¨€åœ¨é¢è¯•ä¸­ï¼Œé¢è¯•å®˜è€ƒå¯Ÿ CSS æ–¹é¢çš„å†…å®¹æ—¶ï¼Œæ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ°´å¹³å‚ç›´å±…ä¸­é—®é¢˜ã€‚å…¶å®ä¸ä»…ä»…æ˜¯é¢æ˜¯ï¼Œåœ¨å·¥ä½œä¸­ä¹Ÿå¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·çš„å¸ƒå±€ï¼Œå› æ­¤å¯¹äºä¸€äº›å¸¸è§çš„æ°´å¹³å‚ç›´å±…ä¸­çš„æ–¹æ³•ï¼Œåœ¨æ­¤åšäº†ä¸€ç•ªæ€»ç»“ï¼Œä»¥ä½œå¤‡å¿˜ã€‚ å—çº§å…ƒç´ çš„æ°´å¹³å‚ç›´å±…ä¸­å®šä½å¯¹äºå—çº§å…ƒç´ çš„å‚ç›´å±…ä¸­å®šä½ï¼Œæˆ‘ä»¬å¤„ç†çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå°±ä»¥ä¸‹å…¬å…±æ¨¡æ¿åšè®¨è®ºï¼š 123&lt;div class=\"parent parent-special\"&gt; &lt;div class=\"child child-common\"&gt;&lt;/div&gt;&lt;/div&gt; 12345678910111213141516.parent &#123; background-color: black; position: relative; height: 400px; width: 400px;&#125;.parent-special &#123;&#125;.child &#123;&#125;.child-common &#123; background-color: red;&#125; position + marginå®šä½é…åˆ margin æ¥å®ç°çš„æ–¹æ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œç”±äºå­å…ƒç´ æœ‰å®šå®½å®šé«˜çš„é™åˆ¶ï¼Œå› æ­¤é€‚ç”¨äºä¸€äº›ç®€å•çš„å¸ƒå±€ï¼Œæ¯”å¦‚å¼¹æ¡†ä¹‹ç±»çš„ï¼ˆè¿™é‡Œä»…è®¨è®ºç»å¯¹å®šä½ï¼‰ã€‚ 12345678.child &#123; height: 100px; width: 100px; position: absolute; left: 50%; top: 50%; margin: -50px 0 0 -50px;&#125; position + transformå‰é¢çš„æ–¹æ³•å¯¹äºå­å…ƒç´ å¤§å°å›ºå®šçš„æƒ…å†µå¯ä»¥é€‚ç”¨ï¼Œä½†æ˜¯å¯¹äºå­å…ƒç´ å¤§å°ä¸å›ºå®šçš„æƒ…å†µå´æ²¡æ³•å¤„ç†ï¼Œå¥½åœ¨ CSS3 çš„æ–°å±æ€§ transform èƒ½å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ 12345678.child &#123; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); height: 30%; width: 30%;&#125; æ³¨ï¼šè™½ç„¶ transform èƒ½è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å½“ width å’Œ height ç™¾åˆ†æ¯”è®¡ç®—åçš„å€¼ä¸ºéå¶æ•°æ—¶ï¼Œé€šè¿‡ translate è¡¥æ­£ä¼šé€ æˆé¡µé¢å­—ä½“æ¨¡ç³Šä»¥åŠæŠ–åŠ¨é—®é¢˜ï¼ˆæŠ–åŠ¨å¯ç”¨ 3d æ ¡æ­£ï¼Œæ¨¡ç³Šæ— è§£ï¼‰ï¼Œå› æ­¤è¿™ä¸ªå¾—è§†æƒ…å†µä½¿ç”¨ã€‚ table-cellå›é¡¾æ¯”è¾ƒâ€ä¹…è¿œâ€çš„è§£å†³æ–¹æ³•é‚£å°±æ˜¯ä¼ ç»Ÿçš„ table-cell å¸ƒå±€äº†ï¼Œçˆ¶çº§çš„ display å±æ€§ä¸º tableï¼Œå­å…ƒç´ è®¾ç½®ä¸º table-cellï¼Œé…åˆ vertical-alignï¼Œå°±èƒ½å®ç°å‚ç›´å±…ä¸­ï¼Œä¸è¿‡æ­¤å¤„çš„å±…ä¸­åå‘äºè¡Œå†…å…ƒç´ ã€‚ 12345678910.parent-special &#123; display: table; /* ä¸ºäº†è¡¨ç°å¾—æ›´é²œæ˜ä¸€ç‚¹ */ padding: 30px;&#125;.child &#123; display: table-cell; vertical-align: middle;&#125; æ³¨ï¼š è¿™ç§æƒ…å†µæ¯”è¾ƒé€‚åˆäºå­å…ƒç´ å†…å®¹å‘ˆç°å½¢å¼ä¸ºä¸ºè¡Œå†…çš„æƒ…å†µï¼Œå­å…ƒç´ æ­¤æ—¶ä¼šå æ»¡æ•´ä¸ªçˆ¶å…ƒç´ ã€‚ margin: autoæˆ‘ä»¬çŸ¥é“ margin: auto ä¼šè‡ªåŠ¨è¡¥å……å·¦å³ä¸¤ä¾§çš„å†…å®¹ï¼Œå¦‚æœèƒ½å¤Ÿå®ç°è‡ªåŠ¨è¡¥å……ä¸Šä¸‹ä¸¤ç«¯çš„å†…å®¹é‚£ä¸å°±èƒ½å¤Ÿå®ç°å‚ç›´å±…ä¸­äº†ä¹ˆï¼å› æ­¤æˆ‘ä»¬é€šè¿‡å®šä½æ¥â€œæç¤ºâ€è‡ªåŠ¨è¡¥å…¨ã€‚ 12345678910.child &#123; position: absolute; top: 0; bottom: 0; left: 0; right: 0; margin: auto; height: 30%; width: 30%;&#125; ç„¶è€Œè¿™ç§å†™æ³•ä¼šè®©å­å…ƒç´ æ’‘æ»¡æ•´ä¸ªçˆ¶çº§ï¼Œé€‚ç”¨äºä»…åŒ…å«ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µï¼›å¦‚æœåªæƒ³è¦å‚ç›´å±…ä¸­ï¼ˆå­å…ƒç´ çš„ä¸Šä¸‹ margin ä¼šè¢«å¡«æ»¡ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥è¿™ä¹ˆä¿®æ”¹ï¼š 12345678910.child &#123; position: absolute; top: 0; bottom: 0; margin: auto 0; height: 30%; width: 30%; /* å–å…¶ä¸€ */ left/right: 0;&#125; flexflex å±æ€§å°±ä¸åšè¿‡å¤šè¯´æ˜ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œé˜®ä¸€å³°çš„åšå®¢æœ‰å¾ˆè¯¦ç»†çš„å®ä¾‹ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼ˆgrid å¯ç±»æ¯”ï¼‰ã€‚ 12345678910.parent-special &#123; display: flex; justify-content: center; align-items: center;&#125;.child &#123; height: 30%; width: 30%;&#125; è¡Œå†…å…ƒç´ çš„å‚ç›´å±…ä¸­å®šä½è¡Œå†…å…ƒç´ çš„å‚ç›´å±…ä¸­é¢è¯•ä¸­ä¸æ˜¯ç‰¹åˆ«å¸¸è§ï¼ˆæ°´å¹³å±…ä¸­è°éƒ½ä¼šï¼Œæ­¤å¤„ passï¼‰ï¼Œä½†å·¥ä½œä¸­è¿˜æ˜¯é‡åˆ°ä¸å°‘ï¼Œå…ˆå‰çš„ã€Šæµ…è°ˆè¡Œå†…å…ƒç´ ã€‹ä¸€æ–‡ä¸­ä¹Ÿæœ‰ç®€å•ä»‹ç»ï¼Œæ­¤å¤„ä»¥ä»¥ä¸‹å…¬å…±æ¨¡æ¿åšè®¨è®ºï¼š 1&lt;span class=\"inline\"&gt;è¡Œå†…å…ƒç´ å†…å®¹&lt;/span&gt; line-height + font-size + vertical-alignæ­¤ä¸ºåœ¨ä¸æ”¹å˜è¡Œå†…å…ƒç´ å±æ€§çš„æƒ…å†µä¸‹ï¼Œé€šç”¨çš„å±…ä¸­æ–¹å¼ 12345.inline &#123; font-size: 12px; line-height: 20px; vertical-align: middle;&#125; æ³¨ï¼Œå½“è¯¥è¡Œå†…å…ƒç´ æœ‰åŒçº§çš„è¡Œå†…å…ƒç´ ä½äºå…¶å·¦å³æ—¶ï¼Œ vertical-align éœ€ç»Ÿä¸€ä¸€ä¸‹ï¼Œå› ä¸ºé»˜è®¤çš„å€¼ä¸º baseline inline-block + ä¼ªå…ƒç´ å¦å¤–æ¯”è¾ƒâ€œéªšæ°”â€çš„å¤„ç†æ–¹æ³•å°±æ˜¯æ”¹å˜ç›’å­çš„ display çŠ¶æ€ï¼Œç„¶åç»™äºˆä¸€ä¸ªå®šä½çš„ä¸­å¿ƒç‚¹ï¼ˆé»˜è®¤æ²¡æœ‰çš„ï¼‰ï¼Œä»¥æ­¤ä¸­å¿ƒç‚¹æ¥å½±å“å…¶ä½™çš„åŒ¿åè¡Œç›’å­çš„å®šä½ã€‚ 123456789101112.inline &#123; height: 100px; display: inline-block; vertical-align: middle;&#125;.inline::before &#123; height: 100%; content: ''; display: inline-block; vertical-align: middle;&#125; æ³¨ï¼šæ­¤æ–¹æ³•å¯è¡Œæ˜¯å¯è¡Œï¼Œä½†æ˜¯æµè§ˆå™¨åœ¨æ¸²æŸ“ç©ºèŠ‚ç‚¹æ—¶ï¼Œä»ç„¶ä¼šå ä¸€ä¸ªç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ°´å¹³å±…ä¸­æ€»ä¼šå·®é‚£ä¹ˆä¸€ç‚¹ç‚¹ï¼Œå¦‚æœä¸æ˜¯ç‰¹åˆ«æŒ‘å‰”é‚£ä¹ˆå°±æ²¡ä»€ä¹ˆå¤§é—®é¢˜ã€‚ å‚è€ƒæ–‡ç«  Flex å¸ƒå±€è¯­æ³•ç¯‡ Flex å¸ƒå±€å®ä¾‹ç¯‡ ä¸€äº›é¢è¯•æ—¶å…³äº CSS çš„é—®é¢˜ é™„å½•æœ¬ç¯‡ä¸ºæˆ‘çš„ segmentfault ä¸­çš„æ–‡ç« çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºåˆšå¥½æ¸©æ•… CSS æ—¶åˆçœ‹åˆ°äº†å¸ƒå±€è¿™éƒ¨åˆ†å†…å®¹ï¼Œå› æ­¤å†æ€»ç»“ä¸€æ¬¡ï¼Œè®°å½•ä¸‹ä¸€äº›æ–°çš„æ”¶è·ï¼ŒåŒæ—¶ä¿®æ”¹ä¸€ä¸‹å½“æ—¶å­¦ä¹ è®°å½•çš„ä¸€äº›é”™è¯¯ç‚¹ã€‚","categories":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"}]},{"title":"æµ…è°ˆè¡Œå†…å…ƒç´ ","slug":"æµ…è°ˆè¡Œå†…å…ƒç´ ","date":"2019-04-18T10:11:34.000Z","updated":"2022-07-26T13:14:13.478Z","comments":true,"path":"2019/04/18/æµ…è°ˆè¡Œå†…å…ƒç´ /","link":"","permalink":"https://monocy.gitee.io/2019/04/18/æµ…è°ˆè¡Œå†…å…ƒç´ /","excerpt":"å‰è¨€æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°å¾ˆå¤šå¥‡æ€ªçš„æ ·å¼é”™ä½é—®é¢˜ï¼Œè§£å†³é—®é¢˜ä¹‹ä½™ï¼Œæœ‰é‡æ–°æ¸©ä¹ äº†ä¸€ä¸‹æ ·å¼æ–¹é¢çš„çŸ¥è¯†ã€‚ä¸€èˆ¬å—çº§å…ƒç´ çš„é—®é¢˜éƒ½æ¯”è¾ƒå¥½è§£å†³ï¼Œè€Œè¡Œå†…å…ƒç´ çš„é—®é¢˜è¿˜æ€»æ˜¯å¾—è¯•è¯•ï¼Œå¯èƒ½æ˜¯ç†è§£çš„ä¸å¤Ÿé€å½»ï¼Œå› æ­¤æ­¤ç¯‡ç®—æ˜¯æˆ‘å¯¹è¡Œå†…å…ƒç´ åšçš„ä¸€ä¸ªç®€çŸ­çš„ç¬”è®°å§ã€‚","text":"å‰è¨€æœ€è¿‘åœ¨å·¥ä½œä¸­é‡åˆ°å¾ˆå¤šå¥‡æ€ªçš„æ ·å¼é”™ä½é—®é¢˜ï¼Œè§£å†³é—®é¢˜ä¹‹ä½™ï¼Œæœ‰é‡æ–°æ¸©ä¹ äº†ä¸€ä¸‹æ ·å¼æ–¹é¢çš„çŸ¥è¯†ã€‚ä¸€èˆ¬å—çº§å…ƒç´ çš„é—®é¢˜éƒ½æ¯”è¾ƒå¥½è§£å†³ï¼Œè€Œè¡Œå†…å…ƒç´ çš„é—®é¢˜è¿˜æ€»æ˜¯å¾—è¯•è¯•ï¼Œå¯èƒ½æ˜¯ç†è§£çš„ä¸å¤Ÿé€å½»ï¼Œå› æ­¤æ­¤ç¯‡ç®—æ˜¯æˆ‘å¯¹è¡Œå†…å…ƒç´ åšçš„ä¸€ä¸ªç®€çŸ­çš„ç¬”è®°å§ã€‚ åŸºç¡€çŸ¥è¯†ä»€ä¹ˆæ˜¯è¡Œå†…å…ƒç´ è¡Œå†…å…ƒç´ ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŒ‡åœ¨åœ¨ä¸€è¡Œå†…ä¸æ¢è¡Œçš„å…ƒç´ ã€‚é€šä¿—æ¥è®²ï¼Œè¡Œå†…å…ƒç´ ç›¸å½“äºâ€œå¥å­â€ï¼Œå…¶å†…å¯ä»¥åŒ…å«æ•°æ®ä¸å…¶å®ƒè¡Œå†…å…ƒç´ ã€‚ ä¸€ä¸ªè¡Œå†…å…ƒç´ åªå æ®å®ƒå¯¹åº”æ ‡ç­¾çš„è¾¹æ¡†æ‰€åŒ…å«çš„ç©ºé—´ã€‚MDN â€”â€” è¡Œå†…å…ƒç´  å¸¸è§çš„è¡Œå†…å…ƒç´  b, big, i, small, tt abbr, acronym, cite, code, dfn, em, kbd, strong, samp, var a, bdo, br, img, map, object, q, script, span, sub, sup button, input, label, select, textarea è¡Œç›’å­ä¸æµ®åŠ¨æ–‡å­—ç¯ç»•ç‰¹æ•ˆword æ–‡æ¡£å†…æœ‰â€œæ–‡å­—ç¯ç»•â€ä¸€è¡¨æ ¼å±æ€§ï¼Œèƒ½å¤Ÿå®ç°å›¾ç‰‡å‘¨å›´ç¯ç»•æ–‡å­—ï¼Œä¾‹å¦‚ï¼š å½“ç„¶ï¼Œä¸Šå›¾æ˜¯ html å®ç°çš„ï¼Œå®ç°æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼ˆä¾‹ 1-1ï¼‰ï¼š 12345678&lt;figure class=\"test-figure\"&gt; &lt;img class=\"test-img\" src=\"./cat.jpg\" alt=\"\" /&gt; &lt;span &gt;Lorem, ipsum dolor sit amet consectetur adipisicing elit. Alias, dolore qui obcaecati fuga ratione nobis dolor veniam soluta sequi rem voluptatem quo similique quis doloribus fugit autem! Quas, ipsum reiciendis?&lt;/span &gt;&lt;/figure&gt; 1234567.test-figure &#123; width: 300px;&#125;.test-img &#123; width: 100px; float: left;&#125; æ–‡å­—ç¯ç»•åŸç†ä»£ç å¾ˆç®€å•ï¼Œå®ç°éš¾åº¦ä¹Ÿä¸å¤§ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™èƒ½å¤Ÿå®ç°å‘¢ï¼Ÿå®ƒå®ç°çš„åŸç†åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…¶å®ï¼Œåœ¨æˆ‘ä»¬æ‰€çŸ¥çš„ç›’å­æ¨¡å‹ä¸­ï¼Œé™¤äº†åŸºç¡€çš„å—çº§ç›’å­å’Œè¡Œå†…ç›’å­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒéšç§˜çš„åŒ¿åç›’å­ã€‚å‚è€ƒä¸€ä¸ªä¾‹å­ï¼ˆä¾‹ 1-2ï¼‰ï¼š 1234&lt;p&gt; æˆ‘åœ¨å—çº§ç›’å­çš„åŒ¿åè¡Œå†…ç›’ä¸­ &lt;span&gt;æˆ‘åœ¨è¡Œå†…ç›’å­çš„åŒ¿åè¡Œå†…ç›’ä¸­&lt;/span&gt;&lt;/p&gt; å›å¿†ä¸€ä¸‹ CSS é€‰æ‹©å™¨ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªç”¨çš„ä¸æ˜¯å¾ˆå¤šçš„ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼š::first-letterã€::first-lineï¼Œåœ¨æ­¤ä¾‹ä¸­ï¼Œå®ƒä»¬é€‰ä¸­çš„å…¶å®å°±æ˜¯ç›’å­æ¨¡å‹ä¸­çš„åŒ¿åç›’å­çš„å†…å®¹ã€‚é‚£è¿™ä¸ªå’Œæˆ‘ä»¬æ‰€è¯´çš„â€œæ–‡å­—ç¯ç»•â€åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ æˆ‘ä»¬çŸ¥é“ï¼Œæµ®åŠ¨ä¼šè®©å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œå› æ­¤å®ƒä¸ä¼šå†å‘éæµ®åŠ¨å…ƒç´ å½±å“å…¶å®ƒå…ƒç´ çš„å¸ƒå±€ï¼Œå› æ­¤åœ¨ä¾‹ 1-1 ä¸­ï¼Œæˆ‘ä»¬çš„ img æ ‡ç­¾å·²ç»è„±ç¦»äº†æ–‡æ¡£æµï¼Œspan æ ‡ç­¾ æ­¤æ—¶åœ¨å±‚çº§ä¸Šä¼šç½®äºå…¶ä¸‹ï¼Œå¦‚å›¾ï¼š ä½†æ˜¯ï¼float å…ƒç´ å†…çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ img çš„å†…å®¹ï¼Œå®ƒå¹¶ä¸ä¼šè·Ÿéš img æ ‡ç­¾ä¸€èµ·æµ®åŠ¨ï¼Œè€Œæ˜¯ä»ç„¶ä¼šå­˜åœ¨äºæ­£å¸¸çš„æ–‡æ¡£æµä¸­ï¼ŒåŒæ—¶ä¹Ÿä¼šè®°ä½ img æ ‡ç­¾çš„å¤§å°ï¼Œå› æ­¤åœ¨åé¢çš„åŒ¿åè¡Œç›’å­ï¼ˆspan ä¸­çš„ï¼‰åœ¨è®¡ç®—å…¶åº”è¯¥æ‰€åœ¨çš„ä½ç½®æ—¶ï¼Œä¼šç»™ float å…ƒç´ ç•™å‡ºå®ƒæ‰€éœ€è¦çš„ç©ºé—´ï¼Œä¹Ÿå°±å‡ºç°äº†â€œæ–‡å­—ç¯ç»•â€çš„æ ·å¼ã€‚ å¸¸ç”¨ä¼ªå…ƒç´ ï¼š ::beforeã€::after çŸ¥è¯†æ‹“å±•å› ä¸ºæµ®åŠ¨å¹¶ä¸ç®—æ˜¯å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œå› æ­¤åœ¨å¼€å‘ä¸­è¿˜ä¼šå‡ºç°ä¸å°‘ bugï¼Œæ¯”å¦‚ï¼šâ€œé«˜åº¦å¡Œé™·â€ï¼Œåœ¨å¤„ç†è¿™ç±»é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„æ–¹æ³•æ˜¯ clear: both; ï¼Œä¾‹å¦‚ï¼ˆä¾‹ 1-3ï¼‰ï¼š 12345&lt;!-- è¿™é‡Œå°±ç”¨ç±»åè¡¨ç¤ºç›¸åº”æ•ˆæœ --&gt;&lt;div&gt; &lt;p class=\"float\"&gt;&lt;/p&gt; &lt;div class=\"clear-both\"&gt;&lt;/div&gt;&lt;/div&gt; ä½†æ˜¯æµè§ˆå™¨åœ¨å¯¹è¿™åšå¤„ç†æ—¶ï¼Œä¼šä¸ºæµ®åŠ¨å…ƒç´ ç•™ä¸‹è¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ç»™æˆ‘ä»¬çš„å…ƒç´ åŠ éšæ€§çš„ paddingï¼Œä»è€Œå®ç°æ¢è¡Œçš„æ•ˆæœï¼ˆæ³¨æ„ï¼š span æ ‡ç­¾ä¸ç”Ÿæ•ˆï¼Œdisplay: block æ‰ç”Ÿæ•ˆï¼‰ã€‚ è¡Œå†…å…ƒç´ çš„æ’ç‰ˆè¡Œç›’å­çš„æ„é€ å¤„ç†è¡Œå†…å…ƒç´ æ—¶ï¼Œæ¯”è¾ƒä»¤äººå¤´ç–¼çš„å°±æ˜¯å®ƒä»¬çš„å¯¹é½æ–¹å¼äº†ã€‚è™½ç„¶å¯¹åº”çš„çŸ¥è¯†éƒ½æ¯”è¾ƒäº†è§£ï¼Œåœ¨é¡¹ç›®ä¸­é‡åˆ°å¤šä¸ªè¡Œå†…å…ƒç´ æ²¡æœ‰å¯¹é½æ—¶ï¼Œç¨å¾®å¤šå‡ æ¬¡å°è¯•åŸºæœ¬ä¸Šä¹Ÿèƒ½å¤Ÿæå®šå¯¹é½ï¼Œä¸‡ä¸€å®åœ¨å¼„ä¸å®šï¼Œä¸€ä¸ª flex å¸ƒå±€åŸºæœ¬èƒ½è§£å†³æ‰€æœ‰çš„ç—›è‹¦ã€‚ä½†æ˜¯ï¼Œä»…ä»…è¿™æ ·ä¹Ÿå°±æ­¢æ­¥äºæ­¤äº†ï¼Œä¸æ˜ç™½çš„ç‚¹æœ€ç»ˆä¹Ÿå¼„ä¸æ˜ç™½ï¼Œå› æ­¤ï¼Œæˆ‘ç¨å¾®èŠ±äº†äº›æ—¶é—´å»äº†è§£äº†ä¸€ä¸‹è¡Œç›’å­åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚ æ­¤å¤„å¼•ç”¨ã€Šç²¾é€š CSSï¼Œé«˜çº§ Web è§£å†³æ–¹æ¡ˆã€‹é‡Œé¢çš„ä¸€å¼ å›¾ï¼š è¿™é‡Œå°†è¡Œå†…æ ¼å¼åŒ–æ¨¡å‹æè¿°å¾ˆæ¸…æ™°ã€‚ç”±äºè¡Œå†…ç›’å­ä¸èƒ½æ˜¾ç¤ºçš„è®¾ç½®é«˜åº¦ï¼Œå› æ­¤å†³å®šè¡Œå†…å…ƒç´ çš„é«˜åº¦é‚£å°±å‰©ä¸‹ï¼šå†…å®¹é«˜åº¦ã€‚è€Œå½±å“å†…å®¹é«˜åº¦çš„æœ‰ä¸¤å±æ€§ï¼Œåˆ†åˆ«æ˜¯ï¼š line-height ä¸ font-sizeï¼ˆå½“ç„¶ font-family ä¹Ÿä¼šæœ‰ä¸€å®šå½±å“ï¼‰ã€‚ è¡Œç›’å­çš„è¡Œé«˜è®¡ç®—æ–¹æ³•æ˜¯ï¼šè¡Œç›’å­çš„æ•´ä½“é«˜åº¦å‡å»font-sizeï¼Œå‰©ä½™çš„å€¼å†å¹³å‡åˆ†æˆä¸¤ä»½ï¼Œä¹Ÿå°±æ˜¯å›¾å†…çš„â€œåŠé“…ç©ºâ€ã€‚ä¾‹å¦‚ï¼š 1234.inline-box &#123; line-height: 28px; font-size: 12px;&#125; é‚£ä¹ˆâ€œåŠé“…ç©ºâ€ä¸º 8pxã€‚åŠ å…¥ line-height å€¼ä¸ºæ•°å­—ï¼Œå¦‚ï¼š line-height: 1.5ï¼Œåˆ™è¡¨æ˜å½“å‰ line-height ä¸ºå½“å‰ font-size çš„ 1.5 å€ï¼Œè®¡ç®—æ–¹æ³•ä¸å˜ã€‚ å› æ­¤åœ¨ç¼–å†™æ ·å¼æ—¶ï¼Œå¦‚æœå‘ç°å’Œè®¾è®¡ç¨¿ä¸ä¸€è‡´çš„æƒ…å†µæ—¶ï¼Œè‹¥æ˜¯è¡Œå†…å…ƒç´ ï¼Œé‚£ä¹ˆå°±å¯ä»¥è€ƒè™‘ä¸‹æ˜¯å¦æ˜¯è¡Œé«˜é€ æˆçš„é—®é¢˜äº†ã€‚ è¡Œå†…å…ƒç´ çš„å¯¹é½æ–¹å¼é™¤äº† line-height ä¹‹å¤–ï¼Œå½±å“è¡Œå†…å…ƒç´ å¯¹é½çš„å±æ€§é‚£å°±æ˜¯ vertical-align äº†ã€‚å®ƒçš„é»˜è®¤å¯¹é½å±æ€§å€¼ä¸º baselineã€‚é™¤äº† baseline ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå¯¹é½æ–¹å¼ï¼Œå¦‚ï¼š middle, text-top, bottom ç­‰ç­‰ï¼ˆæ›´å¤šçš„å¯å‚é˜… MDNï¼‰ï¼Œä¸¾ä¸ªä¾‹å­ï¼š 1234567&lt;style&gt; span &#123; vertical-align: 'middle'; &#125;&lt;/style&gt;&lt;span&gt;This is a paragraph, and this is a &lt;em&gt;special&lt;/em&gt; word.&lt;/span&gt; è¡Œå†…å…ƒç´ å¯¹é½æ¯”è¾ƒå¸¸è§çš„é—®é¢˜åœ¨äºå›¾ç‰‡çš„å¯¹é½ï¼Œä¸€èˆ¬çš„è¡Œå†…å…ƒç´ å¯¹é½è¦ä¹ˆä»¤å…¶è¡Œé«˜ä¸€è‡´ï¼Œè¦ä¹ˆ vertical-align ç»Ÿä¸€é…ç½®åŒä¸€å€¼å³å¯ï¼Œä½†æ˜¯å›¾ç‰‡æ¯”è¾ƒç‰¹æ®Šï¼Œå¯¹é½å¤§æ¦‚åˆ†ä¸ºè¿™ä¹ˆå‡ ç§ï¼š topã€text-top middle baseline bottomã€text-bottomã€sub é™¤äº† middle ä¹‹å¤–ï¼Œå…¶ä½™çš„å¯¹é½æ–¹å¼ä¼šä»¥å›¾ç‰‡çš„é¡¶éƒ¨æˆ–è€…åº•éƒ¨æ¥ä¸å…¶ä½™è¡Œå†…å…ƒç´ å¯¹é½ï¼Œå› æ­¤è®¾ç½®å›¾ç‰‡å¯¹é½æ–¹å¼ä¸€èˆ¬ç”¨ vertical-align: middleï¼›åˆå› ä¸ºé»˜è®¤çš„è¡Œå†…å…ƒç´ å¯¹é½æ–¹å¼ä¸º vertical-align: baselineï¼Œå› æ­¤ä¼šå‡ºç°å›¾ç‰‡ä¸è¡Œå†…å…ƒç´ æ— æ³•å¯¹é½çš„æƒ…å†µï¼Œäº†è§£æ¸…æ¥šäº†è¿™ä¸€ç‚¹é‚£ä¹ˆé—®é¢˜å°±å¾ˆå¥½è§£å†³äº†ï¼Œå³ï¼šç»Ÿä¸€è¡Œå†…å…ƒç´ çš„ vertical-align çš„å¯¹é½æ–¹å¼ä¸º middle å³å¯ã€‚ æ³¨ï¼šline-height è®¾ç½®åä¼šå½±å“ topã€bottom ä½ç½®ï¼Œå…¨éƒ¨ä¿ç•™åŸæ¥çš„ä¸å˜åˆ™æ•ˆæœä¸€æ ·ï¼Œè¯¦è§ MDN å‚è€ƒæ–‡æ¡£ MDN è¡Œå†…å…ƒç´  åŒ¿åè¡Œå†…ç›’ æµ®åŠ¨å®šä½: float å±æ€§ ä¼ªç±»ä¸ä¼ªå…ƒç´  MDN vertical-align","categories":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"}]},{"title":"å‘å¸ƒä¸€ä¸ª vue åŒ…","slug":"å‘å¸ƒä¸€ä¸ª-vue-åŒ…","date":"2019-04-14T02:24:49.000Z","updated":"2022-07-26T13:16:12.743Z","comments":true,"path":"2019/04/14/å‘å¸ƒä¸€ä¸ª-vue-åŒ…/","link":"","permalink":"https://monocy.gitee.io/2019/04/14/å‘å¸ƒä¸€ä¸ª-vue-åŒ…/","excerpt":"å‰è¨€æ–‡ç« ç”¨æ¥çºªå½•æˆ‘å¦‚ä½•ä»é›¶å¼€å§‹ï¼Œé€šè¿‡ webpack4 å‘å¸ƒä¸€ä¸ª vue çš„ npm åŒ…ï¼ŒåŒæ—¶ä½¿ç”¨çš„æ˜¯ es6 è¯­æ³•ã€‚æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š webpack4 npm åŒ…çš„å‘å¸ƒ babel é…ç½® vue é…ç½®","text":"å‰è¨€æ–‡ç« ç”¨æ¥çºªå½•æˆ‘å¦‚ä½•ä»é›¶å¼€å§‹ï¼Œé€šè¿‡ webpack4 å‘å¸ƒä¸€ä¸ª vue çš„ npm åŒ…ï¼ŒåŒæ—¶ä½¿ç”¨çš„æ˜¯ es6 è¯­æ³•ã€‚æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š webpack4 npm åŒ…çš„å‘å¸ƒ babel é…ç½® vue é…ç½® å‡†å¤‡å·¥ä½œäº†è§£ç›¸å…³çŸ¥è¯†é¦–å…ˆéœ€è¦äº†è§£ç›¸å…³åŸºç¡€çŸ¥è¯†ï¼Œç”±ç®€å•åˆ°éš¾ï¼Œä¾æ¬¡åˆ—ä¸¾å¦‚ä¸‹ï¼š å¦‚ä½•å‘å¸ƒä¸€ä¸ª npm åŒ…ï¼Œéœ€è¦å‡†å¤‡äº›ä»€ä¹ˆï¼Ÿ webpack ç®€å•çš„æ‰“åŒ…é…ç½®éœ€è¦å“ªäº› å¦‚ä½•é…ç½® babel çš„ es6 æ”¯æŒ å¦‚ä½•é…ç½® vue çš„æ”¯æŒ å¦‚ä½•é…ç½® vue çš„ @ã€@src ç­‰å¼•ç”¨ åŒ…å†…çš„ vue çš„ç»„ä»¶è¯¥å¦‚ä½•ç¼–å†™ å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…çš„ä½“ç§¯ å‘åŒ…å‰çš„å‡†å¤‡åˆ›å»ºè´¦å·å‘å¸ƒ npm åŒ…é¦–å…ˆéœ€è¦ä¸€ä¸ª npm è´¦å·ã€‚npm æ·»åŠ è´¦å·çš„æ–¹æ³•ï¼š 12345npm adduser## ä¹‹åä¼šæç¤ºä½ è¾“å…¥ userName å’Œ password## ...## ä¿å­˜åç™»é™†npm login åˆ›å»ºå¾…å‘å¸ƒçš„åŒ…åˆ›å»ºåŒ…çš„æ–¹æ³•ä¹Ÿååˆ†ç®€å•ï¼Œæ­¤å¤„ç”¨ yarn æ¥åˆ›å»ºä¸€ä¸ª npm åŒ… 123# é¦–å…ˆè¿›å…¥å¯¹åº”æ–‡ä»¶å¤¹ï¼Œç„¶åyarn init# ä¹‹åæ ¹æ®æç¤ºè¾“å…¥é¡¹ç›®åç§°ã€ç‰ˆæœ¬ç­‰å†…å®¹å³å¯ è§„èŒƒåŒ– package.json å†…å®¹å½“ç„¶ï¼Œè¦å‘å¸ƒä¸€ä¸ªæ¯”è¾ƒè§„èŒƒçš„åŒ…ï¼Œä»…é»˜è®¤çš„ä¸€äº›é…ç½®è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œpackage.json çš„è¯¦ç»†é…ç½®å¯è§ã€Œä¸­æ–‡æ–‡æ¡£ã€ï¼Œæ€»ç»“è¿‡åï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®è¿™ä¹ˆä¸€äº›å­—æ®µï¼š name: é¡¹ç›®åç§° version: å½“å‰åŒ…çš„ç‰ˆæœ¬ keywords: å…³é”®è¯ï¼Œæ–¹ä¾¿æœç´¢ description: é¡¹ç›®æè¿° repository: é¡¹ç›®åœ°å€ author: ä½œè€… contributors: é¡¹ç›®å¼€å‘äººå‘˜ files: é¡¹ç›®åŒ…æ‹¬çš„æ–‡ä»¶ scripts: webpack æ‰“åŒ…ä¼šç”¨åˆ° style: é¡¹ç›®æ ·å¼æ‰€å­˜æ”¾çš„åœ°å€ license: è®¸å¯è¯ï¼ˆä¸€èˆ¬ MIT å³å¯ï¼‰ å®‰è£…æ—¶å¸¸ç”¨çš„æœ‰æ­¤ä¸‰ç§ä¾èµ–ï¼š dependencies: å¿…é¡»ä¾èµ–çš„åŒ…ï¼Œä¼šåœ¨ç”¨æˆ·å®‰è£…æ­¤åŒ…æ—¶ï¼Œå°†è¯¥éƒ¨åˆ†çš„åŒ…ä¸€å¹¶è£…ä¸Šï¼Œä¼šæ›´æ–°ç‰ˆæœ¬ï¼ˆå¦‚æœç‰ˆæœ¬è¿‡ä½ï¼‰ peerDependencies: ä¼šåœ¨ç”¨æˆ·å®‰è£…æ­¤åŒ…æ—¶ï¼Œå¦‚æœè¯¥æ¨¡å—å†…çš„åŒ…æ²¡æœ‰æˆ–è€…ç”¨æˆ·å®‰è£…çš„å¯¹åº”åŒ…ç‰ˆæœ¬è¿‡ä½ï¼Œä¼šç”¨ warning æç¤ºç”¨æˆ·å®‰è£…ï¼ˆä¸ä¼šè‡ªåŠ¨å®‰è£…ï¼‰ devDependencies: å¼€å‘æ—¶ä¼šç”¨åˆ°çš„åŒ…ï¼Œæ‰“åŒ…è‡³é¡¹ç›®çš„æˆ–è€… webpack é…ç½®éœ€è¦çš„ç­‰ç­‰ï¼Œä¸ä¼šå¸®ç”¨æˆ·å®‰è£…æˆ–è€…ç»™äºˆæç¤º å®ƒä»¬ä¾æ¬¡å¯¹åº”çš„æŒ‡ä»¤æ˜¯ï¼š 12345678# dependenciesyarn add xxx# peerDependenciesyarn add xxx -P# devDependenciesyarn add xxx -D åˆå§‹åŒ–åŒ…çš„é…ç½®ä¸¤ç§å®‰è£…æ–¹å¼ 12345# å…¨å±€å®‰è£…npm i -g webpack webpack-cli# é¡¹ç›®å®‰è£…yarn add webpack webpack-cli -D åœ¨å…ˆå‰åˆ›å»ºçš„é¡¹ç›®å†…æ–°å»ºä¸€ä¸ª webpack.config.js æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹åŸºç¡€å†…å®¹ 12345678910const path = require('path');// å¤„ç†è·¯å¾„function resolve(dir) &#123; return path.join(__dirname, dir);&#125;module.exports = &#123; mode: 'production',&#125;; æ³¨ï¼šwebpack4 ç‰ˆæœ¬è¿™ä¸¤ä¸ªæ˜¯åˆ†å¼€çš„ï¼Œéƒ½å¾—è£… é…ç½® webpackå‡ºå…¥å£æ–‡ä»¶é…ç½®1234567891011121314// åœ¨ module.exports æ–‡ä»¶å†…æ·»åŠ  entry å’Œ output ä¸¤å­—æ®µmodule.exports = &#123; // ... entry: &#123; &lt;è‡ªå®šä¹‰å&gt;: &lt;æ–‡ä»¶åœ°å€&gt; &#125;, output: &#123; path: &lt;è¾“å‡ºåœ°å€&gt;, publicPath: &lt;è™šæ‹Ÿè·¯å¾„ï¼Œserver è·¯å¾„æœ‰å…³&gt;, filename: &lt;è¾“å‡ºçš„æ–‡ä»¶å&gt;, library: &lt;åŒ…å&gt;, libraryTarget: &lt;åº“çš„æ”¯æŒï¼Œä¸€èˆ¬ç”¨ umd å³å¯&gt;, &#125;&#125; 12345678910111213// ä¾‹å­module.exports = &#123; entry: &#123; 'test': './src/index.js' &#125;, output: &#123; path: resolve('lib'), publicPath: '/lib/', filename: '[name].js', library: 'test', libraryTarget: 'umd' &#125;,&#125; loader é…ç½®vue-loaderç”±äºé¡¹ç›®æ˜¯å…³äº vue çš„ï¼Œå› æ­¤å¯å‚è€ƒã€Œvue-loader å®˜ç½‘ã€ï¼Œè·Ÿç€å¯¹åº”å†…å®¹é…ç½®å³å¯ï¼Œè§£æ vue çš„ loader é…ç½® 1234567891011121314151617181920212223// rules éƒ¨åˆ†&#123; test: /\\.vue$/, loader: 'vue-loader'&#125;// plugins éƒ¨åˆ†plugins: [ new VueLoaderPlugin()]// resolve éƒ¨åˆ†resolve: &#123; // è®¾ç½®åˆ«å alias: &#123; vue$: 'vue/dist/vue.esm.js', '@': resolve('./src'), '@mixins': resolve('./src/mixins'), '@base': resolve('./src/base'), &#125;, // æ–‡ä»¶åç¼€æ‰©å±•è¯†åˆ«ï¼ˆå¯¼å…¥æ—¶è‡ªåŠ¨åŠ åç¼€ï¼‰ extensions: ['*', '.js', '.vue']&#125;, es6 æ”¯æŒé¦–å…ˆåœ¨ webpack é…ç½®æ–‡ä»¶çš„ rules éƒ¨åˆ†(vue-loader é…ç½®çš„éƒ¨åˆ†)æ·»åŠ  js çš„è¯­æ³•è½¬è¯‘ 123456789// ...rules: [ &#123; test: /\\.js$/, loader: 'babel-loader', include: [resolve('src')], exclude: [resolve('node_modules')], &#125;,]; ç„¶ååœ¨é¡¹ç›®å†…æ·»åŠ  .babelrc æ–‡ä»¶ï¼Œå¹¶åœ¨å†…éƒ¨æ·»åŠ  es æ”¯æŒ 1234&#123; \"presets\": [\"@babel/preset-env\"], \"plugins\": [\"@babel/plugin-transform-runtime\"]&#125; æ­¤å¤„ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ babel é…ç½®ï¼Œå®˜ç½‘æœ‰è¯¦ç»†çš„è®²è§£ @babel/preset-env @babel/plugin-transform-runtime éœ€è¦å®‰è£…çš„ä¸€äº›ä¾èµ–ï¼š 123456789// devDependencies éƒ¨åˆ†\"@babel/core\": \"^7.4.3\",\"@babel/plugin-transform-runtime\": \"^7.4.3\",\"@babel/preset-env\": \"^7.4.3\",\"babel-core\": \"^7.0.0-bridge.0\",\"babel-loader\": \"^7.1.2\"// dependencies éƒ¨åˆ†\"@babel/runtime\": \"^7.4.3\" æ³¨æ„ï¼š babel-core é»˜è®¤å®‰è£…çš„æ˜¯ 6.x ç‰ˆæœ¬ï¼Œè£… 7 ç‰ˆæœ¬çš„å‘½ä»¤æ˜¯ï¼š yarn add babel-core@^7.0.0-bridge.0 -D css æ ·å¼æ”¯æŒç”±äº vue é¡¹ç›®ä¸­ç”¨çš„è¾ƒå¤šçš„æ˜¯ less æˆ–è€…æ˜¯ sassï¼Œå› æ­¤æ‰“åŒ…æ—¶éœ€è¦å¯¹æ ·å¼è¿›è¡Œè½¬è¯‘ï¼Œæ­¤æ—¶éœ€è¦æ ·å¼ç›¸å…³çš„ loaderã€‚webpack çš„é…ç½®ä¾‹å­å¦‚ä¸‹ï¼š 1234567891011121314151617181920// rules éƒ¨åˆ†&#123; test: /\\.(le|sc|sa|c)ss$/, use: [ MiniCssExtractPlugin.loader, 'css-loader', 'postcss-loader', 'less-loader' ], include: [ resolve('src') ]&#125;// plugins éƒ¨åˆ†plugins: [ // æå– CSS è‡³å•ä¸€æ–‡ä»¶å¤¹ new MiniCssExtractPlugin(&#123; filename: 'css/[name].[hash].css', chunkFilename: '[id].[hash].css', &#125;)] è¿™é‡Œæ³¨æ„åˆ°æœ€é¡¶éƒ¨é…ç½®çš„ä¸æ˜¯ style-loader/vue-style-loaderï¼Œå½“æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¼€å‘ç¯å¢ƒå³ï¼š&quot;mode&quot;: &quot;development&quot; æ—¶ï¼Œä½¿ç”¨ style-loader/vue-style-loaderï¼Œå½“ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒå³ï¼š&quot;mode&quot;: &quot;production&quot; æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨æ­¤å¤„çš„é…ç½®ï¼Œä»¥è¾¾åˆ°æœ€å°åŒ–å‹ç¼© å…¶ä½™èµ„æºæ”¯æŒå‚è€ƒå®˜æ–¹æ–‡æ¡£æ€»ç»“çš„é…ç½®å¦‚ä¸‹ï¼š 1234567891011&#123; test: /\\.(png|jpeg|jpg|gif|svg)$/i, loader: 'url-loader', options: &#123; limit: 8192, fallback: 'file-loader', name: '[name].[ext]?[hash]', outputPath: 'images/', publicPath: '' &#125;&#125; url-loader è½¬ä¸º base64 æ ¼å¼ï¼Œå¯¹äºå°æ–‡ä»¶ç±»å‹ç”¨è¿™ç§æ–¹æ³•å¤„ç†æ›´ä¼˜ï¼Œä½†æ˜¯å¤§æ–‡ä»¶æœ€å¥½è¿˜æ˜¯ç”¨ file-loader å¤„ç†ï¼Œå› æ­¤å¯¹æ­¤ loader è®¾å®šä¸€ä¸ªé™åˆ¶ï¼Œå¤§äºé˜ˆå€¼ 8K çš„è‡ªåŠ¨ç”¨ file-loader å¤„ç† æ–‡æ¡£ä¼ é€é—¨ optimization é…ç½®æ­¤éƒ¨åˆ†æ˜¯æœ€åå¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ä¼˜åŒ–ä¸€ä¸‹ä½“ç§¯ï¼Œwebpack4 ä¸­ç”Ÿäº§ç¯èŠ‚ç›¸å¯¹è¾ƒå¥½çš„ devtool æ¨¡å¼æ˜¯ cheap-module-source-mapï¼Œä½†æ˜¯å‹ç¼©å‡ºçš„æ–‡ä»¶å†…ä¼šåŒ…å« source-mapï¼Œå¦‚æœæƒ³å°†å…¶å»æ‰éœ€è¦é¢å¤–çš„ä¸€äº›é…ç½®ã€‚webpack é…ç½®ä¾‹å­ï¼š 123456789101112optimization: &#123; minimizer: [ new UglifyJsPlugin(&#123; uglifyOptions: &#123; // æœ€å¿«å‹ç¼©æ¨¡å¼ compress: false, mangle: true &#125; &#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;) ],&#125; æ­¤å¤„ä½¿ç”¨çš„æ˜¯ UglifyJsPlugin å‹ç¼© js ä»£ç ï¼Œåˆ é™¤ map éƒ¨åˆ†çš„å†…å®¹ï¼Œ OptimizeCssAssetsPlugin åˆ™æ˜¯å‹ç¼© CSS éƒ¨åˆ†çš„å†…å®¹ï¼Œå…·ä½“é…ç½®å¯å‚è€ƒå¯¹åº”çš„ npm æ’ä»¶æ–‡æ¡£ uglify éƒ¨åˆ† css éƒ¨åˆ† æ³¨ï¼šcss éƒ¨åˆ†æœ‰æ¨èé…åˆä½¿ç”¨ cssnanoï¼Œå› ä¸ºæœ¬é¡¹ç›® css å†…å®¹å°± 2 å±æ€§ï¼Œå› æ­¤ä¸åšè¿‡å¤šçš„é…ç½®äº†ï¼Œæœ‰éœ€è¦çš„å¯æŸ¥é˜…ç›¸å…³çŸ¥è¯†é…ç½®å³å¯ é™„å¸¦çš„é…ç½® clean-webpack-plugin: æ”¾åœ¨ plugins çš„æœ€åé¢ï¼Œå¯æ¯æ¬¡è‡ªåŠ¨æ¸…é™¤å¯¹åº”çš„ç”Ÿæˆæ–‡ä»¶ webpack-bundle-analyzer: å¯¹å‹ç¼©çš„æ–‡ä»¶çš„ä¾èµ–æ ‘çš„å¯è§†åŒ–åˆ†æï¼Œæ–¹ä¾¿åˆ†ææ˜¯å¦æœ‰å¤šä½™ä¾èµ– vue çš„é…ç½®å‘å¸ƒä¸€ä¸ª vue ç»„ä»¶æ—¶éœ€è¦ä¸ºç»„ä»¶æ·»åŠ  install æ–¹æ³•ï¼Œæ¯ä¸ªç»„ä»¶çš„æ–‡ä»¶ç›®å½•æ ‘å¤§è‡´ä¸º 1234fileName |-- index.js |-- src | -- component è¿™æ˜¯ä¸€ä¸ªç»„ä»¶çš„æ–‡ä»¶ç»“æ„ï¼Œå…¶ä¸­çš„ component å°±æ˜¯æˆ‘ä»¬çš„ vue ç»„ä»¶ï¼Œindex.js ä¸ºå‘å¤–ä¾§æš´éœ²è¯¥ç»„ä»¶çš„ä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œå…¶å†…å®¹åŸºæœ¬æ ¼å¼ä¸€è‡´ï¼Œä¾‹å¦‚ï¼š 12345678import myComponent from './src/component';// æ·»åŠ å•ç‹¬å¼•ç”¨çš„ install æ–¹æ³•myComponent.install = function (Vue, options = &#123;&#125;) &#123; Vue.component(myComponent.name, myComponent);&#125;;export default myComponent; æ•´ä½“çš„é…ç½®å¯ä»¥å‚è€ƒ elementUI çš„ç»„ä»¶å†™æ³•ï¼ŒåŸç†ä¸€æ ·ï¼Œæœ¬è´¨æ˜¯å¦‚ä½•æ·»åŠ  install æ–¹æ³• å¼€å‘æ—¶çš„ä¸€äº›ç–‘é—®å…³äº devtool çš„é€‰ç”¨å¼€å‘ç¯å¢ƒæ¨èï¼š cheap-module-eval-source-map ç”Ÿäº§ç¯å¢ƒæ¨èï¼šcheap-module-source-map ç†ç”±ï¼š å¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬è°ƒè¯•å¹¶ä¸å…³å¿ƒåˆ—ä¿¡æ¯ï¼Œè€Œä¸”å°±ç®— sourcemap æ²¡æœ‰åˆ—ï¼Œæœ‰äº›æµè§ˆå™¨å¼•æ“ï¼ˆä¾‹å¦‚ v8ï¼‰ ä¹Ÿä¼šç»™å‡ºåˆ—ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ cheap æ¨¡å¼å¯ä»¥å¤§å¹…æé«˜ souremap ç”Ÿæˆçš„æ•ˆç‡ ä½¿ç”¨ module å¯æ”¯æŒ babel è¿™ç§é¢„ç¼–è¯‘å·¥å…·ï¼ˆåœ¨ webpack é‡Œåšä¸º loader ä½¿ç”¨ï¼‰ ä½¿ç”¨ eval æ–¹å¼å¯å¤§å¹…æé«˜æŒç»­æ„å»ºæ•ˆç‡ï¼Œå‚è€ƒ webapck devtool é€Ÿåº¦å¯¹æ¯”åˆ—è¡¨ï¼Œè¿™å¯¹ç»å¸¸éœ€è¦è¾¹æ”¹è¾¹è°ƒçš„å‰ç«¯å¼€å‘è€Œè¨€éå¸¸é‡è¦ ç›´æ¥å°† sourceMap æ”¾å…¥æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œä¼šæ˜æ˜¾å¢å¤§æ–‡ä»¶çš„å¤§å°ï¼Œä¸åˆ©äºé™æ€æ–‡ä»¶çš„å¿«é€ŸåŠ è½½ï¼›è€Œå¤–è” .map æ—¶ï¼Œ.map æ–‡ä»¶åªä¼šåœ¨ F12 å¼€å¯æ—¶è¿›è¡Œä¸‹è½½ï¼ˆ sourceMap ä¸»è¦æœåŠ¡äºè°ƒè¯•ï¼‰ï¼Œæ•…æ¨èä½¿ç”¨å¤–è” .map çš„å½¢å¼ å‡çº§ babel çš„é—®é¢˜ä¾ç…§å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼Œå®‰è£…äº† @babel/core ç­‰æ’ä»¶ï¼Œå¹¶æ›´æ–°äº† .babelrc çš„é…ç½®ï¼Œä½†æ˜¯ build çš„æ—¶å€™æŠ¥é”™è¡¨ç¤º babel-core ç‰ˆæœ¬è¿‡ä½ï¼ˆç›´æ¥ yarn add babel-core è£…çš„æ˜¯ 6.x ç‰ˆæœ¬ï¼‰ï¼Œéœ€è¦ 7.0.0.0 ç‰ˆæœ¬ï¼Œå› æ­¤éœ€è¦æ›´æ–° babel-core 1yarn add babel-core@^7.0.0-bridge.0 -D æœ¬åœ°è°ƒè¯•åŒ…ä¸€èˆ¬é€šè¿‡ yarn link æ¥è°ƒè¯•ç¼–å†™çš„åŒ…ï¼Œä½†æ˜¯é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œé€šè¿‡ç›¸å¯¹è·¯å¾„æ¥å®‰è£…å¯¹åº”çš„åŒ… 1\"target-file\": \"file:&lt;relative-path&gt;\" ä½†æ˜¯ç¼ºç‚¹æ˜¯ï¼Œæ¯æ¬¡æ›´æ–°åéƒ½éœ€è¦åˆ é™¤åé‡æ–°å®‰è£…æ­¤åŒ…ï¼Œæˆ–è€…å°†åŒ…å‡çº§ä¸€ä¸‹ç‰ˆæœ¬ï¼Œç„¶åå†æ¬¡å®‰è£…æ‰èƒ½è°ƒè¯•ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ æœ€å¥½çš„é…ç½®æ–¹æ³•è¿˜æ˜¯é€šè¿‡ yarn link æ¥è°ƒè¯•ã€‚ æŒ‰éœ€å¼•å…¥æ¯”è§£æ„å¼•å…¥æ‰“åŒ…çš„ä½“ç§¯è¦å¤§ï¼Ÿåˆ†æäº†ä¸€ä¸‹æ‰“åŒ…åçš„ä»£ç ï¼Œå°±ç”¨ä»¥ä¸‹çš„ä¾‹å­æ¥è§£é‡Š 1234// æŒ‰éœ€import debouce from 'lodash/debounce';// è§£æ„import &#123; debounce &#125; from 'lodash'; é€šè¿‡ webpack-bundle-analyzer åˆ†ææ‰“åŒ…åçš„å†…å®¹ï¼Œå‘ç°å‰è€…æœ‰ lodash çš„æ¨¡å—ï¼Œåè€…æ²¡æœ‰ï¼Œåè€…æ²¡æœ‰çš„åŸå› æ—¶åœ¨å‹ç¼©çš„ä»£ç å†…æœ‰ require(&#39;lodash&#39;) å³ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® package.json çš„ lodash çš„ dependencies ä¾èµ–ï¼Œéœ€è¦å¼•ç”¨æ­¤åŒ…çš„é¡¹ç›®æœ‰å¯¹ lodash çš„ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè§£æ„è·å–çš„ debouce ä¸ä¼šå°†å¯¹åº”çš„å†…å®¹è¿åŒä»£ç ä¸€èµ·æ‰“åŒ…ï¼Œè€Œæ˜¯éœ€è¦ç”¨æˆ·å®‰è£…å¯¹åº”çš„åŒ…çš„ä¾èµ–ï¼Œå› æ­¤ä½“ç§¯ç›¸å¯¹ä¼šå˜å°ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨ libraryï¼Ÿä½¿ç”¨ umd æ˜¯ä¸ºäº†å…¼å®¹ commonjs å’Œ amd çš„æ–¹å¼ï¼Œä¸€èˆ¬å‘åŒ…ç”¨ umd å¯ä¿è¯ä¸ä¼šå‡ºå•¥é—®é¢˜ï¼Œå…¼å®¹æ€§ä¹Ÿå¾ˆæ£’ï¼Œè€Œä½¿ç”¨ umd åˆ™éœ€è¦é…ç½® libraryã€‚ path å’Œ publicPathä¸€èˆ¬æˆ‘ä»¬é…ç½®å¥½ path å…¶å®å°±èƒ½ä¸‡äº‹å¤§å‰äº†ï¼Œé‚£ publicPath ç©¶ç«Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®ç®€å•ç†è§£ï¼Œ path è‡³å½“å‰çš„é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆæœ¬åœ°ï¼‰ï¼ŒpublicPath æŒ‡çš„æ˜¯æœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼ˆæœåŠ¡å™¨ï¼‰,æ¯”å¦‚ï¼šå°†èµ„æºæ”¾åœ¨ CDN ä¸Šæ—¶ï¼ŒæŠŠ publicPath è®¾ç½®ä¸º CDN çš„å€¼å°±è¡Œäº†ã€‚ å‚è€ƒæ–‡æ¡£ webpack devtool é…ç½®å¯¹æ¯” webpack æ–‡æ¡£ webpack é…ç½®è¯¦æƒ…æ–‡æ¡£ webpack externals è¯¦è§£ webpack é…ç½® publicPath çš„ç†è§£ babel æ–‡æ¡£ babel-bridge vue-loader é™„å½•å®Œæ•´æ ·ä¾‹","categories":[{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/categories/Webpack/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"}]},{"title":"node ç¯å¢ƒé…ç½®ï¼ˆwindowsï¼‰","slug":"windows-node-ç¯å¢ƒé…ç½®","date":"2019-04-06T04:24:35.000Z","updated":"2022-07-26T13:17:48.731Z","comments":true,"path":"2019/04/06/windows-node-ç¯å¢ƒé…ç½®/","link":"","permalink":"https://monocy.gitee.io/2019/04/06/windows-node-ç¯å¢ƒé…ç½®/","excerpt":"å‰è¨€window ä¸Šå®‰è£… nodeï¼Œå…¶é»˜è®¤çš„åŒ…å®‰è£…åœ°å€åœ¨ C ç›˜ï¼Œç„¶è€Œä»é•¿æœŸæ¥çœ‹è¿™å¹¶ä¸æ˜¯å¾ˆå¥½ï¼ˆå¦‚æœä½  C ç›˜ç‰¹åˆ«å¤§å°±å½“æˆ‘æ²¡è¯´ï¼‰ï¼Œå› æ­¤å†™æ­¤ç¯‡ç”¨äºè®°å½• windows ä¸Š node éƒ¨åˆ†çš„å®‰è£…é…ç½®ï¼Œä»¥ä¾¿ä»Šåçš„æŸ¥é˜…ã€‚","text":"å‰è¨€window ä¸Šå®‰è£… nodeï¼Œå…¶é»˜è®¤çš„åŒ…å®‰è£…åœ°å€åœ¨ C ç›˜ï¼Œç„¶è€Œä»é•¿æœŸæ¥çœ‹è¿™å¹¶ä¸æ˜¯å¾ˆå¥½ï¼ˆå¦‚æœä½  C ç›˜ç‰¹åˆ«å¤§å°±å½“æˆ‘æ²¡è¯´ï¼‰ï¼Œå› æ­¤å†™æ­¤ç¯‡ç”¨äºè®°å½• windows ä¸Š node éƒ¨åˆ†çš„å®‰è£…é…ç½®ï¼Œä»¥ä¾¿ä»Šåçš„æŸ¥é˜…ã€‚ ç¯å¢ƒé…ç½®ä¸‹è½½å®‰è£… nodenode ä¸‹è½½åœ°å€ æ³¨ï¼š é™¤é…ç½®ç›®å½•å¤–ï¼Œå…¶ä½™ä¸€ç›´ç‚¹å‡» next å³å¯ è®¾ç½® cache å’Œ global å®‰è£…ä½ç½®åœ¨å®‰è£… node çš„æ–‡ä»¶å¤¹å†…æ·»åŠ  node_cache å’Œ node_modules ä¸¤ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«è¡¨ç¤º cache çš„å­˜å‚¨å’Œå…¨å±€ npm åŒ…çš„å­˜å‚¨åœ°å€ï¼Œç„¶ååœ¨ cmd ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š 123# &lt;your file path&gt; æ›¿æ¢æˆ node å®‰è£…çš„åœ°å€npm config set prefix \"&lt;your file path&gt;\"npm config set cache \"&lt;your file path&gt;\\node_cache\" ä¹‹åæ‰€æœ‰çš„å®‰è£…åŒ…éƒ½ä¼šåœ¨å®‰è£… Node çš„æ–‡ä»¶å¤¹ä¸‹çš„ node_modules æ–‡ä»¶å†…äº†ã€‚ è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼ˆå³å‡»ï¼‰æˆ‘çš„ç”µè„‘ -&gt; å±æ€§ -&gt; é«˜çº§ç³»ç»Ÿç¯å¢ƒ -&gt; ç¯å¢ƒå˜é‡ -&gt; é€‰æ‹©ç³»ç»Ÿç¯å¢ƒçš„ Path -&gt; é…ç½® Node çš„å®‰è£…åœ°å€ é™„ï¼šåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ npm list -g --depth=0 ä¼šæç¤ºå½“å‰çš„ npm åŒ…çš„å®‰è£…åœ°å€ å®‰è£… npm åŒ…nrmnrm æ˜¯æ›´æ¢æºçš„åŒ… 123npm i -g nrm# ä½¿ç”¨ taobao æºnrm use taobao nvmnvm æ˜¯æ›´æ¢ node ç‰ˆæœ¬çš„åŒ…ï¼Œå¯è‡ªè¡Œæ›´æ”¹å½“å‰ node ç‰ˆæœ¬ 1npm i -g nvm yarnåŒ…ç®¡ç†å·¥å…·ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ¯” npm æ›´ä¸ºæ–¹ä¾¿ä¸”æ›´å¿« 1npm i -g yarn ç³»ç»Ÿå˜é‡å’Œç”¨æˆ·å˜é‡ç½‘ä¸Šæœ‰å¾ˆå¤šéƒ½æ˜¯åœ¨ç³»ç»Ÿç¯å¢ƒä¸­å…ˆå£°æ˜ä¸€ä¸ª NODE_ENV çš„å˜é‡ï¼Œç„¶ååœ¨ç”¨æˆ·ç¯å¢ƒä¸­åœ¨é…ç½® npm åŒ…çš„ä½ç½®ï¼Œå…¶åŒºåˆ«æ˜¯ï¼š ç³»ç»Ÿç¯å¢ƒï¼šå¯¹å…¨éƒ¨ç”¨æˆ·èµ·ä½œç”¨ ç”¨æˆ·ç¯å¢ƒï¼šä»…å¯¹å½“å‰ç”¨æˆ·èµ·ä½œç”¨ å¦‚æœ windows éœ€è¦é…ç½®å¤šç”¨æˆ·çš„è¯å¯ä»¥æ ¹æ®æƒ…å†µé€‚å½“é…ç½®ï¼Œä½†æ˜¯å¦‚æœä»…ä»…ä¸ªäººä½¿ç”¨çš„è¯é…ä¸€ä¸ªå…¨å±€çš„ç¯å¢ƒå˜é‡å³å¯ï¼Œæ— éœ€æ ¹æ®å½“å‰ç”¨æˆ·åšé€‚å½“é…ç½®ã€‚","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"å·¥å…·å®‰è£…","slug":"å·¥å…·å®‰è£…","permalink":"https://monocy.gitee.io/tags/å·¥å…·å®‰è£…/"}]},{"title":"git ç¯å¢ƒé…ç½®","slug":"git-ç¯å¢ƒé…ç½®","date":"2019-03-31T05:01:22.000Z","updated":"2022-07-26T13:17:55.754Z","comments":true,"path":"2019/03/31/git-ç¯å¢ƒé…ç½®/","link":"","permalink":"https://monocy.gitee.io/2019/03/31/git-ç¯å¢ƒé…ç½®/","excerpt":"å‰è¨€git çš„ç¯å¢ƒå®‰è£…å·²ç»æœ‰å¾ˆå¤šæ¬¡äº†ï¼Œè™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ–‡ç« çš„é‡ç‚¹å´å¹¶ä¸åœ¨æ­¤ï¼Œæ­¤ç¯‡æ˜¯ç”¨æ¥è®°å½•å­¦ä¹  git çš„ä¸€äº›å¥½çš„è§„èŒƒã€æ–¹ä¾¿çš„å·¥å…·ã€å¸¸ç”¨çš„å‘½ä»¤ä»¥åŠé‡åˆ°çš„å‘ã€‚","text":"å‰è¨€git çš„ç¯å¢ƒå®‰è£…å·²ç»æœ‰å¾ˆå¤šæ¬¡äº†ï¼Œè™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ–‡ç« çš„é‡ç‚¹å´å¹¶ä¸åœ¨æ­¤ï¼Œæ­¤ç¯‡æ˜¯ç”¨æ¥è®°å½•å­¦ä¹  git çš„ä¸€äº›å¥½çš„è§„èŒƒã€æ–¹ä¾¿çš„å·¥å…·ã€å¸¸ç”¨çš„å‘½ä»¤ä»¥åŠé‡åˆ°çš„å‘ã€‚ ç¯å¢ƒé…ç½®ä¸‹è½½å®‰è£… gitgit ä¸‹è½½åœ°å€ git ç¯å¢ƒé…ç½®1234# è®¾ç½®ç”¨æˆ·ågit config --global user.name \"yourname\"# è®¾ç½®é‚®ç®±git config --global user.email \"youremail@example.com\" git commit è§„èŒƒç”¨äºè¯´æ˜ commit çš„ç±»å‹åªå…è®¸ä¸€ä¸‹ 7 ç§ï¼š featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰ fixï¼šä¿®è¡¥ bug docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰ styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰ refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰ testï¼šå¢åŠ æµ‹è¯• choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ git å¸¸ç”¨å‘½ä»¤ git ä½¿ç”¨çš„ä¸€äº›é—®é¢˜æ€»ç»“å¦‚ä½•å–æ¶ˆæ–‡ä»¶è·Ÿè¸ª.gitignore æ–‡ä»¶ä¼šå¿½ç•¥å…¶ä¸­è®°å½•çš„æ–‡ä»¶ï¼Œä¸å¯¹å…¶è¿›è¡ŒçŠ¶æ€è·Ÿè¸ªï¼Œä½†æ˜¯å¯¹äºå·²ç»è·Ÿè¸ªçš„æ–‡ä»¶ï¼ˆå³å…ˆå‰æœªæ·»åŠ è‡³è¯¥æ–‡ä»¶å†…ï¼ŒåæœŸå†åŠ å…¥çš„ï¼‰å³ä½¿ä¹‹åå°†å…¶åŠ å…¥æ­¤ .gitignore æ–‡ä»¶ä¹Ÿä¸ç”Ÿæ•ˆã€‚ åŸå› ï¼š git ç¼“å­˜ä½¿å…¶ç»§ç»­è¿½è¸ª è§£å†³æ–¹æ³•ï¼š 12345## å•æ–‡ä»¶git rm --cache &lt;fileName&gt;## å…¨éƒ¨git rm --cache . æœ¬åœ°è¿œç¨‹ tag ç‰ˆæœ¬å†²çªé—®é¢˜å½“è‡ªå·±æ‰“çš„ tag æ ‡ç­¾ä¸è¿œç¨‹ tag æ ‡ç­¾ä¸åŒæ­¥æ—¶ï¼Œæ— æ³•æ­£å¸¸ä½¿ç”¨ git pull â€“tagsï¼Œæ­¤ä¼šæŠ¥é”™æç¤º xxx ç‰ˆæœ¬çš„ tag æœ¬åœ°ä¸è¿œç¨‹ä¸ç»Ÿä¸€ï¼Œæ­¤ tag æ‹’ç»è¢«æ‹‰å–è¦†ç›–ï¼ˆä¸å½±å“å…¶ä½™çš„ tagï¼‰ï¼Œè¿™å›é€ æˆ VSCode ç¼–è¾‘å™¨çš„ git æ’ä»¶æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚ è§£å†³æ–¹æ³•ï¼š 1234git pull --tags -p -f## è¡¥å……æœ¬æ¬¡ä»…åšäº†å¼ºåˆ¶æœ¬åœ°è¦†ç›–å¹¶åˆå¹¶ tagsgit fetch --tags -h æœ‰å¯¹åº”çš„æŒ‡ä»¤è¯¦ç»†è¯´æ˜ git å­¦ä¹ æ¨è å¯è§†åŒ–å­¦ä¹  git ç›¸å…³å¼•ç”¨ git å‘½ä»¤å›¾ç‰‡æºè‡ª https://github.com/DickyQie/Tool-use","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/tags/Git/"}]},{"title":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","date":"2019-03-31T03:35:41.000Z","updated":"2022-07-26T13:17:08.941Z","comments":true,"path":"2019/03/31/åšå®¢æ­å»º/","link":"","permalink":"https://monocy.gitee.io/2019/03/31/åšå®¢æ­å»º/","excerpt":"å‰è¨€æœ€è¿‘æƒ³ç€ä½¿ç”¨ github.io æ¥å­˜æ”¾ä¸ªäººåšå®¢ï¼Œå› æ­¤å‚è€ƒä¸€äº›åšå®¢æ­å»ºçš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿç…§ç€æ­å»ºäº†ä¸€ä¸ªï¼Œè¿™é‡Œè®°å½•ä¸€äº›æ­å»ºçš„é…ç½®ï¼Œä»¥ä¾¿äºä¸»é¢˜æ›¿æ¢å‡çº§æ—¶çš„å‚è€ƒã€‚","text":"å‰è¨€æœ€è¿‘æƒ³ç€ä½¿ç”¨ github.io æ¥å­˜æ”¾ä¸ªäººåšå®¢ï¼Œå› æ­¤å‚è€ƒä¸€äº›åšå®¢æ­å»ºçš„æ–‡ç« ï¼Œæˆ‘ä¹Ÿç…§ç€æ­å»ºäº†ä¸€ä¸ªï¼Œè¿™é‡Œè®°å½•ä¸€äº›æ­å»ºçš„é…ç½®ï¼Œä»¥ä¾¿äºä¸»é¢˜æ›¿æ¢å‡çº§æ—¶çš„å‚è€ƒã€‚ éœ€è¦çš„ç¯å¢ƒ ä¸ªäººçš„ github è´¦å· ç³»ç»Ÿç¯å¢ƒ gitï¼ˆéœ€è¦ sshkey ç»‘å®šå…³è” githubï¼‰ node &amp; npmï¼ˆéœ€å…¨å±€å®‰è£… hexo-cliï¼‰ vscode ç”Ÿæˆ ssh å‘½ä»¤ï¼š ssh-keygen -t rsa -C &quot;é‚®ç®±åœ°å€&quot; åšå®¢é…ç½® è¿™é‡Œåˆ†ä¸ºä¸¤éƒ¨åˆ†çš„é…ç½®ï¼Œä¸€éƒ¨åˆ†ä¸º hexo init ç”Ÿæˆé¡¹ç›®æ—¶çš„æ ¹ç›®å½•é‡Œçš„ config.ymlï¼Œè¿™é‡Œæè¿°ä¸ºâ€œç”¨æˆ·ä¿¡æ¯â€ï¼›å¦å¤–ä¸€ä¸ªæ˜¯å®‰è£…äº† hexo ä¸»é¢˜æ—¶ï¼Œtheme/next æ–‡ä»¶å¤¹å†…çš„ config.ymlï¼Œè¿™é‡Œæè¿°ä¸ºâ€œä¸»é¢˜ä¿¡æ¯â€ã€‚ ç”¨æˆ·ä¿¡æ¯é…ç½®ç½‘ç«™é…ç½®é…ç½®ä¸­æ–‡å’Œä¸­å›½æ—¶åŒº 123# Sitelanguage: zh-CNtimezone: Asia/Shanghai å…³è” Githubå‘å¸ƒåœ°å€å…³è”ï¼Œéœ€è¦åœ¨ github ä¸­åˆ›å»º github.io ä»“åº“ 1234deploy: type: git repository: git@github.com:githubName/githubName.github.io.git branch: master ä¸»é¢˜é€‰ç”¨è¿™é‡Œé€‰ç”¨çš„æ˜¯ hexo-theme-next ä¸»é¢˜ 1234# è¿›å…¥åšå®¢é¡¹ç›®åˆ›å»º theme æ–‡ä»¶mkdir themes# æ‹·è´ä¸»é¢˜git clone https://github.com/theme-next/hexo-theme-next themes/next ä¹‹åä¿®æ”¹ä¸»é¢˜ 1theme: next æ‰€æœ‰ä¸»é¢˜ä»“åº“ä¼ é€é—¨ å­—æ•°ç»Ÿè®¡å®‰è£…æ’ä»¶ 1yarn add hexo-symbols-count-time ç”¨æˆ·ä¿¡æ¯æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 12345678# Post wordcount display settings# Dependencies: https://github.com/theme-next/hexo-symbols-count-timesymbols_count_time: symbols: true time: true total_symbols: true total_time: true exclude_codeblock: true æ³¨ï¼šéœ€è¦æ¸…ç©ºç¼“å­˜é‡å¯ï¼šhexo clean &amp; hexo g &amp; hexo s ä¸»é¢˜ä¿¡æ¯é…ç½®é¡µé¢æ ·å¼1234567# schema æ›´æ”¹é€‰ä¸­å€¼scheme: Gemini## next æ’ä»¶æ‰©å±•vendors:# ...# Some contents... æ³¨ï¼š plugin å¾—è‡ªå·±æ·»åŠ ï¼Œtheme-config ä¸­çš„æ’ä»¶æ·»åŠ å‚è€ƒ https://theme-next.org/docs/getting-started/ èœå•æ‰©å±•123456789menu: home: / || home about: /about/ || user tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive schedule: /schedule/ || calendar sitemap: /sitemap.xml || sitemap # commonweal: /404/ || heartbeat æ³¨æ„ï¼šå°†æœªå¯ç”¨çš„å¯ç”¨éœ€è¦å…ˆåˆ›å»ºå¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ï¼š 1234hexo new page \"about\"## æ­¤ä¼šåœ¨ source æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ª about æ–‡ä»¶å¤¹ï¼Œé»˜è®¤æœ‰ä¸€ä¸ª index.md## ä¿®æ”¹æ­¤ index.mdï¼Œåœ¨é¡¶éƒ¨çš„ data ä¸‹é¢æ–°å¢ä¸€è¡Œ type: \"about\"## å…¶ä½™çš„å¯ç±»æ¯” æ³¨ï¼štype ä¸æ–‡ä»¶å¤¹ä¿æŒä¸€è‡´ï¼Œaboutã€categoriesã€tags éœ€è¦ type tag äº‘æ·»åŠ èƒŒæ™¯è‰²æ›´æ”¹ tag äº‘é…ç½® 12345678# TagCloud settings for tags page.tagcloud: # All values below are same as default, change them by yourself. min: 14 # Minimun font size in px max: 14 # Maxium font size in px start: '#fff' # Start color (hex, rgba, hsla or color keywords) end: '#fff' # End color (hex, rgba, hsla or color keywords) amount: 200 # Amount of tags, change it if you have more than 200 tags åœ¨ theme/next/layout æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶ tag-color.swigï¼Œå¹¶è¾“å…¥ä¸€ä¸‹å†…å®¹ï¼š 123456789101112131415161718192021222324252627282930313233&lt;script type=\"text/javascript\"&gt; var alltags = document.getElementsByClassName('tag-cloud-tags'); var tags = alltags[0].getElementsByTagName('a'); var lastPos = tags.length - 1; for (var i = lastPos; i &gt;= 0; i--) &#123; var r = Math.floor(Math.random() * 75 + 130); var g = Math.floor(Math.random() * 75 + 100); var b = Math.floor(Math.random() * 75 + 80); tags[i].style.background = 'rgb(' + r + ',' + g + ',' + b + ')'; &#125;&lt;/script&gt;&lt;style&gt; .tag-cloud-tags &#123; font-family: Helvetica, Tahoma, Arial; text-align: center; counter-reset: tags; &#125; .tag-cloud-tags a &#123; border-radius: 6px; padding-right: 5px; padding-left: 5px; margin: 8px 5px 0px 0px; &#125; .tag-cloud-tags a:hover &#123; border: none; box-shadow: 0px 5px 15px 0px rgba(0, 0, 0, 0.4); transform: scale(1.1); /*box-shadow: 10px 10px 15px 2px rgba(0,0,0,.12), 0 0 6px 0 rgba(104, 104, 105, 0.1);*/ transition-duration: 0.15s; &#125;&lt;/style&gt; ç„¶åä¿®æ”¹åŒçº§æ–‡ä»¶ page.swigï¼Œæ‰¾åˆ° class=&quot;tag-cloud&quot;ï¼Œå°†è¯¥éƒ¨åˆ†åº•éƒ¨å¼•å…¥æ”¹é…ç½®æ–‡ä»¶ 12345678910111213141516&lt;div class=\"tag-cloud\"&gt; &lt;div class=\"tag-cloud-title\"&gt; &#123;&#123; _p('counter.tag_cloud', site.tags.length) &#125;&#125; &lt;/div&gt; &lt;div class=\"tag-cloud-tags\"&gt; &#123;&#123; tagcloud(&#123; min_font : theme.tagcloud.min, max_font : theme.tagcloud.max, amount : theme.tagcloud.amount, color : true, start_color: theme.tagcloud.start, end_color : theme.tagcloud.end&#125;) &#125;&#125; &lt;/div&gt; &#123;% include 'tag-color.swig' %&#125;&lt;/div&gt; å…¶å®ƒæ‰©å±•å®˜ç½‘ä»¥æœ‰è¯¦ç»†çš„é…ç½®ï¼Œè¯¦è§ next-theme å®˜ç½‘é…ç½®ï¼Œä¼ é€é—¨ æ–‡æ¡£ hexo å®˜ç½‘ next-theme Counter é…ç½® Hexo-Next ä¸»é¢˜åšå®¢ä¸ªæ€§åŒ–é…ç½®è¶…è¯¦ç»†ï¼Œè¶…å…¨é¢(ä¸¤ä¸‡å­—) ä¸º Hexo æ·»åŠ  Gitalk è¯„è®ºæ’ä»¶ è§£å†³é…ç½® gitalk æ’ä»¶ååˆå§‹åŒ–ç™»å½•æ—¶è·³è½¬å›é¦–é¡µ","categories":[{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"}],"tags":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://monocy.gitee.io/tags/åšå®¢æ­å»º/"}]}],"categories":[{"name":"æºç å‰–æ","slug":"æºç å‰–æ","permalink":"https://monocy.gitee.io/categories/æºç å‰–æ/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/categories/æ•°æ®åº“/"},{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/categories/React/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/categories/JavaScript/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/categories/ç¯å¢ƒé…ç½®/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/categories/TypeScript/"},{"name":"Env","slug":"Env","permalink":"https://monocy.gitee.io/categories/Env/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/categories/é¢è¯•é¢˜/"},{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/categories/Linux/"},{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/categories/Vue/"},{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/categories/Docker/"},{"name":"é—®é¢˜ä¿®å¤","slug":"é—®é¢˜ä¿®å¤","permalink":"https://monocy.gitee.io/categories/é—®é¢˜ä¿®å¤/"},{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/categories/Webpack/"},{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/categories/Git/"},{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/categories/CSS/"}],"tags":[{"name":"Form","slug":"Form","permalink":"https://monocy.gitee.io/tags/Form/"},{"name":"AntD","slug":"AntD","permalink":"https://monocy.gitee.io/tags/AntD/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://monocy.gitee.io/tags/æ•°æ®åº“/"},{"name":"Mongo","slug":"Mongo","permalink":"https://monocy.gitee.io/tags/Mongo/"},{"name":"Typeorm","slug":"Typeorm","permalink":"https://monocy.gitee.io/tags/Typeorm/"},{"name":"ç‰¹æ€§ä»‹ç»","slug":"ç‰¹æ€§ä»‹ç»","permalink":"https://monocy.gitee.io/tags/ç‰¹æ€§ä»‹ç»/"},{"name":"React","slug":"React","permalink":"https://monocy.gitee.io/tags/React/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://monocy.gitee.io/tags/JavaScript/"},{"name":"Promise","slug":"Promise","permalink":"https://monocy.gitee.io/tags/Promise/"},{"name":"Node","slug":"Node","permalink":"https://monocy.gitee.io/tags/Node/"},{"name":"è„šæ‰‹æ¶","slug":"è„šæ‰‹æ¶","permalink":"https://monocy.gitee.io/tags/è„šæ‰‹æ¶/"},{"name":"ä»£ç é…ç½®","slug":"ä»£ç é…ç½®","permalink":"https://monocy.gitee.io/tags/ä»£ç é…ç½®/"},{"name":"TypeScript","slug":"TypeScript","permalink":"https://monocy.gitee.io/tags/TypeScript/"},{"name":"é…ç½®å®‰è£…","slug":"é…ç½®å®‰è£…","permalink":"https://monocy.gitee.io/tags/é…ç½®å®‰è£…/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://monocy.gitee.io/tags/é¢è¯•é¢˜/"},{"name":"ç¯å¢ƒé…ç½®","slug":"ç¯å¢ƒé…ç½®","permalink":"https://monocy.gitee.io/tags/ç¯å¢ƒé…ç½®/"},{"name":"Linux","slug":"Linux","permalink":"https://monocy.gitee.io/tags/Linux/"},{"name":"Mysql","slug":"Mysql","permalink":"https://monocy.gitee.io/tags/Mysql/"},{"name":"Vue","slug":"Vue","permalink":"https://monocy.gitee.io/tags/Vue/"},{"name":"Docker","slug":"Docker","permalink":"https://monocy.gitee.io/tags/Docker/"},{"name":"é—®é¢˜ä¿®å¤","slug":"é—®é¢˜ä¿®å¤","permalink":"https://monocy.gitee.io/tags/é—®é¢˜ä¿®å¤/"},{"name":"Webpack","slug":"Webpack","permalink":"https://monocy.gitee.io/tags/Webpack/"},{"name":"Git","slug":"Git","permalink":"https://monocy.gitee.io/tags/Git/"},{"name":"JS æ¨¡å‹","slug":"JS-æ¨¡å‹","permalink":"https://monocy.gitee.io/tags/JS-æ¨¡å‹/"},{"name":"Proxy","slug":"Proxy","permalink":"https://monocy.gitee.io/tags/Proxy/"},{"name":"CSS","slug":"CSS","permalink":"https://monocy.gitee.io/tags/CSS/"},{"name":"å±‚å ä¸Šä¸‹æ–‡","slug":"å±‚å ä¸Šä¸‹æ–‡","permalink":"https://monocy.gitee.io/tags/å±‚å ä¸Šä¸‹æ–‡/"},{"name":"This","slug":"This","permalink":"https://monocy.gitee.io/tags/This/"},{"name":"BFC æ¨¡å¼","slug":"BFC-æ¨¡å¼","permalink":"https://monocy.gitee.io/tags/BFC-æ¨¡å¼/"},{"name":"å·¥å…·å®‰è£…","slug":"å·¥å…·å®‰è£…","permalink":"https://monocy.gitee.io/tags/å·¥å…·å®‰è£…/"},{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://monocy.gitee.io/tags/åšå®¢æ­å»º/"}]}